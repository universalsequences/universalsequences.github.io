{"version":3,"sources":["components/exhibit/Playhead.js","components/exhibit/Triangle.js","components/exhibit/Row.js","components/exhibit/Modules.js","components/exhibit/Exhibit.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","connect","state","props","step","sequencerEngine","trackStep","isSequenceRolling","dispatch","_ref","_ref$step","rollSteps","undefined","rollStart","inner","track","tracks","steps","getFactoredResolution","getNumberOfStepsAtBaseResolution","patternRollStepNumber","pattern","stepBuckets","length","stepNumber","style","left","Math","floor","width","a","createElement","className","Colors","mod","x","row","part","onMouseDown","useCallback","resolution","Resolution","pow","sequenceRolling","trackRolling","onMouseUp","triggered","useRef","notesTriggered","Set","noteToTracks","isPart","_step","_iterator","_createForOfIteratorHelper","subSequences","s","done","_step2","_iterator2","value","_notesTriggered","note","add","push","err","e","f","start","end","has","_t1","_t2","_tracks","concat","Object","toConsumableArray","map","current","borderBottomColor","react_default","__webpack_exports__","exhibit_Triangle","num","playing","slice","sub","ModuleSys5","showPads","subSequence","wallpaper","sequencer","setIsPlayingMix","p","window","explore","landing","exhibit","t","useSequencer","onClick","stepData","trackData","getCopy","release","midiEffects","liveInputTrigger","setTimeout","play","isNFT","backgroundImage","ipfs","getHashUrl","Playhead","Modals","Row","exhibit_Modules"],"mappings":"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","file":"static/js/15.26b2f75e.chunk.js","sourcesContent":["import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Playhead = ({step=0, isSequenceRolling, sequencerEngine}) => { \n\n    let rollingStepNumber = undefined;\n    let rollSteps = undefined;\n    let rollStart = undefined;\n    let inner = '';\n    if (isSequenceRolling) {\n        let track = sequencerEngine.tracks[0];\n        if (track) {\n            let resolution = track.getFactoredResolution();\n            let steps = resolution.getNumberOfStepsAtBaseResolution();\n            let _stepNumber = track.patternRollStepNumber + step % steps;\n            rollingStepNumber = _stepNumber % track.pattern.stepBuckets.length;\n            rollSteps = steps;\n            rollStart = track.patternRollStepNumber;\n        }\n        rollSteps = rollSteps;\n        let stepNumber = (rollStart);\n        let style = {\n            left: ((12*8) * ((4 * Math.floor(stepNumber / 4)) % 32) / 32.0) + 'vw',\n            width: ((12*8) * ((4 * Math.floor(rollSteps / 4)) % 32) / 32.0) + 'vw',\n        };\n        inner = (\n            <div className=\"playhead roll-visualizer\" style={style}>\n            </div>);\n\n    }\n\n    let style = {\n        left: ((12.5*8) * ((4 * Math.floor(step / 4)) % 32) / 32.0) + 'vw'\n    };\n\n    return [\n        inner,\n        <div\n          style={style}\n          className=\"playhead\"\n        ></div>\n    ];\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      step:props.sequencerEngine.trackStep,\n      isSequenceRolling: props.sequencerEngine.isSequenceRolling\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Playhead);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Colors from \"components/Colors.js\";\nimport {connect} from 'react-redux';\nimport Resolution from 'engine/Resolution.js';\nconst colors = new Colors();\n\n// 6 rows row 0 is [0,1] row 1 is [2,3] row 2 is [4,5] row 3 is [6,7] row 4 [8, 9] , row 5 [10, 11]\nconst Triangle = ({sequencerEngine, row, part, step=0}) => { \n    const onMouseDown = useCallback(() => {\n        let resolution = new Resolution(Math.pow(2, 2 + Math.floor(part/2)), part % 2 === 1);\n        sequencerEngine.resolution = resolution;\n        sequencerEngine.sequenceRolling = true;\n        sequencerEngine.trackRolling = true;\n    }, [sequencerEngine, part]);\n\n    const onMouseUp = useCallback(() => {\n        sequencerEngine.sequenceRolling = false;\n        sequencerEngine.trackRolling = false;\n    }, [sequencerEngine, part]);\n\n    let triggered = useRef(false);\n    let track = useRef(undefined);\n\n    let notesTriggered = new Set();\n    let noteToTracks = {};\n    let isPart = part === 8 * (((4 * Math.floor(step / 4)) % 32) / 32.0);\n    if (sequencerEngine) { \n        for (let sub of sequencerEngine.subSequences) {\n            for (let track of sub.tracks) {\n                let _notesTriggered = track.notesTriggered || {};\n                for (let note in _notesTriggered) {\n                    note = mod(note, 12);\n                    notesTriggered.add(note);\n                    if (!noteToTracks[note]) {\n                        noteToTracks[note] = [];\n                    }\n                    noteToTracks[note].push(track);\n                }\n            }\n       }\n    }\n    let start = row*2;\n    let end = row*2 + 1;\n    let className = \"triangle\";\n    if ((notesTriggered.has(start) || notesTriggered.has(end))) {\n        let _t1 = noteToTracks[start] || [];\n        let _t2 = noteToTracks[end] || [];\n        let _tracks = [... _t1, ..._t2].map(x => 'white'); //colors.getColorForTrack(x));\n        if (isPart) {\n            triggered.current = true;\n            track.current = _tracks[part % _tracks.length];\n            className += \" triggered\";\n        }\n    } else {\n        if (isPart && step % 4 === 0) {\n            triggered.current = false;\n        }\n    }\n    let style = {};\n    if (triggered.current) {\n        className += \" old-trigger\";\n\n        if (track.current !== undefined) {\n            style.borderBottomColor = track.current;\n            // className += \" track-\" + track.current;\n        } else {\n            className += \" track-0\";\n        }\n    }\n    return (\n        <div onMouseDown={onMouseDown} onMouseUp={onMouseUp} style={style} className={className}>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      step: props.sequencerEngine && props.sequencerEngine.trackStep\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nconst mod = (x,n) => {\n    return ((x%n)+n)%n;\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Triangle);\n","import React from 'react';\nimport Triangle from './Triangle.js';\n\nexport default ({sequencerEngine, row}) => {\n    let a = [0,1,2,3,4,5,6,7];\n    return (\n        <div className=\"row\">\n          {a.map(x => <Triangle sequencerEngine={sequencerEngine} row={row} part={x}/>)}\n        </div>);\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ModuleSys5 from \"components/system5/ModuleSys5.js\";\nimport {connect} from 'react-redux';\n\nconst Modules = ({playing, sequencerEngine}) => { \n    if (!sequencerEngine || !sequencerEngine.subSequences) { return ''; };\n    let className = \"modules\";\n    if (playing) {\n        className += \" playing\";\n    }\n    return (\n        <div className={className}>\n          {sequencerEngine.subSequences.slice(0, 1).map(\n            sub =>\n                <ModuleSys5 showPads={true} subSequence={sub}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      num: props.sequencerEngine && props.sequencerEngine.subSequences &&\n          props.sequencerEngine.subSequences.length,\n      playing: props.sequencerEngine && props.sequencerEngine.playing\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modules);\n","import React, {useCallback} from 'react';\nimport {publishTrigger} from 'messaging/messages.js';\nimport Modules from './Modules.js';\nimport {setIsPlayingMix} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport ipfs from 'decentralized/Ipfs.js';\nimport Row from './Row.js';\nimport Modals from 'components/v2/Modals.js';\nimport Playhead from './Playhead.js';\nimport {useSequencer} from 'components/v2/useSequencer.js';\nimport '../../Exhibit.scss';\n\nconst Exhibit = (props) => {\n    window.explore = true;\n    window.landing= true;\n    window.exhibit = true;\n    let sequencerEngine = props.sequencerEngine;\n    if (!sequencerEngine) {\n        let t = useSequencer(props);\n        sequencerEngine = t[1];\n    }\n\n    const onClick = useCallback(() => {\n        if (!sequencerEngine.playing) {\n            let stepData = sequencerEngine.tracks[0].trackData.getCopy();\n            stepData.release = null;\n            sequencerEngine.tracks[0].midiEffects.liveInputTrigger(stepData);\n            setTimeout(() => {\n                props.setIsPlayingMix(true);\n                sequencerEngine.play();\n            }, 500);\n        }\n    }, [sequencerEngine]);\n\n    let style = {};\n    if (props.wallpaper) {\n        if (window.isNFT) {\n            style.backgroundImage = 'url(' + window.wallpaper + ')';\n        } else {\n            style.backgroundImage = 'url(' + ipfs.getHashUrl(props.wallpaper) + ')';\n        }\n    } \n\n    return (\n        <div\n          style={style}\n          onClick={onClick}\n          className=\"exhibit no-select\">\n          {sequencerEngine ? <Playhead sequencerEngine={sequencerEngine}/> : ''}\n              <Modals sequencerEngine={sequencerEngine}/>\n          <Row sequencerEngine={sequencerEngine} row={0}/>\n          <Row sequencerEngine={sequencerEngine} row={1}/>\n          <Row sequencerEngine={sequencerEngine} row={2}/>\n          <Row sequencerEngine={sequencerEngine} row={3}/>\n          <Row sequencerEngine={sequencerEngine} row={4}/>\n          <Row sequencerEngine={sequencerEngine} row={5}/>\n          <Row sequencerEngine={sequencerEngine} row={6}/>\n          <Row sequencerEngine={sequencerEngine} row={7}/>\n          <Row sequencerEngine={sequencerEngine} row={8}/>\n          <Row sequencerEngine={sequencerEngine} row={9}/>\n          <Modules sequencerEngine={sequencerEngine}/>\n       </div>\n        \n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        wallpaper: state.sequencer.wallpaper,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    setIsPlayingMix: (p) => dispatch(setIsPlayingMix(p))\n});\n \nexport default connect(mapStateToProps, mapDispatchToProps)(Exhibit);\n\n\n\n"],"sourceRoot":""}