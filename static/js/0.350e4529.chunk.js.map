{"version":3,"sources":["constants/annotation-types.js","components/windows/packer.js","components/windows/useArrangeWindows.js","components/pulled/PulledEffects.js","components/pads/PadsContainer.js","utils/getBlockMonths.js","components/pulled/ZObjectToolbar.js","components/explore/links/AnnotationEdit.js","components/explore/work/Months.js","components/pulled/TrackMidiEffects.js","components/pulled/GridTab.js","components/pulled/PulledPad.js","components/pulled/MidiEffectsOverview.js","components/pulled/InstrumentOverview.js","components/pulled/EffectsOverview.js","components/pulled/TrackOverview.js","components/pulled/PulledOverview.js","components/explore/details/Grid.js","components/explore/details/Grids.js"],"names":["__webpack_require__","d","__webpack_exports__","SEQUENCE_ANNOTATION","SEQUENCE_TAG","SAMPLE_ANNOTATION","Packer","w","h","Object","classCallCheck","this","root","x","y","blocks","n","node","block","length","findNode","fit","splitNode","used","right","down","useArrangeWindows","_ref","ref","elements","subSequence","presentationMode","arrangeWindows","useCallback","current","size","sequencerEngine","state","windows","moduleSizes","id","selectedElements","selected","push","_blocks","includes","element","offsetHeight","offsetWidth","objectSpread","offsetLeft","offsetTop","sort","a","b","Math","max","minX","minY","_width","width","_height","height","min","apply","toConsumableArray","map","bulk","_i","_blocks2","console","log","dispatch","setBulkPresentationWindowPositions","setBulkWindowPositions","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","actions_index_js__WEBPACK_IMPORTED_MODULE_1__","utils_getEffectTrack_js__WEBPACK_IMPORTED_MODULE_3__","components_pulled_PulledEffect_js__WEBPACK_IMPORTED_MODULE_5__","react_redux__WEBPACK_IMPORTED_MODULE_8__","connect","props","pulledEffects","effects","currentSubSequence","setPulledEffects","e","containerRef","sizeRef","setSize","all","scale","noWrapper","playhead","ordering","setOrdering","_elements","useRef","onDelete","fx","filter","f","shouldShow","getEffectTrack","instrument","context","track","_effects","inner","createElement","key","isStatic","className","_PadComponent_js__WEBPACK_IMPORTED_MODULE_1__","react_redux__WEBPACK_IMPORTED_MODULE_2__","pads","scrollContainer","pad","i","getBlockMonths","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","currentBlockNumber","date","day","month","currentMonth","months","wrap","_context","prev","next","web3","eth","getBlockNumber","sent","Date","getDate","getMonth","getBlock","timestamp","getFullYear","abrupt","stop","arguments","ZImg","expanded","hideOnPadSequencer","react__WEBPACK_IMPORTED_MODULE_1___default","assign","ModulatorExpansion","_ref2","type","drag","draggable","onDragStart","uxLocked","zobject","showLFOs","sequencer","showEnvelopes","showPadSequencer","spatial","setShowEnvelopes","s","setShowLFOs","setTypeDragging","setZObjectTypeDragging","setUXLocked","setShowModulators","setPresentationMode","children","subpatch","_useState","useState","undefined","_useState2","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","expand","setExpand","_useState3","_useState4","hover","setHover","counter","useEffect","window","addEventListener","onMouseUp","removeEventListener","onHover","_count","setTimeout","onLeave","toggleLocked","togglePresentationMode","hoverText","left","style","onMouseOver","onMouseLeave","src","onClick","contentCache","Annotation","annotation","_useState7","_useState8","content","setContent","_useState9","_useState10","userName","setUserName","utils","fromAscii","annotationData","hash","bytes32ToIPFSHash","ipfs","getJson","then","ethereum","users","getUserName","address","numPending","transactions","pendingTransactions","work","_ref$contentId","contentId","newSequence","_ref$linkType","linkType","color","text","setText","setLoading","_useState5","_useState6","annotations","setAnnotations","onChange","target","value","submit","xanadu","newAnnotationContent","getAnnotations","backgroundColor","reactstrap__WEBPACK_IMPORTED_MODULE_9__","react_spinners_PulseLoader__WEBPACK_IMPORTED_MODULE_6___default","sizeUnit","loading","MONTHS","0","1","2","3","4","5","6","7","8","9","10","11","_step","onClickMonth","year","m","keys","parseInt","_iterator","_createForOfIteratorHelper","concat","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","slice","done","number","isCurrent","err","rackId","effectRack","trackMidiEffects","isCollapsed","effectCollapsed","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","deleteEffect","updateMidiEffectsRedux","zObject","react__WEBPACK_IMPORTED_MODULE_2___default","components_pulled_Speakers_js__WEBPACK_IMPORTED_MODULE_4__","isMidi","effect","components_pulled_PulledEffect_js__WEBPACK_IMPORTED_MODULE_7__","rack","showDelete","collapsed","modulesCollapsed","setCollapsed","setModuleCollapsed","setModuleColor","setColor","hex","onMouseDown","switchToSubSequence","name","_ZObjectToolbar_js__WEBPACK_IMPORTED_MODULE_2__","coords","windowPositions","hidden","hiddenObjects","isSelectedZObject","selectedZObject","isSelected","padsExpand","setSelectedZObject","_useWindowManager","useWindowManager","windowPosition","isPad","onContextMenu","setCoords","_style","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","top","components_pads_PadComponent_js__WEBPACK_IMPORTED_MODULE_8__","isPulled","_OutputNode_js__WEBPACK_IMPORTED_MODULE_3__","isRoot","useClick","hideNumber","_messaging_MessageInlets_js__WEBPACK_IMPORTED_MODULE_4__","_messaging_MessageOutlets_js__WEBPACK_IMPORTED_MODULE_5__","midiEffects","slicedToArray","setEffects","chooseEffect","initializeMidiEffect","operationManager","addEffect","react_default","MidiEffectComponent","onDeleteEffect","tracks","onEffectsChange","dist_default","option","options","midiEffectOptions","o","placeholder","getTrackType","SAMPLER","PadWaveform","div","_track","INSTRUMENT","getInstrumentType","MULTI_SYNTH","RackSynthComponent","initializeEffect","enable","EffectComponent","effectOptions","mix","selectedTrack","trackNumber","isEnabled","trackIsEnabled","sample","getId","presetName","getName","numEffects","setTrackDragging","setExpandTrack","getTrackShortName","show","setShow","selectTrack","toggleEnabled","stopPropagation","onDragOver","preventDefault","pulled_InstrumentOverview","pulled_EffectsOverview","pulled_MidiEffectsOverview","numTracks","expandTrack","pulled_TrackOverview","getHeight","volume","ratio","getVolumeRatio","pow","dist","pt1","pt2","abs","playing","notesTriggered","disabled","pattern","volumeParameter","get","setParameterSliderDown","parameter","toggled","setSelectedTrack","hovered","pt","setPt","mouseDown","setMouseDown","moved","setMoved","lastClick","note","onMouseMove","clientY","touches","el","getBoundingClientRect","vol","fullRatio","getVolume","setVolume","clientX","innerStyle","getTime","now","capture","onTouchStart","TrackThumbnail","showPresetName","pulledSequencers","sequencers","setSelectedPulledElements","setModuleSize","isExplore","showEffects","_useContextMenu","useContextMenu","dropdownPos","_useWindows","setDropdowPos","useWindows","dropdownPosRef","selection","setSelection","getXY","useContainerCoords","getSelection","useSelection","_getXY","x1","y1","x2","y2","_getXY2","cols","_subSequence$tracks","_dropdownPosRef$curre","createSequencer","_dropdownPosRef$curre2","createPad","_dropdownPosRef$curre3","PulledBackground","ContextMenu","MenuItem","_ref4","label","row","col","details_Grid","PulledEffects","PulledPad","GlobalEdges","TrackMidiEffects","PadEffects","PulledSequencer","GridTab","ModuleSys5"],"mappings":"8FAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAO,IAAMF,EAAsB,sBACtBC,EAAe,eACfC,EAAoB,qGCoCZC,aACjB,SAAAA,EAAYC,EAAGC,GAAIC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,GACfK,KAAKC,KAAO,CAAEC,EAAG,EAAGC,EAAG,EAAGP,EAAGA,EAAGC,EAAGA,0CAGvC,SAAIO,GACA,IAAIC,EAAGC,EAAMC,EACb,IAAKF,EAAI,EAAGA,EAAID,EAAOI,OAAQH,IAC3BE,EAAQH,EAAOC,IACXC,EAAON,KAAKS,SAAST,KAAKC,KAAMM,EAAMX,EAAGW,EAAMV,MAC/CU,EAAMG,IAAMV,KAAKW,UAAUL,EAAMC,EAAMX,EAAGW,EAAMV,4BAI5D,SAASI,EAAML,EAAGC,GACd,OAAII,EAAKW,KACEZ,KAAKS,SAASR,EAAKY,MAAOjB,EAAGC,IAAMG,KAAKS,SAASR,EAAKa,KAAMlB,EAAGC,GAChED,GAAKK,EAAKL,GAAOC,GAAKI,EAAKJ,EAC1BI,EAEA,8BAGf,SAAUK,EAAMV,EAAGC,GAIf,OAHAS,EAAKM,MAAO,EACZN,EAAKQ,KAAQ,CAAEZ,EAAGI,EAAKJ,EAAOC,EAAGG,EAAKH,EAAIN,EAAGD,EAAGU,EAAKV,EAAOC,EAAGS,EAAKT,EAAIA,GACxES,EAAKO,MAAQ,CAAEX,EAAGI,EAAKJ,EAAIN,EAAGO,EAAGG,EAAKH,EAAOP,EAAGU,EAAKV,EAAIA,EAAGC,EAAGA,GACxDS,2CC3Df,IAEaS,EAAoB,SAAAC,GAAoDA,EAAlDC,IAAkD,IAA7CC,EAA6CF,EAA7CE,SAAUC,EAAmCH,EAAnCG,YAAaC,EAAsBJ,EAAtBI,iBAwE3D,MAAO,CAACC,eAvEeC,sBAAY,WAC/B,GAAKJ,EAASK,QAAd,CAGA,IAAIC,EAAOL,EAAYM,gBAAgBC,MAAMC,QAAQC,YAAYT,EAAYU,IACxEC,EAAoBX,EAAYO,MAAMC,QAAtCG,iBACDC,EAAW,GACf,IAAK,IAAIF,KAAMC,EACPA,EAAiBD,IACjBE,EAASC,KAAKH,GAGtB,IAAIzB,EAAS,GACT6B,EAAU,GACd,IAAK,IAAIJ,KAAMX,EAASK,QACpB,KAAIQ,EAASvB,OAAS,IAAMuB,EAASG,SAASL,GAA9C,CAIA,IAAIM,EAAUjB,EAASK,QAAQM,GAAIN,QACnC,GAAKY,EAAL,CAGA,IAAI5B,EAAQ,CACR4B,UACAN,KACAhC,EAAGsC,EAAQC,aA7BX,GA8BAxC,EAAGuC,EAAQE,YA9BX,IAgCJjC,EAAO4B,KAAKzB,GACZ0B,EAAQD,KAARlC,OAAAwC,EAAA,EAAAxC,CAAA,GAAkBS,EAAlB,CAAyBL,EAAGiC,EAAQI,WAAYpC,EAAGgC,EAAQK,cAE/DpC,EAAOqC,KAAK,SAACC,EAAEC,GAAH,OAASC,KAAKC,IAAIF,EAAE/C,EAAG+C,EAAE9C,GAAK+C,KAAKC,IAAIH,EAAE9C,EAAG8C,EAAE7C,KAC1D,IAEIiD,EAAKC,EAFLC,EAASxB,EAAKyB,OAAS,IACvBC,EAAS1B,EAAK2B,QAAU,IAE5B,GAAIpB,EAASvB,OAAS,EAClBsC,EAAOF,KAAKQ,IAALC,MAAAT,KAAI9C,OAAAwD,EAAA,EAAAxD,CAASmC,EAAQsB,IAAI,SAAAZ,GAAC,OAAIA,EAAEzC,MACvC6C,EAAOH,KAAKQ,IAALC,MAAAT,KAAI9C,OAAAwD,EAAA,EAAAxD,CAASmC,EAAQsB,IAAI,SAAAZ,GAAC,OAAIA,EAAExC,MAGvC6C,EAFWJ,KAAKC,IAALQ,MAAAT,KAAI9C,OAAAwD,EAAA,EAAAxD,CAASmC,EAAQsB,IAAI,SAAAZ,GAAC,OAAIA,EAAEzC,EAAIyC,EAAE/C,MAEjCkD,EAChBI,EAFWN,KAAKC,IAALQ,MAAAT,KAAI9C,OAAAwD,EAAA,EAAAxD,CAASmC,EAAQsB,IAAI,SAAAZ,GAAC,OAAIA,EAAExC,EAAIwC,EAAE9C,MAEhCkD,EAGR,IAAIpD,EAAOqD,EAAgB,EAARE,GACzBxC,IAAIN,GAEX,IADA,IAAIoD,EAAO,GACXC,EAAA,EAAAC,EAAkBtD,EAAlBqD,EAAAC,EAAAlD,OAAAiD,IAA0B,CAArB,IAAIlD,EAAKmD,EAAAD,GACNlD,EAAMG,MACFqB,EAASvB,OAAS,EAClBgD,EAAKjD,EAAMsB,IAAM,CACb3B,EAAGK,EAAMG,IAAIR,EAAI4C,EACjB3C,EAAGI,EAAMG,IAAIP,EAAI4C,GAGrBS,EAAKjD,EAAMsB,IAAX/B,OAAAwC,EAAA,EAAAxC,CAAA,GAAsBS,EAAMG,MAKxCiD,QAAQC,IAAI,kBACRxC,EACAD,EAAY0C,SACRC,aAAmCN,IAEvCrC,EAAY0C,SACRE,aAAuBP,MAEhC,CAACtC,EAAUC,EAAaC,yCC9E/B,IAAA4C,EAAA3E,EAAA,GAAA4E,EAAA5E,EAAAgB,EAAA2D,GAAAE,EAAA7E,EAAA,GAAA8E,GAAA9E,EAAA,IAAAA,EAAA,MAAA+E,GAAA/E,EAAA,KAAAA,EAAA,OAAAgF,GAAAhF,EAAA,KAAAA,EAAA,KAAAA,EAAA,KA8FeiF,gBAbS,SAAC5C,EAAO6C,GAC5B,MAAO,CACHC,cAAe9C,EAAM+C,QAAQD,cAC7BE,mBAAoBH,EAAMpD,aAAeoD,EAAM9C,gBAAgBiD,qBAI5C,SAACb,GACxB,MAAO,CACHc,iBAAkB,SAAAC,GAAC,OAAIf,EAASc,aAAiBC,OAI1CN,CAjFO,SAAAtD,GAgBhB,IAfF6D,EAeE7D,EAfF6D,aACAC,EAcE9D,EAdF8D,QACAC,EAaE/D,EAbF+D,QACAvD,EAYER,EAZFQ,KACAwD,EAWEhE,EAXFgE,IACAR,EAUExD,EAVFwD,cACA/C,EASET,EATFS,gBACAkD,EAQE3D,EARF2D,iBACAM,EAOEjE,EAPFiE,MACAP,EAME1D,EANF0D,mBAEAQ,GAIElE,EALFmE,SAKEnE,EAJFkE,WACAhE,EAGEF,EAHFE,SACAkE,EAEEpE,EAFFoE,SACAC,EACErE,EADFqE,YAEMC,EAAYC,iBAAO,IACnBC,EAAWlE,sBAAY,SAACmE,GAC1Bd,EAAiBH,EAAckB,OAAO,SAAAC,GAAC,OAAIA,IAAMF,MAClD,CAACjB,IAEEoB,EAAatE,sBAAY,SAACsD,GAC5B,QAAKA,IAGAiB,YAAejB,GAObI,GAAOa,YAAejB,GAAGzD,cAAgBuD,GAC5CmB,YAAejB,KAAOF,KAPlBE,EAAEkB,aAAclB,EAAEkB,WAAWC,SAC7BnB,EAAEkB,WAAWC,QAAQ5E,cAAgBuD,IAGlCE,EAAEoB,QAAUtB,IAIxB,CAACA,EAAoBM,IAGpBiB,EAAWzB,EACVkB,OAAOE,GAIRM,EAAQD,EACP1C,IAAI,SAAAkC,GAAE,OAAIxB,EAAAvB,EAAAyD,cAAC/B,EAAA,EAAD,CACEgC,IAAKX,EAAG5D,GACRwE,UAAWnB,EACXD,MAAOA,EACP/D,SAAUA,GAAYoE,EACtBR,QAASA,EACTO,YAAaA,EACbD,SAAUA,EACVP,aAAcA,EACdrD,KAAMA,EACNuD,QAASA,EACTN,QAASwB,EACTT,SAAU,kBAAMA,EAASC,IACzBhE,gBAAiBA,EACjBgE,GAAIA,MACrB,OAAIP,EACOgB,EAGPjC,EAAAvB,EAAAyD,cAAA,OAAKG,UAAU,kBACZJ,wCC7EX,IAAAlC,EAAA3E,EAAA,GAAA4E,EAAA5E,EAAAgB,EAAA2D,GAAAuC,EAAAlH,EAAA,KAAAmH,EAAAnH,EAAA,IAAAA,EAAA,MA0BeiF,gBAZS,SAAC5C,EAAO6C,GAC9B,MAAO,CACHkC,KAAMlC,EAAMpD,YACRoD,EAAMpD,YAAYsF,KAAOlC,EAAM9C,gBAAgBiD,mBAAmB+B,OAIjD,SAAC5C,GAC1B,MAAO,IAIMS,CArBO,SAAAtD,GAA6B,IAA3ByF,EAA2BzF,EAA3ByF,KAAMC,EAAqB1F,EAArB0F,gBAC1B,OACIzC,EAAAvB,EAAAyD,cAAA,OACEG,UAAU,kBACTG,EAAKlD,IACF,SAACoD,EAAKC,GAAN,OAAY3C,EAAAvB,EAAAyD,cAACI,EAAA,EAAD,CAAcH,IAAKQ,EAAGF,gBAAiBA,EAAiBC,IAAKA,uICL1EE,EAAc,eAAA7F,EAAAlB,OAAAgH,EAAA,EAAAhH,CAAAiH,EAAArE,EAAAsE,KAAG,SAAAC,IAAA,IAAAC,EAAA3G,EAAA4G,EAAAC,EAAAC,EAAAC,EAAAC,EAAAX,EAAAtH,EAAA,OAAAyH,EAAArE,EAAA8E,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACKC,IAAKC,IAAIC,iBADd,OACtBZ,EADsBO,EAAAM,KAEtBxH,EAAQ,KACR4G,EAAO,IAAIa,KACXZ,EAAMD,EAAKc,UACXZ,EAAQF,EAAKe,WACjBhB,GAA4B,IAANE,EAElBE,EAAeD,EACfE,EAAS,GACJX,EAAE,EAVe,aAUZA,EAAI,IAVQ,CAAAa,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAWRC,IAAKC,IAAIM,SAASjB,GAXV,QAWtB3G,EAXsBkH,EAAAM,KAYtBZ,EAAO,IAAIa,KAAuB,IAAlBzH,EAAM6H,WAClB9I,EAAI,IAAI0I,KAAKb,EAAKkB,cAAelB,EAAKe,WAAY,GAAGD,UACzDV,EAAOD,KAAkBJ,EACzBA,GAlBa,KAkBwB5H,EAff,QAUJsH,IAVIa,EAAAE,KAAA,wBAAAF,EAAAa,OAAA,SAiBnBf,GAjBmB,yBAAAE,EAAAc,SAAAtB,MAAH,yBAAAjG,EAAAqC,MAAArD,KAAAwI,YAAA,iFC8MrBC,EAAO,SAAClE,GACV,IAAI+B,EAAY,oBAOhB,OANI/B,EAAMmE,WACNpC,GAAa,aAEb/B,EAAMoE,qBACNrC,GAAa,0BAGbsC,EAAAlG,EAAAyD,cAAA,MAAArG,OAAA+I,OAAA,GACOtE,EADP,CAEE+B,UAAWA,IACXsC,EAAAlG,EAAAyD,cAAA,MAAS5B,KAIbuE,EAAqB,SAAAC,GAA+BA,EAA7B5H,YAA6B,IAAhB6H,EAAgBD,EAAhBC,KAAMC,EAAUF,EAAVE,KAE5C,OACIL,EAAAlG,EAAAyD,cAAA,OAAKG,UAAU,uBACbsC,EAAAlG,EAAAyD,cAAA,OAAKG,UAAU,kBACH,oBAAT0C,EAA6B,YAAc,QAJtC,CAAC,EAAE,EAAE,EAAE,GAMRzF,IACL,SAAArD,GAAC,OAAI0I,EAAAlG,EAAAyD,cAAA,OACE+C,WAAW,EACXC,YAAa,kBAAMF,EAAKD,EAAO,IAAM9I,IACrCoG,UAAU,oBAAoBpG,OA0BlCoE,gBArBS,SAAC5C,EAAO6C,GAC9B,MAAO,CACH6E,SAAU1H,EAAM2H,QAAQD,SACxBE,SAAU5H,EAAM6H,UAAUD,SAC1BE,cAAe9H,EAAM6H,UAAUC,cAC/BC,iBAAkB/H,EAAMgI,QAAQD,iBAChCrI,iBAAkBM,EAAMgI,QAAQtI,mBAIX,SAACyC,GAC1B,MAAO,CACH8F,iBAAkB,SAAAC,GAAC,OAAI/F,EAAS8F,aAAiBC,KACjDC,YAAa,SAAAD,GAAC,OAAI/F,EAASgG,aAAYD,KACvCE,gBAAiB,SAAA5J,GAAC,OAAI2D,EAASkG,aAAuB7J,KACtD8J,YAAa,SAAA9J,GAAC,OAAI2D,EAASmG,aAAY9J,KACvC+J,kBAAmB,SAAA/J,GAAC,OAAI2D,EAASoG,aAAkB/J,KACnDgK,oBAAqB,SAAAhK,GAAC,OAAI2D,EAASqG,aAAoBhK,OAI9CoE,CA9PQ,SAAAtD,GAcL,IAbdkJ,EAaclJ,EAbdkJ,oBACA9I,EAYcJ,EAZdI,iBACAqI,EAWczI,EAXdyI,iBACAE,EAUc3I,EAVd2I,iBACAL,EASctI,EATdsI,SACAE,EAQcxI,EARdwI,cACAK,EAOc7I,EAPd6I,YACAM,EAMcnJ,EANdmJ,SACAC,EAKcpJ,EALdoJ,SACAjJ,EAIcH,EAJdG,YACA2I,EAGc9I,EAHd8I,gBACAE,EAEchJ,EAFdgJ,YAEAZ,GAAcpI,EADdiJ,kBACcjJ,EAAdoI,UAAciB,EAEYC,wBAASC,GAFrBC,EAAA1K,OAAA2K,EAAA,EAAA3K,CAAAuK,EAAA,GAETK,EAFSF,EAAA,GAEDG,EAFCH,EAAA,GAAAI,EAGUN,wBAASC,GAHnBM,EAAA/K,OAAA2K,EAAA,EAAA3K,CAAA8K,EAAA,GAGTE,EAHSD,EAAA,GAGFE,EAHEF,EAAA,GAIVG,EAAUzF,iBAAO,GAGrB0F,oBAAU,WAMN,OALIP,EACAQ,OAAOC,iBAAiB,UAAWC,GAEnCF,OAAOG,oBAAoB,UAAWD,GAEnC,kBAAMF,OAAOG,oBAAoB,UAAWD,KACpD,CAACV,EAAQC,IAEZ,IAAMS,EAAY9J,sBAAY,WAC1BqJ,OAAUJ,IACX,CAACG,EAAQC,IAEN1B,EAAO3H,sBAAY,SAAC0H,GACtBc,EAAgBd,GAChB+B,OAASR,GACJvB,EAAK9G,SAAS,QAAW8G,EAAK9G,SAAS,oBACxCyI,OAAUJ,GAEdS,EAAQzJ,WACT,CAACoJ,EAAWI,IAETO,EAAUhK,sBAAY,SAAC0H,GACzB,IAAIuC,EAASP,EAAQzJ,QACrBiK,WAAW,WACHD,IAAWP,EAAQzJ,SAGvBwJ,EAAS/B,IACV,MACJ,CAAC+B,IAEEU,EAAUnK,sBAAY,WACxB0J,EAAQzJ,UACRwJ,OAASR,IACV,IAEGmB,EAAepK,sBAAY,WAC7B0I,GAAaZ,IACd,CAACA,IAEEuC,EAAyBrK,sBAAY,WACvC4I,GAAqB9I,IACtB,CAACA,IAGAwK,EAAY,GACZC,EAAO,EACX,GAAIf,EACA,OAAQA,GACR,IAAK,UACDc,EAAY,iCACZC,EAAK,EACL,MACJ,IAAK,WACDD,EAAY,qCACZC,EAAK,EACL,MACJ,IAAK,WACDD,EAAY,qCACZC,EAAK,EACL,MACJ,IAAK,UACDD,EAAY,gCACZC,EAAK,EACL,MACJ,IAAK,UACDD,EAAY,gCACZC,EAAK,EACL,MACJ,IAAK,UACDD,EAAY,uCACZC,EAAK,EACL,MACJ,IAAK,OACDD,EAAY,kCACZC,EAAK,EACL,MACJ,IAAK,YACDD,EAAY,wCACZC,EAAK,EACL,MACJ,IAAK,QACDD,EAAY,gDACZC,EAAK,EAKT,IAAIvF,EAAW,kBAKnB,OAJQmD,IACAnD,GAAa,0BAIjBsC,EAAAlG,EAAAyD,cAAA,OAAKG,UAAWA,GACbwE,GAASlC,EAAAlG,EAAAyD,cAAA,OAAKG,UAAU,kBAAkBwF,MAAO,CAACD,KAAW,GAALA,IAAWD,GACpEhD,EAAAlG,EAAAyD,cAACsC,EAAD,CACEsD,YAAa,kBAAMT,EAAQ,YAC3BU,aAAcP,EACd9C,oBAAoB,EACpBO,UAAU,OACVC,YAAa,kBAAMF,EAAK,YACxBgD,IAAI,uBACNrD,EAAAlG,EAAAyD,cAACsC,EAAD,CACEuD,aAAcP,EACd9C,oBAAoB,EACpBoD,YAAa,kBAAMT,EAAQ,aAC3BpC,UAAU,OACVC,YAAa,kBAAMF,EAAK,aACxBgD,IAAI,wBACNrD,EAAAlG,EAAAyD,cAACsC,EAAD,CACEuD,aAAcP,EACd9C,oBAAoB,EACpBoD,YAAa,kBAAMT,EAAQ,aAC3BpC,UAAU,OACVC,YAAa,kBAAMF,EAAK,aACxBgD,IAAI,wBACNrD,EAAAlG,EAAAyD,cAACsC,EAAD,CACES,UAAU,OACVP,oBAAoB,EACpBqD,aAAcP,EACdM,YAAa,kBAAMT,EAAQ,YAC3BnC,YAAa,kBAAMF,EAAK,YACxBgD,IAAI,uBACNrD,EAAAlG,EAAAyD,cAACsC,EAAD,CACES,UAAU,OACV8C,aAAcP,EACd9C,oBAAoB,EACpBoD,YAAa,kBAAMT,EAAQ,YAC3BnC,YAAa,kBAAMF,EAAK,YACxBgD,IAAI,uBACNrD,EAAAlG,EAAAyD,cAACsC,EAAD,CACES,UAAU,OACV8C,aAAcP,EACd9C,oBAAoB,EACpBoD,YAAa,kBAAMT,EAAQ,YAC3BnC,YAAa,kBAAMF,EAAK,YACxBgD,IAAI,wBACJ7B,GAAYxB,EAAAlG,EAAAyD,cAACsC,EAAD,CACZS,UAAU,OACV8C,aAAcP,EACd9C,oBAAoB,EACpBoD,YAAa,kBAAMT,EAAQ,SAC3BnC,YAAa,kBAAMF,EAAK,SACRgD,IAAI,qBACrB7B,GACAxB,EAAAlG,EAAAyD,cAACsC,EAAD,CACEnC,UAAWgD,EAAW,WAAa,GACnCZ,SAAUY,EACVJ,UAAU,QACVgD,QAAS,kBAAMrC,GAAaP,IAC5B2C,IAAI,qBACL7B,GACDxB,EAAAlG,EAAAyD,cAACsC,EAAD,CACES,UAAU,QACVR,SAAUc,EACVlD,UAAWkD,EAAgB,WAAa,GACxC0C,QAAS,kBAAMvC,GAAkBH,IACjCyC,IAAI,yBACNvB,GAAU9B,EAAAlG,EAAAyD,cAAC2C,EAAD,CAAoBG,KAAMA,EAAM9H,YAAaA,EAAa6H,KAAM0B,IAC3E9B,EAAAlG,EAAAyD,cAACsC,EAAD,CACEyD,QAASP,EACTjD,SAAUtH,EACV2K,YAAa,kBAAMT,EAAQ,UAC3B3C,oBAAoB,EACpBqD,aAAcP,EACdnF,UAAU,oBACV2F,IAAK,2BACPrD,EAAAlG,EAAAyD,cAACsC,EAAD,CACEyD,QAASR,EACTK,YAAa,kBAAMT,EAAQ,UAC3B3C,oBAAoB,EACpBqD,aAAcP,EACd/C,SAAUU,EACV6C,IAAK7C,EAAW,oBAAsB,oBACvCgB,GAAYD,gJCrMjBgC,EAAe,GA0EfC,EAAa,SAAArD,GAAyB,IAAvBsD,EAAuBtD,EAAvBsD,WAAYP,EAAW/C,EAAX+C,MAAWQ,EACVhC,mBAAS,IADCiC,EAAAzM,OAAA2K,EAAA,EAAA3K,CAAAwM,EAAA,GACjCE,EADiCD,EAAA,GACxBE,EADwBF,EAAA,GAAAG,EAERpC,mBAAS,IAFDqC,EAAA7M,OAAA2K,EAAA,EAAA3K,CAAA4M,EAAA,GAEjCE,EAFiCD,EAAA,GAEvBE,EAFuBF,EAAA,GAqBxC,OAlBA1B,oBAAU,WACN,IAAIpL,EAAI+H,IAAKkF,MAAMC,UAAUV,EAAWW,gBACpCC,EAAOC,YAAkBrN,GACzBsM,EAAac,GACbR,EAAWN,EAAac,IAExBE,IAAKC,QAAQH,GACRI,KAAK,SAAAzD,GACFuC,EAAac,GAAQrD,EACrB6C,EAAW7C,KAIvB0D,IAASC,MAAMC,YAAYnB,EAAWoB,SACjCJ,KAAK,SAAAhN,GAAC,OAAIwM,EAAYxM,MAE5B,CAACgM,EAAYI,EAAYI,IAGxBjE,EAAAlG,EAAAyD,cAAA,OACE2F,MAAOA,EACPxF,UAAU,cACVsC,EAAAlG,EAAAyD,cAAA,OAAKG,UAAU,UACZsG,EADH,KAGAhE,EAAAlG,EAAAyD,cAAA,OAAKG,UAAU,WACZkG,KAYElI,gBANS,SAAC5C,EAAO6C,GAC5B,MAAO,CACHmJ,WAAYhM,EAAMiM,aAAaC,oBAAoBpN,SAInB,KAAzB8D,CAjHU,SAAAtD,GAKV,IAJX6M,EAIW7M,EAJX6M,KAIWC,EAAA9M,EAHX+M,iBAGW,IAAAD,EAHDD,GAAQA,EAAKG,YAGZF,EAFXJ,EAEW1M,EAFX0M,WAEWO,EAAAjN,EADXkN,gBACW,IAAAD,EADFzO,IACEyO,EAAXE,EAAWnN,EAAXmN,MAAW9D,EACaC,mBAAS,IADtBE,EAAA1K,OAAA2K,EAAA,EAAA3K,CAAAuK,EAAA,GACJ+D,EADI5D,EAAA,GACE6D,EADF7D,EAAA,GAAAI,EAEmBN,oBAAS,GAF5BO,EAAA/K,OAAA2K,EAAA,EAAA3K,CAAA8K,EAAA,GAEK0D,GAFLzD,EAAA,GAAAA,EAAA,IAAA0D,EAG2BjE,mBAAS,IAHpCkE,EAAA1O,OAAA2K,EAAA,EAAA3K,CAAAyO,EAAA,GAGJE,EAHID,EAAA,GAGSE,EAHTF,EAAA,GAKLG,EAAWrN,sBAAY,SAACsD,GAC1ByJ,EAAQzJ,EAAEgK,OAAOC,QAClB,CAACR,IAEES,EAASxN,sBAAY,WACvBgM,IAASyB,OAAOC,qBACZd,EACAH,EACAK,GACCf,KAAK,SAAAnN,GAAC,OAAIoO,GAAW,KAC1BD,EAAQ,IACRC,GAAW,IACZ,CAACP,EAAWK,EAAMC,EAASC,IAE9BrD,oBAAU,WACD8C,GAGLT,IAASyB,OAAOE,eACZf,EACAH,GACCV,KAAK,SAAA3K,GACFgM,EAAehM,MAExB,CAACqL,EAAWW,EAAgBhB,IAE3B,IAAI5B,EAAQ,GAKhB,OAHQqC,IACArC,EAAMoD,gBAAkBf,GAG5BvF,EAAAlG,EAAAyD,cAAA,WACEyC,EAAAlG,EAAAyD,cAACgJ,EAAA,EAAD,CACErD,MAAOA,EACPxF,UAAU,kBAAkBqI,SAAUA,EAAU3F,KAAK,WAAW6F,MAAOT,IACzExF,EAAAlG,EAAAyD,cAAA,OACE2F,MAAOA,EACPI,QAAS4C,EAAQxI,UAAU,iBAF7B,YAKAsC,EAAAlG,EAAAyD,cAAA,OACE2F,MAAOA,EACPxF,UAAU,eACVsC,EAAAlG,EAAAyD,cAACiJ,EAAA1M,EAAD,CACE2M,SAAU,KACV7N,KAAM,GACN2M,MAAO,UACPmB,QAAS5B,EAAa,IAGvBe,EAAYlL,IACT,SAAAb,GAAC,OACGkG,EAAAlG,EAAAyD,cAACiG,EAAD,CACEN,MAAOA,EACP1F,IAAK1D,EAAEsK,eACPX,WAAY3J,+mCC1ElC,IAAM6M,EAAS,CACXC,EAAG,UACHC,EAAG,WACHC,EAAG,QACHC,EAAG,QACHC,EAAG,MACHC,EAAG,OACHC,EAAG,OACHC,EAAG,SACHC,EAAG,YACHC,EAAG,UACHC,GAAI,WACJC,GAAI,YAmDO7L,gBAVS,SAAC5C,EAAO6C,GAC9B,MAAO,IAIkB,SAACV,GAC1B,MAAO,IAIMS,CAhDA,SAAAtD,GAA0C,IAAAoP,EAAxC9I,EAAwCtG,EAAxCsG,aAAc+I,EAA0BrP,EAA1BqP,aAAc9I,EAAYvG,EAAZuG,OAErC+I,IADQ,IAAItI,MAAOE,YACZ,IAAIF,MAAOK,eAClBkI,EAAI,GACJC,EAAO1Q,OAAO0Q,KAAKjJ,GAAQhE,IAAI,SAAArD,GAAC,OAAIuQ,SAASvQ,KAAIuC,KAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAID,IAJnBgO,EAAAC,EAKrDH,EAAO,GAAAI,OAAA9Q,OAAA+Q,EAAA,EAAA/Q,CAAK0Q,GAAL1Q,OAAA+Q,EAAA,EAAA/Q,CAAe0Q,IAAMM,MAAM,EAAG,KALgB,IAMrD,IAAAJ,EAAA9G,MAAAwG,EAAAM,EAAArQ,KAAA0Q,MAAoB,KAAXnK,EAAWwJ,EAAAvB,MAChB0B,EAAEvO,KAAK,CACHgP,OAAQpK,EACRS,MAAOkI,GAAQ,GAAK3I,GAAK,IACzBqK,UAAWrK,IAAMU,IAEjBV,EAAI,KAAO,GACX2J,EAAEvO,KAAK,CACHgP,OAAQpK,EAAI,EACZ0J,OAAQA,KAfiC,MAAAY,GAAAR,EAAA9L,EAAAsM,GAAA,QAAAR,EAAA/K,IAoBrD,OACIiD,EAAAlG,EAAAyD,cAAA,OAAKG,UAAU,UACZiK,EAAEhN,IACC,SAAAwF,GAAA,IAAE1B,EAAF0B,EAAE1B,MAAO2J,EAATjI,EAASiI,OAAQC,EAAjBlI,EAAiBkI,UAAUX,EAA3BvH,EAA2BuH,KAA3B,OACIA,EACA1H,EAAAlG,EAAAyD,cAAA,OACE+F,QAAS,kBAAMmE,EAAaW,IAC5B1K,UAAU,cAAcgK,GACzB1H,EAAAlG,EAAAyD,cAAA,OACE+F,QAAS,kBAAMmE,EAAaW,IAC5B1K,UAAW2K,EAAY,gBAAkB,SACxC5J,oICSP/C,gBAdS,SAAC5C,EAAO6C,GAC5B,IAAI4M,EAAS5M,EAAMyB,MAAMoL,YACrB7M,EAAMyB,MAAMoL,WAAWvP,GAC3B,MAAO,CACH4C,QAAS/C,EAAM+E,KAAK4K,iBAAiB9M,EAAMyB,MAAMnE,IACjDyP,YAAa5P,EAAM+C,QAAQ8M,gBAAgBJ,KAIxB,SAACtN,GAC1B,MAAO,IAIMS,CAnDU,SAAAtD,GAKnB,IAJFgF,EAIEhF,EAJFgF,MAEAsL,GAEEtQ,EAHFyD,QAGEzD,EAFFsQ,aACI/M,EACFzE,OAAA0R,EAAA,EAAA1R,CAAAkB,EAAA,mCACIwE,EAAWlE,sBAAY,SAACmE,GAC1BO,EAAMoL,WAAWK,aAAahM,GAC9BO,EAAM0L,0BACP,IAEH,OAAM1L,EAAMoL,YAAepL,EAAM2L,UAAYL,EAG7C,CACIM,EAAAlP,EAAAyD,cAAC0L,EAAA,EAAD/R,OAAA+I,OAAA,CACEiJ,QAAQ,EACR1L,IAAK,EACLO,IAAKX,GACDzB,IALV,GAAAqM,OAAA9Q,OAAA+Q,EAAA,EAAA/Q,CAQQkG,EAAMoL,WAAW3M,QAAQlB,IACrB,SAAAwO,GAAM,OACFH,EAAAlP,EAAAyD,cAAC6L,EAAA,EAADlS,OAAA+I,OAAA,CACErD,SAAUA,EACVY,IAAK2L,EAAOlQ,GACZ4D,GAAIsM,EACJE,KAAMjM,EAAMoL,WACZc,YAAY,EACZzQ,gBAAiBuE,EAAMvE,gBACvBkF,IAAKX,GACDzB,QApBX,qHC4CAD,gBAdS,SAAC5C,EAAO6C,GAC9B,MAAO,CACH4N,UAAWzQ,EAAM+E,KAAK2L,iBAAiB7N,EAAMpD,YAAYU,IACzDoP,UAAW1M,EAAMpD,cAAgBoD,EAAMpD,YAAYM,gBAAgBiD,qBAI9C,SAACb,EAAUU,GACpC,MAAO,CACH8N,aAAc,SAACnS,GAAD,OAAO2D,EAASyO,aAAmB/N,EAAMpD,YAAYU,GAAI3B,KACvEqS,eAAgB,SAACrS,GAAD,OAAO2D,EAAS0O,aAAehO,EAAMpD,YAAYU,GAAI3B,OAI5DoE,CAxDC,SAAAtD,GAAuE,IAArEG,EAAqEH,EAArEG,YAAagR,EAAwDnR,EAAxDmR,UAAWlB,EAA6CjQ,EAA7CiQ,UAAWoB,EAAkCrR,EAAlCqR,aAAcE,EAAoBvR,EAApBuR,eAAoBlI,EAC3DC,mBAASnJ,EAAYgN,OADsC3D,EAAA1K,OAAA2K,EAAA,EAAA3K,CAAAuK,EAAA,GACvEmI,GADuEhI,EAAA,GAAAA,EAAA,IAAAI,EAEnDN,oBAAS,GAF0CO,EAAA/K,OAAA2K,EAAA,EAAA3K,CAAA8K,EAAA,GAU/EtE,GAV+EuE,EAAA,GAAAA,EAAA,GAI7DvJ,sBAAY,SAAC6M,GAC/BhN,EAAYgN,MAAQA,EAAMsE,IAC1BD,EAASrE,EAAMsE,KACfF,EAAepE,EAAMsE,MACtB,CAACtR,EAAaqR,IAEH,yBACVvB,IACA3K,GAAa,aAGjB,IAAMoM,EAAcpR,sBAAY,WAC5BH,EAAYM,gBAAgBkR,oBAAoBxR,EAAYU,KAC7D,CAACV,IACJ,OACIyH,EAAAlG,EAAAyD,cAAA,OACEuM,YAAaA,EACbpM,UAAWA,GACVnF,EAAYyR,MAYXT,GAAavJ,EAAAlG,EAAAyD,cAAC0M,EAAA,EAAD,CAAgB1R,YAAaA,IAC5CyH,EAAAlG,EAAAyD,cAAA,OAAK+F,QAAS,kBAAMmG,GAAcF,IAAY7L,UAAU,mBACtDsC,EAAAlG,EAAAyD,cAAA,OAAKG,UAAW6L,EAAY,aAAe,sJCoExC7N,gBAjBS,SAAC5C,EAAO6C,GAC9B,MAAO,CACHuO,OAAQpR,EAAMC,QAAQoR,gBAAgBxO,EAAMoC,IAAI9E,IAChDmR,OAAQtR,EAAMgI,QAAQuJ,cAAc1O,EAAMoC,IAAI9E,IAC9CqR,kBAAmBxR,EAAM2H,QAAQ8J,kBAAoB5O,EAAMoC,IAC3DyM,WAAY1R,EAAMC,QAAQG,iBAAiByC,EAAMoC,IAAI9E,IACrDoP,UAAW1M,EAAMoC,IAAIxF,cAAgBoD,EAAMoC,IAAIlF,gBAAgBiD,mBAC/D2O,WAAY3R,EAAM+E,KAAK4M,aAIF,SAACxP,GAC1B,MAAO,CACHyP,mBAAoB,SAAApT,GAAC,OAAI2D,EAASyP,aAAmBpT,OAI5CoE,CAtGG,SAAAtD,GAiBZ,IAhBFgS,EAgBEhS,EAhBFgS,OACA3N,EAeErE,EAfFqE,YACAD,EAcEpE,EAdFoE,SACAH,EAaEjE,EAbFiE,MACA0B,EAYE3F,EAZF2F,IACAD,EAWE1F,EAXF0F,gBACAxF,EAUEF,EAVFE,SACA4D,EASE9D,EATF8D,QACAtD,EAQER,EARFQ,KACAuD,EAOE/D,EAPF+D,QACAkM,EAMEjQ,EANFiQ,UACAoC,EAKErS,EALFqS,WACAP,EAIE9R,EAJF8R,OACAM,EAGEpS,EAHFoS,WAIMnS,GADJD,EAFFsS,mBAEEtS,EADFkS,kBAEY3N,sBAAOgF,IADjBgJ,EAEgEC,YAAiB,CAC/EvO,QACAhE,MACAQ,gBAAiBkF,EAAIlF,gBACrBgS,eAAgBX,EAChBhO,UACAD,aAAc6B,EACdlF,OACAuD,UACA7D,WACAiB,QAASwE,EACT+M,OAAO,EACPhJ,OAAQ2I,EACRhO,cACAD,aAdG0G,EAFLyH,EAEKzH,MAAO6H,EAFZJ,EAEYI,cAAejB,EAF3Ba,EAE2Bb,YAAatH,EAFxCmI,EAEwCnI,UAFxCmI,EAEmDK,UAiBrD3I,oBAAU,WACF6H,IACAnM,EAAIzG,EAAI4S,EAAO5S,EACfyG,EAAIxG,EAAI2S,EAAO3S,IAEpB,CAAC2S,IAEJ,IAAIxM,EAAY,aACZ2K,IACA3K,GAAa,YAEb8M,IACA9M,GAAa,aAEjB,IAAIuN,EAAM/T,OAAAgU,EAAA,EAAAhU,CAAA,GACFgM,GAWR,OATIgH,IACAe,EAAOhI,KAAOiH,EAAO5S,EACrB2T,EAAOE,IAAOjB,EAAO3S,GAGrBkT,GAAcA,EAAW1M,MAAQA,IACjCL,GAAa,aAGb0M,EACO,GAGPpK,EAAAlG,EAAAyD,cAAA,OACE2F,MAAO+H,EACPnB,YAAa,SAAC9N,GAEV8N,EAAY9N,IAEhB+O,cAAeA,EACfvI,UAAWA,EACXnK,IAAKA,EAAKqF,UAAWA,GACrBsC,EAAAlG,EAAAyD,cAAC6N,EAAA,EAAD,CAAcC,UAAU,EAAMvN,gBAAiBA,EAAiBC,IAAKA,IACrEiC,EAAAlG,EAAAyD,cAAC+N,EAAA,EAAD,CACEC,QAAQ,EACRC,UAAU,EAAMC,YAAY,EAAM5S,gBAAiBkF,EAAIlF,gBAAiBnB,KAAMqG,IAChFiC,EAAAlG,EAAAyD,cAACmO,EAAA,EAAD,CAAevC,OAAQpL,IACvBiC,EAAAlG,EAAAyD,cAACoO,EAAA,EAAD,CAAgBpT,YAAawF,EAAIxF,YAAa0D,aAAc6B,EAAiBqL,OAAQpL,6JC9BhFrC,cAXS,SAAC5C,EAAO6C,GAC9B,MAAO,CACHC,cAAe9C,EAAM+C,QAAQD,gBAIR,SAACX,GAC1B,MAAO,IAIMS,CAlDa,SAAAtD,GAA4B,IAA1BgF,EAA0BhF,EAA1BgF,MAAOxB,EAAmBxD,EAAnBwD,cAAmB6F,EACxBC,mBAAStE,EAAMwO,YAAY/P,SADH+F,EAAA1K,OAAA2U,EAAA,EAAA3U,CAAAuK,EAAA,GAC/C5F,EAD+C+F,EAAA,GACtCkK,EADsClK,EAAA,GAG9CmK,EAAerT,sBAAY,SAACsR,GAC9B,IAAIb,EAAS6C,YAAqBhC,EAAM5M,GACxCA,EAAMvE,gBAAgBoT,iBAAiBhR,SACnCiR,YAAU/C,EAAQ/L,IACtB0O,EAAW5U,OAAAwD,EAAA,EAAAxD,CAAKkG,EAAMwO,YAAY/P,WACnC,CAACiQ,EAAYjQ,EAASuB,IAEnBR,EAAWlE,sBAAY,WACzBoT,EAAW5U,OAAAwD,EAAA,EAAAxD,CAAKkG,EAAMwO,YAAY/P,WACnC,CAACA,EAASiQ,IAEb,OACIK,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,oBACZ7B,EAAQlB,IACL,SAAAwO,GAAM,OACFgD,EAAArS,EAAAyD,cAAC6O,EAAA,EAAD,CACEvT,gBAAiBuE,EAAMvE,gBACvBwS,SAAUzP,EAActC,SAAS6P,GACjC3L,IAAK2L,EAAOlQ,GACZoT,eAAgBzP,EAChBuM,OAAQA,EACR/L,MAAOA,EACPkP,OAAQlP,EAAMvE,gBAAgByT,OAC9BC,gBAAiB,iBAAM,QACjCJ,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,mBACbyO,EAAArS,EAAAyD,cAACiP,EAAA1S,EAAD,CACE4D,UAAU,sBACV+O,YAAQ9K,EACR+K,QAASC,IACT5G,SAAU,SAAC6G,GAAD,OAAOb,EAAaa,EAAE3G,QAChC4G,YAAY,mDCJXnR,cAVS,SAAC5C,EAAO6C,GAC9B,MAAO,IAIkB,SAACV,GAC1B,MAAO,IAIMS,CAhCY,SAAAtD,GAAa,IAAXgF,EAAWhF,EAAXgF,MACrB/E,EAAMsE,sBAAOgF,GACbrE,EAAQ,GAaZ,OAZIF,EAAM0P,iBAAmBC,IACzBzP,EACI6O,EAAArS,EAAAyD,cAACyP,EAAA,EAAD,CAAaC,IAAK5U,EAAK0F,IAAKX,EAAO8P,OAAQ9P,IAExCA,EAAM0P,iBAAmBK,KAChC/P,EAAMgQ,sBAAwBC,MAC9B/P,EACE6O,EAAArS,EAAAyD,cAAC+P,EAAA,EAAD,CACEzU,gBAAiBuE,EAAMvE,gBACvBuE,MAAOA,EAAOF,WAAYE,EAAMF,cAIpCiP,EAAArS,EAAAyD,cAAA,OAAKlF,IAAKA,EAAKqF,UAAU,uBACtBJ,cCqCI5B,cAXS,SAAC5C,EAAO6C,GAC9B,MAAO,CACHC,cAAe9C,EAAM+C,QAAQD,gBAIR,SAACX,GAC1B,MAAO,IAIMS,CAnDS,SAAAtD,GAA4B,IAA1BgF,EAA0BhF,EAA1BgF,MAAOxB,EAAmBxD,EAAnBwD,cAAmB6F,EACpBC,mBAAStE,EAAMvB,SADK+F,EAAA1K,OAAA2U,EAAA,EAAA3U,CAAAuK,EAAA,GAC3C5F,EAD2C+F,EAAA,GAClCkK,EADkClK,EAAA,GAG1CmK,EAAerT,sBAAY,SAACsR,GAC9B,IAAIb,EAASoE,YAAiBvD,EAAM5M,EAAMvE,iBAC1CsQ,EAAOqE,QAAO,GACdpQ,EAAMvE,gBAAgBoT,iBAAiBhR,SACnCiR,YAAU/C,EAAQ/L,IACtB0O,EAAW5U,OAAAwD,EAAA,EAAAxD,CAAKkG,EAAMvB,WACvB,CAACiQ,EAAYjQ,EAASuB,IAEnBR,EAAWlE,sBAAY,WACzBoT,EAAW5U,OAAAwD,EAAA,EAAAxD,CAAKkG,EAAMvB,WACvB,CAACA,EAASiQ,IAEb,OACIK,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,oBACZ7B,EAAQlB,IACL,SAAAwO,GAAM,OACFgD,EAAArS,EAAAyD,cAACkQ,EAAA,EAAD,CACE5U,gBAAiBuE,EAAMvE,gBACvBwS,SAAUzP,EAActC,SAAS6P,GACjC3L,IAAK2L,EAAOlQ,GACZoT,eAAgBzP,EAChBuM,OAAQA,EACR/L,MAAOA,EACPkP,OAAQlP,EAAMvE,gBAAgByT,OAC9BC,gBAAiB,iBAAM,QACjCJ,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,mBACbyO,EAAArS,EAAAyD,cAACiP,EAAA1S,EAAD,CACE4D,UAAU,sBACV+O,YAAQ9K,EACR+K,QAASgB,IACT3H,SAAU,SAAC6G,GAAD,OAAOb,EAAaa,EAAE3G,QAChC4G,YAAY,iCCwDXnR,cA5BS,SAAC5C,EAAO6C,GAC5B,IAAIyB,EAAQzB,EAAMyB,MACdA,GAASA,EAAMkP,QAAUlP,EAAMkP,OAAO,KACtClP,EAAQA,EAAMkP,OAAO,GAAGlP,OAE5B,IAAIoN,EAAa1R,EAAM6U,IAAIC,gBAAkBjS,EAAMyB,MAAMyQ,aACrDlS,EAAMyB,MAAMvE,gBAAgBiD,qBAC5BH,EAAMyB,MAAM7E,YAGZuV,GADahV,EAAMwT,OAAOyB,eAAepS,EAAMyB,MAAM7E,YAAYU,KAAO,IACjD0C,EAAMyB,MAAMnE,IAEvC,MAAO,CACHuR,aACAvR,QAAc0I,IAAVvE,EAAsB,OACLuE,IAAjBvE,EAAM4Q,aAAiDrM,IAAzBvE,EAAM4Q,OAAOC,QAC3C7Q,EAAM4Q,OAAOC,QAAU7Q,EAAM8Q,YAAc9Q,EAAM+Q,UACrDL,YACAM,WAAYhR,EAAMvB,QAAQjE,SAIP,SAACqD,GAC1B,MAAO,CACHoT,iBAAkB,SAAA/W,GAAC,OAAI2D,EAASoT,aAAiB/W,OAIxCoE,CAxFO,SAAAtD,GAAkF,IAAhFgF,EAAgFhF,EAAhFgF,MAAOoN,EAAyEpS,EAAzEoS,WAAYsD,EAA6D1V,EAA7D0V,UAAWO,EAAkDjW,EAAlDiW,iBAAkBC,EAAgClW,EAAhCkW,eAAgBF,EAAgBhW,EAAhBgW,WAChFpE,EAAQuE,YAAkBnR,EAAOA,EAAM4Q,QADyDvM,EAE9EC,wBAASC,GAFqEC,EAAA1K,OAAA2U,EAAA,EAAA3U,CAAAuK,EAAA,GAE/F+M,EAF+F5M,EAAA,GAEzF6M,EAFyF7M,EAAA,GAGhGlE,EAAY,cACZ8M,IACA9M,GAAa,aAGjB2E,oBAAU,WAEFiM,EADAE,EACe,CAACvV,GAAImE,EAAMnE,GAAImV,WAAYA,QAE3BzM,IAEpB,CAACyM,EAAYI,EAAMF,EAAgBlR,IAEtC,IAAMsR,EAAchW,sBAAY,WAC5B0E,EAAMvE,gBAAgB6V,YAAYtR,EAAMyQ,cACzC,CAACzQ,IAEJ,OACI+O,EAAArS,EAAAyD,cAAA,OACE+F,QAASoL,EACThR,UAAWA,GACXyO,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,YACbyO,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,gBAAgBN,EAAMyQ,YAAc,GACnD1B,EAAArS,EAAAyD,cAAA,OACE+F,QAAS,kBAAMlG,EAAMuR,iBACrBjR,UAAWoQ,EAAY,cAAgB,QAKzC3B,EAAArS,EAAAyD,cAAA,OACE+F,QAAS,kBAAMmL,EApChB,SAoCwBD,OAAgB7M,EApCxC,SAqCCjE,UArCD,SAqCY8Q,EAAgB,eAAiB,QAF9C,SAGArC,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,YAAY2F,IAAI,qBAC/B8I,EAAArS,EAAAyD,cAAA,OACE+C,WAAW,EACXwJ,YAAa,SAAC9N,GAAD,OAAOA,EAAE4S,mBACtBrO,YAAa,SAACvE,GACVA,EAAE4S,kBACFP,EAAiBjR,IAErByR,WAAY,SAAC7S,GAAD,OAAOA,EAAE8S,kBACrBxL,QAAS,kBAAMmL,EAjDhB,SAiDwBD,OAAgB7M,EAjDxC,SAkDCuB,MAAO,CAACoD,gBAAiBlJ,EAAMmI,OAC/B7H,UAnDD,SAmDY8Q,EAAgB,eAAiB,QAASxE,GACvDmC,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,YAAY2F,IAAI,qBAC/B8I,EAAArS,EAAAyD,cAAA,OACE+F,QAAS,kBAAMmL,EArDhB,SAqDwBD,OAAgB7M,EArDxC,SAsDCjE,UAtDD,SAsDY8Q,EAAgB,eAAiB,QAF9C,OArDC,SAyDFA,GAAiBrC,EAAArS,EAAAyD,cAACwR,EAAD,CAAoB3R,MAAOA,IAxD1C,SAyDFoR,GAAiBrC,EAAArS,EAAAyD,cAACyR,EAAD,CAAiB5R,MAAOA,IAxDvC,SAyDFoR,GAAiBrC,EAAArS,EAAAyD,cAAC0R,EAAD,CAAqB7R,MAAOA,wBCYzC1B,YAZS,SAAC5C,EAAO6C,GAC9B,MAAO,CACHuO,OAAQpR,EAAMC,QAAQoR,gBAAgBxO,EAAMpD,YAAYU,IACxDiW,UAAWvT,EAAMpD,YAAY+T,QAAU3Q,EAAMpD,YAAY+T,OAAO1U,SAI3C,SAACqD,GAC1B,MAAO,IAIMS,CAzEQ,SAAAtD,GAcjB,IAbFqE,EAaErE,EAbFqE,YACAD,EAYEpE,EAZFoE,SACAH,EAWEjE,EAXFiE,MACA9D,EAUEH,EAVFG,YACAuF,EASE1F,EATF0F,gBACAxF,EAQEF,EARFE,SACA4D,EAOE9D,EAPF8D,QACAtD,EAMER,EANFQ,KACAuD,EAKE/D,EALF+D,QAGA+N,GAEE9R,EAJFiQ,UAIEjQ,EAHFqS,WAGErS,EAFF8R,QAGM7R,GADJD,EADFoS,WAEY7N,sBAAOgF,IADjBF,EAEoCC,wBAASC,GAF7CC,EAAA1K,OAAA2U,EAAA,EAAA3U,CAAAuK,EAAA,GAEK0N,EAFLvN,EAAA,GAEkB0M,EAFlB1M,EAAA,GAAA+I,EAGgEC,YAAiB,CAC/EvO,QACAhE,MACAQ,gBAAiBN,EAAYM,gBAC7BgS,eAAgBX,EAChBhO,UACA4F,OAAQqN,EAAc5W,EAAY+T,OAAO1U,OAASuX,EAAYlW,GAAKkW,EAAYf,WAAa7V,EAAY+T,OAAO1U,OAC/GqE,aAAc6B,EACdlF,OACAuD,UACA7D,WACAiB,QAAShB,EACTkE,cACAD,aAbG0G,EAHLyH,EAGKzH,MAAsB4G,GAH3Ba,EAGYI,cAHZJ,EAG2Bb,aAAatH,EAHxCmI,EAGwCnI,UAHxCmI,EAGmDK,UAgBrD3I,oBAAU,WACF6H,IACA3R,EAAYjB,EAAI4S,EAAO5S,EACvBiB,EAAYhB,EAAI2S,EAAO3S,IAE5B,CAAC2S,IAEJ,IAAIe,EAAM/T,OAAAwC,EAAA,EAAAxC,CAAA,GAAQgM,GASlB,OARIgH,IACAe,EAAM/T,OAAAwC,EAAA,EAAAxC,CAAA,GACEgM,EADF,CAEFiI,IAAKjB,EAAO3S,EACZ0L,KAAMiH,EAAO5S,KAKjB6U,EAAArS,EAAAyD,cAAA,OACE2F,MAAO+H,EACPvN,UAAU,kBACVoM,YAAaA,EACbtH,UAAWA,EACXnK,IAAKA,GACPE,EAAY+T,OAAO3R,IAChB,SAAAyC,GAAK,OAAI+O,EAAArS,EAAAyD,cAAC6R,EAAD,CAAed,eAAgBA,EAAgBlR,MAAOA,qSCqE1E,SAASiS,EAAUC,GAAgC,IAAxB9U,EAAwBoF,UAAAhI,OAAA,QAAA+J,IAAA/B,UAAA,GAAAA,UAAA,IAAnB,GAAI3F,EAAe2F,UAAAhI,OAAA,QAAA+J,IAAA/B,UAAA,GAAAA,UAAA,GAAX,EAAGrF,EAAQqF,UAAAhI,OAAA,EAAAgI,UAAA,QAAA+B,EAC3C4N,EAIR,SAAwBD,GAAwB,IAAhB9U,EAAgBoF,UAAAhI,OAAA,QAAA+J,IAAA/B,UAAA,GAAAA,UAAA,IAAX,GAAI3F,EAAO2F,UAAAhI,OAAA,QAAA+J,IAAA/B,UAAA,GAAAA,UAAA,GAAH,EACzC,OAAQ0P,EAAS9U,IAAQP,EAAMO,GALnBgV,CAAeF,EAAQ9U,EAAKP,EAAKM,GAC7C,OAAOA,EAASP,KAAKyV,IAAIF,EAAO,GAOpC,IAGMG,EAAO,SAACC,EAAKC,GACf,OAAO5V,KAAK6V,IAAIF,EAAIpY,EAAIqY,EAAIrY,IAIjBmE,cAvCS,SAAC5C,EAAO6C,GAC9B,MAAO,CACHmU,QAASnU,EAAMyB,MAAM2S,gBAAkB7Y,OAAO0Q,KAAKjM,EAAMyB,MAAM2S,gBAAgBnY,OAAS,EACxFmY,eAAgBpU,EAAMyB,MAAM2S,eAC5BC,SAAUrU,EAAMyB,MAAM4S,SACtBV,OAAS3T,EAAMyB,MAAMvE,gBAAgBiX,QAA8CnU,EAAMyB,MAAM6S,QAAQX,OAAxD3T,EAAMyB,MAAM8S,gBAAgBC,QAItD,SAAClV,GAC1B,MAAO,CACDmV,uBAAwB,SAAAC,GAAS,OAAIpV,EAASmV,aAAuBC,OA4B9D3U,CA7IF,SAAAtD,GAOP,IANFgF,EAMEhF,EANFgF,MACA0S,EAKE1X,EALF0X,QACAC,EAIE3X,EAJF2X,eACAK,EAGEhY,EAHFgY,uBACAE,EAEElY,EAFFkY,QACAC,EACEnY,EADFmY,iBAEIP,EAAW5S,EAAM4S,SADnBvO,EAE0BC,oBAAS,GAFnCE,EAAA1K,OAAA2U,EAAA,EAAA3U,CAAAuK,EAAA,GAEG+O,EAFH5O,EAAA,GAGEvJ,GAHFuJ,EAAA,GAGQjF,sBAAOgF,IAHfK,EAIgBN,wBAASC,GAJzBM,EAAA/K,OAAA2U,EAAA,EAAA3U,CAAA8K,EAAA,GAIGyO,EAJHxO,EAAA,GAIOyO,EAJPzO,EAAA,GAAA0D,EAK8BjE,oBAAS,GALvCkE,EAAA1O,OAAA2U,EAAA,EAAA3U,CAAAyO,EAAA,GAKGgL,EALH/K,EAAA,GAKcgL,EALdhL,EAAA,GAAAlC,EAMsBhC,oBAAS,GAN/BiC,EAAAzM,OAAA2U,EAAA,EAAA3U,CAAAwM,EAAA,GAMGmN,EANHlN,EAAA,GAMUmN,EANVnN,EAAA,GAOEoN,EAAYpU,iBAAO,GAEnBe,EAAY,OACZoS,IACApS,GAAa,YAEbsS,IACAtS,GAAa,aAEjB,IAAIwF,EAAQ,GACR8N,EAAOjB,GAAkB7Y,OAAO0Q,KAAKmI,GAAgB,GACrDiB,IACAA,EAAOnJ,SAASmJ,GAChB9N,EAAMpG,OAAS,cAAqB,EAALkU,EAAS,QAG5C,IAAMC,EAAcvY,sBAAY,SAACsD,GAC7B,GAAK2U,EAAL,CAGA3U,EAAE8S,iBACF9S,EAAE4S,kBAEF,IAAIsC,EAAUlV,EAAEkV,QACZlV,EAAEmV,UACFD,EAAUlV,EAAEmV,QAAQ,GAAGD,SAE3B,IAAIE,EAAK/Y,EAAIM,QAAQ0Y,wBACjB9W,EAASlC,EAAIM,QAAQa,aAErB8X,EAyEZ,SAAmBha,GAA2B,IAAxBkD,EAAwBoF,UAAAhI,OAAA,QAAA+J,IAAA/B,UAAA,GAAAA,UAAA,IAAnB,GAAI3F,EAAe2F,UAAAhI,OAAA,QAAA+J,IAAA/B,UAAA,GAAAA,UAAA,GAAX,EAAGrF,EAAQqF,UAAAhI,OAAA,EAAAgI,UAAA,QAAA+B,EAEtC4N,GADJjY,EAAI0C,KAAKQ,IAAIR,KAAKC,IAAI,EAAG3C,GAAIiD,IACbA,EACZgX,EAAYvX,KAAKyV,IAAIF,EAAO,IAChC,OAAO/U,GAAOP,EAAMO,GAAO+W,EA7EbC,CADFjX,GAAU2W,EAAUE,EAAGjG,MA9C3B,GA+CwB,EAAG5Q,GAC/B6C,EAAMqU,UAAUH,GAAK,GAAO,GAC5BR,EAAS,CAACxZ,EAAG0E,EAAE0V,QAASna,EAAGyE,EAAEkV,YAC9B,CAACJ,EAAUH,EAAWvT,IAErBuU,EAAa,CACbpX,OAAQ8U,EAAUjS,EAAM8S,gBAAgBC,OArDpC,GAqDgD,EAAG9X,EAAIM,SAAWN,EAAIM,QAAQa,eAGhFsQ,EAAcpR,sBAAY,SAACsD,GACzBsU,EACAC,EAAiBnT,IAGrBgT,EAAuBhT,EAAM8S,iBAC7BU,GAAa,GACbF,EAAM,CAACpZ,EAAG0E,EAAE0V,QAASna,EAAGyE,EAAEkV,UAC1BH,EAAUpY,SAAU,IAAIyG,MAAOwS,YAChC,CAAChB,EAAcF,EAAOJ,EAASC,EAAkBnT,IAE9CoF,EAAY9J,sBAAY,SAACsD,GAC3B,IAAI6V,GAAM,IAAIzS,MAAOwS,UACbf,GAASnB,EAAKe,EAAII,KACrBA,GAASnB,EAAKe,EAAII,IAAU,IACzBgB,EAAMd,EAAUpY,QAtEf,MAuEDyE,EAAM4S,UAAY5S,EAAM4S,UAGhCc,OAASnP,GACTiP,GAAa,GACbR,OAAuBzO,IACxB,CAACmP,EAAUF,EAAcC,EAAOJ,IAMnC,OAJApO,oBAAU,WACNhK,EAAIM,QAAQ4J,iBAAiB,YAAa0O,EAAa,CAAEa,SAAS,KACnE,CAACb,EAAaH,EAAUH,EAAWvT,IAGlC+O,EAAArS,EAAAyD,cAAA,OACElF,IAAKA,EACL4Y,YAAaA,EACbnH,YAAaA,EACbiI,aAAcjI,EACdtH,UAAWA,EACXY,aAAc,WACVwN,GAAa,GACbE,OAASnP,GACTyO,OAAuBzO,IAE3BuB,MAAOA,EACPxF,UAAWA,GACV8S,EAAUrE,EAAArS,EAAAyD,cAACyU,EAAA,EAAD,CACElI,YAAa,SAAC9N,GAAD,OAAOA,EAAE4S,mBACtBqD,gBAAgB,EAAM7U,MAAOA,IAAW,GACrD+O,EAAArS,EAAAyD,cAAA,OAAKG,UAAWiT,EAAY,mBAAsB,0BAA2BzN,MAAOyO,siCCoL/EjW,gBAnBS,SAAC5C,EAAO6C,GAC5B,MAAO,CACHC,cAAe9C,EAAM+C,QAAQD,cAC7BsW,iBAAkBpZ,EAAM+E,KAAKsU,WAC7BjD,UAAWvT,EAAMpD,YAAY+T,QAAU3Q,EAAMpD,YAAY+T,OAAO1U,OAChE2R,UAAWzQ,EAAM+E,KAAK2L,iBAAiB7N,EAAMpD,YAAYU,MAItC,SAACgC,GACxB,MAAO,CACHc,iBAAkB,SAAAzE,GAAC,OAAI2D,EAASc,aAAiBzE,KACjD8a,0BAA2B,SAAA9a,GAAC,OAAI2D,EAC5BmX,aAA0B9a,KAC9B6E,QAAS,SAAA7E,GAAC,OAAI2D,EACVoX,aAAc,EAAG/a,OAIdoE,CAlQD,SAAAtD,GAYR,IAXF+D,EAWE/D,EAXF+D,QACAmW,EAUEla,EAVFka,UACAjW,EASEjE,EATFiE,MAEAT,GAOExD,EARFma,YAQEna,EAPFwD,eACAG,EAME3D,EANF2D,iBACAqW,EAKEha,EALFga,0BACA9B,EAIElY,EAJFkY,QACAC,EAGEnY,EAHFmY,iBACAhY,EAEEH,EAFFG,YACAgR,EACEnR,EADFmR,UAGMlR,EAAMsE,sBAAOgF,GACbrJ,EAAWqE,iBAAO,IAHtB6V,EAIkDC,YAAe,CAACpa,QAA7D0S,EAJLyH,EAIKzH,cAAe2H,EAJpBF,EAIoBE,YAJpBC,GAAAH,EAIiCI,cACMC,YAAW,CAACxa,SAA9C6D,EALLyW,EAKKzW,QAASM,EALdmW,EAKcnW,SAAUC,EALxBkW,EAKwBlW,YACpBqW,EAAiBnW,iBAAO+V,GAE1B9Z,EAAO,CACPyB,MAAO,IACPE,OAAQ,KAGL9B,EAAkBN,YAAkB,CAACE,MAAKC,WAAUC,cAAaK,SAAjEH,eAbLgJ,EAe8BC,wBAASC,GAfvCC,EAAA1K,OAAA2U,EAAA,EAAA3U,CAAAuK,EAAA,GAeGsR,EAfHnR,EAAA,GAecoR,EAfdpR,EAAA,GAgBGqR,EAASC,YAAmB,CAACjX,aAAc5D,EAAKgE,UAAhD4W,MACAE,EAAgBC,YAAa,CAAC9a,aAA9B6a,aAECrJ,EAAcpR,sBAAY,SAACsD,GAAM,IAAAqX,EACvBJ,EAAMjX,GAAb1E,EAD8B+b,EAC9B/b,EAAEC,EAD4B8b,EAC5B9b,EACPyb,EAAa,CAACM,GAAIhc,EAAGic,GAAIhc,EAAGic,GAAIlc,EAAGmc,GAAIlc,KACxC,CAACyb,EAAc3W,IAEZ4U,GAAcvY,sBAAY,SAACsD,GAAM,IAAA0X,EACvBT,EAAMjX,GAAb1E,EAD8Boc,EAC9Bpc,EAAEC,EAD4Bmc,EAC5Bnc,EACPyb,EAAa9b,OAAAwC,EAAA,EAAAxC,CAAA,GAAI6b,EAAL,CAAgBS,GAAIlc,EAAGmc,GAAIlc,MACxC,CAACwb,EAAWC,EAAc3W,IAEvBmG,GAAY9J,sBAAY,SAACsD,GAC3B,GAAI+W,GAAaA,EAAUS,GAAKT,EAAUO,GAAK,EAAG,CAC9C,IAD8C9L,EAE1ClQ,EAAI,GAFsCwQ,EAAAC,EACvBoL,EAAaJ,IADU,IAG9C,IAAAjL,EAAA9G,MAAAwG,EAAAM,EAAArQ,KAAA0Q,MACI7Q,EAD+BkQ,EAAAvB,MAAzBhN,KACE,EAJkC,MAAAqP,GAAAR,EAAA9L,EAAAsM,GAAA,QAAAR,EAAA/K,IAM9CqV,EAA0B9a,GAE1Byb,GACAC,OAAarR,IAElB,CAACoR,EAAWC,IAEf3Q,oBAAU,WACFqQ,IACAI,EAAena,QAAU+Z,IAE9B,CAACA,IAEJ,IACIiB,GAAO,CAAC,EAAE,EAAE,GAlDdC,GAmDgBrb,EAAb+T,eAnDH,IAAAsH,GAmDU,GAnDVA,GAoDFtH,GAASA,GAAOxP,OAAO,SAAAxF,GAAC,OAAIgb,QAAuB3Q,IAAVrK,EAAEyG,MAE3C,IAAMmO,GAAYxT,sBAAY,SAACuN,GAC3B,IAAIkD,EAAS6C,YAAqB/F,EAAO1N,GADJsb,EAEzBf,EAAena,QAAtBrB,EAFgCuc,EAEhCvc,EAAEC,EAF8Bsc,EAE9Btc,EACP4R,EAAO7R,EAAIA,EACX6R,EAAO5R,EAAIA,EACXgB,EAAYqT,YAAYM,UAAU/C,GAClCpN,EAAgB,GAAAiM,OAAA9Q,OAAAwD,EAAA,EAAAxD,CACP0E,GADO,CAEXuN,MACN,CAAC5Q,EAAaqD,IAKX0H,GAAU5K,sBAAY,SAACsD,GACzBzD,EAAYM,gBAAgBkR,oBACxBxR,EAAYU,KACjB,CAACV,IAEEub,GAAkBpb,sBAAY,WAChC,IAAIiI,EAAYpI,EAAYub,kBADUC,EAE1BjB,EAAena,QAAtBrB,EAFiCyc,EAEjCzc,EAAEC,EAF+Bwc,EAE/Bxc,EACPoJ,EAAUrJ,EAAIA,EACdqJ,EAAUpJ,EAAIA,GACf,CAACgB,IAEEyb,GAAYtb,sBAAY,WAC1B,IAAIqF,EAAMxF,EAAYyb,YADUC,EAEpBnB,EAAena,QAAtBrB,EAF2B2c,EAE3B3c,EAAEC,EAFyB0c,EAEzB1c,EACPwG,EAAIzG,EAAIA,EACRyG,EAAIxG,EAAIA,GACT,CAACgB,IAEJ,IAAKA,IAAgBA,EAAY+T,OAC7B,MAAO,GAGX,IAAIhP,GACA6O,EAAArS,EAAAyD,cAAA,YACI+U,GAAanG,EAAArS,EAAAyD,cAAC2W,EAAA,EAAD,CACEnB,UAAWA,EACX1W,MAAOA,EACP/D,SAAUA,EACV2D,aAAc5D,IAE/B8T,EAAArS,EAAAyD,cAAC4W,EAAA,EAAD,CAAazW,UAAU,eAAegV,YAAaA,EAAc,CAC7Dpb,EAAGob,EAAYpb,EAAI+E,EACnB9E,EAAGmb,EAAYnb,EAAI8E,QAAUsF,GAC/BwK,EAAArS,EAAAyD,cAAC6W,EAAA,EAAD,CACEtK,YAAagK,IADf,iBAIA3H,EAAArS,EAAAyD,cAAC6W,EAAA,EAAD,CACEtK,YAAakK,IADf,WAIA7H,EAAArS,EAAAyD,cAAC6W,EAAA,EAAD,CACEtK,YAAarR,GADf,mBAIA0T,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,oBACdiP,IAAkBhS,IACf,SAAA0Z,GAAA,IAAEC,EAAFD,EAAEC,MAAOrO,EAAToO,EAASpO,MAAT,OACIkG,EAAArS,EAAAyD,cAAC6W,EAAA,EAAD,CACEtK,YAAa,kBAAMoC,GAAUjG,KAC7BqO,MAEXhC,GACAnG,EAAArS,EAAAyD,cAAA,OAAKG,UAAU,aAzEX,CAAC,EAAE,EAAE,EAAE,EAAE,GA0EL/C,IACF,SAAA4Z,GAAG,OACCpI,EAAArS,EAAAyD,cAAA,OAAKC,IAAK+W,EAAK7W,UAAU,YACtBiW,GAAKhZ,IACF,SAAA6Z,GAAG,OAAIlI,GAAW,EAAJiI,EAAQC,GAClBrI,EAAArS,EAAAyD,cAACkX,EAAD,CACEpY,MAAOA,EACPiU,QAASA,EACTC,iBAAkBA,EAClB/S,IAAS,EAAJ+W,EAAQC,EACbpX,MAAOkP,GAAW,EAAJiI,EAAQC,GACtBD,IAAKA,EAAKC,IAAKA,IAAS,SAI/CrI,EAAArS,EAAAyD,cAACmX,EAAA,EAAD,CACErY,MAAOA,EACPH,QAASA,EACTC,QAASA,EACTvD,KAAMA,EACN4D,SAAUA,EACVC,YAAaA,EACbF,UAAU,EACVjE,SAAUA,EACV2D,aAAc5D,EACdiE,WAAW,EACXzD,gBAAiBN,EAAYM,gBAC7BN,YAAaA,KACd+Z,GAAa/Z,EAAYsF,KAAKlD,IAC3B,SAAAoD,GAAG,OAAIoO,EAAArS,EAAAyD,cAACoX,EAAA,EAAD,CACPnX,IAAKO,EAAI9E,GACToD,MAAOA,EACPzD,KAAMA,EACN4D,SAAUA,EACVC,YAAaA,EACbN,QAASA,EACTD,QAASA,EACT5D,SAAUA,EACVwF,gBAAiBzF,EACjB0F,IAAKA,OAEPuU,GAAanG,EAAArS,EAAAyD,cAACqX,EAAA,EAAD,CACE3Y,aAAc5D,EACpBgE,MAAOA,EACP9D,YAAaA,KACtB+Z,GAAa/Z,EAAY+T,OAAO3R,IAC9B,SAAAyC,GAAK,OACD+O,EAAArS,EAAAyD,cAACsX,EAAA,EAAD,CACExY,MAAOA,EACPG,SAAUA,EACVC,YAAaA,EACb7D,KAAMA,EACNuD,QAASA,EACTD,QAASA,EACT5D,SAAUA,EACV2D,aAAc5D,EACd+E,MAAOA,OACfkV,GAAa/Z,EAAYsF,KACzBf,OAAO,SAAAiB,GAAG,OAAIA,EAAIyK,aAClB7N,IACE,SAAAoD,GAAG,OACCoO,EAAArS,EAAAyD,cAACuX,EAAA,EAAD,CACEzY,MAAOA,EACPG,SAAUA,EACVC,YAAaA,EACb7D,KAAMA,EACNuD,QAASA,EACTD,QAASA,EACT5D,SAAUA,EACV2D,aAAc5D,EACd0F,IAAKA,OACbuU,GAAa/Z,EAAY4Z,WAAWxX,IAClC,SAAAgG,GAAS,OACLwL,EAAArS,EAAAyD,cAACwX,EAAA,EAAD,CACEvY,SAAUA,EACVC,YAAaA,EACbqB,gBAAiBzF,EACjBgE,MAAOA,EACPzD,KAAMA,EACNuD,QAASA,EACTD,QAASA,EACT5D,SAAUA,EACVqI,UAAWA,OAG3B,OACIwL,EAAArS,EAAAyD,cAAA,OACE+F,QAASA,GACTwG,YAAaA,EACbmH,YAAaA,GACbzO,UAAWA,GACXuI,cAAeA,EACfrN,UAAW6L,EAAY,kBAAoB,uBAC3C4C,EAAArS,EAAAyD,cAACyX,EAAA,EAAD,CAASzc,YAAaA,IACtB4T,EAAArS,EAAAyD,cAAA,OACElF,IAAKA,EACL6K,MAAgC,GAChCxF,UAAU,eACT6L,EAAY4C,EAAArS,EAAAyD,cAAC0X,EAAA,EAAD,CAAY1c,YAAaA,IAAkB+E","file":"static/js/0.350e4529.chunk.js","sourcesContent":["export const SEQUENCE_ANNOTATION = 'SEQUENCE_ANNOTATION';\nexport const SEQUENCE_TAG = 'SEQUENCE_TAG';\nexport const SAMPLE_ANNOTATION = 'SAMPLE_ANNOTATION';\n\nexport const BASIC_TYPES = [\n    SEQUENCE_ANNOTATION,\n    SEQUENCE_TAG,\n    SAMPLE_ANNOTATION\n];\n","/******************************************************************************\nThis is a very simple binary tree based bin packing algorithm that is initialized\nwith a fixed width and height and will fit each block into the first node where\nit fits and then split that node into 2 parts (down and right) to track the\nremaining whitespace.\nBest results occur when the input blocks are sorted by height, or even better\nwhen sorted by max(width,height).\nInputs:\n------\n  w:       width of target rectangle\n  h:      height of target rectangle\n  blocks: array of any objects that have .w and .h attributes\nOutputs:\n-------\n  marks each block that fits with a .fit attribute pointing to a\n  node with .x and .y coordinates\nExample:\n-------\n  var blocks = [\n    { w: 100, h: 100 },\n    { w: 100, h: 100 },\n    { w:  80, h:  80 },\n    { w:  80, h:  80 },\n    etc\n    etc\n  ];\n  var packer = new Packer(500, 500);\n  packer.fit(blocks);\n  for(var n = 0 ; n < blocks.length ; n++) {\n    var block = blocks[n];\n    if (block.fit) {\n      Draw(block.fit.x, block.fit.y, block.w, block.h);\n    }\n  }\n\nTaken from: https://github.com/jakesgordon/bin-packing/blob/master/js/packer.js\n******************************************************************************/\n\nexport default class Packer {\n    constructor(w, h) {\n        this.root = { x: 0, y: 0, w: w, h: h };\n    }\n\n    fit(blocks) {\n        var n, node, block;\n        for (n = 0; n < blocks.length; n++) {\n            block = blocks[n];\n            if (node = this.findNode(this.root, block.w, block.h))\n                block.fit = this.splitNode(node, block.w, block.h);\n        }\n    }\n\n    findNode(root, w, h) {\n        if (root.used)\n            return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);\n        else if ((w <= root.w) && (h <= root.h))\n            return root;\n        else\n            return null;\n    }\n\n    splitNode(node, w, h) {\n        node.used = true;\n        node.down  = { x: node.x,     y: node.y + h, w: node.w,     h: node.h - h };\n        node.right = { x: node.x + w, y: node.y,     w: node.w - w, h: h          };\n        return node;\n    }\n    \n}\n","import React, {useCallback} from 'react';\nimport {\n    setBulkPresentationWindowPositions,\n    setBulkWindowPositions} from 'actions/index.js';\nimport Packer from './packer.js';\n\nconst PADDING = 15;\n\nexport const useArrangeWindows = ({ref, elements, subSequence, presentationMode}) => {\n    const arrangeWindows = useCallback(() => {\n        if (!elements.current) {\n            return;\n        }\n        let size = subSequence.sequencerEngine.state.windows.moduleSizes[subSequence.id];\n        let {selectedElements} = subSequence.state.windows;\n        let selected = [];\n        for (let id in selectedElements) {\n            if (selectedElements[id]) {\n                selected.push(id);\n            }\n        }\n        let blocks = [];\n        let _blocks = [];\n        for (let id in elements.current) {\n            if (selected.length > 0 && !selected.includes(id)) {\n                // only doing selected\n                continue;\n            }\n            let element = elements.current[id].current;\n            if (!element) {\n                continue;\n            }\n            let block = {\n                element,\n                id,\n                h: element.offsetHeight + PADDING,\n                w: element.offsetWidth + PADDING\n            };\n            blocks.push(block);\n            _blocks.push({... block, x: element.offsetLeft, y: element.offsetTop});\n        }\n        blocks.sort((a,b) => Math.max(b.w, b.h) - Math.max(a.w, a.h));\n        let _width = size.width || 200;\n        let _height= size.height || 200;\n        let minX,minY;\n        if (selected.length > 0) {\n            minX = Math.min(... _blocks.map(b => b.x));\n            minY = Math.min(... _blocks.map(b => b.y));\n            let maxX = Math.max(... _blocks.map(b => b.x + b.w));\n            let maxY = Math.max(... _blocks.map(b => b.y + b.h));\n            _width = maxX - minX;\n            _height = maxY - minY;\n        }\n\n        let packer = new Packer(_width, _height*2);\n        packer.fit(blocks);\n        let bulk = {};\n        for (let block of blocks) {\n            if (block.fit) {\n                if (selected.length > 0) {\n                    bulk[block.id] = {\n                        x: block.fit.x + minX,\n                        y: block.fit.y + minY,\n                    };\n                } else {\n                    bulk[block.id] = {... block.fit};\n                }\n            }\n        }\n        \n        console.log(\"BULK ARRANGING\");\n        if (presentationMode) {\n            subSequence.dispatch(\n                setBulkPresentationWindowPositions(bulk));\n        } else {\n            subSequence.dispatch(\n                setBulkWindowPositions(bulk));\n        }\n    }, [elements, subSequence, presentationMode]);\n\n    return {arrangeWindows};\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setPulledEffects\n} from 'actions/index.js';\nimport {LIVE_FX, AUDIO_FX} from 'constants/effect-types.js';\nimport {getEffectTrack} from \"utils/getEffectTrack.js\";\nimport EffectComponent from \"components/effects/EffectComponent.js\";\nimport PulledEffect from \"components/pulled/PulledEffect.js\";\nimport MidiEffectComponent from \"components/effects/MidiEffectComponent.js\";\nimport LiveEffectComponent from \"components/effects/LiveEffectComponent.js\";\n\nimport {connect} from 'react-redux';\n\nconst PulledEffects = ({\n    containerRef,\n    sizeRef,\n    setSize,\n    size,\n    all,\n    pulledEffects,\n    sequencerEngine,\n    setPulledEffects,\n    scale,\n    currentSubSequence,\n    playhead,\n    noWrapper,\n    elements,\n    ordering,\n    setOrdering,\n}) => { \n    const _elements = useRef({});\n    const onDelete = useCallback((fx) => {\n        setPulledEffects(pulledEffects.filter(f => f !== fx));\n    }, [pulledEffects]);\n\n    const shouldShow = useCallback((e) => {\n        if (!e) {\n            return false;\n        }\n        if (!getEffectTrack(e)) {\n            if (e.instrument && e.instrument.context &&\n                e.instrument.context.subSequence === currentSubSequence) {\n                return true;\n            }\n            return e.track === currentSubSequence;\n        }\n        return all || getEffectTrack(e).subSequence === currentSubSequence ||\n            getEffectTrack(e) === currentSubSequence;\n    }, [currentSubSequence, all]);\n\n\n    let _effects = pulledEffects\n        .filter(shouldShow);\n    if (playhead) {\n        //_effects.push(currentSubSequence.playhead);\n    }\n    let inner = _effects\n        .map(fx => <PulledEffect\n                     key={fx.id}\n                     isStatic={!noWrapper}\n                     scale={scale}\n                     elements={elements || _elements}\n                     sizeRef={sizeRef}\n                     setOrdering={setOrdering}\n                     ordering={ordering}\n                     containerRef={containerRef}\n                     size={size}\n                     setSize={setSize}\n                     effects={_effects}\n                     onDelete={() => onDelete(fx)}\n                     sequencerEngine={sequencerEngine}\n                     fx={fx}/>);\n    if (noWrapper) {\n        return inner;\n    }\n    return (\n        <div className=\"pulled-effects\">\n          {inner}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        pulledEffects: state.effects.pulledEffects,\n        currentSubSequence: props.subSequence || props.sequencerEngine.currentSubSequence\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setPulledEffects: e => dispatch(setPulledEffects(e)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PulledEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PadComponent from './PadComponent.js';\nimport {connect} from 'react-redux';\nimport '../../Pads2.scss';\n\nconst PadsContainer = ({pads, scrollContainer}) => { \n    return (\n        <div\n          className=\"pads-container\">\n          {pads.map(\n              (pad, i) => <PadComponent key={i} scrollContainer={scrollContainer} pad={pad}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      pads: props.subSequence ?\n          props.subSequence.pads : props.sequencerEngine.currentSubSequence.pads\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadsContainer);\n","import {web3} from 'decentralized/web3.js';\n\nconst blocksPerDay = 6600;\nconst hop = 198000;\n\nexport const getBlockMonths = async () => {\n    let currentBlockNumber = await web3.eth.getBlockNumber();\n    let block = null;\n    let date = new Date();\n    let day = date.getDate();\n    let month = date.getMonth();\n    currentBlockNumber -= day * 6000;\n\n    let currentMonth = month;\n    let months = {};\n    for (let i=0; i < 12; i++) {\n        block = await web3.eth.getBlock(currentBlockNumber);\n        date = new Date(block.timestamp * 1000);\n        let d = new Date(date.getFullYear(), date.getMonth(), 0).getDate();;\n        months[currentMonth--] = currentBlockNumber;\n        currentBlockNumber -= blocksPerDay * d;\n    }\n    return months;\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {setShowEnvelopes} from 'actions/index.js';\nimport {setShowLFOs} from 'actions/index.js';\nimport {\n    setPresentationMode,\n    setUXLocked,\n    setShowModulators,\n    setZObjectTypeDragging} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst ZObjectToolbar = ({\n    setPresentationMode,\n    presentationMode,\n    showPadSequencer,\n    setShowEnvelopes,\n    showLFOs,\n    showEnvelopes,\n    setShowLFOs,\n    children,\n    subpatch,\n    subSequence,\n    setTypeDragging,\n    setUXLocked,\n    setShowModulators,\n    uxLocked}) => { \n\n    let [expand, setExpand] = useState(undefined);\n    let [hover, setHover] = useState(undefined);\n    let counter = useRef(0);\n\n\n    useEffect(() => {\n        if (expand) {\n            window.addEventListener(\"mouseup\", onMouseUp);\n        } else {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n        }\n        return () => window.removeEventListener(\"mouseup\", onMouseUp);\n    }, [expand, setExpand]);\n\n    const onMouseUp = useCallback(() => {\n        setExpand(undefined);\n    }, [expand, setExpand]);\n\n    const drag = useCallback((type) => {\n        setTypeDragging(type);\n        setHover(undefined);\n        if (!type.includes(\"LFO\") && !type.includes(\"MODULE_ENVELOPE\")) {\n            setExpand(undefined);\n        }\n        counter.current++;\n    }, [setExpand, setHover]);\n\n    const onHover = useCallback((type) => {\n        let _count = counter.current;\n        setTimeout(() => {\n            if (_count !== counter.current) {\n                return;\n            }\n            setHover(type);\n        }, 250);\n    }, [setHover]);\n\n    const onLeave = useCallback(() => {\n        counter.current++;\n        setHover(undefined);\n    }, []);\n\n    const toggleLocked = useCallback(() => {\n        setUXLocked(!uxLocked);\n    }, [uxLocked]);\n\n    const togglePresentationMode = useCallback(() => {\n        setPresentationMode(!presentationMode);\n    }, [presentationMode]);\n\n\n    let hoverText = \"\";\n    let left = 0;\n    if (hover) {\n        switch (hover) {\n        case \"zobject\":\n            hoverText = \"Drag an object into the canvas\";\n            left=0;\n            break;\n        case \"zmessage\":\n            hoverText = \"Drag a message box into the canvas\";\n            left=1;\n            break;\n        case \"zcomment\":\n            hoverText = \"Drag a comment box into the canvas\";\n            left=2;\n            break;\n        case \"zbutton\":\n            hoverText = \"Drag a button into the canvas\";\n            left=3;\n            break;\n        case \"ztoggle\":\n            hoverText = \"Drag a toggle into the canvas\";\n            left=5;\n            break;\n        case \"znumber\":\n            hoverText = \"Drag a number button into the canvas\";\n            left=6;\n            break;\n        case \"zpad\":\n            hoverText = \"Drag a drum pad into the canvas\";\n            left=5;\n            break;\n        case \"sequencer\":\n            hoverText = \"Drag a step sequencer into the canvas\";\n            left=7;\n            break;\n        case \"zlock\":\n            hoverText = \"Toggle the UI to lock in place or be editable\";\n            left=8;\n            break;\n        }\n    }\n\n        let className =\"zobject-toolbar\";\n        if (showPadSequencer) {\n            className += \" showing-pad-sequencer\";\n        }\n\n    return (\n        <div className={className}>\n          {hover && <div className=\"toolbar-tooltip\" style={{left: left*25}}>{hoverText}</div>}\n          <ZImg\n            onMouseOver={() => onHover(\"zobject\")}\n            onMouseLeave={onLeave}\n            hideOnPadSequencer={true}\n            draggable=\"true\"\n            onDragStart={() => drag(\"zobject\")}\n            src=\"/zobject-light.svg\"/>\n          <ZImg\n            onMouseLeave={onLeave}\n            hideOnPadSequencer={true}\n            onMouseOver={() => onHover(\"zmessage\")}\n            draggable=\"true\"\n            onDragStart={() => drag(\"zmessage\")}\n            src=\"/zmessage-light.svg\"/>\n          <ZImg\n            onMouseLeave={onLeave}\n            hideOnPadSequencer={true}\n            onMouseOver={() => onHover(\"zcomment\")}\n            draggable=\"true\"\n            onDragStart={() => drag(\"zcomment\")}\n            src=\"/zcomment-light.svg\"/>\n          <ZImg\n            draggable=\"true\"\n            hideOnPadSequencer={true}\n            onMouseLeave={onLeave}\n            onMouseOver={() => onHover(\"zbutton\")}\n            onDragStart={() => drag(\"zbutton\")}\n            src=\"/zbutton-light.svg\"/>\n          <ZImg\n            draggable=\"true\"\n            onMouseLeave={onLeave}\n            hideOnPadSequencer={true}\n            onMouseOver={() => onHover(\"ztoggle\")}\n            onDragStart={() => drag(\"ztoggle\")}\n            src=\"/ztoggle-light.svg\"/>\n          <ZImg\n            draggable=\"true\"\n            onMouseLeave={onLeave}\n            hideOnPadSequencer={true}\n            onMouseOver={() => onHover(\"znumber\")}\n            onDragStart={() => drag(\"znumber\")}\n            src=\"/znumber-light.svg\"/>\n          {!subpatch && <ZImg\n            draggable=\"true\"\n            onMouseLeave={onLeave}\n            hideOnPadSequencer={true}\n            onMouseOver={() => onHover(\"zpad\")}\n            onDragStart={() => drag(\"zpad\")}\n                            src=\"/zpad-light.svg\"/>}\n         {!subpatch &&\n           <ZImg\n             className={showLFOs ? \"expanded\" : \"\"}\n             expanded={showLFOs}\n             draggable=\"false\"\n             onClick={() => setShowLFOs(!showLFOs)}\n             src=\"/zlfo-light.svg\"/>}\n          {!subpatch &&\n           <ZImg\n             draggable=\"false\"\n             expanded={showEnvelopes}\n             className={showEnvelopes ? \"expanded\" : \"\"}\n             onClick={() => setShowEnvelopes(!showEnvelopes)}\n             src=\"/zenvelope-light.svg\"/>}\n          {expand && <ModulatorExpansion drag={drag} subSequence={subSequence} type={expand}/>}\n          <ZImg \n            onClick={togglePresentationMode}\n            expanded={presentationMode}\n            onMouseOver={() => onHover(\"zlock\")}\n            hideOnPadSequencer={true}\n            onMouseLeave={onLeave}\n            className=\"presentation-icon\"\n            src={\"/presentation-mode.svg\"}/>\n          <ZImg \n            onClick={toggleLocked}\n            onMouseOver={() => onHover(\"zlock\")}\n            hideOnPadSequencer={true}\n            onMouseLeave={onLeave}\n            expanded={uxLocked} \n            src={uxLocked ? \"/zlock-closed.svg\" : \"/zlock-open.svg\"}/>\n          {subpatch && children} \n        </div>);\n}\n\nconst ZImg = (props) => {\n    let className = \"ztoolbar-option  \";\n    if (props.expanded) {\n        className += \" selected\";\n    }\n    if (props.hideOnPadSequencer) {\n        className += \" hide-on-pad-sequencer\";\n    }\n    return (\n        <div\n          {... props}\n          className={className}>\n          <img {...props}/>\n        </div>\n    );\n};\nconst ModulatorExpansion = ({subSequence, type, drag}) => {\n    let numbers = [1,2,3,4];\n    return (\n        <div className=\"modulator-expansion\">\n          <div className=\"modulator-type\">\n            {type === \"MODULE_ENVELOPE\" ? \"Envelopes\" : \"LFOs\"}\n          </div>\n        {numbers.map(\n            x => <div\n                   draggable={true}\n                   onDragStart={() => drag(type + \" \" + x)}\n                   className=\"modulator-number\">{x}</div>)}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      uxLocked: state.zobject.uxLocked,\n      showLFOs: state.sequencer.showLFOs,\n      showEnvelopes: state.sequencer.showEnvelopes,\n      showPadSequencer: state.spatial.showPadSequencer,\n      presentationMode: state.spatial.presentationMode,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowEnvelopes: s => dispatch(setShowEnvelopes(s)),\n      setShowLFOs: s => dispatch(setShowLFOs(s)),\n      setTypeDragging: x => dispatch(setZObjectTypeDragging(x)),\n      setUXLocked: x => dispatch(setUXLocked(x)),\n      setShowModulators: x => dispatch(setShowModulators(x)),\n      setPresentationMode: x => dispatch(setPresentationMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectToolbar);\n","import React, {useEffect, useState, useCallback} from 'react';\nimport {web3} from 'decentralized/web3.js';\nimport {bytes32ToIPFSHash, ipfsHashToBytes32} from 'utils/ipfsHash.js';\nimport {SEQUENCE_ANNOTATION} from 'constants/annotation-types.js';\nimport {connect} from 'react-redux';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport ipfs from 'decentralized/Ipfs.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport { Input } from 'reactstrap';\n\nconst contentCache = {};\n\nconst AnnotationEditor = ({\n    work,\n    contentId=work && work.newSequence,\n    numPending,\n    linkType=SEQUENCE_ANNOTATION,\n    color}) => {\n    const [text, setText] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [annotations, setAnnotations] = useState([]);\n\n    const onChange = useCallback((e) => {\n        setText(e.target.value);\n    }, [setText]);\n\n    const submit = useCallback(() => {\n        ethereum.xanadu.newAnnotationContent(\n            linkType,\n            contentId,\n            text)\n            .then(x => setLoading(true));\n        setText('');\n        setLoading(true);\n    }, [contentId, text, setText, setLoading]);\n\n    useEffect(() => {\n        if (!contentId) {\n            return;\n        }\n        ethereum.xanadu.getAnnotations(\n            linkType,\n            contentId)\n            .then(a => {\n                setAnnotations(a);\n            });\n    }, [contentId, setAnnotations, numPending]);\n\n        let style = {\n        };\n        if (color) {\n            style.backgroundColor = color;\n        }\n    return (\n        <div>\n          <Input\n            style={style}\n            className=\"annotation-text\" onChange={onChange} type=\"textarea\" value={text}/>\n          <div\n            style={style}\n            onClick={submit} className=\"submit-button\">\n            Annotate\n          </div>\n          <div\n            style={style}\n            className=\"annotations\">\n            <PulseLoader\n              sizeUnit={\"px\"}\n              size={10}\n              color={'#42f4f1'}\n              loading={numPending > 0}\n            />\n \n            {annotations.map(\n                a =>\n                    <Annotation\n                      style={style}\n                      key={a.annotationData}\n                      annotation={a}/>)}\n          </div>\n        </div>\n    );\n};\n\nconst Annotation = ({annotation, style}) => {\n    const [content, setContent] = useState('');\n    const [userName, setUserName] = useState('');\n    useEffect(() => {\n        let h = web3.utils.fromAscii(annotation.annotationData);\n        let hash = bytes32ToIPFSHash(h);\n        if (contentCache[hash]) {\n            setContent(contentCache[hash]);\n        } else {\n            ipfs.getJson(hash)\n                .then(s => {\n                    contentCache[hash] = s;\n                    setContent(s);\n                });\n        }\n\n        ethereum.users.getUserName(annotation.address)\n            .then(n => setUserName(n));\n\n    }, [annotation, setContent, setUserName]);\n\n    return (\n        <div\n          style={style}\n          className=\"annotation\">\n          <div className=\"author\">\n            {userName}: \n          </div>\n          <div className=\"content\">\n            {content}\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        numPending: state.transactions.pendingTransactions.length\n   }\n};\n\nexport default connect(mapStateToProps, null)(AnnotationEditor);\n\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport '../../../Months.scss';\n\nconst MONTHS = {\n    0: \"January\",\n    1: \"February\",\n    2: \"March\",\n    3: \"April\",\n    4: \"May\",\n    5: \"June\",\n    6: \"July\",\n    7: \"August\",\n    8: \"September\",\n    9: \"October\",\n    10: \"November\",\n    11: \"December\",\n};\n\nconst Months = ({currentMonth, onClickMonth, months}) => { \n    let month = new Date().getMonth();\n    let year = new Date().getFullYear();\n    let m = [];\n    let keys = Object.keys(months).map(x => parseInt(x)).sort((a, b) => b - a);\n    keys = [... keys, ... keys].slice(0, 12);\n    for (let i of keys) {\n        m.push({\n            number: i,\n            month: MONTHS[(12 + i) % 12],\n            isCurrent: i === currentMonth\n        });\n        if (i % 12 === 0) {\n            m.push({\n                number: i - 1,\n                year: --year\n            });\n        }\n    }\n\n    return (\n        <div className=\"months\">\n          {m.map(\n              ({month, number, isCurrent,year}) =>\n                  year ?\n                  <div\n                    onClick={() => onClickMonth(number)}\n                    className=\"month year\">{year}</div> :\n                   <div\n                     onClick={() => onClickMonth(number)}\n                     className={isCurrent ? \"month current\" : \"month\"}>\n                     {month}\n                   </div>\n                  )}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Months);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Edge from \"./Edge.js\";\nimport Speakers from \"components/pulled/Speakers.js\";\nimport AllEdges from './AllEdges.js';\nimport PadEffectControl from './PadEffectControl.js';\nimport PulledEffect from \"components/pulled/PulledEffect.js\"\nimport {connect} from 'react-redux';\n\nconst TrackMidiEffects = ({\n    track,\n    effects,\n    isCollapsed,\n    ... props\n}) => { \n    const onDelete = useCallback((fx) => {\n        track.effectRack.deleteEffect(fx);\n        track.updateMidiEffectsRedux();\n    }, []);\n\n    if ((!track.effectRack || !track.zObject) || isCollapsed) { \n        return [];\n    }\n    return [\n        <Speakers\n          isMidi={true}\n          key={5}\n          pad={track}\n          {...props}\n        />,\n        , ...\n            track.effectRack.effects.map(\n                effect => \n                    <PulledEffect\n                      onDelete={onDelete}\n                      key={effect.id}\n                      fx={effect}\n                      rack={track.effectRack}\n                      showDelete={true}\n                      sequencerEngine={track.sequencerEngine}\n                      pad={track}\n                      {...props}\n                    />)\n        ];\n};\n\nconst mapStateToProps = (state, props) => {\n    let rackId = props.track.effectRack &&\n        props.track.effectRack.id;\n    return {\n        effects: state.pads.trackMidiEffects[props.track.id],\n        isCollapsed: state.effects.effectCollapsed[rackId]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackMidiEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ZObjectToolbar from './ZObjectToolbar.js';\nimport {ChromePicker} from 'react-color';\nimport PatternsComponent from \"components/toolbar/PatternsComponent.js\";\nimport {setModuleColor, setModuleCollapsed} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport '../../Modules.scss';\n\nconst GridTab = ({subSequence, collapsed, isCurrent, setCollapsed, setModuleColor}) => { \n    let [color, setColor] = useState(subSequence.color);\n    let [showColor, setShowColor] = useState(false);\n\n    const onChangeColor = useCallback((color) => {\n        subSequence.color = color.hex;\n        setColor(color.hex);\n        setModuleColor(color.hex);\n    }, [subSequence, setColor]);\n\n    let className=\"module-tab grids-name\";\n    if (isCurrent) {\n        className += \" selected\";\n    }\n\n    const onMouseDown = useCallback(() => {\n        subSequence.sequencerEngine.switchToSubSequence(subSequence.id);\n    }, [subSequence]);\n    return (\n        <div\n          onMouseDown={onMouseDown}\n          className={className}>\n          {subSequence.name}\n          {/*          <PatternsComponent\n            sequencerEngine={subSequence.sequencerEngine}\n            subSequenceId={subSequence.id} subSequence={subSequence}/>\n\n          <div\n            onClick={() => setShowColor(!showColor)}\n            style={{backgroundColor: color}} className={showColor ? \"color-btn showing\" : \"color-btn\"}></div> \n\n          {showColor &&\n           <ChromePicker color={color} onChange={onChangeColor}></ChromePicker>}\n*/}\n          {!collapsed && <ZObjectToolbar subSequence={subSequence}/>}\n          <div onClick={() => setCollapsed(!collapsed)} className=\"collapse-button\">\n            <div className={collapsed ? \"arrow-left\" : \"arrow-down\"}/>\n          </div>\n        </div>);\n      \n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      collapsed: state.pads.modulesCollapsed[props.subSequence.id],\n      isCurrent: props.subSequence === props.subSequence.sequencerEngine.currentSubSequence\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setCollapsed: (x) => dispatch(setModuleCollapsed(props.subSequence.id, x)),\n      setModuleColor: (x) => dispatch(setModuleColor(props.subSequence.id, x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GridTab);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Edge from './Edge.js';\nimport OutputNode from './OutputNode.js';\nimport MessageInlets from '../messaging/MessageInlets.js';\nimport MessageOutlets from '../messaging/MessageOutlets.js';\nimport {useWindowManager} from \"components/windows/useWindowManager.js\";\nimport {setSelectedZObject} from 'actions/index.js';\nimport PadComponent from \"components/pads/PadComponent.js\";\nimport {connect} from 'react-redux';\n\nconst PulledPad = ({\n    hidden,\n    setOrdering,\n    ordering,\n    scale,\n    pad,\n    scrollContainer,\n    elements,\n    sizeRef,\n    size,\n    setSize,\n    isCurrent,\n    padsExpand,\n    coords,\n    isSelected,\n    setSelectedZObject,\n    isSelectedZObject\n}) => { \n    const ref = useRef(undefined);\n    const {style, onContextMenu, onMouseDown, onMouseUp, setCoords} = useWindowManager({\n        scale,\n        ref,\n        sequencerEngine: pad.sequencerEngine,\n        windowPosition: coords,\n        sizeRef,\n        containerRef: scrollContainer,\n        size,\n        setSize,\n        elements,\n        element: pad,\n        isPad: true,\n        expand: padsExpand,\n        setOrdering,\n        ordering,\n    });\n\n    useEffect(() => {\n        if (coords) {\n            pad.x = coords.x;\n            pad.y = coords.y;\n        }\n    }, [coords]);\n\n    let className = \"pulled-pad\";\n    if (isCurrent) {\n        className += \" current\";\n    }\n    if (isSelected) {\n        className += \" selected\";\n    }\n    let _style = {\n        ... style,\n    };\n    if (coords) {\n        _style.left = coords.x;\n        _style.top =  coords.y;\n    }\n\n    if (padsExpand && padsExpand.pad === pad) {\n        className += \" expanded\";\n    }\n\n    if (hidden) {\n        return '';\n    }\n    return (\n        <div\n          style={_style}\n          onMouseDown={(e) => {\n              //setSelectedZObject(pad);\n              onMouseDown(e);\n          }}\n          onContextMenu={onContextMenu}\n          onMouseUp={onMouseUp}\n          ref={ref} className={className}>\n          <PadComponent isPulled={true} scrollContainer={scrollContainer} pad={pad}/>\n          <OutputNode\n            isRoot={true}\n            useClick={true} hideNumber={true} sequencerEngine={pad.sequencerEngine} node={pad}/>\n          <MessageInlets effect={pad}/>\n          <MessageOutlets subSequence={pad.subSequence} containerRef={scrollContainer} effect={pad}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      coords: state.windows.windowPositions[props.pad.id],\n      hidden: state.spatial.hiddenObjects[props.pad.id],\n      isSelectedZObject: state.zobject.selectedZObject === props.pad,\n      isSelected: state.windows.selectedElements[props.pad.id],\n      isCurrent: props.pad.subSequence === props.pad.sequencerEngine.currentSubSequence,\n      padsExpand: state.pads.padsExpand\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PulledPad);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {addEffect} from 'operations/actions.js';\nimport Dropdown from 'react-dropdown';\nimport {\n    midiEffectOptions,\n    getEffectOption,\n    initializeMidiEffect} from 'components/effects/constants.js';\nimport MidiEffectComponent from \"components/effects/MidiEffectComponent.js\";\nimport {connect} from 'react-redux';\n\nconst MidiEffectsOverview = ({track, pulledEffects}) => { \n    let [effects, setEffects] = useState(track.midiEffects.effects);\n    \n    const chooseEffect = useCallback((name) => {\n        var effect = initializeMidiEffect(name, track)\n        track.sequencerEngine.operationManager.dispatch(\n            addEffect(effect, track));\n        setEffects([... track.midiEffects.effects]);\n    }, [setEffects, effects, track]);\n\n    const onDelete = useCallback(() => {\n        setEffects([... track.midiEffects.effects]);\n    }, [effects, setEffects]);\n\n    return (\n        <div className=\"effects-overview\">\n          {effects.map(\n              effect => \n                  <MidiEffectComponent\n                    sequencerEngine={track.sequencerEngine}\n                    isPulled={pulledEffects.includes(effect)}\n                    key={effect.id}\n                    onDeleteEffect={onDelete} \n                    effect={effect}\n                    track={track}\n                    tracks={track.sequencerEngine.tracks}\n                    onEffectsChange={() => []}/>)}\n          <div className=\"add-effect-type\">\n            <Dropdown\n              className='delay-time-dropdown'\n              option={undefined}\n              options={midiEffectOptions}\n              onChange={(o) => chooseEffect(o.value)}\n              placeholder=\"MIDI FX\" />\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      pulledEffects: state.effects.pulledEffects\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MidiEffectsOverview);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport PadWaveform from \"components/pads/PadWaveform.js\";\nimport RackSynthComponent from \"components/instruments/RackSynthComponent.js\"\nimport {connect} from 'react-redux';\nimport {MULTI_SYNTH} from 'constants/instrument-types.js';\nimport {INSTRUMENT, SAMPLER} from 'constants/track-types.js';\n\nconst InstrumentOverview = ({track}) => { \n    let ref = useRef(undefined);\n    let inner = '';\n    if (track.getTrackType() === SAMPLER) {\n        inner = (\n            <PadWaveform div={ref} pad={track} _track={track}/>\n        );\n    } else if (track.getTrackType() === INSTRUMENT &&\n        track.getInstrumentType() === MULTI_SYNTH) {\n        inner = (\n          <RackSynthComponent\n            sequencerEngine={track.sequencerEngine}\n            track={track} instrument={track.instrument}/>\n        );\n    }\n    return (\n        <div ref={ref} className=\"instrument-overview\">\n          {inner}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstrumentOverview);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {addEffect} from 'operations/actions.js';\nimport Dropdown from 'react-dropdown';\nimport {\n    effectOptions,\n    getEffectOption,\n    initializeEffect} from 'components/effects/constants.js';\nimport EffectComponent from \"components/effects/EffectComponent.js\"\nimport {connect} from 'react-redux';\n\nconst EffectsOverview = ({track, pulledEffects}) => { \n    let [effects, setEffects] = useState(track.effects);\n    \n    const chooseEffect = useCallback((name) => {\n        var effect = initializeEffect(name, track.sequencerEngine)\n        effect.enable(true);\n        track.sequencerEngine.operationManager.dispatch(\n            addEffect(effect, track));\n        setEffects([... track.effects]);\n    }, [setEffects, effects, track]);\n\n    const onDelete = useCallback(() => {\n        setEffects([... track.effects]);\n    }, [effects, setEffects]);\n\n    return (\n        <div className=\"effects-overview\">\n          {effects.map(\n              effect => \n                  <EffectComponent\n                    sequencerEngine={track.sequencerEngine}\n                    isPulled={pulledEffects.includes(effect)}\n                    key={effect.id}\n                    onDeleteEffect={onDelete} \n                    effect={effect}\n                    track={track}\n                    tracks={track.sequencerEngine.tracks}\n                    onEffectsChange={() => []}/>)}\n          <div className=\"add-effect-type\">\n            <Dropdown\n              className='delay-time-dropdown'\n              option={undefined}\n              options={effectOptions}\n              onChange={(o) => chooseEffect(o.value)}\n              placeholder=\"Audio FX\" />\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      pulledEffects: state.effects.pulledEffects\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectsOverview);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport MidiEffectsOverview from \"components/pulled/MidiEffectsOverview.js\";\nimport InstrumentOverview from './InstrumentOverview.js';\nimport EffectsOverview from './EffectsOverview.js';\nimport {getTrackShortName} from 'utils/getTrackShortName.js';\nimport {setTrackDragging} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst INST = 'INST';\nconst A_FX = 'A_FX';\nconst M_FX = 'M_FX';\n\nconst TrackOverview = ({track, isSelected, isEnabled, setTrackDragging, setExpandTrack, numEffects}) => { \n    let name =  getTrackShortName(track, track.sample);\n    let [show, setShow] = useState(undefined);\n    let className = \"tr-overview\";\n    if (isSelected) {\n        className += \" selected\";\n    }\n\n    useEffect(() => {\n        if (show) {\n            setExpandTrack({id: track.id, numEffects: numEffects});\n        } else {\n            setExpandTrack(undefined);\n        }\n    }, [numEffects, show, setExpandTrack, track]);\n\n    const selectTrack = useCallback(() => {\n        track.sequencerEngine.selectTrack(track.trackNumber);\n    }, [track]);\n\n    return (\n        <div\n          onClick={selectTrack}\n          className={className}>\n          <div className=\"tr-inner\">\n            <div className=\"track-number\">{track.trackNumber + 1}</div>\n            <div\n              onClick={() => track.toggleEnabled()}\n              className={isEnabled ? \"dot enabled\" : \"dot\"}/>\n            {/*\n            <div className=\"patt\">patt.</div>\n            <img className=\"right-arr\" src=\"/right-arrow.svg\"/>\n             */}\n            <div\n              onClick={() => setShow(show === M_FX ? undefined : M_FX)}\n              className={show === M_FX ? \"m-fx showing\" : \"m-fx\"}>m. fx</div>\n            <img className=\"right-arr\" src=\"/right-arrow.svg\"/>\n            <div\n              draggable={true}\n              onMouseDown={(e) => e.stopPropagation()}\n              onDragStart={(e) => {\n                  e.stopPropagation();\n                  setTrackDragging(track);\n              }}\n              onDragOver={(e) => e.preventDefault()}\n              onClick={() => setShow(show === INST ? undefined : INST)}\n              style={{backgroundColor: track.color}}\n              className={show === INST ? \"inst showing\" : \"inst\"}>{name}</div>\n            <img className=\"right-arr\" src=\"/right-arrow.svg\"/>\n            <div\n              onClick={() => setShow(show === A_FX ? undefined : A_FX)}\n              className={show === A_FX ? \"a-fx showing\" : \"a-fx\"}>fx</div>\n          </div>\n          {show === INST && <InstrumentOverview track={track}/>}\n          {show === A_FX && <EffectsOverview track={track}/>}\n          {show === M_FX && <MidiEffectsOverview track={track}/>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    let track = props.track;\n    if (track && track.tracks && track.tracks[0]) {\n        track = track.tracks[0].track;\n    }\n    let isSelected = state.mix.selectedTrack === props.track.trackNumber &&\n        props.track.sequencerEngine.currentSubSequence ===\n        props.track.subSequence;\n\n    let enabledMap = state.tracks.trackIsEnabled[props.track.subSequence.id] || {};\n    let isEnabled = enabledMap[props.track.id]; \n\n    return {\n        isSelected,\n        id: track === undefined ? 0 :\n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.presetName || track.getName(),\n        isEnabled,\n        numEffects: track.effects.length\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackDragging: x => dispatch(setTrackDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackOverview);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport TrackOverview from './TrackOverview.js';\nimport {useWindowManager} from \"components/windows/useWindowManager.js\"\nimport {connect} from 'react-redux';\nimport '../../ModuleOverview.scss';\n\nconst PulledOverview = ({\n    setOrdering,\n    ordering,\n    scale,\n    subSequence,\n    scrollContainer,\n    elements,\n    sizeRef,\n    size,\n    setSize,\n    isCurrent,\n    padsExpand,\n    coords,\n    isSelected\n}) => { \n    const ref = useRef(undefined);\n    const [expandTrack, setExpandTrack] = useState(undefined);\n    const {style, onContextMenu, onMouseDown, onMouseUp, setCoords} = useWindowManager({\n        scale,\n        ref,\n        sequencerEngine: subSequence.sequencerEngine,\n        windowPosition: coords,\n        sizeRef,\n        expand: expandTrack ? subSequence.tracks.length + expandTrack.id + expandTrack.numEffects : subSequence.tracks.length,\n        containerRef: scrollContainer,\n        size,\n        setSize,\n        elements,\n        element: subSequence,\n        setOrdering,\n        ordering,\n    });\n\n    useEffect(() => {\n        if (coords) {\n            subSequence.x = coords.x;\n            subSequence.y = coords.y;\n        }\n    }, [coords]);\n\n    let _style = {... style};\n    if (coords) {\n        _style = {\n            ... style,\n            top: coords.y,\n            left: coords.x\n        };\n    }\n\n    return (\n        <div\n          style={_style}\n          className=\"module-overview\"\n          onMouseDown={onMouseDown}\n          onMouseUp={onMouseUp}\n          ref={ref}>\n       {subSequence.tracks.map(\n           track => <TrackOverview setExpandTrack={setExpandTrack} track={track}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      coords: state.windows.windowPositions[props.subSequence.id],\n      numTracks: props.subSequence.tracks && props.subSequence.tracks.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PulledOverview);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport {setParameterSliderDown} from \"actions/index.js\";\nimport {connect} from 'react-redux';\n\nconst MIN = -65;\nconst MIN_TIME = 250;\n\nconst Grid = ({\n    track,\n    playing,\n    notesTriggered,\n    setParameterSliderDown,\n    toggled,\n    setSelectedTrack\n}) => { \n    let disabled = track.disabled;\n    let [hovered, setHovered] = useState(true);\n    let ref = useRef(undefined);\n    let [pt, setPt] = useState(undefined);\n    let [mouseDown, setMouseDown] = useState(false);\n    let [moved, setMoved] = useState(false);\n    let lastClick = useRef(0);\n\n    let className = \"grid\";\n    if (playing) {\n        className += \" pressed\";\n    }\n    if (disabled) {\n        className += \" disabled\";\n    }\n    let style = {};\n    let note = notesTriggered && Object.keys(notesTriggered)[0]\n    if (note) {\n        note = parseInt(note);\n        style.filter = 'hue-rotate(' + note*4 + 'deg)'; \n    }\n\n    const onMouseMove = useCallback((e) => {\n        if (!mouseDown) {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        \n        let clientY = e.clientY;\n        if (e.touches) {\n            clientY = e.touches[0].clientY;\n        }\n        let el = ref.current.getBoundingClientRect();\n        let height = ref.current.offsetHeight;\n        let y = height - (clientY - el.top);\n        let vol = getVolume(y, MIN, 6, height);\n        track.setVolume(vol, false, false);\n        setMoved({x: e.clientX, y: e.clientY});\n    }, [setMoved, mouseDown, track]);\n\n    let innerStyle = {\n        height: getHeight(track.volumeParameter.get(), MIN, 6, ref.current && ref.current.offsetHeight)\n    };\n    \n    const onMouseDown = useCallback((e) => {\n        if (toggled) {\n            setSelectedTrack(track);\n            return;\n        }\n        setParameterSliderDown(track.volumeParameter);\n        setMouseDown(true);\n        setPt({x: e.clientX, y: e.clientY});\n        lastClick.current = new Date().getTime();\n    }, [setMouseDown, setPt, toggled, setSelectedTrack, track]);\n\n    const onMouseUp = useCallback((e) => {\n        let now = new Date().getTime();\n        let d = moved && dist(pt, moved);\n        if (!moved || dist(pt, moved) <= 8) {\n            if (now - lastClick.current < MIN_TIME) {\n                track.disabled = !track.disabled;\n            }\n        }\n        setMoved(undefined);\n        setMouseDown(false);\n        setParameterSliderDown(undefined);\n    }, [setMoved, setMouseDown, moved, pt]);\n\n    useEffect(() => {\n        ref.current.addEventListener('touchmove', onMouseMove, { capture: true });\n    }, [onMouseMove, setMoved, mouseDown, track]);\n\n    return (\n        <div\n          ref={ref}\n          onMouseMove={onMouseMove}\n          onMouseDown={onMouseDown}\n          onTouchStart={onMouseDown}\n          onMouseUp={onMouseUp}\n          onMouseLeave={() => {\n              setMouseDown(false);\n              setMoved(undefined);\n              setParameterSliderDown(undefined);\n          }}\n          style={style}\n          className={className}>\n          {hovered ? <TrackThumbnail\n                       onMouseDown={(e) => e.stopPropagation()}\n                       showPresetName={true} track={track}/> : ''}\n          <div className={mouseDown ? \"volume-indicator\"  : \"volume-indicator skinny\"} style={innerStyle}/>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      playing: props.track.notesTriggered && Object.keys(props.track.notesTriggered).length > 0,\n      notesTriggered: props.track.notesTriggered,\n      disabled: props.track.disabled,\n      volume: !props.track.sequencerEngine.playing ? props.track.volumeParameter.get() : props.track.pattern.volume\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setParameterSliderDown: parameter => dispatch(setParameterSliderDown(parameter)),\n  };\n};\n\nfunction getVolume(x, min=-40, max=6, height) {\n    x = Math.min(Math.max(0, x), height);\n    let ratio = x / height;\n    let fullRatio = Math.pow(ratio, 0.5);\n    return min + (max - min) * fullRatio;\n}\n\nfunction getHeight(volume, min=-40, max=6, height) {\n    let ratio = getVolumeRatio(volume, min, max, height);\n    return height * Math.pow(ratio, 2);\n}\n\nfunction getVolumeRatio(volume, min=-40, max=6) {\n    return (volume - min) / (max - min);\n}\n\nconst sq = (x) => x*x;\nconst sqrt = (x) => Math.sqrt(x);\n\nconst dist = (pt1, pt2) => {\n    return Math.abs(pt1.y - pt2.y);\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Grid);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport PulledOverview from 'components/pulled/PulledOverview.js';\nimport ModuleSys5 from \"components/system5/ModuleSys5.js\";\nimport TrackMidiEffects from 'components/pulled/TrackMidiEffects.js';\nimport GridTab from 'components/pulled/GridTab.js';\nimport {useContainerCoords} from 'components/hooks/useContainerCoords.js';\nimport {useSelection} from \"components/windows/useSelection.js\";\nimport {\n    setModuleSize,\n    setSelectedPulledElements} from 'actions/index.js';\nimport PulledBackground from 'components/spatial/PulledBackground.js';\nimport PadEffects from 'components/pulled/PadEffects.js';\nimport GlobalEdges from 'components/pulled/GlobalEdges.js';\nimport PulledSequencer from 'components/pulled/PulledSequencer.js';\nimport PulledPad from 'components/pulled/PulledPad.js';\nimport PadsContainer from \"components/pads/PadsContainer.js\";\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\";\nimport {midiEffectOptions, initializeMidiEffect}  from 'components/effects/constants.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport {setPulledEffects} from 'actions/index.js';\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport PulledEffects from \"components/pulled/PulledEffects.js\";\nimport Grid from './Grid.js';\nimport {connect} from 'react-redux';\nimport '../../../ExploreGrid.scss';\n\nconst Grids = ({\n    setSize,\n    isExplore,\n    scale,\n    showEffects,\n    pulledEffects,\n    setPulledEffects,\n    setSelectedPulledElements,\n    toggled,\n    setSelectedTrack,\n    subSequence,\n    collapsed\n}) => { \n\n    const ref = useRef(undefined);\n    const elements = useRef({});\n    const {onContextMenu, dropdownPos, setDropdowPos} = useContextMenu({ref});\n    const {sizeRef, ordering, setOrdering} = useWindows({ref});\n    const dropdownPosRef = useRef(dropdownPos);\n\n    let size = {\n        width: 500,\n        height: 500\n    };\n\n    const {arrangeWindows} = useArrangeWindows({ref, elements, subSequence, size});\n\n    let [selection, setSelection] = useState(undefined);\n    let {getXY} = useContainerCoords({containerRef: ref, scale});\n    let {getSelection} = useSelection({elements});\n\n    const onMouseDown = useCallback((e) => {\n        let {x,y} = getXY(e);\n        setSelection({x1: x, y1: y, x2: x, y2: y});\n    }, [setSelection, scale]);\n\n    const onMouseMove = useCallback((e) => {\n        let {x,y} = getXY(e);\n        setSelection({...selection, x2: x, y2: y});\n    }, [selection, setSelection, scale]);\n\n    const onMouseUp = useCallback((e) => {\n        if (selection && selection.x2 - selection.x1 > 1) {\n            let selectedElements = getSelection(selection);\n            let x = {};\n            for (let {id} of selectedElements) {\n                x[id] = true;\n            }\n            setSelectedPulledElements(x);\n        }\n        if (selection) {\n            setSelection(undefined);\n        }\n    }, [selection, setSelection]);\n\n    useEffect(() => {\n        if (dropdownPos) {\n            dropdownPosRef.current = dropdownPos;\n        }\n    }, [dropdownPos]);\n    \n    let rows = [0,1,2,3,4];\n    let cols = [0,1,2];\n    let {tracks=[]} = subSequence;\n    tracks = tracks.filter(x => isExplore || x.pad === undefined);\n\n    const addEffect = useCallback((value) => {\n        let effect = initializeMidiEffect(value, subSequence);\n        let {x,y} = dropdownPosRef.current;\n        effect.x = x;\n        effect.y = y;\n        subSequence.midiEffects.addEffect(effect);\n        setPulledEffects(\n            [... pulledEffects,\n             effect]);\n    }, [subSequence, pulledEffects]);\n\n    let style = {\n    };\n\n    const onClick = useCallback((e) => {\n        subSequence.sequencerEngine.switchToSubSequence(\n            subSequence.id);\n    }, [subSequence]);\n\n    const createSequencer = useCallback(() => {\n        let sequencer = subSequence.createSequencer();\n        let {x,y} = dropdownPosRef.current;\n        sequencer.x = x;\n        sequencer.y = y;\n    }, [subSequence]);\n\n    const createPad = useCallback(() => {\n        let pad = subSequence.createPad();\n        let {x,y} = dropdownPosRef.current;\n        pad.x = x;\n        pad.y = y;\n    }, [subSequence]);\n\n    if (!subSequence || !subSequence.tracks) {\n        return [];\n    }\n\n    let inner = (\n        <div>\n          {!isExplore && <PulledBackground\n                           selection={selection}\n                           scale={scale}\n                           elements={elements}\n                           containerRef={ref}\n                         />}\n          <ContextMenu className=\"midi-context\" dropdownPos={dropdownPos ? {\n              x: dropdownPos.x / scale,\n              y: dropdownPos.y / scale } : undefined}>\n            <MenuItem\n              onMouseDown={createSequencer}>\n              New Sequencer\n            </MenuItem>\n            <MenuItem\n              onMouseDown={createPad}>\n              New Pad\n            </MenuItem>\n            <MenuItem\n              onMouseDown={arrangeWindows}>\n              Arrange Windows\n            </MenuItem>\n            <div className=\"context-divider\"/>\n            {midiEffectOptions.map(\n                ({label, value})=>\n                    <MenuItem\n                      onMouseDown={() => addEffect(value)}\n                    >{label}</MenuItem>)}\n          </ContextMenu>\n          {isExplore &&\n           <div className=\"grid-rows\">\n             {rows.map(\n                 row =>\n                     <div key={row} className=\"grid-row\">\n                       {cols.map(\n                           col => tracks[row*3 + col] ?\n                               <Grid\n                                 scale={scale}\n                                 toggled={toggled}\n                                 setSelectedTrack={setSelectedTrack}\n                                 key={row*3 + col}\n                                 track={tracks[row*3 + col]}\n                                 row={row} col={col}/> : '')}\n                     </div>)}\n           </div>\n          }\n          <PulledEffects\n            scale={scale}\n            sizeRef={sizeRef}\n            setSize={setSize}\n            size={size}\n            ordering={ordering}\n            setOrdering={setOrdering}\n            playhead={true}\n            elements={elements}\n            containerRef={ref}\n            noWrapper={true}\n            sequencerEngine={subSequence.sequencerEngine}\n            subSequence={subSequence}/>\n         {!isExplore && subSequence.pads.map(\n              pad => <PulledPad\n              key={pad.id}\n              scale={scale}\n              size={size}\n              ordering={ordering}\n              setOrdering={setOrdering}\n              setSize={setSize}\n              sizeRef={sizeRef}\n              elements={elements}\n              scrollContainer={ref}\n              pad={pad}\n   />)}\n          {!isExplore && <GlobalEdges\n                           containerRef={ref}\n                     scale={scale}\n                     subSequence={subSequence}/>}\n          {!isExplore && subSequence.tracks.map(\n              track => \n                  <TrackMidiEffects\n                    scale={scale}\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    size={size}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    containerRef={ref}\n                    track={track}/>)}\n          {!isExplore && subSequence.pads\n           .filter(pad => pad.effectRack)\n           .map(\n              pad => \n                  <PadEffects\n                    scale={scale}\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    size={size}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    containerRef={ref}\n                    pad={pad}/>)}\n          {!isExplore && subSequence.sequencers.map(\n              sequencer =>\n                  <PulledSequencer\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    scrollContainer={ref}\n                    scale={scale}\n                    size={size}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    sequencer={sequencer}/>)}\n        </div>);\n    \n    return (\n        <div\n          onClick={onClick}\n          onMouseDown={onMouseDown}\n          onMouseMove={onMouseMove}\n          onMouseUp={onMouseUp}\n          onContextMenu={onContextMenu}\n          className={collapsed ? \"grids collapsed\" : \"grids not-collapsed\"}>\n          <GridTab subSequence={subSequence}/>\n          <div\n            ref={ref} \n            style={isExplore || collapsed ? {} : style}\n            className=\"grids-inner\">\n            {collapsed ? <ModuleSys5 subSequence={subSequence} /> : inner}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        pulledEffects: state.effects.pulledEffects,\n        pulledSequencers: state.pads.sequencers,\n        numTracks: props.subSequence.tracks && props.subSequence.tracks.length,\n        collapsed: state.pads.modulesCollapsed[props.subSequence.id]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setPulledEffects: x => dispatch(setPulledEffects(x)),\n        setSelectedPulledElements: x => dispatch(\n            setSelectedPulledElements(x)),\n        setSize: x => dispatch(\n            setModuleSize(5, x))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Grids);\n"],"sourceRoot":""}