{"version":3,"sources":["components/v3/toolbar/LiveButtons.js","components/v3/FPS.js","components/v3/search/QuickActions.js","components/v3/search/modes.js","components/v3/search/ZObjectCommandMenu.js","components/v3/search/SearchResults.js","constants/effects-to-hide.js","effects/utils/searchEffects.js","components/v3/search/CommandResults.js","components/hooks/usePullableDrop.js","components/v3/search/SearchWindow.js","components/v3/plugins/PluginsPane.js","components/v3/editor/EditorDropdown.js","components/v3/editor/CirklonElement.js","components/v3/editor/PadTabs.js","components/v3/editor/PadSequencer.js","components/v3/editor/Editor.js","components/v3/toolbar/ViewButtons.js","components/v3/toolbar/LogoDropdown.js","components/v3/toolbar/TopToolbar.js","components/v3/sidebar/SubSequenceNavigator.js","components/v3/sidebar/TrackOption.js","components/v3/sidebar/LeftSidebar.js","components/v3/sidebar/PadOption.js","utils/bulkUploadSamples.js","components/v3/windows/SamplesToSave.js","components/v3/MainView.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","components_help_Documented_js__WEBPACK_IMPORTED_MODULE_1__","constants_contextual_help_js__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","actions_index_js__WEBPACK_IMPORTED_MODULE_4__","connect","state","props","rolling","sequencer","trackRolling","quantized","dispatch","setTrackRolling","x","setQuantized","_ref","a","createElement","className","onClick","element","ROLL_BUTTON","src","QUANTIZE_BUTTON","Object","objectDestructuringEmpty","_useState","useState","_useState2","slicedToArray","fps","setFPS","onTick","useCallback","window","useInterval","react_default","Math","round","setMode","setFullScreenZObject","zobject","show","setShow","addToFullScreen","fs","sequencerEngine","fullScreenZObject","Array","isArray","concat","toConsumableArray","mode","searchTerm","selector","Selector","defaultGroupBy","DAY","TAG","quickAddSearchText","EFFECTS_TO_HIDE","keys","find","values","b","toLowerCase","filter","includes","searchNodes","asyncToGenerator","regenerator_default","mark","_callee","term","wrap","_context","prev","next","t0","nameToEffect","t1","nameToMidiEffect","t2","nameToLiveEffect","t3","findObjects","findSamples","t4","sent","findSynths","t5","abrupt","AUDIO_FX","MIDI_FX","LIVE_FX","OBJECTS","SAMPLES","SYNTHS","stop","_x","_x2","apply","this","arguments","nodes","getAllNodesInSub","currentSubSequence","name","args","text","_text","toString","getObjectType","EFFECT","_ref2","_callee2","tags","_context2","getAllTags","searcher","freeTextSearch","_x3","_x4","_ref3","_callee3","synths","_context3","searchPresets","undefined","_x5","_x6","ResultType","results","_ref2$priorLength","priorLength","cursor","setCursor","scrollRef","length","map","i","CommandResults_Option","type","isCursor","Option","ref","useRef","useEffect","top","current","offsetTop","scrollTop","offsetHeight","scrollTo","title","CommandResults_ZObjectPreview","ZObjectPreview","_ref4","tree","parent","subSequence","zObject","push","list","message","findText","trim","customType","outlet","effect","outlets","connections","some","destType","NUMBER","key","search_ZObjectCommandMenu","indexOf","slice","len","setWindowPosition","id","setViewableZObjects","setShowEditorBottom","setViewableSubPatches","hide","inputRef","setResults","_useState3","_useState4","_useState5","_useState6","expanded","setExpanded","then","total","addEventListener","onKey","removeEventListener","e","preventDefault","up","down","select","metaKey","ctrlKey","viewableSubPatches","viewableZObjects","blur","audition","expand","c","d","f","ALL","result","scripting","runScript","auditionPreset","getSelectedTrack","trackNumber","loadPreset","EFFECTS","fullscreen","isCustom","newList","y","min","max","search_SearchResults","CommandResults_ResultType","usePullableDrop","getXY","clearAllDragging","clearDragDrop","onDrop","_sequencerEngine$stat","instruments","tracks","effects","presets","_getXY","editorPadding","part","pulledEffects","track","_iterator","_step","pad","_track","sampleDragging","_iterator2","_step2","sample","effectDragging","_pulledEffects","spatial","pullablePartDragging","objectSpread","setPulledEffects","trackDragging","createZTrack","_createForOfIteratorHelper","pads","s","done","value","containsSample","removeTrack","finish","addSound","samplesDragging","Sample","load","sampleTagDragging","searchForSounds","presetDragging","midiEffectDragging","setQuickAddSearchText","setShowSearchWindow","showing","counter","setValue","setSearchTerm","setTimeout","_useWindowManager","useWindowManager","coords","setCoords","onMouseUp","onMouseDown","focus","onKeyDown","style","left","clearWindow","stopPropagation","onChange","target","placeholder","search_CommandResults","search_QuickActions","getViewers","plugins","_plugins","PluginsPane_createForOfIteratorHelper","plugin","outbound","getOutboundNodes","found","node","pluginViewerFor","err","showEditorBottom","bottomHeight","PIANO_ROLL","arrangement","leftSidebarWidth","pluginsLoaded","showPluginsPane","setShowPluginsPane","setPluginsPaneHeight","setSelectedPulledElements","bottom","width","innerWidth","height","minHeight","ZObjectComponent","forceShow","presentationMode","dropdownPosRef","scale","dropdownPos","elements","arrangeWindows","useArrangeWindows","encapsulate","_dropdownPosRef$curre","encapsulateObjects","includeInPresentation","pulledElements","windows","selectedElements","_i","_ids","findNodeById","setAttribute","addEffect","initializeMidiEffect","_dropdownPosRef$curre2","midiEffects","_elements","selected","ContextMenu","MenuItem","segmentAllCables","SubMenu","midiEffectOptions","label","selectedTrack","console","log","CirklonEditor","numPads","setShowPadSequencer","editing","setEditing","padClicked","onDoubleClick","useDoubleClick","slotNumber","slots","addTrack","_pad","createPad","editorBottomHeight","editorBottomRef","pluginsPaneHeight","setSelectedZObject","setShowFreezeModal","freezePad","marginBottom","slotTracks","sort","editor_PadTabs","TrackComponent","scrollContainer","showThemeGrid","showPadSequencer","position","loadingSequence","setShowTrackInstrument","_React$createElement","edgesRef","innerRef","setScale","useContainerCoords","containerRef","_useContextMenu","useContextMenu","onContextMenu","setDropdowPos","getSelection","useSelection","_onDoubleClick","createZObject","onMouseMove","useEditorKeys","context","setMainScrollRef","editor_EditorDropdown","PulledBackground","editorRef","editor_PadSequencer","ModuleSpatialView","defineProperty","GlobalEdges","LinkedParameterVisualizer","GroupEdges","viewMode","setViewMode","setContextualHelp","arg","SEQUENCER_VIEW","ARRANGEMENT_VIEW","MIX_VIEW","setShowProjectsModal","setShowSettings","toggled","setToggled","reactstrap_es","isOpen","toggle","size","caret","color","showLFOs","showEnvelopes","sidebarsShowing","showMoulators","showModulators","showSave","toolbar","showSaveModal","setShowEnvelopes","setShowLFOs","setShowSave","setShowSaveModal","objectWithoutProperties","onSave","saveOption","selectedGuild","save","toolbar_LogoDropdown","PatternsComponent","ZObjectToolbar","BPMComponent","ClockComponent","ToolbarMixButtons","LiveButtons","toolbar_ViewButtons","TransactionsView","GuildsMenu","store","ResolutionDropdown","SaveModal","onHide","LFOTrackComponent","envelopesTrack","lfosTrack","options","subSequences","dist_default","o","switchToSubSequence","newSubSequence","deleteSubSequence","isEnabled","trackIsEnabled","presetName","enabled","solo","trackSolos","muted","trackMutes","planeMapping","setTrackDragging","selectedZObject","useTop","setDropdownPos","selectTrack","openPianoRoll","onClickTrack","randomlyMapParameters","deleteTrack","onClickMute","operationManager","updateTrackMute","onClickSolo","nameStyle","maxWidth","draggable","onDragOver","onDragStart","TrackContextMenu","marginRight","marginLeft","instrument","SynthThumbnail","TrackThumbnail","hasInner","getName","toggleEnabled","hidden","hiddenObjects","locked","lockedObjects","setUXLockObject","setUXHideObject","sub","setLeftSidebarWidth","resizing","setResizing","setOption","pageX","TRACK","zObjects","inletObjects","inner","sidebar_TrackOption","minWidth","sidebar_SubSequenceNavigator","display","ContextualHelpComponent","bulkUploadSamples","samples","guildId","uploads","uploadAudioBuffer","forEach","Promise","all","ethereum","newSamplesWithMetadata","userToken","samplesToSave","guilds","setShowLogin","setUploadingFile","setSamplesToSave","setRecentlyAddedSounds","confirming","setConfirming","setTags","_useState7","_useState8","setText","audioUnit","AudioUnit","Tone","Master","_useState9","_useState10","setSelected","playSound","index","setBuffer","audioBuffer","enter","mod","from","Set","saveAll","_samples","initialCoords","tag","theme","wallpaper","backgroundColor","showPianoRoll","showSearchWindow","creatingNewPack","packs","packToEdit","setWallpaper","w","setTheme","setShowThemeGrid","setArrangementBottomHeight","editorBottom","useSequencer","_useKeyListener","useKeyListener","useThemes","isNFT","item","lstorage","getItem","SubPatches","search_SearchWindow","v3_FPS","RollingViewer","NFTViewer","isMulti","backgroundImage","ipfs","getHashUrl","Modals","ZObjectModal","ZObjectProgressBar","toolbar_TopToolbar","windows_SamplesToSave","Xanadu","NewPackWindow","json","SimpleSequencerBottomToolbar","ArrangementView","Mix","sidebar_LeftSidebar","editor_Editor","isDocumentation","RightSidebar","plugins_PluginsPane","EditorBottom"],"mappings":"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","file":"static/js/3.d2a16dcf.chunk.js","sourcesContent":["import React, { useEffect, useCallback, useState} from 'react';\nimport Documented from \"components/help/Documented.js\"\nimport {ROLL_BUTTON, QUANTIZE_BUTTON} from 'constants/contextual-help.js';\nimport {connect} from 'react-redux';\nimport {\n    setTrackRolling,\n    setQuantized,\n} from 'actions/index.js';\n\nconst LiveButtons = ({rolling, setTrackRolling, quantized, setQuantized}) => { \n    \n    return (\n        <div className=\"live-buttons\">\n          <Documented\n            onClick={() => setTrackRolling(!rolling)} \n            className={rolling ? \"live-button selected\" : \"live-button\"}\n            element={ROLL_BUTTON}><img className=\"roll-icon\" src=\"/roll-light.png\"/></Documented>\n          <Documented\n            onClick={() => setQuantized(!quantized)} \n            className={!quantized ? \"live-button selected\" : \"live-button\"}\n            element={QUANTIZE_BUTTON}>\n            <img className=\"quantize-btn\" src={quantized ? \"/quantized.svg\" : \"/unquantized.svg\"}/>\n          </Documented>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      rolling: state.sequencer.trackRolling,\n      quantized: state.sequencer.quantized,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackRolling: x => dispatch(setTrackRolling(x)),\n      setQuantized: x => dispatch(setQuantized(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LiveButtons);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useInterval} from \"components/hooks/useInterval.js\";\nimport {connect} from 'react-redux';\n\nconst FPS = ({}) => { \n    let [fps, setFPS] = useState(0);\n\n    const onTick = useCallback(() => {\n        if (window.fps) {\n            setFPS(window.fps);\n        }\n    }, [setFPS]);\n    useInterval(onTick, 500);\n\n\n    return (<div className=\"frames-per-second\">{Math.round(fps)} F.P.S.</div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FPS);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {ALL_SAMPLES, RECENT_SAMPLES} from './modes.js';\n\nconst QuickActions = ({setMode}) => { \n    return (\n        <div className=\"quick-actions\">\n          <div onClick={() => setMode(RECENT_SAMPLES)} className=\"pushable action\">\n            Recent Samples\n          </div>\n          <div onClick={() => setMode(ALL_SAMPLES)} className=\"pushable action\">\n            All Samples\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuickActions);\n","export const RECENT_SAMPLES = 'RECENT_SAMPLES';\nexport const ALL_SAMPLES = 'ALL_SAMPLES';\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setFullScreenZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport './menu.scss';\n\nconst ZObjectCommandMenu = ({zobject, setFullScreenZObject}) => { \n    let [show, setShow] = useState(false);\n\n    const addToFullScreen = useCallback(() => {\n        let fs = zobject.sequencerEngine.state.zobject.fullScreenZObject;\n        setFullScreenZObject(fs ? (Array.isArray(fs) ? [... fs, zobject] : [fs, zobject]) : zobject);\n    }, [zobject]);\n    return (\n        <div className=\"zobject-command\">\n          <div\n            onClick={() => setShow(!show)}\n            className=\"collapse-btn\">\n            <div className={show ? \"arrow-up\" : \"arrow-down\"}/>\n          </div>\n          {show &&\n           <div\n             className=\"command-menu\">\n             <div\n               onClick={addToFullScreen}\n               className=\"command-option\">\n             Add to Full-Screen\n             </div>\n           </div>}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectCommandMenu);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {GRID, LIST, DAY, TAG} from 'components/selector2/constants.js';\nimport Selector from \"components/selector2/Selector.js\";\nimport {connect} from 'react-redux';\nimport {RECENT_SAMPLES} from './modes.js';\n\nconst SearchResults = ({mode, searchTerm, selector, sequencerEngine}) => { \n    return (\n        <div>\n          <Selector\n            defaultGroupBy={mode === RECENT_SAMPLES ? DAY : TAG}\n            quickAddSearchText={searchTerm} sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResults);\n","export const EFFECTS_TO_HIDE = [\n    \"Multiband Compressor\",\n    \"Flam\",\n    \"Max\",\n    \"Poly\",\n    \"First\",\n    \"Last\",\n    \"Staccato\",\n    \"Dot\",\n    \"Dash 1\",\n    \"Dash 2\",\n    \"Rest\",\n    \"Otherwise\",\n    \"Accent\",\n    \"Legato\",\n    \"R.Every\",\n    \"Double\",\n    \"Later\",\n    \"Regular\",\n    \"Flat\",\n    \"Thick\",\n    \"Split\",\n    \"Piano\",\n    \"Pianissimo\",\n];\n","import {getAllNodesInSub} from 'utils/findNode.js';\nimport {searchPresets} from 'decentralized/presets/PresetsSearcher.js';\nimport {getAllTags} from 'components/sidebar/getAllTags.js';\nimport {EFFECT} from 'constants/object-types.js';\nimport {TAG} from 'constants/field-types.js';\nimport {nameToEffect} from 'effects/EffectsList.js';\nimport {nameToMidiEffect} from 'effects/midi/getMidiEffect.js';\nimport {nameToLiveEffect} from 'effects/live/getLiveEffect.js';\nimport {EFFECTS_TO_HIDE} from 'constants/effects-to-hide.js';\n\nconst {keys} = Object;\nconst {values} = Object;\n\nconst find = (a,b) => {\n    b = b.toLowerCase();\n    return keys(a).filter(x => x.toLowerCase().includes(b)).filter(\n        x => !EFFECTS_TO_HIDE.includes(x));\n};\n\nexport const searchNodes = async (term, sequencerEngine) => {\n    return {\n        AUDIO_FX: find(nameToEffect, term),\n        MIDI_FX: find(nameToMidiEffect, term),\n        LIVE_FX: find(nameToLiveEffect, term),\n        OBJECTS: findObjects(term, sequencerEngine),\n        SAMPLES: await findSamples(term, sequencerEngine),\n        SYNTHS: await findSynths(term, sequencerEngine),\n    };\n};\n\nconst findObjects = (term, sequencerEngine) => {\n    let nodes = getAllNodesInSub(sequencerEngine.currentSubSequence, true);\n    term = term.toLowerCase();\n    let filtered = nodes.filter(\n        x => (typeof x.name === \"string\" && x.name.toLowerCase().includes(term))\n            || (x.args && typeof x.args[0] === \"string\" && x.args[0].toLowerCase().includes(term)) ||\n            (x.text && typeof x.text === \"string\" && x.text.toLowerCase().includes(term)) ||\n            (x._text && typeof x._text === \"string\" && x._text.toLowerCase().includes(term)) ||\n            (x.text && typeof x.text === \"number\" && x.text.toString().includes(term))\n    );\n    return filtered.filter(\n        x => !x.getObjectType || x.getObjectType() !== EFFECT);\n};\n\nconst findSamples = async (term, sequencerEngine) => {\n\n    let tags = await getAllTags(term);\n    let results = await sequencerEngine.searcher\n        .freeTextSearch(term);\n    return tags;\n};\n\nconst findSynths = async (term, sequencerEngine) => {\n    let synths = await searchPresets(\n        undefined,\n        \"MULTI_SYNTH\",\n        [],\n        0,\n        8359897,\n        false ,\n        undefined,\n        term\n    );\n    \n    return synths;\n};\n\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ZObjectCommandMenu from './ZObjectCommandMenu.js';\nimport SearchResults from './SearchResults.js';\nimport {NUMBER} from 'zobject/data-types.js';\nimport {\n    setFullScreenZObject,\n    setWindowPosition,\n    setViewableZObjects,\n    setViewableSubPatches,\n    setShowEditorBottom} from 'actions/index.js';\nimport {EFFECTS} from 'constants/editor-bottom-modes.js';\nimport {connect} from 'react-redux';\nimport {searchNodes} from \"effects/utils/searchEffects.js\"\nimport './search.scss';\n\nconst CommandResults = ({\n    searchTerm,\n    sequencerEngine,\n    hide,\n    inputRef,\n    setShowEditorBottom,\n    setWindowPosition,\n    setViewableZObjects,\n    setViewableSubPatches,\n    setFullScreenZObject,\n}) => { \n    let [results, setResults] = useState({});\n    let [cursor, setCursor] = useState(0);\n    let [expanded, setExpanded] = useState(false);\n    let ref = useRef(undefined);\n\n    useEffect(() => {\n        if (searchTerm === \"\") {\n            setResults({});\n        } else {\n            searchNodes(searchTerm, sequencerEngine)\n                .then(setResults);\n        }\n    }, [searchTerm, setResults]);\n\n    useEffect(() => {\n        setCursor(0);\n    }, [results, setCursor]);\n\n    const total = useCallback(() => {\n        return len(results[\"AUDIO_FX\"]) +\n            len(results[\"MIDI_FX\"]) +\n            len(results[\"LIVE_FX\"]) + \n            len(results[\"OBJECTS\"]) +\n            len(results[\"SAMPLES\"]) + \n            len(results[\"SYNTHS\"])\n        ;;\n    }, [results]);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKey);\n        return () => window.removeEventListener(\"keydown\", onKey);\n    }, [results, expanded, cursor, setCursor, hide, setExpanded]);\n\n    const onKey = useCallback((e) => {\n        if (expanded) {\n            if (e.key === \"ArrowLeft\") {\n                setExpanded(false);\n            }\n            return;\n        }\n        if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            up();\n            return false;\n        } else if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            down();\n            return false;\n        } else if (e.key === \"Enter\") {\n            e.preventDefault();\n            select(results, cursor, e.metaKey || e.ctrlKey);\n            return false;\n        } else if (e.key === \"Escape\") {\n            if (sequencerEngine.state.zobject.viewableSubPatches.length > 0 ||\n                sequencerEngine.state.zobject.viewableZObjects.length > 0) {\n                return;\n            }\n            e.preventDefault();\n            hide();\n            return false;\n        } else if (e.key === \"ArrowRight\") {\n            select(results, cursor, false, true);\n        }\n    }, [results, cursor, setCursor, hide, setExpanded, expanded]);\n\n    useEffect(() => {\n        if (expanded) {\n            inputRef.current.blur();\n        }\n    }, [expanded]);\n\n    const select = useCallback((results, cursor, audition, expand) => {\n        let a = results[\"AUDIO_FX\"] || [];\n        let b = results[\"MIDI_FX\"] || [];\n        let c = results[\"LIVE_FX\"] || [];\n        let d = results[\"OBJECTS\"] || [];\n        let e = results[\"SAMPLES\"] || [];\n        let f = results[\"SYNTHS\"] || [];\n\n        let ALL = [...a, ...b, ...c, ...d, ...e, ...f];\n        let h = [...a, ...b, ...c, ...d];\n        let result = ALL[cursor];\n        if (result) {\n            if (len([...a, ...b, ...c, ...d]) <= cursor &&\n                len([...a, ...b, ...c, ...d, ...e]) > cursor) {\n                // open sample\n                if (expand) {\n                    setExpanded(result);\n                    return;\n                } else if (audition) {\n                    sequencerEngine.scripting.runScript('/' + result + '/');\n                } else {\n                    sequencerEngine.scripting.runScript('/' + result);\n                }\n            } else if (cursor >= len([... a, ...b,...c,...d, ...e])) {\n                if (audition) {\n                    sequencerEngine.auditionPreset(result, sequencerEngine.getSelectedTrack().trackNumber);\n                } else {\n                    sequencerEngine.loadPreset(result, true);\n                }\n            } else if (len([...a, ...b, ...c]) > cursor) {\n                // adding effectt\n                sequencerEngine.scripting.runScript('+' + result);\n                setShowEditorBottom(EFFECTS);\n            } else {\n                // adding zobject\n                let fullscreen = sequencerEngine.state.zobject.fullScreenZObject;\n                if (fullscreen && fullscreen.name !== \"three.canvas\" && (result.name !== \"subpatch\" || result.effect.isCustom)) {\n                    // add to full-screen\n                    if (Array.isArray(fullscreen)) {\n                        setFullScreenZObject([... fullscreen, result.zObject || result]);\n                    } else { \n                        let newList = [fullscreen, result.zObject || result];\n                        setFullScreenZObject(newList);\n                    }\n                } else if (result.name === \"subpatch\" && !result.effect.isCustom) {\n                    // open the window\n                    let {viewableSubPatches} = sequencerEngine.state.zobject;\n                    setWindowPosition({x: 100, y: 100});\n                    setViewableSubPatches([... viewableSubPatches, result.effect]);\n                } else {\n                    if (result.zObject) {\n                        result = result.zObject;\n                    }\n                    let {viewableZObjects} = sequencerEngine.state.zobject;\n                    setWindowPosition({x: 100, y: 100});\n                    setViewableZObjects([... viewableZObjects, result]);\n                }\n            }\n        }\n        hide();\n    }, [hide, setExpanded]);\n\n    const down = useCallback(() => {\n        setCursor(Math.min((cursor+1), total() - 1));\n    }, [results, cursor, setCursor]);\n\n    const up = useCallback(() => {\n        if (cursor === 0) {\n            inputRef.current.blur();\n        }\n        setCursor(Math.max(0, (cursor-1) ));\n    }, [cursor, setCursor]);\n\n    useEffect(() => {\n        setExpanded(false);\n    }, [searchTerm, setExpanded]);\n    \n    if (expanded) {\n        return <SearchResults searchTerm={expanded} sequencerEngine={sequencerEngine} />\n    }\n\n    return (\n        <div ref={ref} className={searchTerm === \"\" ? \"search-results empty\" : \"search-results\"}>\n         <ResultType\n            scrollRef={ref}\n            cursor={cursor}\n            term={searchTerm}\n            name=\"Create Audio FX\"\n            setCursor={setCursor}\n            results={results[\"AUDIO_FX\"]}/>\n          <ResultType\n            scrollRef={ref}\n            cursor={cursor}\n            term={searchTerm}\n            priorLength={len(results[\"AUDIO_FX\"])}\n            setCursor={setCursor}\n            name=\"Create Midi FX\"\n            results={results[\"MIDI_FX\"]}/>\n          <ResultType\n            scrollRef={ref}\n            cursor={cursor}\n            term={searchTerm}\n            setCursor={setCursor}\n            priorLength={len(results[\"AUDIO_FX\"]) + len(results[\"MIDI_FX\"])}\n            name=\"Create Live FX\"\n            results={results[\"LIVE_FX\"]}/>\n          <ResultType\n            scrollRef={ref}\n            cursor={cursor}\n            term={searchTerm}\n            name=\"Objects (in project)\"\n            setCursor={setCursor}\n            priorLength={len(results[\"AUDIO_FX\"]) + len(results[\"MIDI_FX\"]) + len(results[\"LIVE_FX\"])}\n            results={results[\"OBJECTS\"]}/>\n          <ResultType\n            scrollRef={ref}\n            cursor={cursor}\n            term={searchTerm}\n            priorLength={\n                len(results[\"AUDIO_FX\"]) +\n                    len(results[\"MIDI_FX\"]) +\n                    len(results[\"OBJECTS\"]) +\n                    len(results[\"LIVE_FX\"])}\n            name=\"Samples\"\n            setCursor={setCursor}\n            results={results[\"SAMPLES\"]}/>\n          <ResultType\n            scrollRef={ref}\n            cursor={cursor}\n            term={searchTerm}\n            name=\"Synth Presets\"\n            setCursor={setCursor}\n            priorLength={\n                len(results[\"AUDIO_FX\"]) +\n                    len(results[\"MIDI_FX\"]) +\n                    len(results[\"OBJECTS\"]) +\n                    len(results[\"SAMPLES\"]) +\n                    len(results[\"LIVE_FX\"])}\n            results={results[\"SYNTHS\"]}/>\n      </div>);\n};\n\nconst ResultType = ({name, onClick, results, priorLength=0, cursor, setCursor, term, scrollRef}) => {\n    if (!results || results.length === 0) {\n        return '';\n    }\n    return [\n             <div className=\"type-name\">\n               {name}\n             </div>,\n             ...results.map(\n                 (x, i) =>\n                 <Option\n                   type={name}\n                   onClick={() => setCursor(i+priorLength)}\n                   isCursor={i + priorLength === cursor}\n                   x={x} scrollRef={scrollRef} term={term}\n                 />\n             )\n    ];\n};\n\nconst Option = ({isCursor, type, x, term, scrollRef, onClick}) => {\n    let ref = useRef();\n\n    useEffect(() => {\n        if (isCursor) {\n            let top = ref.current.offsetTop + 50;\n            let scrollTop = scrollRef.current.scrollTop;\n            let scrollHeight = scrollRef.current.offsetHeight;\n            if (top > scrollTop + scrollHeight) {\n                scrollRef.current.scrollTo(0, top - 130);\n            }\n\n            if ((top > 141) && top - 150 < scrollTop) {\n                scrollRef.current.scrollTo(0, top - 130);\n            }\n        }\n    }, [isCursor]);\n    return (\n        <div\n          onClick={onClick}\n          ref={ref}\n          className={isCursor ? \"cursor result\" : \"result\"}>\n          {type === \"Samples\" ?\n           <img src=\"/waveform-icon.svg\"/> :\n           type.includes(\"FX\") ?\n           <img src=\"/effects-icon.svg\"/> :\n           type === \"Synth Presets\" ? <img src=\"/synth-icon.svg\"/> :\n           ''}\n          {typeof x === \"string\" ? x : type === \"Synth Presets\" ? x.title :  <ZObjectPreview isCursor={isCursor} term={term} zobject={x}/>}\n        </div>);\n};\n\nconst ZObjectPreview = ({zobject, term, isCursor}) => {\n    let tree = [];\n    let parent = zobject;\n    if (parent && parent.subSequence && parent.subSequence.zObject) {\n        tree.push(parent);\n    }\n    while (parent && parent.subSequence && parent.subSequence.zObject) {\n        parent = parent.subSequence.zObject;\n        tree.push(parent);\n    }\n    if (tree.length === 0) {\n        tree = [zobject];\n    }\n\n    let list = tree.map((x,i) =>\n        x.message ?\n        x._text :\n        x.zObject && x.zObject.name === \"comment\" ? findText(term, x.text) :\n        x.name === \"subpatch\" && x.args[0] && x.args[0].trim() !== \"\" ? x.args[0] :\n        x.name);\n\n    let customType = undefined;\n    if (zobject.name === \"script\") {\n        // figure out if its connected to \n        let outlet = zobject.effect.outlets[Object.keys(zobject.effect.outlets)[0]];\n        if (outlet) {\n            if (outlet.connections.some(\n                x => x.destType === \"fragment shader\")) {\n                customType = \"fragment shader\";\n            } else if (outlet.connections.some(\n                x => x.destType === \"vertex shader\")) {\n                customType = \"vertex shader\";\n            }\n        }\n    }\n\n    return (\n        <div className=\"zobject-preview\">\n          {zobject.message ?\n           <img className=\"object-icon\"\n                src={zobject.type === NUMBER ?\n                     \"/znumber-light.svg\" : \"/zmessage-light.svg\"}\n           /> :\n           zobject.zObject && zobject.zObject.name === \"comment\" ?\n           <img className=\"object-icon\" src=\"/zcomment-light.svg\"/> :\n           <img className=\"object-icon\" src=\"/zobject-light.svg\"/>}\n          {tree.map((x,i) =>\n              <div key={i} className={i > 0? \"tree-part spatch\" : \"main-part tree-part\"}>\n              {list[i]}\n              </div>)}\n          {customType && <div className=\"custom-type\">{customType}</div>}\n          {isCursor && <ZObjectCommandMenu zobject={zobject}/>}\n        </div>\n    );\n};\n\nconst findText = (term, text) => {\n    let i = text.indexOf(term);\n    return '...' + text.slice(i, i + 12) + '...';\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setWindowPosition: (id, x) => dispatch(setWindowPosition(id, x)),\n      setViewableZObjects: (x) => dispatch(setViewableZObjects(x)),\n      setShowEditorBottom : x=> dispatch(setShowEditorBottom(x)),\n      setViewableSubPatches: x => dispatch(setViewableSubPatches(x)),\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x))\n  };\n};\n\nconst len = (x) => !x ? 0 : x.length;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommandResults);\n","import React, {useCallback} from 'react';\nimport Sample from 'repos/Sample.js';\nimport {\n    clearDragDrop,\n    dragEffect,\n    setMidiEffectDragging,\n    setPullablePartDragging,\n    setPulledEffects,\n    setSequencerEngine,\n    setSampleDragging,\n    setSampleTagDragging,\n    setPresetDragging,\n    setTrackDragging,\n    setSamplesDragging\n} from 'actions/index.js';\n\nexport const usePullableDrop = (sequencerEngine, getXY) => {\n    const dispatch = useCallback(\n        (x) => sequencerEngine.dispatch(x),\n        [sequencerEngine]);\n\n    const clearAllDragging = () => {\n        dispatch(clearDragDrop());\n    };\n\n    const onDrop = useCallback(async (e) => {\n        let {instruments, tracks, effects, presets, selector, sequencer} = sequencerEngine.state;\n\n        let {x,y} = getXY(e);\n        let editorPadding = sequencerEngine.state.spatial.editorPadding;\n        x -= Math.max(0, editorPadding.x);\n        y -= Math.max(0, editorPadding.y);\n\n        if (instruments.pullablePartDragging) {\n            let part = {...instruments.pullablePartDragging};\n            part.x = x;\n            part.y = y;\n            let pulledEffects = [...effects.pulledEffects, part];\n            dispatch(setPulledEffects(pulledEffects));\n            clearAllDragging();\n            return;\n        }\n\n        if (tracks.trackDragging) {\n            let track = tracks.trackDragging;\n            track.subSequence.createZTrack(track, x,y);\n            clearAllDragging();\n            return;\n        }\n\n        if (selector.sampleDragging !== undefined) {\n            for (let pad of sequencerEngine.currentSubSequence.pads) {\n                let track = pad.containsSample(selector.sampleDragging);\n                if (track) {\n                    pad.removeTrack(track);\n                    clearAllDragging();\n                    return;\n                }\n            }\n            let sampleDragging = selector.sampleDragging;\n            sequencerEngine.addSound(sampleDragging, undefined);\n            clearAllDragging();\n        } else if (selector.samplesDragging) {\n            let i=0;\n            for (let id of selector.samplesDragging) {\n                if (i > 4) {\n                    break;\n                }\n                let sample = id;\n                if (typeof id === \"string\") {\n                    sample = new Sample(id);\n                    await sample.load();\n                }\n                sequencerEngine.addSound(sample);\n                i++;\n            }\n            clearAllDragging();\n        } else if (selector.sampleTagDragging) {\n            sequencerEngine.searchForSounds([selector.sampleTagDragging]);\n            clearAllDragging();\n        }\n\n        if (presets.presetDragging) {\n            sequencerEngine.loadPreset(presets.presetDragging, true);\n            clearAllDragging();\n        }\n\n        let effectDragging = sequencer.effectDragging ||\n            effects.midiEffectDragging;\n        if (effectDragging && Object.keys(effectDragging).length > 1) {\n\n            let {effect} = effectDragging;\n            effect.x = x;\n            effect.y = y;\n            let pulledEffects = [...effects.pulledEffects, effect];\n            dispatch(setPulledEffects(pulledEffects));\n            // in this case we need to move the effect to the outside of the\n            // track so that it is seen always\n            clearAllDragging();\n        }\n    }, [sequencerEngine]);\n\n    return {onDrop};\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setQuickAddSearchText,\n} from 'actions/index.js';\nimport {ALL_SAMPLES, RECENT_SAMPLES} from './modes.js';\nimport QuickActions from './QuickActions.js';\nimport CommandResults from './CommandResults.js';\nimport {connect} from 'react-redux';\nimport {useWindowManager} from 'components/windows/useWindowManager.js';\nimport SearchResults from './SearchResults.js';\nimport {setShowSearchWindow} from 'actions/index.js';\nimport {usePullableDrop} from \"components/hooks/usePullableDrop.js\";\nimport './search.scss';\nconst SEARCH_BUFFER_TIME = 100;\n\nconst SearchWindow = ({showing, setShowSearchWindow, sequencerEngine, setQuickAddSearchText}) => { \n    let ref = useRef(undefined);\n    let counter = useRef(0);\n    let inputRef = useRef(undefined);\n\n    let [mode, setMode] = useState(undefined);\n    let [value, setValue] = useState('');\n    let [searchTerm, setSearchTerm] = useState('');\n    let getXY = () => ({\n        x:0,\n        y:0\n    });\n    let {onDrop} = usePullableDrop(sequencerEngine, getXY);\n\n    useEffect(() => {\n        return () => setQuickAddSearchText(undefined);\n    }, []);\n\n    useEffect(() => {\n        counter.current++;\n        let id = counter.current;\n        setTimeout(() => {\n            if (id === counter.current) {\n                setSearchTerm(value);\n            }\n        }, SEARCH_BUFFER_TIME);\n    }, [value, setSearchTerm]);\n\n    const {setCoords, onMouseUp, onMouseDown, coords} =\n          useWindowManager({ref});\n\n    useEffect(() => {\n        if (showing && inputRef.current) {\n            inputRef.current.focus();\n        }\n    }, [showing]);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydowwn\", onKeyDown);\n    }, []);\n\n    const onKeyDown = (e) => {\n        if (e.key === 'ArrowDown' ||\n           e.key === 'ArrowUp') {\n            \n        }\n    };\n\n    let style = {\n        left: coords && coords.x,\n        top: coords && coords.y,\n    };\n\n    let className = \"search-background\";\n    if (!showing) {\n        className += \" hide\";\n    }\n\n    useEffect(() => {\n        window.addEventListener(\"click\", clearWindow);\n        return () => window.removeEventListener(\"click\", clearWindow);\n    }, []);\n\n    const clearWindow = () => {\n        setShowSearchWindow(false);\n    };\n\n    return (\n        <div\n          onDrop={onDrop}\n          className={className}>\n          <div\n            style={style}\n            onClick={(e) => e.stopPropagation()}\n            ref={ref} className=\"search-window\">\n            <img src=\"/search.svg\" className=\"search-icon\"/>\n            <input\n              ref={inputRef}\n              className=\"search-text\"\n              value={value}\n              onChange={(e) => setValue(e.target.value)}\n              placeholder=\"Search for objects & actions\"/>\n            {mode === RECENT_SAMPLES || mode === ALL_SAMPLES ?\n             <SearchResults mode={mode} searchTerm={value} sequencerEngine={sequencerEngine}/> :\n             <CommandResults\n               hide={() => setShowSearchWindow(false)}\n               searchTerm={searchTerm}\n               inputRef={inputRef}\n               sequencerEngine={sequencerEngine}/>}\n            {mode === undefined && value === '' &&\n             <QuickActions setMode={setMode} sequencerEngine={sequencerEngine}/>}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setQuickAddSearchText: x => dispatch(setQuickAddSearchText(x)),\n      setShowSearchWindow: x => dispatch(setShowSearchWindow(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchWindow);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {EFFECTS, PIANO_ROLL} from 'constants/editor-bottom-modes.js';\nimport {\n    setPluginsPaneHeight,\n    setShowPluginsPane,\n    setSelectedPulledElements,\n} from 'actions/index.js';\nimport ZObjectComponent from \"components/zobject/ZObjectComponent.js\";\nimport {connect} from 'react-redux';\nimport './plugins.scss';\n\nconst PluginsPane = ({\n    setSelectedPulledElements,\n    pluginsLoaded,\n    leftSidebarWidth,\n    setShowPluginsPane,\n    showPluginsPane,\n    bottomHeight,\n    setPluginsPaneHeight}) => { \n    let style = {\n        bottom: bottomHeight,\n        left: leftSidebarWidth,\n        width: window.innerWidth - leftSidebarWidth - 240,\n    };\n\n    if (pluginsLoaded) {\n        pluginsLoaded = getViewers(pluginsLoaded);\n    }\n\n    let height = pluginsLoaded ? Math.max(... pluginsLoaded.map(x => x.height || 100)) : undefined;\n    height = Math.min(300, height) + 30;\n    style.minHeight = height;\n\n    if (!showPluginsPane) {\n        style.height = 40;\n        style.minHeight = 40;\n    }\n\n    useEffect(() => {\n        setPluginsPaneHeight(height);\n    }, [height]);\n\n    if (!pluginsLoaded || pluginsLoaded.length === 0) {\n        return [];\n    }\n\n    return (\n        <div\n          onMouseDown={() => setSelectedPulledElements({})}\n          style={style} className={showPluginsPane ? \"plugins-pane showing\" : \"plugins-pane\"}>\n          <div className=\"collapse-and-label\">\n          <div\n            onClick={() => setShowPluginsPane(!showPluginsPane)}\n            className=\"collapse-container\"><div className={showPluginsPane ? \"arrow-right\" : \"arrow-up\"}></div></div>\n            <div className=\"plugins-label\">\n              <img src=\"/plugin-icon.svg\"/>\n            </div>\n          </div>\n        {showPluginsPane && <div className=\"plugins-container\">\n         {pluginsLoaded.map(\n             zobject => <ZObjectComponent forceShow={true} zobject={zobject}/>)}\n                            </div>}\n        </div>);\n}\n\nconst getViewers = (plugins) => {\n    let _plugins = [];\n    for (let plugin of plugins) {\n        let outbound = plugin.effect.getOutboundNodes();\n        let found = false;\n        for (let x in outbound) {\n            let y = outbound[x][0];\n            if (y && y.node && y.node.zObject && y.node.zObject.name === \"three.canvas\") {\n                _plugins.push(y.node.zObject);\n                found=true;\n                y.node.zObject.pluginViewerFor = plugin;\n                break;\n            }\n        }\n        if (!found) {\n            _plugins.push(plugin);\n        }\n    }\n    return _plugins;\n};\n\nconst mapStateToProps = (state, props) => {\n    let show= state.spatial.showEditorBottom;\n    return {\n        bottomHeight: show === PIANO_ROLL ? state.arrangement.bottomHeight :\n            show === EFFECTS ? 280 : 40,\n        leftSidebarWidth: state.spatial.leftSidebarWidth,\n        pluginsLoaded: state.plugins.pluginsLoaded,\n        showPluginsPane: state.plugins.showPluginsPane\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowPluginsPane: x => dispatch(setShowPluginsPane(x)),\n      setPluginsPaneHeight: x => dispatch(setPluginsPaneHeight(x)),\n      setSelectedPulledElements: x => dispatch(setSelectedPulledElements(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginsPane);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\"\nimport {segmentAllCables} from \"messaging/cables/segmentCables.js\"\nimport {midiEffectOptions, initializeMidiEffect}  from 'components/effects/constants.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport {setPulledEffects} from 'actions/index.js';\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport SubMenu from \"components/dropdowns/SubMenu.js\";\nimport {connect} from 'react-redux';\n\nconst EditorDropdown = ({\n    presentationMode,\n    dropdownPosRef,\n    subSequence,\n    scale,\n    dropdownPos,\n    pulledEffects,\n    setPulledEffects,\n    elements\n}) => { \n    let {arrangeWindows} = useArrangeWindows({elements, subSequence, presentationMode});\n    const encapsulate = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subSequence.encapsulateObjects(x,y);\n    }, [subSequence]);\n\n    const includeInPresentation = useCallback(() => {\n        let pulledElements = subSequence.sequencerEngine.state.windows.selectedElements;\n        let ids = Object.keys(pulledElements);\n        for (let id of ids) {\n            let node = subSequence.sequencerEngine.findNodeById(id);\n            if (node) {\n                node.setAttribute(\"Include in Presentation\", true);\n            }\n        }\n    }, [subSequence]);\n\n    const addEffect = useCallback((value) => {\n        let effect = initializeMidiEffect(value, subSequence);\n        let {x,y} = dropdownPosRef.current;\n        effect.x = x;\n        effect.y = y;\n        subSequence.midiEffects.addEffect(effect);\n        setPulledEffects(\n            [... pulledEffects,\n             effect]);\n    }, [subSequence, pulledEffects]);\n\n\n    let _elements = subSequence.state.windows.selectedElements;\n    let selected = Object.keys(_elements).filter(x =>\n        _elements[x]);\n\n    return (\n        <ContextMenu className=\"midi-context\" dropdownPos={dropdownPos ? {\n              x: dropdownPos.x / scale,\n              y: dropdownPos.y / scale } : undefined}>\n          {selected.length > 0 &&\n           <MenuItem\n             onMouseDown={encapsulate}>\n             Encapsulate Objects\n           </MenuItem>}\n          {selected.length > 0 && <MenuItem\n              onMouseDown={includeInPresentation}>\n              Include in Presentation\n             <img src=\"/presentation-mode.svg\"/>\n                                  </MenuItem>}\n          {selected.length > 0 &&\n           <MenuItem\n             onMouseDown={arrangeWindows}>\n             Pack Objects\n           </MenuItem>}\n           <MenuItem\n             onMouseDown={() => segmentAllCables(subSequence.sequencerEngine, subSequence)}>\n             Segment All Cables\n           </MenuItem>\n            <div className=\"context-divider\"/>\n          <SubMenu name=\"Midi Effects\">\n            {midiEffectOptions.map(\n                ({label, value})=>\n                <MenuItem\n                  onMouseDown={() => addEffect(value)}\n                >{label}</MenuItem>)}\n          </SubMenu>\n        </ContextMenu>\n    );\n \n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presentationMode: state.spatial.presentationMode,\n      pulledEffects: state.effects.pulledEffects,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setPulledEffects: x => dispatch(setPulledEffects(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorDropdown);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport CirklonEditor from \"components/cirklon/CirklonEditor.js\";\nimport {connect} from 'react-redux';\n\nconst CirklonElement = ({selectedTrack}) => { \n    if (!selectedTrack) {\n        return '';\n    }\n\n    console.log('track =', selectedTrack);\n    return (\n        <div className=\"cirklon-element\">\n          <CirklonEditor track={selectedTrack}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    if (!props.sequencerEngine) {\n        return {};\n    }\n  return {\n      selectedTrack: props.sequencerEngine.getSelectedTrack()\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CirklonElement);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport './pad-tabs.scss';\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\nimport {setShowPadSequencer} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst PadTabs = ({pad, sequencerEngine, setShowPadSequencer}) => { \n    let [editing, setEditing] = useState(undefined);\n    let [value, setValue] = useState('');\n    let padClicked = useRef();\n\n    const onChange = useCallback((e) => {\n        setValue(e.target.value);\n    }, [setValue]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === \"Enter\") {\n            editing.name = value;\n            setEditing(undefined);\n        }\n    }, [editing, setEditing, value]);\n\n    const onDoubleClick = useCallback(() => {\n        setValue(padClicked.current.name);\n        setEditing(padClicked.current);\n    }, [setValue, setEditing]);\n\n    const onClick = useDoubleClick(onDoubleClick, 250);\n    const newPad = () => {\n        let _pad = sequencerEngine.currentSubSequence.createPad();\n        setShowPadSequencer(_pad);\n    };\n    let sub = sequencerEngine.currentSubSequence;\n    let pads = sub.pads;\n\n    const onDrop = useCallback((pad) => {\n        let trackDragging = sequencerEngine.state.tracks.trackDragging;\n        console.log(\"on drop called with pad/trackDragging\", pad, trackDragging);\n        if (trackDragging) {\n            let slotNumber = -1;\n            for (let i=0; i < pad.slots.length; i++) {\n                if (!pad.slots[i]) {\n                    slotNumber = i;\n                    break;\n                }\n            }\n            console.log(\"slot number=\", slotNumber);\n            if (slotNumber > -1) {\n                pad.addTrack(trackDragging, slotNumber);\n            }\n        }\n    }, []);\n\n    return (\n        <div className=\"pad-tabs\">\n        {pads.map(\n            (_pad, i) => <div\n                           onDrop={() => onDrop(_pad)}\n                           onClick={(e) => {\n                               padClicked.current = _pad;\n                               setShowPadSequencer(_pad);\n                               onClick(e);\n                           }}\n                           className={(() => {\n                               let className = pad === _pad ? \"pad-option selected\" : \"pad-option\";\n                               if (_pad === editing) {\n                                   className += \" editing\";\n                               }\n                               return className;\n                           })()}>\n                           {editing === _pad ? <input\n                                        onChange={onChange}\n                                                 placeholder=\"Enter name\"\n                                        onKeyDown={onKeyDown}\n                                        type=\"text\" value={value} className=\"pad-name-input\"/> :\n                            _pad.name || (\"Pad \" + (i+1))}\n                         </div>)}\n          <div\n            onClick={newPad}\n            className=\"pushable new-pad-btn\">\n            +\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      numPads: props.sequencerEngine.currentSubSequence &&\n          props.sequencerEngine.currentSubSequence.pads.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowPadSequencer: x => dispatch(setShowPadSequencer(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadTabs);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport PadTabs from './PadTabs.js';\nimport {setSelectedZObject} from 'actions/index.js';\nimport PatternsComponent from \"components/toolbar/PatternsComponent.js\";\nimport TrackComponent from 'components/v2/TrackComponent.js';\nimport {\n    setShowFreezeModal,\n    setShowPadSequencer} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {EFFECTS, PIANO_ROLL} from 'constants/editor-bottom-modes.js';\nimport './pads.scss';\n\nconst PadSequencer = ({\n    leftSidebarWidth,\n    pad,\n    showEditorBottom,\n    bottomHeight,\n    setShowPadSequencer,\n    setSelectedZObject,\n    pluginsPaneHeight,\n    editorBottomRef,\n    editorBottomHeight,\n    setShowFreezeModal,\n}) => { \n    let ref = useRef(undefined);\n    let style = {\n    };\n\n    const freezePad = useCallback(() => {\n        setShowFreezeModal(true);\n        //pad.zObject.executeAction(\"Freeze Pads\");\n    }, [pad]);\n\n    if (showEditorBottom === PIANO_ROLL) {\n        style.marginBottom = bottomHeight;\n    } else if (showEditorBottom === EFFECTS) {\n        console.log(\"editor bottom height\", editorBottomHeight, editorBottomRef);\n        style.marginBottom = (editorBottomHeight || 400);\n    } else {\n        style.marginBottom = 40;\n    }\n\n    style.marginBottom += pluginsPaneHeight + 20;\n    \n    let slotTracks = pad.slotTracks;\n    slotTracks.sort((a,b) => a.trackNumber - b.trackNumber);\n    return (\n        <div\n          style={style}\n          onClick={() => setSelectedZObject(undefined)}\n          className=\"pad-sequencer\" ref={ref}>\n          <div style={{\n              left: leftSidebarWidth,\n          }} className=\"pad-sequencer-toolbar\">\n            <div className=\"inner-toolbar\">\n            <div\n              onClick={() => setShowPadSequencer(undefined)}\n              className=\"arrow-container pad-sequencer-back\">\n              <div \n                   className=\"arrow-left\"/>\n            </div>\n\n            <PadTabs pad={pad} sequencerEngine={pad.sequencerEngine}/>\n              <div onClick={freezePad} className=\"pushable freeze-pad\">\n                <img src=\"/freeze-icon.svg\"/> Freeze \n              </div>\n            </div>\n          </div>\n        {slotTracks.map(\n            track =>\n                <TrackComponent forceShow={true} track={track} scrollContainer={ref}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      tracks: props.pad.tracks,\n      showEditorBottom: state.spatial.showEditorBottom,\n      bottomHeight: state.arrangement.bottomHeight,\n      editorBottomHeight: props.editorBottomRef.current && props.editorBottomRef.current.offsetHeight,\n      pluginsPaneHeight: state.plugins.pluginsPaneHeight || 0,\n        leftSidebarWidth: state.spatial.leftSidebarWidth\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowPadSequencer: x => dispatch(setShowPadSequencer(x)),\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setShowFreezeModal: x => dispatch(setShowFreezeModal(x)),\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadSequencer);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\"\nimport GlobalEdges from \"components/pulled/GlobalEdges.js\";\nimport PulledBackground from \"components/spatial/PulledBackground.js\";\nimport EditorDropdown from \"components/v3/editor/EditorDropdown.js\";\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\"\nimport {useSelection} from \"components/windows/useSelection.js\";\nimport {setPulledEffects} from 'actions/index.js';\nimport {\n    setSelectedZObject, setModuleSize, setSelectedPulledElements} from 'actions/index.js';\nimport {useContainerCoords} from \"components/hooks/useContainerCoords.js\"\nimport GroupEdges from \"components/groups/GroupEdges.js\"\n\nimport {usePullableDrop} from \"components/hooks/usePullableDrop.js\";\nimport EditorBottom from  './EditorBottom.js';\nimport CirklonElement from './CirklonElement.js';\nimport LinkedParameterVisualizer from 'components/parameters/LinkedParameterVisualizer.js';\nimport {useEditorKeys} from './useEditorKeys.js';\nimport PadSequencer from './PadSequencer.js';\nimport {\n    setShowTrackInstrument,\n    setMainScrollRef} from 'actions/index.js';\nimport ModuleSpatialView from \"components/spatial/ModuleSpatialView.js\";\nimport {connect} from 'react-redux';\nimport './editor.scss';\n\nconst Editor = ({\n    sequencerEngine,\n    editorBottomRef,\n    setShowTrackInstrument,\n    showPadSequencer,\n    currentSubSequence,\n    setPulledEffects,\n    setSelectedZObject,\n    setSelectedPulledElements,\n    showThemeGrid,\n}) => { \n    const scrollRef = useRef();\n\n    let edgesRef= useRef(undefined);\n    let innerRef = useRef(undefined);\n    let [scale, setScale] = useState(1);\n    let {getXY} = useContainerCoords({containerRef: scrollRef, scale});\n    const {onContextMenu, dropdownPos, setDropdowPos} = useContextMenu({ref: scrollRef});\n    const dropdownPosRef = useRef(dropdownPos);\n    const elements = useRef({});\n    let {getSelection} = useSelection({elements});\n\n    let subSequence = currentSubSequence;\n\n    const _onDoubleClick = useCallback((e) => {\n        let {x,y} = getXY(e, true);\n        let editorPadding = sequencerEngine.state.spatial.editorPadding;\n        x -= Math.max(0, editorPadding.x);\n        y -= Math.max(0, editorPadding.y);\n\n        e.stopPropagation();\n        e.preventDefault();\n        subSequence.createZObject(x,y);\n    }, [subSequence]);\n\n    let onDoubleClick = useDoubleClick(_onDoubleClick);\n\n    useEffect(() => {\n        if (dropdownPos) {\n            dropdownPosRef.current = dropdownPos;\n            //setSelection(undefined);\n        }\n    }, [dropdownPos]);\n\n    const {onMouseMove} = useEditorKeys({\n        scrollRef,\n        sequencerEngine,\n        context: sequencerEngine && sequencerEngine.currentSubSequence\n    });\n\n    useEffect(() => {\n        if (sequencerEngine) {\n        sequencerEngine.dispatch(\n            setMainScrollRef(scrollRef));\n        }\n    }, [sequencerEngine]);\n\n    const {onDrop} = usePullableDrop(sequencerEngine, getXY);\n\n    /*\n    const _onMouseMove = useCallback((e) => {\n        onMouseMove(e);\n        if (selection) {\n            let {x,y} = getXY(e, true);\n            let editorPadding = sequencerEngine.state.spatial.editorPadding;\n            //x -= Math.max(0, editorPadding.x);\n            //y -= Math.max(0, editorPadding.y);\n            setSelection({...selection, x2: x, y2: y});\n        }\n    }, [selection, setSelection, scale, sequencerEngine]);\n\n    const onMouseDown = useCallback((e) => {\n        if (sequencerEngine.state.spatial.showPadSequencer) {\n            return;\n        }\n        let {x,y} = getXY(e, true);\n        let editorPadding = sequencerEngine.state.spatial.editorPadding;\n        //x -= Math.max(0, editorPadding.x);\n        //y -= Math.max(0, editorPadding.y);\n        setSelection({x1: x, y1: y, x2: x, y2: y});\n    }, [setSelection, sequencerEngine]);\n\n    const onMouseUp = useCallback((e) => {\n        if (dropdownPos) {\n            return;\n        }\n\n        if (sequencerEngine.state.spatial.showPadSequencer) {\n            return;\n        }\n\n        let editorPadding = sequencerEngine.state.spatial.editorPadding;\n        if (selection && selection.x2 - selection.x1 > 1) {\n            let scale = window._scale || 1;\n            let _selection = {\n                x1: (selection.x1 - Math.max(0, editorPadding.x)) / scale,\n                y1: (selection.y1 - Math.max(0, editorPadding.y)) / scale,\n                x2: (selection.x2 - Math.max(0, editorPadding.x)) / scale,\n                y2: (selection.y2 - Math.max(0, editorPadding.y)) / scale,\n            };\n            let selectedElements = getSelection(_selection);\n            let x = {};\n            let backgroundId = sequencerEngine.state.zobjectBackground &&\n                sequencerEngine.state.zobjectBackground.id;\n            for (let {id} of selectedElements) {\n                if (id === backgroundId) {\n                    continue;\n                } else {\n                    x[id] = true;\n                }\n            }\n            setSelectedPulledElements(x);\n            setSelectedZObject(undefined);\n            setSelection(undefined);\n            return;\n        }\n        if (selection) {\n            setSelectedPulledElements({});\n            setSelection(undefined);\n            setSelectedZObject(undefined);\n        }\n    }, [selection, setSelection, dropdownPos, sequencerEngine]);\n    */\n\n    if (!sequencerEngine) {\n        return 0;\n    }\n\n    let style = {\n    };\n\n    let className = \"editor no-select\";\n    if (showThemeGrid) {\n        className += \" show-grid\";\n    }\n    return (\n          <div\n            onContextMenu={onContextMenu}\n            style={style}\n            onClick={onDoubleClick}\n            onDrop={onDrop}\n            ref={scrollRef}\n            className={className}\n          >\n            {!showPadSequencer &&\n             <EditorDropdown\n               elements={elements}\n               subSequence={subSequence}\n               scale={scale}\n               dropdownPosRef={dropdownPosRef}\n               dropdownPos={dropdownPos}/>}\n            {!showPadSequencer && <PulledBackground\n                                    dropdownPos={dropdownPos}\n                                    getXY={getXY}\n                                    scale={scale}\n                                    sequencerEngine={sequencerEngine}\n                                    setSelectedZObject={setSelectedZObject}\n                                    onMouseMove={onMouseMove}\n                                    getSelection={getSelection}\n                                    editorRef={scrollRef}\n                                  />}\n            {showPadSequencer ? <PadSequencer editorBottomRef={editorBottomRef} pad={showPadSequencer === true ? subSequence.pads[0] : showPadSequencer}/> :\n             <ModuleSpatialView\n               editorRef={scrollRef}\n               edgesRef={edgesRef}\n               innerRef={innerRef}\n               scale={scale}\n               setScale={setScale}\n               elements={elements}\n               dropdownPosRef={dropdownPosRef}\n               //selection={selection}\n               //setSelection={setSelection}\n               key={subSequence.id}\n               scale={1}\n               showEffects={true}\n               subSequence={subSequence}\n               sequencerEngine={sequencerEngine}>\n               <GlobalEdges\n                 edgesRef={edgesRef}\n                 //selection={selection}\n                 containerRef={scrollRef}\n                 scale={scale}\n                 subSequence={subSequence}/>\n               <LinkedParameterVisualizer sequencerEngine={sequencerEngine} scrollContainer={scrollRef}/>\n               <GroupEdges scrollContainer={scrollRef} sequencerEngine={sequencerEngine}/>\n             </ModuleSpatialView>}\n            {showPadSequencer && <GroupEdges scrollContainer={scrollRef} sequencerEngine={sequencerEngine}/>}\n         </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showThemeGrid: state.sequencer.showThemeGrid,\n      showPadSequencer: state.spatial.showPadSequencer,\n      position: state.spatial.position,\n      loadingSequence: state.sequencer.loadingSequence,\n      currentSubSequence: props.sequencerEngine && props.sequencerEngine.currentSubSequence\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowTrackInstrument: x => dispatch(setShowTrackInstrument(x)),\n      setPulledEffects: x => dispatch(setPulledEffects(x)),\n      setSelectedPulledElements: x => dispatch(\n          setSelectedPulledElements(x)),\n      setSelectedZObject: x => dispatch(\n          setSelectedZObject(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setContextualHelp} from \"actions/index.js\";\nimport { MIX_VIEW } from \"constants/view-modes.js\";\nimport { SEQUENCER_VIEW } from \"constants/view-modes.js\";\nimport { ARRANGEMENT_VIEW } from \"constants/view-modes.js\";\nimport {setViewMode} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst ViewButtons = (props) => { \n    return (\n        <div className=\"view-buttons\">\n          <img\n            onClick={() => props.setViewMode(SEQUENCER_VIEW)}\n            src=\"/mix-view.svg\"\n            className=\"view-mode-icon\"\n            className={props.viewMode === SEQUENCER_VIEW ? \"view-mode-icon selected\" : \"view-mode-icon\"}/>\n          <img\n            src=\"/arrangement-view.svg\"\n            onClick={() => props.setViewMode(ARRANGEMENT_VIEW)}\n            className={props.viewMode === ARRANGEMENT_VIEW ? \"view-mode-icon selected\" : \"view-mode-icon\"}/>\n          <img\n            src=\"/arrangement-view.svg\"\n            onClick={() => props.setViewMode(MIX_VIEW)}\n            className={props.viewMode === MIX_VIEW ? \"view-mode-icon selected\" : \"view-mode-icon\"}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      viewMode: state.sequencer.viewMode,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setViewMode: viewMode => dispatch(setViewMode(viewMode)),\n      setContextualHelp: (element, arg) => dispatch(setContextualHelp(element, arg)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewButtons);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setShowSearchWindow, setShowProjectsModal} from 'actions/index.js';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {setShowSettings} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst LogoDropdown = (props) => { \n    let [toggled, setToggled] = useState(false);\n    return (\n        <ButtonDropdown\n        className=\"logo-dropdown view-dropdown guilds-dropdown\"\n        show={toggled ? \"true\" : \"false\"}\n        isOpen={toggled}\n          toggle={() => setToggled(!toggled)}>\n         <DropdownToggle size=\"sm\" caret color=\"primary\">\n           <img src='/smol-logo4.svg'/>\n         </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={() => props.setShowSearchWindow(true)}>\n              Search <div className=\"key-shortcut\">/</div>\n            </DropdownItem>\n            <DropdownItem onClick={() => props.setShowSettings(true)}>\n              Settings\n            </DropdownItem>\n            <DropdownItem onClick={() => props.setShowProjectsModal(true)}>\n              Open Project\n            </DropdownItem>\n          </DropdownMenu>\n        </ButtonDropdown>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowProjectsModal: x => dispatch(setShowProjectsModal(x)),\n      setShowSearchWindow: x => dispatch(setShowSearchWindow(x)),\n      setShowSettings: show => dispatch(setShowSettings(show)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogoDropdown);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ResolutionDropdown from \"components/toolbar/ResolutionDropdown.js\"\nimport PatternsComponent from \"components/toolbar/PatternsComponent.js\";\nimport {\n    setShowSaveModal,\n    setShowEnvelopes} from 'actions/index.js';\nimport {setShowLFOs} from 'actions/index.js';\nimport ViewButtons from './ViewButtons.js';\nimport { ARRANGEMENT_VIEW } from \"constants/view-modes.js\";\nimport LFOTrackComponent from \"components/lfo/LFOTrackComponent.js\";\nimport TransactionsView from \"components/toolbar/TransactionsView.js\";\nimport LiveButtons from './LiveButtons.js';\nimport LogoDropdown from './LogoDropdown.js';\nimport ClockComponent from \"components/toolbar/ClockComponent.js\";\nimport BPMComponent from \"components/toolbar/BPMComponent.js\";\nimport ToolbarMixButtons from \"components/toolbar/ToolbarMixButtons.js\";\nimport GuildsMenu from \"components/guilds/GuildsMenu.js\";\nimport SaveModal from \"components/modals/SaveModal.js\"\nimport {connect} from 'react-redux';\nimport ZObjectToolbar from \"components/pulled/ZObjectToolbar.js\";\nimport './toolbar.scss';\n\nconst TopToolbar = ({showSave, setShowSave, ...props}) => { \n    let ref = useRef();\n\n    const onSave = useCallback((name, saveOption, selectedGuild) => {\n        props.sequencerEngine.save(name, saveOption, true, selectedGuild);\n        setShowSave(false);\n    }, [setShowSave, props.sequencerEngine]);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKey);\n        return () => window.removeEventListener(\"keydown\", onKey);\n    }, [props.showLFOs, props.showEnvelopes]);\n\n    const onKey = useCallback((e) => {\n        /*\n        if (e.key === 'E') {\n            props.setShowEnvelopes(\n                !props.showEnvelopes);\n            // props.setShowLFOs(false);\n        } else if (e.key === 'L') {\n            props.setShowLFOs(\n                !props.showLFOs);\n        }\n        */\n    }, [props.showLFOs, props.showEnvelopes]);\n\n\n    return (\n        <div ref={ref} className=\"top-toolbar\">\n          <div className=\"main-row toolbar-row\">\n          <LogoDropdown {...props}/>\n            {!props.sequencerEngine ? '' :\n             props.viewMode === ARRANGEMENT_VIEW ?\n             <PatternsComponent sequencerEngine={props.sequencerEngine}/> :\n             <ZObjectToolbar subSequence={props.sequencerEngine.currentSubSequence}/>}\n\n          {props.sequencerEngine && <BPMComponent sequencerEngine={props.sequencerEngine}/>}\n          {props.sequencerEngine && <ClockComponent sequencerEngine={props.sequencerEngine}/>}\n          {props.sequencerEngine && <ToolbarMixButtons sequencerEngine={props.sequencerEngine}/>}\n          {props.sequencerEngine && <LiveButtons sequencerEngine={props.sequencerEngine}/>}\n          {props.sequencerEngine && <ViewButtons sequencerEngine={props.sequencerEngine}/>}\n          <div className=\"menu-and-transactions\">\n            <TransactionsView/>\n          {props.sequencerEngine && <GuildsMenu store={props.sequencerEngine.store}/>}\n          </div>\n          <div onClick={() => setShowSave(true)} className=\"pushable save-project-button\">\n            Save\n          </div>\n            <ResolutionDropdown sequencerEngine={props.sequencerEngine}/>\n          <SaveModal\n            sequencerEngine={props.sequencerEngine}\n            onSave={(name, saveOption, selectedGuild) => onSave(name, saveOption, selectedGuild)}\n            onHide={() => setShowSave(false)}\n            show={showSave}/>\n          </div>\n          {(props.showLFOs || props.showEnvelopes)  &&\n           <div className={props.showLFOs ? \"overlaying toolbar-row showLFOs\" : \"showEnvelopes overlaying toolbar-row\"}>\n            <LFOTrackComponent\n              scrollContainer={ref}\n              sequencerEngine={props.sequencerEngine}\n              envelopesTrack={props.sequencerEngine.envelopesTrack}\n              lfosTrack={props.sequencerEngine.lfosTrack}/>\n           </div>}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showLFOs: state.sequencer.showLFOs,\n      showEnvelopes: state.sequencer.showEnvelopes,\n      show: state.spatial.sidebarsShowing,\n      showMoulators: state.spatial.showModulators,\n      viewMode: state.sequencer.viewMode,\n      showSave: state.toolbar.showSaveModal\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowEnvelopes: s => dispatch(setShowEnvelopes(s)),\n      setShowLFOs: s => dispatch(setShowLFOs(s)),\n      setShowSave: s => dispatch(setShowSaveModal(s))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TopToolbar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SubSequencesComponent from \"components/toolbar/SubSequencesComponent.js\";\nimport {connect} from 'react-redux';\nimport Dropdown from 'react-dropdown';\n\nconst SubSequenceNavigator = ({sequencerEngine, currentSubSequence, style}) => { \n    let options = sequencerEngine.subSequences.map(\n        (x,i) => ({label: x.name, value: x.id}));\n    return (\n        <div style={style} className=\"subsequence-navigator\">\n          <Dropdown\n            onChange={o => sequencerEngine.switchToSubSequence(o.value)}\n            value={options.find(x => x.value === currentSubSequence.id)}\n            options={options}/>\n          <div onClick={() => sequencerEngine.newSubSequence()} className=\"new-sub-btn\">+</div>\n          <div onClick={() => sequencerEngine.deleteSubSequence()} className=\"delete-sub-btn\">-</div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        currentSubSequence: props.sequencerEngine.currentSubSequence\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubSequenceNavigator);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SynthThumbnail from './SynthThumbnail.js';\nimport TrackContextMenu from \"./track/TrackContextMenu.js\"\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\"\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\"\nimport {PIANO_ROLL} from 'constants/editor-bottom-modes.js';\nimport {\n    setSelectedZObject,\n    setShowEditorBottom,\n    setTrackDragging,\n       } from 'actions/index.js';\nimport {trim} from 'utils/trim.js';\nimport {updateTrackMute} from 'operations/actions.js';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport {connect} from 'react-redux';\n\nconst TrackOption = ({\n    track,\n    setTrackDragging,\n    selectedZObject,\n    setSelectedZObject,\n    enabled,\n    solo,\n    muted,\n    planeMapping,\n    setShowEditorBottom,\n    leftSidebarWidth\n}) => { \n    let {sequencerEngine} = track;\n    let ref = useRef();\n\n    const {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref, useTop: false});\n\n    useEffect(() => {\n        if (dropdownPos) {\n            track.sequencerEngine.selectTrack(track.trackNumber);\n        }\n    }, [dropdownPos, track]);\n\n    const openPianoRoll = useCallback(() => {\n        setShowEditorBottom(track.sequencerEngine.state.spatial.showEditorBottom === PIANO_ROLL ? undefined : PIANO_ROLL);\n    }, [track]);\n\n    const onClickTrack = useCallback(() => {\n        if (planeMapping) {\n            planeMapping.randomlyMapParameters(\n                track);\n        }\n        sequencerEngine.selectTrack(track.trackNumber);\n        setSelectedZObject(track);\n    }, [track, planeMapping]);\n\n    const onClick = useDoubleClick(\n        openPianoRoll, // on double click open the piano roll\n        250, // 250 ms \n        onClickTrack // on single click select the track\n    );\n\n    const deleteTrack = useCallback(() => {\n        track.sequencerEngine.deleteTrack(track.trackNumber);\n    }, [track]);\n\n    const onClickMute = useCallback(() => {\n        track.sequencerEngine.operationManager.dispatch(\n            updateTrackMute(track, !muted));\n    }, [muted, track]);\n\n    const onClickSolo = useCallback(() => {\n        track.solo(!solo);\n    }, [solo, track]);\n\n    let className = selectedZObject === track ? \"selected track-option\" : \"track-option\";\n    if (planeMapping) {\n        className += \" plane-mapping\";\n    }\n\n    let nameStyle = {};\n    nameStyle.maxWidth = 100 * leftSidebarWidth / 240;\n    return (\n      <div\n        ref={ref}\n        onContextMenu={onContextMenu}\n        draggable={true}\n        onDragOver={e => e.preventDefault()}\n        onDragStart={(e) => {\n            e.stopPropagation();\n            setTrackDragging(track);\n        }}\n        onClick={onClick} \n        className={className}>\n        <TrackContextMenu\n          dropdownPos={dropdownPos}\n          setDropdownPos={setDropdownPos}\n          track={track}/>\n        <div\n          style={{\n              marginRight: 15 * leftSidebarWidth / 240,\n              marginLeft: 5 * leftSidebarWidth / 240\n          }}\n          onClick={() => leftSidebarWidth > 70 ? deleteTrack() : 0} className=\"delete-btn\">\n        {leftSidebarWidth > 70 ? 'x' : ''}</div>\n        {track.instrument ? <SynthThumbnail track={track} /> : <TrackThumbnail hasInner={true} track={track}/>}\n        {leftSidebarWidth > 140 &&\n         <div style={nameStyle} className=\"ztrack-name\">\n           {trim(track.presetName || track.name || track.getName())}\n         </div>}\n        {leftSidebarWidth > 100 && <div onClick={onClickSolo} className={solo ? \"solo soloed\" : \"solo\"}>S</div>}\n        {leftSidebarWidth > 70 && <div onClick={onClickMute} className={muted ? \"mute muted\" : \"mute\"}>M</div>}\n        <div onClick={() => track.toggleEnabled()} className={enabled ? \"dot enabled track-arm\" : \"dot track-arm\"}/>\n      </div>);\n    \n};\n\nconst mapStateToProps = (state, props) => {\n    let enabledMap = state.tracks.trackIsEnabled[props.track.subSequence.id] || {};\n    let isEnabled = enabledMap[props.track.id]; \n    return {\n        name: props.track.presetName || props.track.name,\n        enabled:  isEnabled === undefined ? false : isEnabled,\n        solo: state.tracks.trackSolos[props.track.id],\n        muted: state.tracks.trackMutes[props.track.id],\n        planeMapping: state.effects.planeMapping,\n        leftSidebarWidth: state.spatial.leftSidebarWidth\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackDragging: x => dispatch(setTrackDragging(x)),\n      setShowEditorBottom: x => dispatch(setShowEditorBottom(x)),\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PatternsComponent from \"components/toolbar/PatternsComponent.js\";\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\nimport SubSequenceNavigator  from './SubSequenceNavigator.js';\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\nimport ContextualHelpComponent from \"components/sidebar/ContextualHelpComponent.js\";\nimport ContextualHelp from \"components/sidebar/ContextualHelpComponent.js\";\nimport TrackOption from './TrackOption.js';\nimport PadOption from './PadOption.js';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport Navigator from './Navigator.js';\nimport {TRACK} from 'constants/object-types.js';\nimport NestedZObject from './NestedZObject.js';\nimport {\n    setLeftSidebarWidth,\n    setViewableZObjects,\n    setWindowPosition,\n    setViewableSubPatches,\n    setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst OPTIONS = [\"Tracks\", \"Objects\"];\n\nconst LeftSidebar = ({\n    setWindowPosition,\n    show,\n    setSelectedZObject,\n    setViewableSubPatches,\n    setViewableZObjects,\n    leftSidebarWidth,\n    setLeftSidebarWidth,\n    sequencerEngine,\n    selectedZObject\n}) => { \n\n    let [resizing, setResizing] = useState(false);\n    let [searchTerm, setSearchTerm] = useState(\"\");\n    let [option, setOption] = useState(\"Tracks\");\n\n    useEffect(() => {\n        window.addEventListener(\"mousemove\", onMouseMove);\n        window.addEventListener(\"mouseup\", onMouseUp);\n\n        return () => {\n            window.removeEventListener(\"mousemove\", onMouseMove);\n            window.removeEventListener(\"mouseup\", onMouseUp);\n        };\n    }, [resizing, setResizing]);\n\n    const onMouseMove = useCallback((e) => {\n        if (resizing) {\n            setLeftSidebarWidth(Math.max(50,Math.min(240, e.pageX)));\n        }\n    }, [resizing]);\n\n    const onMouseUp = useCallback(() => {\n        if (resizing) {\n            setResizing(false);\n        }\n    }, [resizing, setResizing]);\n\n    useEffect(() => {\n        if (selectedZObject && selectedZObject.getObjectType() === TRACK) {\n            setOption(\"Tracks\");\n        } else {\n            setOption(\"Objects\");\n        }\n    }, [setOption, selectedZObject]);\n\n    \n    const onDoubleClick = useCallback((zobject) => {\n        let id =  undefined;\n        if (zobject.effect && zobject.effect.zObjects) {\n            id = zobject.effect.id;\n            setViewableSubPatches([zobject.effect]);\n        } else if (zobject.subSequence.zObjects && zobject.subSequence.inletObjects) {\n            let {viewableZObjects} = zobject.state.zobject;\n            setWindowPosition(zobject.window.id, {x: 100, y: 100});\n            setViewableZObjects([... viewableZObjects, zobject]);\n        }\n        if (id) {\n            setWindowPosition(id, 0, 0);\n        }\n        setSelectedZObject(zobject);\n    }, []);\n\n    const onClickZObject = useDoubleClick(\n        onDoubleClick, 250, (o) => setSelectedZObject(o));\n    \n    if (!show) {\n        return '';\n    }\n\n    if (leftSidebarWidth < 140) {\n        //zobjects = [];\n        //zmessages = [];\n    }\n    let inner = (\n        <div\n          className=\"object-explorer\">\n          {sequencerEngine && searchTerm === \"\" && sequencerEngine.tracks && sequencerEngine.tracks.map(\n              track =>\n                  <TrackOption selectedZObject={selectedZObject} track={track}/>)}\n          {/*\n          {searchTerm === \"\" && zmessages.map(\n              x => <div\n                     key={x.id}\n                     onClick={() => setSelectedZObject(x)}\n                     className={x === selectedZObject ? \"selected zmessage\" : \"zmessage\"}>\n                     <img className=\"object-icon\" src={\n                         x.type === NUMBER ?\n                             \"/znumber-light.svg\" : \"/zmessage-light.svg\"}\n                     /> {typeof x.storedMessage === \"string\" ?\n                         x.storedMessage : x.type === NUMBER ?\n                         \"Number\" : \"Message\"}\n                   </div>)}\n          {zobjects.map(\n              x => <NestedZObject\n                     key={x.id}\n                     zobject={x}\n                     searchTerm={searchTerm}\n                     setSelectedZObject={onClickZObject}\n                     selectedZObject={selectedZObject}/>)}\n           */}\n          \n        </div>);\n    return (\n        <div style={{\n            width: leftSidebarWidth, minWidth: leftSidebarWidth}} className=\"sidebar left-sidebar\">\n          <SubSequenceNavigator\n            style={leftSidebarWidth < 140 ? {display: \"none\"} : {}}\n            sequencerEngine={sequencerEngine}/>\n          <PatternsComponent sequencerEngine={sequencerEngine}/>\n          {/*<Navigator options={OPTIONS} setOption={setOption} option={option}/>*/}\n          {/*\n          <div className=\"object-search-container\">\n            <input\n              className=\"search-input\"\n              placeholder=\"Search objects\"\n              value={searchTerm}\n              onChange={e => setSearchTerm(e.target.value)}\n              type=\"text\"/>\n            <div onClick={() => setSearchTerm(\"\")} className=\"clear-btn\">x</div>\n          </div>\n           */}\n          {inner}\n          {leftSidebarWidth >= 200 && <ContextualHelpComponent sequencerEngine={sequencerEngine}/>}\n          <div onMouseDown={() => setResizing(true)} className=\"right-edge\"/>\n       </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n    let sub = props.sequencerEngine &&\n        props.sequencerEngine.currentSubSequence;\n    if (!sub) {\n        return {};\n    }\n    return {\n        pads: sub.pads,\n        selectedZObject: state.zobject.selectedZObject,\n        //zobjects: state.zobject.zobjects[sub.id],\n        //zmessages: state.zobject.zmessages[sub.id],\n        show: state.spatial.sidebarsShowing,\n        tracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n        leftSidebarWidth: state.spatial.leftSidebarWidth\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setViewableSubPatches: x => dispatch(setViewableSubPatches(x)),\n      setWindowPosition: (id, x) => dispatch(setWindowPosition(id, x)),\n      setViewableZObjects: x => dispatch(setViewableZObjects(x)),\n      setLeftSidebarWidth: x => dispatch(setLeftSidebarWidth(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {\n    setUXLockObject,\n    setUXHideObject\n} from 'actions/index.js';\n\nconst PadOption = ({\n    pad,\n    selectedZObject,\n    setSelectedZObject,\n    hidden,\n    locked,\n    setUXLockObject,\n    setUXHideObject\n}) => { \n    return (\n        <div\n          onClick={() => setSelectedZObject(pad)}\n          className={pad === selectedZObject ? \"selected zpad\" : \"zpad\"}>\n          <img className=\"object-icon\" src=\"/zpad-light.svg\"/>\n          Pad\n          <img\n            onClick={() => setUXHideObject(pad.id, !hidden)}\n            className={hidden ? \"hidden eye\" : \"eye\"}\n            src={hidden ? \"/eyeball-hidden.svg\" : \"/eyeball.svg\"}\n          />\n          <img\n            onClick={() => setUXLockObject(pad.id, !locked)}\n            className=\"lock-ux-btn\"\n            src={locked ? \"/zlock-locked-light.svg\" : \"/zlock-unlocked-light.svg\"}\n          />\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n    let id = props.pad.id;\n    return {\n        hidden: state.spatial.hiddenObjects[id],\n        locked: state.spatial.lockedObjects[id]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUXLockObject: (id, x) => dispatch(setUXLockObject(id, x)),\n      setUXHideObject: (id, x) => dispatch(setUXHideObject(id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadOption);\n","import ethereum from \"decentralized/ethereum.js\"\n\nexport const bulkUploadSamples = async (samples, guildId) => {\n    let uploads = samples.map(x => x.uploadAudioBuffer(guildId));\n    samples.forEach(s => s.title = s.name);\n    let contentKeys = await Promise.all(uploads);\n\n    if (guildId === 0) {\n        ethereum.newSamplesWithMetadata(samples, guildId);\n    }\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {setShowLogin} from 'actions/index.js';\nimport {mod} from \"utils/mod.js\";\nimport Tone from 'tone';\nimport AudioUnit from \"engine/audio.js\";\nimport accounts from 'accounts/Accounts.js';\nimport {bulkUploadSamples} from \"utils/bulkUploadSamples.js\"\nimport {\n    setRecentlyAddedSounds,\n    setSamplesToSave,\n    setUploadingFile} from 'actions/index.js';\nimport GuildsMenu from \"components/guilds/GuildsMenu.js\";\nimport {useWindowManager} from \"components/windows/useWindowManager.js\"\nimport {connect} from 'react-redux';\nimport './windows.scss';\n\nconst SamplesToSave = ({\n    setShowLogin,\n    userToken,\n    setRecentlyAddedSounds, setSamplesToSave, sequencerEngine, setUploadingFile, samplesToSave, guildId}) => { \n    let [confirming, setConfirming] = useState(false);\n    let ref = useRef(undefined);\n    let [tags, setTags] = useState([]);\n    let [styles, setStyles] = useState([]);\n    let [text, setText] = useState('');\n    let audioUnit = useRef(new AudioUnit(Tone.Master.context));\n    let [selected, setSelected] = useState(undefined);\n\n    const playSound = useCallback((sample, index) => {\n        if (!sample) {\n            sample = samplesToSave[index];\n        }\n        if (!sample) {\n            return;\n        }\n        audioUnit.current.setBuffer(sample.audioBuffer);\n        audioUnit.current.playSound(0);\n        setSelected(index);\n    }, [setSelected, samplesToSave]);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [samplesToSave, setSelected, selected, setTags, tags, text]);\n\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === \"Enter\") {\n            enter();\n        } else if (e.key === \"ArrowUp\") {\n            playSound(undefined, mod(selected - 1, samplesToSave.length));\n        } else if (e.key === \"ArrowDown\") {\n            playSound(undefined, mod(selected + 1, samplesToSave.length));\n        }\n    }, [samplesToSave, setSelected, selected, setTags, tags, text]);\n\n    const enter = useCallback(() => {\n        setTags([... tags, text]);\n        setText('');\n    }, [text, tags, setTags, setText]);\n\n    useEffect(() => {\n        samplesToSave.forEach(\n            s => s.tags = Array.from(new Set([... s.tags, ...tags])));\n    }, [tags, samplesToSave]);\n\n    const saveAll = useCallback((confirmed=false) => {\n        if (!confirmed && guildId === 0) {\n            setConfirming(true);\n            return;\n        }\n        setUploadingFile(true);\n        let _samples = samplesToSave;\n        bulkUploadSamples(samplesToSave, guildId).then(\n            x => {\n                console.log('finished bulk uploading...');\n                setRecentlyAddedSounds(_samples);\n                setUploadingFile(false);\n            });\n        setSamplesToSave([]);\n    }, [guildId, setConfirming, samplesToSave]);\n\n    const {setCoords, onMouseUp, onMouseDown, coords} =\n          useWindowManager({ref, initialCoords: {x:500, y:300}});\n\n    if (!samplesToSave || samplesToSave.length === 0) {\n        return '';\n    }\n\n    return (\n        <div ref={ref} className=\"samples-to-save\"\n          onMouseUp={onMouseUp}\n          onMouseDown={onMouseDown}\n          style={coords ? {top: coords.y, left: coords.x} : {}} \n        >\n          {confirming &&\n           <div className=\"confirmation\">\n             <div className=\"confirmation-text\">\n               Are you sure you want to save this samples publicly? Anyone will be able to see them. \n             </div>\n             <div className=\"buttons\">\n               <div onClick={() => saveAll(true)} className=\"save-btn pushable\">\n                 Yes\n               </div>\n               <div onClick={() => setConfirming(false)} className=\"save-btn pushable cancel\">\n                 Cancel\n               </div>\n             </div>\n           </div>}\n          <div className=\"samples-list\">\n            {samplesToSave.map((x, i) =>\n                <div\n                  onClick={() => playSound(x, i)}\n                  className={i === selected ? \"sample-to-save selected\" : \"sample-to-save\"}>\n                  <div className=\"sts-name\">{x.name}</div>\n                  {x.tags && x.tags.map(y => <div className=\"sts-tag\">{y}</div>)}\n                </div>\n            )}\n          </div>\n          <div className=\"tags-editor\">\n            <div className=\"tags-container\">\n              {tags.map(tag => <div className=\"tag-option\">{tag}</div>)}\n            </div>\n            <div className=\"tag-input-container\">\n              <input placeholder=\"Enter tags for these sounds\" value={text} onChange={(x) => setText(x.target.value)} className=\"tag-input\"/>\n              <div onClick={enter} className=\"add-btn pushable\">+</div>\n            </div>\n\n          </div>\n        {!userToken ?\n         <div className=\"buttons\">\n           <span\n             onClick={() => setShowLogin(true)}\n             className=\"pushable show-login-btn\">Login</span> to save these sounds.\n         </div>: \n          <div className=\"buttons\">\n            <GuildsMenu store={sequencerEngine.store}/>\n            <div onClick={() => saveAll(false)} className=\"save-btn pushable\">\n              Save {guildId === 0 ? \"Publicly\" : \" to Guild\"}\n            </div>\n          </div>}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      userToken: state.sequencer.userToken,\n      samplesToSave: state.samples.samplesToSave,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowLogin: show=> dispatch(setShowLogin(show)),\n      setUploadingFile: (a) => dispatch(setUploadingFile(a)),\n      setSamplesToSave: x => dispatch(setSamplesToSave(x)),\n      setRecentlyAddedSounds: x => dispatch(setRecentlyAddedSounds(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplesToSave);\n","import React,{ useRef, useEffect, useCallback, useState} from 'react';\nimport {lstorage} from 'utils/lstorage.js';\nimport ZObjectModal from \"components/modals/ZObjectModal.js\";\nimport Mix from 'components/mix/Mix.js';\nimport RollingViewer from './RollingViewer.js';\nimport FPS from './FPS.js';\nimport ipfs from \"decentralized/Ipfs.js\";\nimport ArrangementView from \"components/arrangement/ArrangementView.js\";\nimport { MIX_VIEW } from \"constants/view-modes.js\";\nimport { SEQUENCER_VIEW } from \"constants/view-modes.js\";\nimport { ARRANGEMENT_VIEW } from \"constants/view-modes.js\";\nimport SubPatches from \"components/subpatch/SubPatches.js\";\nimport NFTViewer from \"components/nft/NFTViewer.js\";\nimport Xanadu from \"components/xanadu/Xanadu.js\"\nimport {useThemes} from './themes/useThemes.js';\nimport NewPackWindow from \"components/packs/NewPackWindow.js\";\nimport SearchWindow from \"components/v3/search/SearchWindow.js\";\nimport EditorBottom from './editor/EditorBottom.js';\nimport PluginsPane from './plugins/PluginsPane.js';\nimport {\n    setFullScreenZObject,\n    setSelectedZObject,\n    setWallpaper,\n    setTheme,\n    setShowThemeGrid,\n    setArrangementBottomHeight\n    } from 'actions/index.js';\nimport SimpleSequencerBottomToolbar from \"components/installation/SimpleSequencerBottomToolbar.js\";\nimport Modals from \"components/v2/Modals.js\";\nimport RightSidebar from './sidebar/RightSidebar.js';\nimport Editor from './editor/Editor.js';\nimport TopToolbar from './toolbar/TopToolbar.js';\nimport {useSequencer} from \"components/v2/useSequencer.js\";\nimport {connect} from 'react-redux';\nimport {useKeyListener} from \"components/v2/useKeyListener.js\";\nimport LeftSidebar from './sidebar/LeftSidebar.js';\nimport SamplesToSave from './windows/SamplesToSave.js';\nimport ZObjectProgressBar from \"components/progressbar/ZObjectProgressBar.js\";\nimport './v3.scss';\nimport './pianoroll.scss';\nimport './colors.scss';\nimport '../../App.css';\nimport './fullscreen.scss';\nimport '../../QuickAdd.scss';\nimport '../../Sidebar.scss';\nimport '../../Installation.scss';\nimport '../../zobject.scss';\nimport '../../Sequences.css';\nimport '../../DrumMachineImportMode.css';\nimport '../../Groups.scss';\nimport '../../subpatch.scss';\nimport './mobile.scss';\nimport '../../Packs.scss';\nimport '../../animation.css';\nimport '../../Preferences.css';\nimport '../../colors.scss';\nimport '../../Guilds.scss';\nimport '../../Explore2.scss';\nimport '../../Cirklon.scss';\nimport '../../Common.css';\nimport '../../NFT.scss';\nimport 'react-dropdown/style.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport \"bootstrap-slider/dist/css/bootstrap-slider.css\";\n\nconst MainView = (props) => { \n    let ref = useRef(undefined);\n    let editorBottom = useRef(undefined);\n    let [ethereumCache, sequencerEngine, ethereumSearcher] = props.sequencerEngine ? [undefined, sequencerEngine, undefined] :\n        useSequencer(props);\n    if (props.sequencerEngine) {\n        sequencerEngine = props.sequencerEngine;\n    }\n    let [keyListener] = useKeyListener({sequencerEngine: sequencerEngine});\n\n    useThemes({theme: props.theme, backgroundColor: props.backgroundColor});\n\n    /*\n    useEffect(() => {\n        if (props.showPianoRoll) {\n            props.setArrangementBottomHeight(window.innerHeight - 40);\n        }\n    }, [props.showPianoRoll]);\n    */\n\n    useEffect(() => {\n        if (window.isNFT) {\n            return false;\n        }\n        let item = lstorage.getItem(\"wallpaper\");\n        if (item) {\n            props.setWallpaper(item);\n        }\n        item = lstorage.getItem(\"theme\");\n        if (item) {\n            props.setTheme(item);\n        }\n        item = lstorage.getItem(\"show-theme-grid\");\n        if (item) {\n            props.setShowThemeGrid(item);\n        }\n    }, []);\n\n    if (props.fullScreenZObject) {\n        return (\n            <div ref={ref} className=\"v3 dark no-select full-screen\">\n              {/*<RollingViewer sequencerEngine={sequencerEngine}/>*/}\n                <SubPatches containerRef={ref}/>\n              {props.showSearchWindow &&\n               <SearchWindow\n                 sequencerEngine={sequencerEngine}\n                 showing={props.showSearchWindow}/>}\n              <div\n                onClick={() => props.setSelectedZObject(undefined)}\n                className=\"editor full-screen-editor\">\n                {!window.isNFT && <FPS/>}\n                  <RollingViewer sequencerEngine={sequencerEngine}/>\n                  {<img\n                     className=\"pushable expand-icon\"\n                     onClick={() => props.setFullScreenZObject(undefined)}\n                     src=\"/expand-icon.svg\"/>}\n                  {Array.isArray(props.fullScreenZObject) ?\n             <div className=\"multi-full-screen\">\n            {props.fullScreenZObject.map(zobject =>\n                  <NFTViewer\n                    key={zobject.id}\n                    isMulti={true}\n                    sequencerEngine={sequencerEngine}\n                    zObject={zobject}\n                  />)}\n             </div> :\n                  <NFTViewer\n                    isMulti={true}\n                    sequencerEngine={sequencerEngine}\n                    zObject={props.fullScreenZObject}\n                  />}\n                </div>\n            </div>);\n    }\n    let style = {\n    };\n    let className = \"v3 no-select dark \";\n    if (props.wallpaper) {\n        style.backgroundImage = 'url(' + ipfs.getHashUrl(props.wallpaper) + ')';\n        className += \" has-wallpaper\";\n    }\n\n    if (props.showPadSequencer) {\n        className += \" showing-pad-sequencer\";\n    }\n\n    if (props.theme === \"light\") {\n        className += \" light-theme\";\n    } else {\n        className += \" dark-theme\";\n    }\n    if (props.presentationMode) {\n        className += \" presentation-mode\";\n    }\n    return (\n        <div style={style} ref={ref} className={className}>\n          <Modals sequencerEngine={sequencerEngine}/>\n          <ZObjectModal/>\n          <ZObjectProgressBar/>\n          <TopToolbar sequencerEngine={sequencerEngine}/>\n          <RollingViewer sequencerEngine={sequencerEngine}/>\n          <SubPatches containerRef={ref}/>\n          <SamplesToSave sequencerEngine={sequencerEngine}/>\n          {sequencerEngine && <Xanadu sequencerEngine={sequencerEngine}/>}\n          {props.creatingNewPack || props.packToEdit ? <NewPackWindow json={props.packToEdit}/> : ''}\n          {props.showSearchWindow && <SearchWindow sequencerEngine={sequencerEngine} showing={props.showSearchWindow}/>}\n        {props.showPianoRoll ?\n         <SimpleSequencerBottomToolbar sequencerEngine={sequencerEngine}/> :\n         props.viewMode === ARRANGEMENT_VIEW ?\n         <ArrangementView sequencerEngine={sequencerEngine}/> :\n         props.viewMode === SEQUENCER_VIEW ?\n         <Mix sequencerEngine={sequencerEngine}/> :\n         <div className=\"editor-and-sidebars\">\n           <LeftSidebar sequencerEngine={sequencerEngine}/>\n           <Editor editorBottomRef={editorBottom} isDocumentation={props.isDocumentation} sequencerEngine={sequencerEngine}/>\n           <RightSidebar sequencerEngine={sequencerEngine}/>\n          {sequencerEngine && <PluginsPane scrollRef={ref} sequencerEngine={sequencerEngine}/>}\n           {sequencerEngine && <EditorBottom editorBottomRef={editorBottom} scrollRef={ref} sequencerEngine={sequencerEngine}/>}\n         </div>\n        }\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      theme: state.sequencer.wallpaper ? \"dark\" : state.sequencer.theme,\n      backgroundColor: state.sequencer.backgroundColor,\n      presentationMode: state.spatial.presentationMode,\n      showPianoRoll: state.sequencer.showPianoRoll,\n      showSearchWindow: state.spatial.showSearchWindow,\n      viewMode: state.sequencer.viewMode,\n      creatingNewPack: state.packs.creatingNewPack,\n      packToEdit: state.packs.packToEdit,\n      fullScreenZObject: state.zobject.fullScreenZObject,\n      wallpaper: state.sequencer.wallpaper,\n      showPadSequencer: state.spatial.showPadSequencer,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x)),\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setWallpaper: w => dispatch(setWallpaper(w)),\n      setTheme: w => dispatch(setTheme(w)),\n      setShowThemeGrid: w => dispatch(setShowThemeGrid(w)),\n      setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainView);\n"],"sourceRoot":""}