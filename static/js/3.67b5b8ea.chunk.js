(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{2791:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(76),s=n(34),o=n(12),i=n(6);t.a=Object(o.b)(function(e,t){return{rolling:e.sequencer.trackRolling,quantized:e.sequencer.quantized}},function(e){return{setTrackRolling:function(t){return e(Object(i.gh)(t))},setQuantized:function(t){return e(Object(i.xe)(t))}}})(function(e){var t=e.rolling,n=e.setTrackRolling,r=e.quantized,o=e.setQuantized;return a.a.createElement("div",{className:"live-buttons"},a.a.createElement(c.a,{onClick:function(){return n(!t)},className:t?"live-button selected":"live-button",element:s.yb},a.a.createElement("img",{className:"roll-icon",src:"/roll-light.png"})),a.a.createElement(c.a,{onClick:function(){return o(!r)},className:r?"live-button":"live-button selected",element:s.ob},a.a.createElement("img",{className:"quantize-btn",src:r?"/quantized.svg":"/unquantized.svg"})))})},2797:function(e,t,n){},2849:function(e,t,n){},2850:function(e,t,n){},2851:function(e,t,n){},2852:function(e,t,n){},2853:function(e,t,n){},2854:function(e,t,n){},2884:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(0),c=n.n(a),s=n(89),o=n(2792),i=n(2745),u=n(2793),l=n(1352),f=n(456),d=n(12),b=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){Object(l.a)(e);var t=Object(a.useState)(0),n=Object(r.a)(t,2),s=n[0],o=n[1],i=Object(a.useCallback)(function(){window.fps&&o(window.fps)},[o]);return Object(f.a)(i,500),c.a.createElement("div",{className:"frames-per-second"},Math.round(s)," F.P.S.")}),m=n(47),g=n(2798),E=n(79),p=n(2762),v=n(2807),j=n(2765),O=n(1551),h=n(1090),w=n(6),S=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.setMode;return c.a.createElement("div",{className:"quick-actions"},c.a.createElement("div",{onClick:function(){return t("RECENT_SAMPLES")},className:"pushable action"},"Recent Samples"),c.a.createElement("div",{onClick:function(){return t("ALL_SAMPLES")},className:"pushable action"},"All Samples"))}),k=n(9),q=(n(2849),Object(d.b)(function(e,t){return{}},function(e){return{setFullScreenZObject:function(t){return e(Object(w.rc)(t))}}})(function(e){var t=e.zobject,n=e.setFullScreenZObject,s=Object(a.useState)(!1),o=Object(r.a)(s,2),i=o[0],u=o[1],l=Object(a.useCallback)(function(){var e=t.sequencerEngine.state.zobject.fullScreenZObject;n(e?Array.isArray(e)?[].concat(Object(k.a)(e),[t]):[e,t]:t)},[t]);return c.a.createElement("div",{className:"zobject-command"},c.a.createElement("div",{onClick:function(){return u(!i)},className:"collapse-btn"},c.a.createElement("div",{className:i?"arrow-up":"arrow-down"})),i&&c.a.createElement("div",{className:"command-menu"},c.a.createElement("div",{onClick:l,className:"command-option"},"Add to Full-Screen")))})),y=n(419),C=n(2802),N=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.mode,n=e.searchTerm,r=(e.selector,e.sequencerEngine);return c.a.createElement("div",null,c.a.createElement(C.a,{defaultGroupBy:"RECENT_SAMPLES"===t?y.a:y.d,quickAddSearchText:n,sequencerEngine:r}))}),P=n(94),M=n(206),x=n(5),T=n.n(x),D=n(14),L=n(310),R=n(290),A=n(1360),z=n(97),F=(n(127),n(151)),I=n(186),Z=n(605),X=["Multiband Compressor","Flam","Max","Poly","First","Last","Staccato","Dot","Dash 1","Dash 2","Rest","Otherwise","Accent","Legato","R.Every","Double","Later","Regular","Flat","Thick","Split","Piano","Pianissimo"],W=Object.keys,B=(Object.values,function(e,t){return t=t.toLowerCase(),W(e).filter(function(e){return e.toLowerCase().includes(t)}).filter(function(e){return!X.includes(e)})}),_=function(){var e=Object(D.a)(T.a.mark(function e(t,n){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=B(F.b,t),e.t1=B(I.b,t),e.t2=B(Z.b,t),e.t3=H(t,n),e.next=6,U(t,n);case 6:return e.t4=e.sent,e.next=9,V(t,n);case 9:return e.t5=e.sent,e.abrupt("return",{AUDIO_FX:e.t0,MIDI_FX:e.t1,LIVE_FX:e.t2,OBJECTS:e.t3,SAMPLES:e.t4,SYNTHS:e.t5});case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),H=function(e,t){var n=Object(L.a)(t.currentSubSequence,!0);return e=e.toLowerCase(),n.filter(function(t){return"string"===typeof t.name&&t.name.toLowerCase().includes(e)||t.args&&"string"===typeof t.args[0]&&t.args[0].toLowerCase().includes(e)||t.text&&"string"===typeof t.text&&t.text.toLowerCase().includes(e)||t._text&&"string"===typeof t._text&&t._text.toLowerCase().includes(e)||t.text&&"number"===typeof t.text&&t.text.toString().includes(e)}).filter(function(e){return!e.getObjectType||e.getObjectType()!==z.a})},U=function(){var e=Object(D.a)(T.a.mark(function e(t,n){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.a)(t);case 2:return r=e.sent,e.next=5,n.searcher.freeTextSearch(t);case 5:return e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(D.a)(T.a.mark(function e(t,n){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.c)(void 0,"MULTI_SYNTH",[],0,8359897,!1,void 0,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),G=(n(2797),function(e){var t=e.name,n=(e.onClick,e.results),r=e.priorLength,a=void 0===r?0:r,s=e.cursor,o=e.setCursor,i=e.term,u=e.scrollRef;return n&&0!==n.length?[c.a.createElement("div",{className:"type-name"},t)].concat(Object(k.a)(n.map(function(e,n){return c.a.createElement(J,{type:t,onClick:function(){return o(n+a)},isCursor:n+a===s,x:e,scrollRef:u,term:i})}))):""}),J=function(e){var t=e.isCursor,n=e.type,r=e.x,s=e.term,o=e.scrollRef,i=e.onClick,u=Object(a.useRef)();return Object(a.useEffect)(function(){if(t){var e=u.current.offsetTop+50,n=o.current.scrollTop;e>n+o.current.offsetHeight&&o.current.scrollTo(0,e-130),e>141&&e-150<n&&o.current.scrollTo(0,e-130)}},[t]),c.a.createElement("div",{onClick:i,ref:u,className:t?"cursor result":"result"},"Samples"===n?c.a.createElement("img",{src:"/waveform-icon.svg"}):n.includes("FX")?c.a.createElement("img",{src:"/effects-icon.svg"}):"Synth Presets"===n?c.a.createElement("img",{src:"/synth-icon.svg"}):"","string"===typeof r?r:"Synth Presets"===n?r.title:c.a.createElement(Y,{isCursor:t,term:s,zobject:r}))},Y=function(e){var t=e.zobject,n=e.term,r=e.isCursor,a=[],s=t;for(s&&s.subSequence&&s.subSequence.zObject&&a.push(s);s&&s.subSequence&&s.subSequence.zObject;)s=s.subSequence.zObject,a.push(s);0===a.length&&(a=[t]);var o=a.map(function(e,t){return e.message?e._text:e.zObject&&"comment"===e.zObject.name?K(n,e.text):"subpatch"===e.name&&e.args[0]&&""!==e.args[0].trim()?e.args[0]:e.name}),i=void 0;if("script"===t.name){var u=t.effect.outlets[Object.keys(t.effect.outlets)[0]];u&&(u.connections.some(function(e){return"fragment shader"===e.destType})?i="fragment shader":u.connections.some(function(e){return"vertex shader"===e.destType})&&(i="vertex shader"))}return c.a.createElement("div",{className:"zobject-preview"},t.message?c.a.createElement("img",{className:"object-icon",src:t.type===P.c?"/znumber-light.svg":"/zmessage-light.svg"}):t.zObject&&"comment"===t.zObject.name?c.a.createElement("img",{className:"object-icon",src:"/zcomment-light.svg"}):c.a.createElement("img",{className:"object-icon",src:"/zobject-light.svg"}),a.map(function(e,t){return c.a.createElement("div",{key:t,className:t>0?"tree-part spatch":"main-part tree-part"},o[t])}),i&&c.a.createElement("div",{className:"custom-type"},i),r&&c.a.createElement(q,{zobject:t}))},K=function(e,t){var n=t.indexOf(e);return"..."+t.slice(n,n+12)+"..."},Q=function(e){return e?e.length:0},$=Object(d.b)(function(e,t){return{}},function(e){return{setWindowPosition:function(t,n){return e(Object(w.Kh)(t,n))},setViewableZObjects:function(t){return e(Object(w.Fh)(t))},setShowEditorBottom:function(t){return e(Object(w.If)(t))},setViewableSubPatches:function(t){return e(Object(w.Eh)(t))},setFullScreenZObject:function(t){return e(Object(w.rc)(t))}}})(function(e){var t=e.searchTerm,n=e.sequencerEngine,s=e.hide,o=e.inputRef,i=e.setShowEditorBottom,u=e.setWindowPosition,l=e.setViewableZObjects,f=e.setViewableSubPatches,d=e.setFullScreenZObject,b=Object(a.useState)({}),m=Object(r.a)(b,2),g=m[0],E=m[1],p=Object(a.useState)(0),v=Object(r.a)(p,2),j=v[0],O=v[1],h=Object(a.useState)(!1),w=Object(r.a)(h,2),S=w[0],q=w[1],y=Object(a.useRef)(void 0);Object(a.useEffect)(function(){""===t?E({}):_(t,n).then(E)},[t,E]),Object(a.useEffect)(function(){O(0)},[g,O]);var C=Object(a.useCallback)(function(){return Q(g.AUDIO_FX)+Q(g.MIDI_FX)+Q(g.LIVE_FX)+Q(g.OBJECTS)+Q(g.SAMPLES)+Q(g.SYNTHS)},[g]);Object(a.useEffect)(function(){return window.addEventListener("keydown",P),function(){return window.removeEventListener("keydown",P)}},[g,S,j,O,s,q]);var P=Object(a.useCallback)(function(e){if(S)"ArrowLeft"===e.key&&q(!1);else{if("ArrowUp"===e.key)return e.preventDefault(),D(),!1;if("ArrowDown"===e.key)return e.preventDefault(),T(),!1;if("Enter"===e.key)return e.preventDefault(),x(g,j,e.metaKey||e.ctrlKey),!1;if("Escape"===e.key){if(n.state.zobject.viewableSubPatches.length>0||n.state.zobject.viewableZObjects.length>0)return;return e.preventDefault(),s(),!1}"ArrowRight"===e.key&&x(g,j,!1,!0)}},[g,j,O,s,q,S]);Object(a.useEffect)(function(){S&&o.current.blur()},[S]);var x=Object(a.useCallback)(function(e,t,r,a){var c=e.AUDIO_FX||[],o=e.MIDI_FX||[],b=e.LIVE_FX||[],m=e.OBJECTS||[],g=e.SAMPLES||[],E=e.SYNTHS||[],p=[].concat(Object(k.a)(c),Object(k.a)(o),Object(k.a)(b),Object(k.a)(m),Object(k.a)(g),Object(k.a)(E)),v=([].concat(Object(k.a)(c),Object(k.a)(o),Object(k.a)(b),Object(k.a)(m)),p[t]);if(v)if(Q([].concat(Object(k.a)(c),Object(k.a)(o),Object(k.a)(b),Object(k.a)(m)))<=t&&Q([].concat(Object(k.a)(c),Object(k.a)(o),Object(k.a)(b),Object(k.a)(m),Object(k.a)(g)))>t){if(a)return void q(v);r?n.scripting.runScript("/"+v+"/"):n.scripting.runScript("/"+v)}else if(t>=Q([].concat(Object(k.a)(c),Object(k.a)(o),Object(k.a)(b),Object(k.a)(m),Object(k.a)(g))))r?n.auditionPreset(v,n.getSelectedTrack().trackNumber):n.loadPreset(v,!0);else if(Q([].concat(Object(k.a)(c),Object(k.a)(o),Object(k.a)(b)))>t)n.scripting.runScript("+"+v),i(M.a);else{var j=n.state.zobject.fullScreenZObject;if(j&&"three.canvas"!==j.name&&("subpatch"!==v.name||v.effect.isCustom))if(Array.isArray(j))d([].concat(Object(k.a)(j),[v.zObject||v]));else{var O=[j,v.zObject||v];d(O)}else if("subpatch"!==v.name||v.effect.isCustom){v.zObject&&(v=v.zObject);var h=n.state.zobject.viewableZObjects;u({x:100,y:100}),l([].concat(Object(k.a)(h),[v]))}else{var w=n.state.zobject.viewableSubPatches;u({x:100,y:100}),f([].concat(Object(k.a)(w),[v.effect]))}}s()},[s,q]),T=Object(a.useCallback)(function(){O(Math.min(j+1,C()-1))},[g,j,O]),D=Object(a.useCallback)(function(){0===j&&o.current.blur(),O(Math.max(0,j-1))},[j,O]);return Object(a.useEffect)(function(){q(!1)},[t,q]),S?c.a.createElement(N,{searchTerm:S,sequencerEngine:n}):c.a.createElement("div",{ref:y,className:""===t?"search-results empty":"search-results"},c.a.createElement(G,{scrollRef:y,cursor:j,term:t,name:"Create Audio FX",setCursor:O,results:g.AUDIO_FX}),c.a.createElement(G,{scrollRef:y,cursor:j,term:t,priorLength:Q(g.AUDIO_FX),setCursor:O,name:"Create Midi FX",results:g.MIDI_FX}),c.a.createElement(G,{scrollRef:y,cursor:j,term:t,setCursor:O,priorLength:Q(g.AUDIO_FX)+Q(g.MIDI_FX),name:"Create Live FX",results:g.LIVE_FX}),c.a.createElement(G,{scrollRef:y,cursor:j,term:t,name:"Objects (in project)",setCursor:O,priorLength:Q(g.AUDIO_FX)+Q(g.MIDI_FX)+Q(g.LIVE_FX),results:g.OBJECTS}),c.a.createElement(G,{scrollRef:y,cursor:j,term:t,priorLength:Q(g.AUDIO_FX)+Q(g.MIDI_FX)+Q(g.OBJECTS)+Q(g.LIVE_FX),name:"Samples",setCursor:O,results:g.SAMPLES}),c.a.createElement(G,{scrollRef:y,cursor:j,term:t,name:"Synth Presets",setCursor:O,priorLength:Q(g.AUDIO_FX)+Q(g.MIDI_FX)+Q(g.OBJECTS)+Q(g.SAMPLES)+Q(g.LIVE_FX),results:g.SYNTHS}))}),ee=n(260),te=n(8),ne=n(75);function re(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw c}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e,t){var n=Object(a.useCallback)(function(t){return e.dispatch(t)},[e]),r=function(){n(Object(w.b)())};return{onDrop:Object(a.useCallback)(function(){var a=Object(D.a)(T.a.mark(function a(c){var s,o,i,u,l,f,d,b,m,g,E,p,v,j,O,h,S,q,y,C,N,P,M,x,D,L,R;return T.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=e.state,o=s.instruments,i=s.tracks,u=s.effects,l=s.presets,f=s.selector,d=s.sequencer,b=t(c),m=b.x,g=b.y,E=e.state.spatial.editorPadding,m-=Math.max(0,E.x),g-=Math.max(0,E.y),!o.pullablePartDragging){a.next=13;break}return(p=Object(te.a)({},o.pullablePartDragging)).x=m,p.y=g,v=[].concat(Object(k.a)(u.pulledEffects),[p]),n(Object(w.we)(v)),r(),a.abrupt("return");case 13:if(!i.trackDragging){a.next=18;break}return(j=i.trackDragging).subSequence.createZTrack(j,m,g),r(),a.abrupt("return");case 18:if(void 0===f.sampleDragging){a.next=44;break}O=re(e.currentSubSequence.pads),a.prev=20,O.s();case 22:if((h=O.n()).done){a.next=31;break}if(S=h.value,!(q=S.containsSample(f.sampleDragging))){a.next=29;break}return S.removeTrack(q),r(),a.abrupt("return");case 29:a.next=22;break;case 31:a.next=36;break;case 33:a.prev=33,a.t0=a.catch(20),O.e(a.t0);case 36:return a.prev=36,O.f(),a.finish(36);case 39:y=f.sampleDragging,e.addSound(y,void 0),r(),a.next=74;break;case 44:if(!f.samplesDragging){a.next=73;break}C=0,N=re(f.samplesDragging),a.prev=47,N.s();case 49:if((P=N.n()).done){a.next=62;break}if(M=P.value,!(C>4)){a.next=53;break}return a.abrupt("break",62);case 53:if(x=M,"string"!==typeof M){a.next=58;break}return x=new ne.a(M),a.next=58,x.load();case 58:e.addSound(x),C++;case 60:a.next=49;break;case 62:a.next=67;break;case 64:a.prev=64,a.t1=a.catch(47),N.e(a.t1);case 67:return a.prev=67,N.f(),a.finish(67);case 70:r(),a.next=74;break;case 73:f.sampleTagDragging&&(e.searchForSounds([f.sampleTagDragging]),r());case 74:l.presetDragging&&(e.loadPreset(l.presetDragging,!0),r()),(D=d.effectDragging||u.midiEffectDragging)&&Object.keys(D).length>1&&((L=D.effect).x=m,L.y=g,R=[].concat(Object(k.a)(u.pulledEffects),[L]),n(Object(w.we)(R)),r());case 77:case"end":return a.stop()}},a,null,[[20,33,36,39],[47,64,67,70]])}));return function(e){return a.apply(this,arguments)}}(),[e])}},se=Object(d.b)(function(e,t){return{}},function(e){return{setQuickAddSearchText:function(t){return e(Object(w.ye)(t))},setShowSearchWindow:function(t){return e(Object(w.cg)(t))}}})(function(e){var t=e.showing,n=e.setShowSearchWindow,s=e.sequencerEngine,o=e.setQuickAddSearchText,i=Object(a.useRef)(void 0),u=Object(a.useRef)(0),l=Object(a.useRef)(void 0),f=Object(a.useState)(void 0),d=Object(r.a)(f,2),b=d[0],m=d[1],g=Object(a.useState)(""),E=Object(r.a)(g,2),p=E[0],v=E[1],j=Object(a.useState)(""),O=Object(r.a)(j,2),h=O[0],w=O[1],k=ce(s,function(){return{x:0,y:0}}).onDrop;Object(a.useEffect)(function(){return function(){return o(void 0)}},[]),Object(a.useEffect)(function(){u.current++;var e=u.current;setTimeout(function(){e===u.current&&w(p)},100)},[p,w]);var q=Object(ee.a)({ref:i}),y=(q.setCoords,q.onMouseUp,q.onMouseDown,q.coords);Object(a.useEffect)(function(){t&&l.current&&l.current.focus()},[t]),Object(a.useEffect)(function(){return window.addEventListener("keydown",C),function(){return window.removeEventListener("keydowwn",C)}},[]);var C=function(e){"ArrowDown"===e.key||e.key},P={left:y&&y.x,top:y&&y.y},M="search-background";t||(M+=" hide"),Object(a.useEffect)(function(){return window.addEventListener("click",x),function(){return window.removeEventListener("click",x)}},[]);var x=function(){n(!1)};return c.a.createElement("div",{onDrop:k,className:M},c.a.createElement("div",{style:P,onClick:function(e){return e.stopPropagation()},ref:i,className:"search-window"},c.a.createElement("img",{src:"/search.svg",className:"search-icon"}),c.a.createElement("input",{ref:l,className:"search-text",value:p,onChange:function(e){return v(e.target.value)},placeholder:"Search for objects & actions"}),"RECENT_SAMPLES"===b||"ALL_SAMPLES"===b?c.a.createElement(N,{mode:b,searchTerm:p,sequencerEngine:s}):c.a.createElement($,{hide:function(){return n(!1)},searchTerm:h,inputRef:l,sequencerEngine:s}),void 0===b&&""===p&&c.a.createElement(S,{setMode:m,sequencerEngine:s})))}),oe=n(1532),ie=n(337);n(2850);function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw c}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fe=function(e){var t,n=[],r=ue(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=a.effect.getOutboundNodes(),s=!1;for(var o in c){var i=c[o][0];if(i&&i.node&&i.node.zObject&&"three.canvas"===i.node.zObject.name){n.push(i.node.zObject),s=!0,i.node.zObject.pluginViewerFor=a;break}}s||n.push(a)}}catch(u){r.e(u)}finally{r.f()}return n},de=Object(d.b)(function(e,t){var n=e.spatial.showEditorBottom;return{bottomHeight:n===M.b?e.arrangement.bottomHeight:n===M.a?280:40,leftSidebarWidth:e.spatial.leftSidebarWidth,pluginsLoaded:e.plugins.pluginsLoaded,showPluginsPane:e.plugins.showPluginsPane}},function(e){return{setShowPluginsPane:function(t){return e(Object(w.Yf)(t))},setPluginsPaneHeight:function(t){return e(Object(w.oe)(t))},setSelectedPulledElements:function(t){return e(Object(w.mf)(t))}}})(function(e){var t=e.setSelectedPulledElements,n=e.pluginsLoaded,r=e.leftSidebarWidth,s=e.setShowPluginsPane,o=e.showPluginsPane,i=e.bottomHeight,u=e.setPluginsPaneHeight,l={bottom:i,left:r,width:window.innerWidth-r-240};n&&(n=fe(n));var f=n?Math.max.apply(Math,Object(k.a)(n.map(function(e){return e.height||100}))):void 0;return f=Math.min(300,f)+30,l.minHeight=f,o||(l.height=40,l.minHeight=40),Object(a.useEffect)(function(){u(f)},[f]),n&&0!==n.length?c.a.createElement("div",{onMouseDown:function(){return t({})},style:l,className:o?"plugins-pane showing":"plugins-pane"},c.a.createElement("div",{className:"collapse-and-label"},c.a.createElement("div",{onClick:function(){return s(!o)},className:"collapse-container"},c.a.createElement("div",{className:o?"arrow-right":"arrow-up"})),c.a.createElement("div",{className:"plugins-label"},c.a.createElement("img",{src:"/plugin-icon.svg"}))),o&&c.a.createElement("div",{className:"plugins-container"},n.map(function(e){return c.a.createElement(ie.a,{forceShow:!0,zobject:e})}))):[]}),be=n(2761),me=n(1070),ge=n(2799),Ee=n(28),pe=n(182),ve=n(2737),je=n(1093),Oe=n(1088),he=n(1091),we=n(86),Se=n(244),ke=n(139),qe=n(426),ye=Object(d.b)(function(e,t){return{presentationMode:e.spatial.presentationMode,pulledEffects:e.effects.pulledEffects}},function(e){return{setPulledEffects:function(t){return e(Object(w.we)(t))}}})(function(e){var t=e.presentationMode,n=e.dropdownPosRef,r=e.subSequence,s=e.scale,o=e.dropdownPos,i=e.pulledEffects,u=e.setPulledEffects,l=e.elements,f=Object(ve.a)({elements:l,subSequence:r,presentationMode:t}).arrangeWindows,d=Object(a.useCallback)(function(){var e=n.current,t=e.x,a=e.y;r.encapsulateObjects(t,a)},[r]),b=Object(a.useCallback)(function(){for(var e=r.sequencerEngine.state.windows.selectedElements,t=0,n=Object.keys(e);t<n.length;t++){var a=n[t],c=r.sequencerEngine.findNodeById(a);c&&c.setAttribute("Include in Presentation",!0)}},[r]),m=Object(a.useCallback)(function(e){var t=Object(we.c)(e,r),a=n.current,c=a.x,s=a.y;t.x=c,t.y=s,r.midiEffects.addEffect(t),u([].concat(Object(k.a)(i),[t]))},[r,i]),g=r.state.windows.selectedElements,E=Object.keys(g).filter(function(e){return g[e]});return c.a.createElement(Se.a,{className:"midi-context",dropdownPos:o?{x:o.x/s,y:o.y/s}:void 0},E.length>0&&c.a.createElement(ke.a,{onMouseDown:d},"Encapsulate Objects"),E.length>0&&c.a.createElement(ke.a,{onMouseDown:b},"Include in Presentation",c.a.createElement("img",{src:"/presentation-mode.svg"})),E.length>0&&c.a.createElement(ke.a,{onMouseDown:f},"Pack Objects"),c.a.createElement(ke.a,{onMouseDown:function(){return Object(he.a)(r.sequencerEngine,r)}},"Segment All Cables"),c.a.createElement("div",{className:"context-divider"}),c.a.createElement(qe.a,{name:"Midi Effects"},we.e.map(function(e){var t=e.label,n=e.value;return c.a.createElement(ke.a,{onMouseDown:function(){return m(n)}},t)})))}),Ce=n(203),Ne=n(1089),Pe=n(208),Me=n(2746),xe=n(507),Te=(Object(d.b)(function(e,t){return t.sequencerEngine?{selectedTrack:t.sequencerEngine.getSelectedTrack()}:{}},function(e){return{}})(function(e){var t=e.selectedTrack;return t?(console.log("track =",t),c.a.createElement("div",{className:"cirklon-element"},c.a.createElement(xe.a,{track:t}))):""}),n(1518)),De=n(1416),Le=(n(2851),Object(d.b)(function(e,t){return{numPads:t.sequencerEngine.currentSubSequence&&t.sequencerEngine.currentSubSequence.pads.length}},function(e){return{setShowPadSequencer:function(t){return e(Object(w.Uf)(t))}}})(function(e){var t=e.pad,n=e.sequencerEngine,s=e.setShowPadSequencer,o=Object(a.useState)(void 0),i=Object(r.a)(o,2),u=i[0],l=i[1],f=Object(a.useState)(""),d=Object(r.a)(f,2),b=d[0],m=d[1],g=Object(a.useRef)(),E=Object(a.useCallback)(function(e){m(e.target.value)},[m]),p=Object(a.useCallback)(function(e){"Enter"===e.key&&(u.name=b,l(void 0))},[u,l,b]),v=Object(a.useCallback)(function(){m(g.current.name),l(g.current)},[m,l]),j=Object(pe.a)(v,250),O=n.currentSubSequence.pads,h=Object(a.useCallback)(function(e){var t=n.state.tracks.trackDragging;if(console.log("on drop called with pad/trackDragging",e,t),t){for(var r=-1,a=0;a<e.slots.length;a++)if(!e.slots[a]){r=a;break}console.log("slot number=",r),r>-1&&e.addTrack(t,r)}},[]);return c.a.createElement("div",{className:"pad-tabs"},O.map(function(e,n){return c.a.createElement("div",{onDrop:function(){return h(e)},onClick:function(t){g.current=e,s(e),j(t)},className:function(){var n=t===e?"pad-option selected":"pad-option";return e===u&&(n+=" editing"),n}()},u===e?c.a.createElement("input",{onChange:E,placeholder:"Enter name",onKeyDown:p,type:"text",value:b,className:"pad-name-input"}):e.name||"Pad "+(n+1))}),c.a.createElement("div",{onClick:function(){var e=n.currentSubSequence.createPad();s(e)},className:"pushable new-pad-btn"},"+"))})),Re=n(656),Ae=n(559),ze=(n(2852),Object(d.b)(function(e,t){return{tracks:t.pad.tracks,showEditorBottom:e.spatial.showEditorBottom,bottomHeight:e.arrangement.bottomHeight,editorBottomHeight:t.editorBottomRef.current&&t.editorBottomRef.current.offsetHeight,pluginsPaneHeight:e.plugins.pluginsPaneHeight||0,leftSidebarWidth:e.spatial.leftSidebarWidth}},function(e){return{setShowPadSequencer:function(t){return e(Object(w.Uf)(t))},setSelectedZObject:function(t){return e(Object(w.uf)(t))},setShowFreezeModal:function(t){return e(Object(w.Mf)(t))}}})(function(e){var t=e.leftSidebarWidth,n=e.pad,r=e.showEditorBottom,s=e.bottomHeight,o=e.setShowPadSequencer,i=e.setSelectedZObject,u=e.pluginsPaneHeight,l=e.editorBottomRef,f=e.editorBottomHeight,d=e.setShowFreezeModal,b=Object(a.useRef)(void 0),m={},g=Object(a.useCallback)(function(){d(!0)},[n]);r===M.b?m.marginBottom=s:r===M.a?(console.log("editor bottom height",f,l),m.marginBottom=f||400):m.marginBottom=40,m.marginBottom+=u+20;var E=n.slotTracks;return E.sort(function(e,t){return e.trackNumber-t.trackNumber}),c.a.createElement("div",{style:m,onClick:function(){return i(void 0)},className:"pad-sequencer",ref:b},c.a.createElement("div",{style:{left:t},className:"pad-sequencer-toolbar"},c.a.createElement("div",{className:"inner-toolbar"},c.a.createElement("div",{onClick:function(){return o(void 0)},className:"arrow-container pad-sequencer-back"},c.a.createElement("div",{className:"arrow-left"})),c.a.createElement(Le,{pad:n,sequencerEngine:n.sequencerEngine}),c.a.createElement("div",{onClick:g,className:"pushable freeze-pad"},c.a.createElement("img",{src:"/freeze-icon.svg"})," Freeze"))),E.map(function(e){return c.a.createElement(Ae.a,{forceShow:!0,track:e,scrollContainer:b})}))})),Fe=n(2805),Ie=(n(2794),Object(d.b)(function(e,t){return{showThemeGrid:e.sequencer.showThemeGrid,showPadSequencer:e.spatial.showPadSequencer,position:e.spatial.position,loadingSequence:e.sequencer.loadingSequence,currentSubSequence:t.sequencerEngine&&t.sequencerEngine.currentSubSequence}},function(e){return{setShowTrackInstrument:function(t){return e(Object(w.kg)(t))},setPulledEffects:function(t){return e(Object(w.we)(t))},setSelectedPulledElements:function(t){return e(Object(w.mf)(t))},setSelectedZObject:function(t){return e(Object(w.uf)(t))}}})(function(e){var t,n=e.sequencerEngine,s=e.editorBottomRef,o=(e.setShowTrackInstrument,e.showPadSequencer),i=e.currentSubSequence,u=(e.setPulledEffects,e.setSelectedZObject),l=(e.setSelectedPulledElements,e.showThemeGrid),f=Object(a.useRef)(),d=Object(a.useRef)(void 0),b=Object(a.useRef)(void 0),m=Object(a.useState)(1),g=Object(r.a)(m,2),E=g[0],p=g[1],v=Object(Pe.a)({containerRef:f,scale:E}).getXY,j=Object(Ce.a)({ref:f}),O=j.onContextMenu,h=j.dropdownPos,S=(j.setDropdowPos,Object(a.useRef)(h)),k=Object(a.useRef)({}),q=Object(Ne.a)({elements:k}).getSelection,y=i,C=Object(a.useCallback)(function(e){var t=v(e,!0),r=t.x,a=t.y,c=n.state.spatial.editorPadding;r-=Math.max(0,c.x),a-=Math.max(0,c.y),e.stopPropagation(),e.preventDefault(),y.createZObject(r,a)},[y]),N=Object(pe.a)(C);Object(a.useEffect)(function(){h&&(S.current=h)},[h]);var P=Object(De.a)({scrollRef:f,sequencerEngine:n,context:n&&n.currentSubSequence}).onMouseMove;Object(a.useEffect)(function(){n&&n.dispatch(Object(w.dd)(f))},[n]);var M=ce(n,v).onDrop;if(!n)return 0;var x="editor no-select";return l&&(x+=" show-grid"),c.a.createElement("div",{onContextMenu:O,style:{},onClick:N,onDrop:M,ref:f,className:x},!o&&c.a.createElement(ye,{elements:k,subSequence:y,scale:E,dropdownPosRef:S,dropdownPos:h}),!o&&c.a.createElement(Oe.a,{dropdownPos:h,getXY:v,scale:E,sequencerEngine:n,setSelectedZObject:u,onMouseMove:P,getSelection:q,editorRef:f}),o?c.a.createElement(ze,{editorBottomRef:s,pad:!0===o?y.pads[0]:o}):c.a.createElement(Fe.a,(t={editorRef:f,edgesRef:d,innerRef:b,scale:E,setScale:p,elements:k,dropdownPosRef:S,key:y.id},Object(Ee.a)(t,"scale",1),Object(Ee.a)(t,"showEffects",!0),Object(Ee.a)(t,"subSequence",y),Object(Ee.a)(t,"sequencerEngine",n),t),c.a.createElement(je.a,{edgesRef:d,containerRef:f,scale:E,subSequence:y}),c.a.createElement(Te.a,{sequencerEngine:n,scrollContainer:f}),c.a.createElement(Me.a,{scrollContainer:f,sequencerEngine:n})),o&&c.a.createElement(Me.a,{scrollContainer:f,sequencerEngine:n}))})),Ze=n(99),Xe=n(664),We=Object(d.b)(function(e,t){return{viewMode:e.sequencer.viewMode}},function(e){return{setViewMode:function(t){return e(Object(w.Dh)(t))},setContextualHelp:function(t,n){return e(Object(w.ub)(t,n))}}})(function(e){return c.a.createElement("div",{className:"view-buttons"},c.a.createElement("img",Object(Ee.a)({onClick:function(){return e.setViewMode(E.e)},src:"/mix-view.svg",className:"view-mode-icon"},"className",e.viewMode===E.e?"view-mode-icon selected":"view-mode-icon")),c.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.setViewMode(E.a)},className:e.viewMode===E.a?"view-mode-icon selected":"view-mode-icon"}),c.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.setViewMode(E.b)},className:e.viewMode===E.b?"view-mode-icon selected":"view-mode-icon"}))}),Be=n(2734),_e=n(1062),He=n(2791),Ue=n(59),Ve=Object(d.b)(function(e,t){return{}},function(e){return{setShowProjectsModal:function(t){return e(Object(w.ag)(t))},setShowSearchWindow:function(t){return e(Object(w.cg)(t))},setShowSettings:function(t){return e(Object(w.fg)(t))}}})(function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),s=n[0],o=n[1];return c.a.createElement(Ue.c,{className:"logo-dropdown view-dropdown guilds-dropdown",show:s?"true":"false",isOpen:s,toggle:function(){return o(!s)}},c.a.createElement(Ue.f,{size:"sm",caret:!0,color:"primary"},c.a.createElement("img",{src:"/smol-logo4.svg"})),c.a.createElement(Ue.e,null,c.a.createElement(Ue.d,{onClick:function(){return e.setShowSearchWindow(!0)}},"Search ",c.a.createElement("div",{className:"key-shortcut"},"/")),c.a.createElement(Ue.d,{onClick:function(){return e.setShowSettings(!0)}},"Settings"),c.a.createElement(Ue.d,{onClick:function(){return e.setShowProjectsModal(!0)}},"Open Project")))}),Ge=n(1084),Je=n(727),Ye=n(660),Ke=n(653),Qe=n(1107),$e=n(2754),et=(n(2853),Object(d.b)(function(e,t){return{showLFOs:e.sequencer.showLFOs,showEnvelopes:e.sequencer.showEnvelopes,show:e.spatial.sidebarsShowing,showMoulators:e.spatial.showModulators,viewMode:e.sequencer.viewMode,showSave:e.toolbar.showSaveModal}},function(e){return{setShowEnvelopes:function(t){return e(Object(w.Jf)(t))},setShowLFOs:function(t){return e(Object(w.Pf)(t))},setShowSave:function(t){return e(Object(w.bg)(t))}}})(function(e){var t=e.showSave,n=e.setShowSave,r=Object(Ze.a)(e,["showSave","setShowSave"]),s=Object(a.useRef)(),o=Object(a.useCallback)(function(e,t,a){r.sequencerEngine.save(e,t,!0,a),n(!1)},[n,r.sequencerEngine]);Object(a.useEffect)(function(){return window.addEventListener("keydown",i),function(){return window.removeEventListener("keydown",i)}},[r.showLFOs,r.showEnvelopes]);var i=Object(a.useCallback)(function(e){},[r.showLFOs,r.showEnvelopes]);return c.a.createElement("div",{ref:s,className:"top-toolbar"},c.a.createElement("div",{className:"main-row toolbar-row"},c.a.createElement(Ve,r),r.sequencerEngine?r.viewMode===E.a?c.a.createElement(Re.a,{sequencerEngine:r.sequencerEngine}):c.a.createElement($e.a,{subSequence:r.sequencerEngine.currentSubSequence}):"",r.sequencerEngine&&c.a.createElement(Je.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(Ge.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(Ye.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(He.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(We,{sequencerEngine:r.sequencerEngine}),c.a.createElement("div",{className:"menu-and-transactions"},c.a.createElement(_e.a,null),r.sequencerEngine&&c.a.createElement(Ke.a,{store:r.sequencerEngine.store})),c.a.createElement("div",{onClick:function(){return n(!0)},className:"pushable save-project-button"},"Save"),c.a.createElement(Xe.a,{sequencerEngine:r.sequencerEngine}),c.a.createElement(Qe.a,{sequencerEngine:r.sequencerEngine,onSave:function(e,t,n){return o(e,t,n)},onHide:function(){return n(!1)},show:t})),(r.showLFOs||r.showEnvelopes)&&c.a.createElement("div",{className:r.showLFOs?"overlaying toolbar-row showLFOs":"showEnvelopes overlaying toolbar-row"},c.a.createElement(Be.a,{scrollContainer:s,sequencerEngine:r.sequencerEngine,envelopesTrack:r.sequencerEngine.envelopesTrack,lfosTrack:r.sequencerEngine.lfosTrack})))})),tt=n(1065),nt=n(1068),rt=(n(1098),n(39)),at=n.n(rt),ct=Object(d.b)(function(e,t){return{currentSubSequence:t.sequencerEngine.currentSubSequence}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.currentSubSequence,r=e.style,a=t.subSequences.map(function(e,t){return{label:e.name,value:e.id}});return c.a.createElement("div",{style:r,className:"subsequence-navigator"},c.a.createElement(at.a,{onChange:function(e){return t.switchToSubSequence(e.value)},value:a.find(function(e){return e.value===n.id}),options:a}),c.a.createElement("div",{onClick:function(){return t.newSubSequence()},className:"new-sub-btn"},"+"),c.a.createElement("div",{onClick:function(){return t.deleteSubSequence()},className:"delete-sub-btn"},"-"))}),st=n(1063),ot=n(2784),it=n(1411),ut=n(334),lt=n(46),ft=n(204),dt=Object(d.b)(function(e,t){var n=(e.tracks.trackIsEnabled[t.track.subSequence.id]||{})[t.track.id];return{name:t.track.presetName||t.track.name,enabled:void 0!==n&&n,solo:e.tracks.trackSolos[t.track.id],muted:e.tracks.trackMutes[t.track.id],planeMapping:e.effects.planeMapping,leftSidebarWidth:e.spatial.leftSidebarWidth}},function(e){return{setTrackDragging:function(t){return e(Object(w.Sg)(t))},setShowEditorBottom:function(t){return e(Object(w.If)(t))},setSelectedZObject:function(t){return e(Object(w.uf)(t))}}})(function(e){var t=e.track,n=e.setTrackDragging,r=e.selectedZObject,s=e.setSelectedZObject,o=e.enabled,i=e.solo,u=e.muted,l=e.planeMapping,f=e.setShowEditorBottom,d=e.leftSidebarWidth,b=t.sequencerEngine,m=Object(a.useRef)(),g=Object(Ce.a)({ref:m,useTop:!1}),E=g.onContextMenu,p=g.dropdownPos,v=g.setDropdownPos;Object(a.useEffect)(function(){p&&t.sequencerEngine.selectTrack(t.trackNumber)},[p,t]);var j=Object(a.useCallback)(function(){f(t.sequencerEngine.state.spatial.showEditorBottom===M.b?void 0:M.b)},[t]),O=Object(a.useCallback)(function(){l&&l.randomlyMapParameters(t),b.selectTrack(t.trackNumber),s(t)},[t,l]),h=Object(pe.a)(j,250,O),w=Object(a.useCallback)(function(){t.sequencerEngine.deleteTrack(t.trackNumber)},[t]),S=Object(a.useCallback)(function(){t.sequencerEngine.operationManager.dispatch(Object(lt.x)(t,!u))},[u,t]),k=Object(a.useCallback)(function(){t.solo(!i)},[i,t]),q=r===t?"selected track-option":"track-option";l&&(q+=" plane-mapping");var y={};return y.maxWidth=100*d/240,c.a.createElement("div",{ref:m,onContextMenu:E,draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){e.stopPropagation(),n(t)},onClick:h,className:q},c.a.createElement(it.a,{dropdownPos:p,setDropdownPos:v,track:t}),c.a.createElement("div",{style:{marginRight:15*d/240,marginLeft:5*d/240},onClick:function(){return d>70?w():0},className:"delete-btn"},d>70?"x":""),t.instrument?c.a.createElement(ot.a,{track:t}):c.a.createElement(ft.a,{hasInner:!0,track:t}),d>140&&c.a.createElement("div",{style:y,className:"ztrack-name"},Object(ut.a)(t.presetName||t.name||t.getName())),d>100&&c.a.createElement("div",{onClick:k,className:i?"solo soloed":"solo"},"S"),d>70&&c.a.createElement("div",{onClick:S,className:u?"mute muted":"mute"},"M"),c.a.createElement("div",{onClick:function(){return t.toggleEnabled()},className:o?"dot enabled track-arm":"dot track-arm"}))}),bt=(Object(d.b)(function(e,t){var n=t.pad.id;return{hidden:e.spatial.hiddenObjects[n],locked:e.spatial.lockedObjects[n]}},function(e){return{setUXLockObject:function(t,n){return e(Object(w.vh)(t,n))},setUXHideObject:function(t,n){return e(Object(w.uh)(t,n))}}})(function(e){var t=e.pad,n=e.selectedZObject,r=e.setSelectedZObject,a=e.hidden,s=e.locked,o=e.setUXLockObject,i=e.setUXHideObject;return c.a.createElement("div",{onClick:function(){return r(t)},className:t===n?"selected zpad":"zpad"},c.a.createElement("img",{className:"object-icon",src:"/zpad-light.svg"}),"Pad",c.a.createElement("img",{onClick:function(){return i(t.id,!a)},className:a?"hidden eye":"eye",src:a?"/eyeball-hidden.svg":"/eyeball.svg"}),c.a.createElement("img",{onClick:function(){return o(t.id,!s)},className:"lock-ux-btn",src:s?"/zlock-locked-light.svg":"/zlock-unlocked-light.svg"}))}),n(2785),n(2806),Object(d.b)(function(e,t){var n=t.sequencerEngine&&t.sequencerEngine.currentSubSequence;return n?{pads:n.pads,selectedZObject:e.zobject.selectedZObject,show:e.spatial.sidebarsShowing,tracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length,leftSidebarWidth:e.spatial.leftSidebarWidth}:{}},function(e){return{setSelectedZObject:function(t){return e(Object(w.uf)(t))},setViewableSubPatches:function(t){return e(Object(w.Eh)(t))},setWindowPosition:function(t,n){return e(Object(w.Kh)(t,n))},setViewableZObjects:function(t){return e(Object(w.Fh)(t))},setLeftSidebarWidth:function(t){return e(Object(w.Xc)(t))}}})(function(e){var t=e.setWindowPosition,n=e.show,s=e.setSelectedZObject,o=e.setViewableSubPatches,i=e.setViewableZObjects,u=e.leftSidebarWidth,l=e.setLeftSidebarWidth,f=e.sequencerEngine,d=e.selectedZObject,b=Object(a.useState)(!1),m=Object(r.a)(b,2),g=m[0],E=m[1],p=Object(a.useState)(""),v=Object(r.a)(p,2),j=v[0],O=(v[1],Object(a.useState)("Tracks")),h=Object(r.a)(O,2),w=(h[0],h[1]);Object(a.useEffect)(function(){return window.addEventListener("mousemove",S),window.addEventListener("mouseup",q),function(){window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",q)}},[g,E]);var S=Object(a.useCallback)(function(e){g&&l(Math.max(50,Math.min(240,e.pageX)))},[g]),q=Object(a.useCallback)(function(){g&&E(!1)},[g,E]);Object(a.useEffect)(function(){d&&d.getObjectType()===z.c?w("Tracks"):w("Objects")},[w,d]);var y=Object(a.useCallback)(function(e){var n=void 0;if(e.effect&&e.effect.zObjects)n=e.effect.id,o([e.effect]);else if(e.subSequence.zObjects&&e.subSequence.inletObjects){var r=e.state.zobject.viewableZObjects;t(e.window.id,{x:100,y:100}),i([].concat(Object(k.a)(r),[e]))}n&&t(n,0,0),s(e)},[]);Object(pe.a)(y,250,function(e){return s(e)});if(!n)return"";var C=c.a.createElement("div",{className:"object-explorer"},f&&""===j&&f.tracks&&f.tracks.map(function(e){return c.a.createElement(dt,{selectedZObject:d,track:e})}));return c.a.createElement("div",{style:{width:u,minWidth:u},className:"sidebar left-sidebar"},c.a.createElement(ct,{style:u<140?{display:"none"}:{},sequencerEngine:f}),c.a.createElement(Re.a,{sequencerEngine:f}),C,u>=200&&c.a.createElement(st.a,{sequencerEngine:f}),c.a.createElement("div",{onMouseDown:function(){return E(!0)},className:"right-edge"}))})),mt=n(95),gt=n(15),Et=n.n(gt),pt=n(354),vt=(n(52),n(30)),jt=function(){var e=Object(D.a)(T.a.mark(function e(t,n){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e){return e.uploadAudioBuffer(n)}),t.forEach(function(e){return e.title=e.name}),e.next=4,Promise.all(r);case 4:e.sent,0===n&&vt.a.newSamplesWithMetadata(t,n);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Ot=(n(2854),Object(d.b)(function(e,t){return{userToken:e.sequencer.userToken,samplesToSave:e.samples.samplesToSave,guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{setShowLogin:function(t){return e(Object(w.Qf)(t))},setUploadingFile:function(t){return e(Object(w.yh)(t))},setSamplesToSave:function(t){return e(Object(w.Oe)(t))},setRecentlyAddedSounds:function(t){return e(Object(w.ze)(t))}}})(function(e){var t=e.setShowLogin,n=e.userToken,s=e.setRecentlyAddedSounds,o=e.setSamplesToSave,i=e.sequencerEngine,u=e.setUploadingFile,l=e.samplesToSave,f=e.guildId,d=Object(a.useState)(!1),b=Object(r.a)(d,2),m=b[0],g=b[1],E=Object(a.useRef)(void 0),p=Object(a.useState)([]),v=Object(r.a)(p,2),j=v[0],O=v[1],h=Object(a.useState)([]),w=Object(r.a)(h,2),S=(w[0],w[1],Object(a.useState)("")),q=Object(r.a)(S,2),y=q[0],C=q[1],N=Object(a.useRef)(new pt.a(Et.a.Master.context)),P=Object(a.useState)(void 0),M=Object(r.a)(P,2),x=M[0],T=M[1],D=Object(a.useCallback)(function(e,t){e||(e=l[t]),e&&(N.current.setBuffer(e.audioBuffer),N.current.playSound(0),T(t))},[T,l]);Object(a.useEffect)(function(){return window.addEventListener("keydown",L),function(){return window.removeEventListener("keydown",L)}},[l,T,x,O,j,y]);var L=Object(a.useCallback)(function(e){"Enter"===e.key?R():"ArrowUp"===e.key?D(void 0,Object(mt.a)(x-1,l.length)):"ArrowDown"===e.key&&D(void 0,Object(mt.a)(x+1,l.length))},[l,T,x,O,j,y]),R=Object(a.useCallback)(function(){O([].concat(Object(k.a)(j),[y])),C("")},[y,j,O,C]);Object(a.useEffect)(function(){l.forEach(function(e){return e.tags=Array.from(new Set([].concat(Object(k.a)(e.tags),Object(k.a)(j))))})},[j,l]);var A=Object(a.useCallback)(function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||0!==f){u(!0);var e=l;jt(l,f).then(function(t){console.log("finished bulk uploading..."),s(e),u(!1)}),o([])}else g(!0)},[f,g,l]),z=Object(ee.a)({ref:E,initialCoords:{x:500,y:300}}),F=(z.setCoords,z.onMouseUp),I=z.onMouseDown,Z=z.coords;return l&&0!==l.length?c.a.createElement("div",{ref:E,className:"samples-to-save",onMouseUp:F,onMouseDown:I,style:Z?{top:Z.y,left:Z.x}:{}},m&&c.a.createElement("div",{className:"confirmation"},c.a.createElement("div",{className:"confirmation-text"},"Are you sure you want to save this samples publicly? Anyone will be able to see them."),c.a.createElement("div",{className:"buttons"},c.a.createElement("div",{onClick:function(){return A(!0)},className:"save-btn pushable"},"Yes"),c.a.createElement("div",{onClick:function(){return g(!1)},className:"save-btn pushable cancel"},"Cancel"))),c.a.createElement("div",{className:"samples-list"},l.map(function(e,t){return c.a.createElement("div",{onClick:function(){return D(e,t)},className:t===x?"sample-to-save selected":"sample-to-save"},c.a.createElement("div",{className:"sts-name"},e.name),e.tags&&e.tags.map(function(e){return c.a.createElement("div",{className:"sts-tag"},e)}))})),c.a.createElement("div",{className:"tags-editor"},c.a.createElement("div",{className:"tags-container"},j.map(function(e){return c.a.createElement("div",{className:"tag-option"},e)})),c.a.createElement("div",{className:"tag-input-container"},c.a.createElement("input",{placeholder:"Enter tags for these sounds",value:y,onChange:function(e){return C(e.target.value)},className:"tag-input"}),c.a.createElement("div",{onClick:R,className:"add-btn pushable"},"+"))),n?c.a.createElement("div",{className:"buttons"},c.a.createElement(Ke.a,{store:i.store}),c.a.createElement("div",{onClick:function(){return A(!1)},className:"save-btn pushable"},"Save ",0===f?"Publicly":" to Guild")):c.a.createElement("div",{className:"buttons"},c.a.createElement("span",{onClick:function(){return t(!0)},className:"pushable show-login-btn"},"Login")," to save these sounds.")):""})),ht=n(2796);n(1536),n(1537),n(1538),n(1067),n(2795),n(1520),n(1521),n(1522),n(899),n(1523),n(1524),n(1525),n(1526),n(1554),n(1539),n(1076),n(1517),n(1527),n(1083),n(1540),n(1085),n(1516),n(1528),n(1529),n(1072),n(1541),t.default=Object(d.b)(function(e,t){return{theme:e.sequencer.wallpaper?"dark":e.sequencer.theme,backgroundColor:e.sequencer.backgroundColor,presentationMode:e.spatial.presentationMode,showPianoRoll:e.sequencer.showPianoRoll,showSearchWindow:e.spatial.showSearchWindow,viewMode:e.sequencer.viewMode,creatingNewPack:e.packs.creatingNewPack,packToEdit:e.packs.packToEdit,fullScreenZObject:e.zobject.fullScreenZObject,wallpaper:e.sequencer.wallpaper,showPadSequencer:e.spatial.showPadSequencer}},function(e){return{setFullScreenZObject:function(t){return e(Object(w.rc)(t))},setSelectedZObject:function(t){return e(Object(w.uf)(t))},setWallpaper:function(t){return e(Object(w.Gh)(t))},setTheme:function(t){return e(Object(w.Kg)(t))},setShowThemeGrid:function(t){return e(Object(w.hg)(t))},setArrangementBottomHeight:function(t){return e(Object(w.C)(t))}}})(function(e){var t=Object(a.useRef)(void 0),n=Object(a.useRef)(void 0),l=e.sequencerEngine?[void 0,d,void 0]:Object(tt.a)(e),f=Object(r.a)(l,3),d=(f[0],f[1]);f[2];e.sequencerEngine&&(d=e.sequencerEngine);var w=Object(nt.a)({sequencerEngine:d});Object(r.a)(w,1)[0];if(Object(O.a)({theme:e.theme,backgroundColor:e.backgroundColor}),Object(a.useEffect)(function(){if(window.isNFT)return!1;var t=s.a.getItem("wallpaper");t&&e.setWallpaper(t),(t=s.a.getItem("theme"))&&e.setTheme(t),(t=s.a.getItem("show-theme-grid"))&&e.setShowThemeGrid(t)},[]),e.fullScreenZObject)return c.a.createElement("div",{ref:t,className:"v3 dark no-select full-screen"},c.a.createElement(p.a,{containerRef:t}),e.showSearchWindow&&c.a.createElement(se,{sequencerEngine:d,showing:e.showSearchWindow}),c.a.createElement("div",{onClick:function(){return e.setSelectedZObject(void 0)},className:"editor full-screen-editor"},!window.isNFT&&c.a.createElement(b,null),c.a.createElement(u.a,{sequencerEngine:d}),c.a.createElement("img",{className:"pushable expand-icon",onClick:function(){return e.setFullScreenZObject(void 0)},src:"/expand-icon.svg"}),Array.isArray(e.fullScreenZObject)?c.a.createElement("div",{className:"multi-full-screen"},e.fullScreenZObject.map(function(e){return c.a.createElement(v.default,{key:e.id,isMulti:!0,sequencerEngine:d,zObject:e})})):c.a.createElement(v.default,{isMulti:!0,sequencerEngine:d,zObject:e.fullScreenZObject})));var S={},k="v3 no-select dark ";return e.wallpaper&&(S.backgroundImage="url("+m.a.getHashUrl(e.wallpaper)+")",k+=" has-wallpaper"),e.showPadSequencer&&(k+=" showing-pad-sequencer"),"light"===e.theme?k+=" light-theme":k+=" dark-theme",e.presentationMode&&(k+=" presentation-mode"),c.a.createElement("div",{style:S,ref:t,className:k},c.a.createElement(me.a,{sequencerEngine:d}),c.a.createElement(o.a,null),c.a.createElement(ht.a,null),c.a.createElement(et,{sequencerEngine:d}),c.a.createElement(u.a,{sequencerEngine:d}),c.a.createElement(p.a,{containerRef:t}),c.a.createElement(Ot,{sequencerEngine:d}),d&&c.a.createElement(j.a,{sequencerEngine:d}),e.creatingNewPack||e.packToEdit?c.a.createElement(h.a,{json:e.packToEdit}):"",e.showSearchWindow&&c.a.createElement(se,{sequencerEngine:d,showing:e.showSearchWindow}),e.showPianoRoll?c.a.createElement(be.a,{sequencerEngine:d}):e.viewMode===E.a?c.a.createElement(g.a,{sequencerEngine:d}):e.viewMode===E.e?c.a.createElement(i.a,{sequencerEngine:d}):c.a.createElement("div",{className:"editor-and-sidebars"},c.a.createElement(bt,{sequencerEngine:d}),c.a.createElement(Ie,{editorBottomRef:n,isDocumentation:e.isDocumentation,sequencerEngine:d}),c.a.createElement(ge.a,{sequencerEngine:d}),d&&c.a.createElement(de,{scrollRef:t,sequencerEngine:d}),d&&c.a.createElement(oe.a,{editorBottomRef:n,scrollRef:t,sequencerEngine:d})))})}}]);
//# sourceMappingURL=3.67b5b8ea.chunk.js.map