{"version":3,"sources":["discogs/Discogs.js","utils/downloadImage.js","components/upload/Tags.js","components/upload/RecordInfo.js","components/upload/SampleOption.js","components/upload/Uploader.js","components/hooks/useDropFiles.js"],"names":["apiToken","axios","require","Discogs","Object","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","titleToLabels","nameToLabelInfo","nameToLabel","idToReleases","title","_this","Promise","resolve","reject","undefined","searchYoutubeTitle","then","result","data","label","map","getLabelInfo","ret","labelData","id","name","images","uri","push","length","catch","err","discogsId","url","get","results","recordName","console","log","split","join","labelName","callback","_this2","query","searchLabel","labelId","page","_this3","youtubeTitle","searchObject","string","partsCallback","artist","credits","escapeRegExp","str","replace","baddies","forEach","token","trim","toUpperCase","toLowerCase","parts","i","indexOf","splice","baddy","RegExp","creditMap","credit","keys","parseTitleString","earliestResult","year","includes","__webpack_require__","d","__webpack_exports__","downloadImage","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","decentralized_Ipfs_js__WEBPACK_IMPORTED_MODULE_1__","thumb","responseType","blob","ipfs","addBlob","hash","connect","state","props","dispatch","_ref","setTags","tags","_ref$placeholder","placeholder","_useState","useState","_useState2","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","value","setValue","deleteTag","useCallback","t","filter","x","onKeyDown","e","key","concat","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","className","tag","onClick","type","onChange","target","discogs","records","sample","_ref$showTags","showTags","_useState3","_useState4","record","setRecord","useEffect","_records","sort","b","styles","genre","country","releaseName","coverArtHash","getReleaseInfo","artistName","artists","options","r","src","g","react_dropdown__WEBPACK_IMPORTED_MODULE_5___default","o","find","_Tags_js__WEBPACK_IMPORTED_MODULE_4__","store","isSaved","slicedToArray","audioUnit","setAudioUnit","setRecords","AudioUnit","setBuffer","audioBuffer","searchRecords","react_default","Waveform","buffer","RecordInfo","uploading","setUploading","_useState5","_useState6","saved","setSaved","sounds","setSounds","window","addEventListener","dragEnter","dragOver","onDrop","removeEventListener","preventDefault","dataTransfer","effectAllowed","dropEffect","asyncToGenerator","regenerator_default","mark","_callee","ev","_sounds","files","_i","_i2","_files","file","wrap","_context","prev","next","items","toConsumableArray","kind","getAsFile","uploadFile","sent","abrupt","stop","_x","apply","arguments","reader","FileReader","readAsArrayBuffer","onloadend","_callee2","raw","_context2","decodeFlac","Int8Array","Tone","Master","context","decodeAudioData","Sample","NOT_UPLOADED_YET","needsSave","alert","useDropFiles","save","_saved","_iterator","_step","s","_createForOfIteratorHelper","done","saveSample","sleep","t0","f","finish","UnknownProgressBar","text","GuildsMenu","Tags","upload_SampleOption"],"mappings":"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","file":"static/js/12.b315feb8.chunk.js","sourcesContent":["var apiToken = 'CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo';\nvar axios = require('axios');\n\nclass Discogs {\n\n    constructor() {\n        this.titleToLabels = {};\n        this.nameToLabelInfo = {};\n        this.nameToLabel = {};\n        this.idToReleases = {};\n    }\n\n    getLabels(title) {\n        return new Promise((resolve, reject) => {\n            if (this.titleToLabels[title] !== undefined) {\n                resolve(this.titleToLabels[title]);\n                return;\n            }\n\n            this.searchYoutubeTitle(title)\n                .then((result) => {\n                // get all the labels\n                var data = [];\n                if (result === null || result.label === undefined) {\n                    resolve(data);\n                }\n                result.label.map((label) => this.getLabelInfo(label, (ret) => {\n                    if (ret === null) {\n                        resolve(data);\n                        return;\n                    }\n                    var labelData = {\n                        id: ret.id,\n                        name: ret.name};\n                    if ('images' in ret) {\n                        labelData['thumbnail'] = ret.images[0].uri;\n                    }\n                    data.push(labelData);\n\n                    this.titleToLabels[title] = data;\n                    if (data.length == result.label.length) {\n                        resolve(data);\n                    } else {\n                    }\n                }));\n                })\n                .catch(err => {\n                    reject(err);\n                });\n        });\n    }\n\n    getReleaseInfo(discogsId) {\n        return new Promise((resolve, reject) => {\n            var url = 'https://api.discogs.com/releases/' + discogsId;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data !== undefined) {\n                    var results = ret.data;\n                    resolve(results);\n                } else {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n\n    searchRecords(recordName) {\n        return new Promise((resolve, reject) => {\n            console.log(\"searchinng name=\", recordName);\n            let query = recordName.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&type=release&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var results = ret.data.results;\n                    resolve(results);\n                } else {\n                    resolve([]);\n                }\n            });\n        });\n    }\n\n    searchLabel(labelName, callback) {\n        if (this.nameToLabel[labelName] !== undefined) {\n            return callback(this.nameToLabel[labelName]);\n        }\n        var query = labelName;\n        query = query.split(/\\s/g).join('+');\n        var url = 'https://api.discogs.com/database/search?q=' + query + '&type=label&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var result = ret.data.results[0];\n                    this.nameToLabel[labelName] = result;\n                    callback(result);\n                }\n            });\n\n    }\n\n    getLabelInfo(labelName, callback) {\n        this.searchLabel(labelName, function (result) {\n            var labelId = result.id\n            var url = 'https://api.discogs.com/labels/' + labelId + '?token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    callback(ret.data);\n                })\n                .catch(function (err) {\n                    callback(null);\n                });\n        });\n            \n    }\n\n    getLabelReleases(labelId, page) {\n        return new Promise((resolve, reject) => {\n            if (this.idToReleases[labelId + '_' + page] !== undefined) {\n                resolve(this.idToReleases[labelId + '_' + page]);\n                return;\n            }\n            var url = 'https://api.discogs.com/labels/' + labelId +\n            '/releases?token=' + apiToken + '&page=' + page + '&per_page=8';\n            axios.get(url)\n                .then((ret) => {\n                    this.idToReleases[labelId + '_' + page] = ret.data;\n                    resolve(ret.data);\n                })\n                .catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n    searchYoutubeTitle(youtubeTitle) {\n        return new Promise((resolve, reject) => {\n            var searchObject = parseTitleString(youtubeTitle);\n            var query = searchObject.artist + ' - ' + searchObject.title;\n            query = query.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    var results = ret.data.results;\n                    var earliestResult = null;\n                    for (var i in results) {\n                        if ((earliestResult == null ||\n                             (results[i].year < earliestResult.year)) && \n                            results[i].title.includes(searchObject.title))\n                        {\n                            earliestResult = results[i];\n                        }\n                    }\n                    if (earliestResult == null) {\n                        // get the first result\n                        for (var i in results) {\n                            return resolve(results[i]);\n                        }\n                    }\n                    resolve(earliestResult);\n                })\n                .catch(function (err) {\n                    reject(err);\n                });;\n        });\n    }\n}\n\n// TODO: provide an array of potential separators\n// var SEPARATORS = [' - ', ' – ', ' -- ']\n// note that these can have spaces, but sometimes do not\n// TODO: output a testing dataset for changes to this function.\n\nvar TRACK_SEPARATOR = ' - ';\nfunction parseTitleString(string, partsCallback) {\n  var artist, title, credits = [];\n  var string = string || '';\n\n  function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n  }\n\n  // TODO: load from datafile\n    var baddies = ['Full Album', 'Full vinyl', 'LP', '[dubstep]', '(full album)', '[electro]', '[edm]', '[house music]',\n    '[glitch hop]', '[video]', '[official video]', '(official video)',\n    '(official music video)', '(lyrics)',\n    '[ official video ]', '[official music video]', '[free download]',\n    '[free dl]', '( 1080p )', '(with lyrics)', '(high res / official video)',\n    '(music video)', '[music video]', '[hd]', '(hd)', '[hq]', '(hq)',\n    '(original mix)', '[original mix]', '[lyrics]', '[free]', '[trap]',\n    '[monstercat release]', '[monstercat freebie]', '[monstercat]',\n    '[edm.com premeire]', '[edm.com exclusive]', '[enm release]',\n    '[free download!]', '[monstercat free release]'];\n  baddies.forEach(function(token) {\n    string = string.replace(token + ' - ', '').trim();\n    string = string.replace(token.toUpperCase() + ' - ', '').trim();\n    string = string.replace(token.toLowerCase() + ' - ', '').trim();\n\n    string = string.replace(token, '').trim();\n    string = string.replace(token.toUpperCase(), '').trim();\n    string = string.replace(token.toLowerCase(), '').trim();\n  });\n\n    string = string.replace(/ *\\([^)]*\\) */g, '').trim();\n    string = string.replace(/ *\\[[^)]*\\] */g, '').trim();\n\n\n  var parts = string.split( ' - ' );\n\n  for (var i = 0; i < parts.length; i++) {\n    if ( baddies.indexOf( parts[i].toLowerCase() ) >= 0 ) {\n      parts.splice( i , 1 );\n    }\n  }\n\n  if (parts.length == 2) {\n    artist = parts[0];\n    title = parts[1];\n  } else if (parts.length > 2) {\n    // uh...\n    artist = parts[0];\n    title = parts[1];\n  } else {\n    artist = parts[0];\n    title = parts[0];\n  }\n\n\n  // one last pass\n  baddies.forEach(function(baddy) {\n    title  = title.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n    artist = artist.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n  });\n\n  // look for certain patterns in the string\n  credits.push(  title.replace(/(.*)\\((.*) remix\\)/i,       '$2').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push(  title.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push( artist.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$1').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$2').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$1').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$2').trim() );\n\n  var creditMap = {};\n  credits.forEach(function(credit) {\n    if (credit !== title) { // temp., until we find out why title is in credits\n      creditMap[ credit ] = credit;\n    }\n  });\n\n  var output = {\n      artist: artist\n    , title: title\n    , credits: Object.keys(creditMap)\n  };\n\n    return output;\n}\n\nexport default Discogs;\n","import axios from 'axios';\nimport ipfs from 'decentralized/Ipfs.js';\n\nexport const downloadImage = (thumb) =>  {\n    return new Promise((resolve, reject) => {\n        axios.get('http://0.0.0.0:9092/' + thumb,\n                  {\n                      responseType: 'blob'\n                  })\n            .then(result => {\n                let blob = result.data;\n                ipfs.addBlob(blob).then((hash) => {\n                    console.log('Downloaded thumb = ', hash);\n                    resolve(hash);\n                });\n            });\n    });\n};\n \n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Tags = ({setTags, tags, placeholder=\"Type tags\"}) => { \n    let [value, setValue] = useState('');\n    const deleteTag = useCallback(t => {\n        setTags(\n            tags.filter(x => x !== t));\n    }, [tags, setTags]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter') {\n            setTags([... tags, value]);\n            setValue('');\n        }\n    }, [setTags, tags, value]);\n \n    return (\n        <div className=\"tags\">\n          {tags.map(tag => <div onClick={() => deleteTag(tag)} className=\"tag-option\">{tag}</div>)}\n          <input placeholder={placeholder} className=\"tag-sample-input\" onKeyDown={onKeyDown} value={value} type=\"text\" onChange={e => setValue(e.target.value)}/>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tags);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {downloadImage} from \"utils/downloadImage.js\"\nimport Tags from './Tags.js';\nimport Dropdown from 'react-dropdown';\nimport {connect} from 'react-redux';\n\nconst RecordInfo = ({discogs, records, sample, showTags=true}) => { \n    let [tags, setTags] = useState([]);\n    let [record, setRecord] = useState(records[0]);\n    useEffect(() => {\n        let _records = [...records];\n        _records.sort((a,b) => a.year - b.year);\n        setRecord(_records[0]);\n    }, [records, setRecord]);\n\n    useEffect(() => {\n        if (showTags) {\n            sample.tags = [... tags];\n        }\n    }, [tags, sample]);\n\n    useEffect(() => {\n        if (record) {\n            sample.year = record.year;\n            sample.styles = record.genre || [];\n            sample.country = record.country;\n            sample.discogsId = record.id;\n            sample.releaseName = record.title;\n            downloadImage(record.thumb).then(\n                t => sample.coverArtHash = t);\n            discogs.getReleaseInfo(record.id)\n                .then(d => {\n                    sample.artistName = d.artists[0].name;\n                });\n        }\n    }, [record, sample]);\n\n   \n    if (!record) {\n        return '';\n    }\n\n    let options = records.map(\n        r => ({label: r.title + '(' + (r.year) + ')', value: r}));\n        \n    return (\n        <div className=\"record-info\">\n          <div className=\"meta\">\n            <img src={record.thumb}/>\n            <div className=\"record-meta\">\n              <div className=\"record-title\">{record.title}</div>\n              <div className=\"record-year\">{record.year}</div>\n              <div className=\"record-genre\">{record.genre.map(g => <span>{g}</span>)}</div>\n            </div>\n          </div>\n          <div className=\"others\">\n            <Dropdown\n              onChange={(o) => setRecord(o.value)}\n              options={options}\n              value={options.find(o => o.value === record)}/>\n          </div>\n          {showTags ? <Tags tags={tags} setTags={setTags}/> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecordInfo);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RecordInfo from \"components/upload/RecordInfo.js\";\nimport Discogs from \"discogs/Discogs.js\";\nimport Waveform from \"components/Waveform.js\"\nimport AudioUnit from \"engine/audio.js\"\nimport {connect} from 'react-redux';\n\nconst discogs = new Discogs();\n\nconst SampleOption = ({sample, id, store, isSaved}) => { \n    let [audioUnit, setAudioUnit] = useState(undefined);\n    let [records, setRecords] = useState([]);\n\n    useEffect(() => {\n        let audioUnit = new AudioUnit();\n        audioUnit.setBuffer(sample.audioBuffer);\n        setAudioUnit(audioUnit);\n    }, [sample, setAudioUnit]);\n\n    useEffect(() => {\n        discogs.searchRecords(sample.name.replace(\".wav\", \"\").replace(\".flac\", \"\"))\n            .then((r) => {\n                setRecords(r);\n            });\n    }, [sample, setRecords]);\n\n    if (!audioUnit) { return []; };\n    return (\n        <div className=\"sample-option\">\n          <div className=\"sample-name\">\n            {sample.name}\n            {isSaved ? <span className=\"checkmark\">&#10003;</span> : ''}\n          </div>\n          <div className=\"wave-and-thumb\">\n        <Waveform\n          store={store}\n          buffer={sample.audioBuffer}\n          id={id}\n          audioUnit={audioUnit}\n          sample={sample}/>\n            <RecordInfo sample={sample} discogs={discogs} records={records}/>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport UnknownProgressBar from \"components/progressbar/UnknownProgressBar.js\"\nimport GuildsMenu from \"components/guilds/GuildsMenu.js\";\nimport {sleep} from 'utils/sleep.js';\nimport Tags from './Tags.js';\nimport SampleOption from \"./SampleOption.js\"\nimport {useDropFiles} from \"components/hooks/useDropFiles.js\";\nimport {connect} from 'react-redux';\nimport '../../Uploader.scss';\n\nconst Uploader = ({store}) => { \n\n    let [uploading, setUploading] = useState(false);\n    let [tags, setTags] = useState([]);\n    let [saved, setSaved] = useState([]);\n    let {sounds} = useDropFiles();\n\n    const save = useCallback(async () => {\n        // add tags to all sounds\n        setUploading(true);\n        sounds.forEach(s => s.tags = [...s.tags, ...tags]);\n        let _saved = [];\n        for (let s of sounds) {\n            await s.saveSample();\n            await sleep(250);\n            _saved.push(s);\n            setSaved([..._saved]);\n        }\n        setUploading(false);\n    }, [sounds, tags, setUploading]);\n\n    return (\n        <div className=\"uploader\">\n          {uploading ? <UnknownProgressBar text=\"Uploading sounds\"/> : ''}\n          <div className=\"top-bar\">\n            <div>\n              <GuildsMenu store={store}/>\n              <div\n                onClick={save}\n                className={sounds.length === 0 ? \"save-btn disabled\" :\"save-btn\"}>\n                Save\n              </div>\n              <div className=\"drop-files-here\">\n                <span>\n                  Drop File Here\n                </span>\n              </div>\n            </div>\n            <Tags setTags={setTags} tags={tags} placeholder=\"Type tags for all\"/>\n          </div>\n          {sounds.map(\n              (sample, i) => \n                  <SampleOption isSaved={saved.includes(sample)} key={i} store={store} id={i+1} sample={sample}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Uploader);\n","import {useEffect, useState, useCallback} from 'react';\nimport Tone from 'tone';\nimport {NOT_UPLOADED_YET} from 'constants/ipfs-constants.js';\nimport {decodeFlac} from 'flac/decodeFlac.js';\nimport Sample from 'repos/Sample.js';\nexport const useDropFiles = () => {\n    let [sounds, setSounds] = useState([]);\n\n    useEffect(() => {\n        window.addEventListener(\"dragenter\", dragEnter);\n        window.addEventListener(\"dragover\", dragOver);\n        window.addEventListener(\"drop\", onDrop);\n\n        return () => {\n            window.removeEventListener(\"dragenter\", dragEnter);\n            window.removeEventListener(\"dragover\", dragOver);\n            window.removeEventListener(\"drop\", onDrop);\n        };\n    }, [setSounds, sounds]);\n\n    const dragEnter = (e) => {\n        e.preventDefault();\n        e.dataTransfer.effectAllowed = \"none\";\n        e.dataTransfer.dropEffect = \"none\";\n    };\n\n    const dragOver= (e) => {\n        e.preventDefault();\n        e.dataTransfer.effectAllowed = \"none\";\n        return false;\n    };\n\n    const onDrop = useCallback(async (ev) => {\n        ev.preventDefault();\n        ev.dataTransfer.effectAllowed = \"none\";\n        ev.dataTransfer.dropEffect = \"none\";\n        \n        if (ev.dataTransfer.items) {\n            // Use DataTransferItemList interface to access the file(s)\n            let _sounds = [... sounds];\n            let files = [];\n            let len = ev.dataTransfer.items.length;\n            for (let i=0; i < ev.dataTransfer.items.length; i++) {\n                if (ev.dataTransfer.items[i].kind==='file') {\n                    files.push(ev.dataTransfer.items[i].getAsFile());\n                }\n            }\n                \n            for (let file of files) { \n                // If dropped items aren't files, reject them\n                let sample = await uploadFile(file);\n                _sounds = [... _sounds, sample];\n            }\n            setSounds([... _sounds]);\n        } else {\n            // Use DataTransfer interface to access the file(s)\n            for (var i = 0; i < ev.dataTransfer.files.length; i++) {\n            }\n        }\n        return false;\n    }, [setSounds, sounds]);\n\n    const uploadFile = useCallback((file) => {\n        return new Promise(resolve => {\n        let reader = new FileReader();\n        if (!file.name.includes('.wav') && !file.name.includes('.flac')) {\n            window.alert('Only accepts .wav files for now');\n            return;\n        }\n        reader.readAsArrayBuffer(file)\n        reader.onloadend = async () => {\n            let raw = reader.result;\n            if (file.name.includes('flac')) {\n                raw = await decodeFlac(new Int8Array(raw));\n            }\n            \n            let audioBuffer = await Tone.Master.context.decodeAudioData(raw);\n            let sample = new Sample(NOT_UPLOADED_YET);\n            sample.audioBuffer = audioBuffer;\n            sample.needsSave = true;\n            sample.tags = [];\n            sample.name = file.name;\n            resolve(sample);\n        };\n        });\n    }, [setSounds, sounds]);\n\n    return {sounds};\n                                   \n};\n"],"sourceRoot":""}