(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{2726:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(5),s=a.n(n),o=a(14),r=a(196),i=a.n(r),c="AIzaSyCf2k8RM7tFFlVGo4CVPvCsOhx86vWwTT0";function u(e){return new Promise(function(){var t=Object(o.a)(s.a.mark(function t(a,n){var o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("https://www.googleapis.com/youtube/v3/videos?id="+e+"&key="+c+"&fields=items(snippet(title))&part=snippet");case 2:void 0!==(o=t.sent).data.items[0]?a(o.data.items[0].snippet.title):a("Title not found");case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}())}},2727:function(e,t,a){"use strict";var n=a(2),s=a(4),o="CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo",r=a(196),i=function(){function e(){Object(n.a)(this,e),this.titleToLabels={},this.nameToLabelInfo={},this.nameToLabel={},this.idToReleases={}}return Object(s.a)(e,[{key:"getLabels",value:function(e){var t=this;return new Promise(function(a,n){void 0===t.titleToLabels[e]?t.searchYoutubeTitle(e).then(function(n){var s=[];null!==n&&void 0!==n.label||a(s),n.label.map(function(o){return t.getLabelInfo(o,function(o){if(null!==o){var r={id:o.id,name:o.name};"images"in o&&(r.thumbnail=o.images[0].uri),s.push(r),t.titleToLabels[e]=s,s.length==n.label.length&&a(s)}else a(s)})})}).catch(function(e){n(e)}):a(t.titleToLabels[e])})}},{key:"getReleaseInfo",value:function(e){return new Promise(function(t,a){var n="https://api.discogs.com/releases/"+e;r.get(n).then(function(e){if(void 0!==e.data){var a=e.data;t(a)}else t(void 0)})})}},{key:"searchRecords",value:function(e){return new Promise(function(t,a){console.log("searchinng name=",e);var n="https://api.discogs.com/database/search?q="+e.split(/\s/g).join("+")+"&type=release&token="+o;r.get(n).then(function(e){if(void 0!==e.data.results){var a=e.data.results;t(a)}else t([])})})}},{key:"searchLabel",value:function(e,t){var a=this;if(void 0!==this.nameToLabel[e])return t(this.nameToLabel[e]);var n=e,s="https://api.discogs.com/database/search?q="+(n=n.split(/\s/g).join("+"))+"&type=label&token="+o;r.get(s).then(function(n){if(void 0!==n.data.results){var s=n.data.results[0];a.nameToLabel[e]=s,t(s)}})}},{key:"getLabelInfo",value:function(e,t){this.searchLabel(e,function(e){var a="https://api.discogs.com/labels/"+e.id+"?token="+o;r.get(a).then(function(e){t(e.data)}).catch(function(e){t(null)})})}},{key:"getLabelReleases",value:function(e,t){var a=this;return new Promise(function(n,s){if(void 0===a.idToReleases[e+"_"+t]){var i="https://api.discogs.com/labels/"+e+"/releases?token="+o+"&page="+t+"&per_page=8";r.get(i).then(function(s){a.idToReleases[e+"_"+t]=s.data,n(s.data)}).catch(function(e){s(e)})}else n(a.idToReleases[e+"_"+t])})}},{key:"searchYoutubeTitle",value:function(e){return new Promise(function(t,a){var n=function(e,t){var a,n,s=[],e=e||"";function o(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var r=["Full Album","Full vinyl","LP","[dubstep]","(full album)","[electro]","[edm]","[house music]","[glitch hop]","[video]","[official video]","(official video)","(official music video)","(lyrics)","[ official video ]","[official music video]","[free download]","[free dl]","( 1080p )","(with lyrics)","(high res / official video)","(music video)","[music video]","[hd]","(hd)","[hq]","(hq)","(original mix)","[original mix]","[lyrics]","[free]","[trap]","[monstercat release]","[monstercat freebie]","[monstercat]","[edm.com premeire]","[edm.com exclusive]","[enm release]","[free download!]","[monstercat free release]"];r.forEach(function(t){e=(e=(e=(e=(e=(e=e.replace(t+" - ","").trim()).replace(t.toUpperCase()+" - ","").trim()).replace(t.toLowerCase()+" - ","").trim()).replace(t,"").trim()).replace(t.toUpperCase(),"").trim()).replace(t.toLowerCase(),"").trim()});for(var i=(e=(e=e.replace(/ *\([^)]*\) */g,"").trim()).replace(/ *\[[^)]*\] */g,"").trim()).split(" - "),c=0;c<i.length;c++)r.indexOf(i[c].toLowerCase())>=0&&i.splice(c,1);2==i.length?(a=i[0],n=i[1]):i.length>2?(a=i[0],n=i[1]):(a=i[0],n=i[0]);r.forEach(function(e){n=n.replace(new RegExp(o(e),"i"),"").trim(),a=a.replace(new RegExp(o(e),"i"),"").trim()}),s.push(n.replace(/(.*)\((.*) remix\)/i,"$2").trim()),s.push(n.replace(/(.*) ft\.? (.*)/i,"$1").trim()),s.push(n.replace(/(.*) ft\.? (.*)/i,"$2").trim()),s.push(n.replace(/(.*) feat\.? (.*)/i,"$1").trim()),s.push(n.replace(/(.*) feat\.? (.*)/i,"$2").trim()),s.push(n.replace(/(.*) featuring (.*)/i,"$2").trim()),s.push(n.replace(/(.*) \(ft (.*)\)/i,"$1").trim()),s.push(n.replace(/(.*) \(ft (.*)\)/i,"$2").trim()),s.push(n.replace(/(.*) \(feat\.? (.*)\)/i,"$2").trim()),s.push(n.replace(/(.*) \(featuring (.*)\)/i,"$2").trim()),s.push(a.replace(/(.*) ft\.? (.*)/i,"$1").trim()),s.push(a.replace(/(.*) ft\.? (.*)/i,"$2").trim()),s.push(a.replace(/(.*) feat\.? (.*)/i,"$1").trim()),s.push(a.replace(/(.*) feat\.? (.*)/i,"$2").trim()),s.push(a.replace(/(.*) featuring (.*)/i,"$2").trim()),s.push(a.replace(/(.*) \(ft (.*)\)/i,"$1").trim()),s.push(a.replace(/(.*) \(ft (.*)\)/i,"$2").trim()),s.push(a.replace(/(.*) \(feat\.? (.*)\)/i,"$1").trim()),s.push(a.replace(/(.*) \(featuring (.*)\)/i,"$2").trim()),s.push(a.replace(/(.*) & (.*)/gi,"$1").trim()),s.push(a.replace(/(.*) & (.*)/gi,"$2").trim()),s.push(a.replace(/(.*) vs\.? (.*)/i,"$1").trim()),s.push(a.replace(/(.*) vs\.? (.*)/i,"$2").trim()),s.push(a.replace(/(.*) x (.*)/i,"$1").trim()),s.push(a.replace(/(.*) x (.*)/i,"$2").trim());var u={};return s.forEach(function(e){e!==n&&(u[e]=e)}),{artist:a,title:n,credits:Object.keys(u)}}(e),s=n.artist+" - "+n.title,i="https://api.discogs.com/database/search?q="+(s=s.split(/\s/g).join("+"))+"&token="+o;r.get(i).then(function(e){var a=e.data.results,s=null;for(var o in a)(null==s||a[o].year<s.year)&&a[o].title.includes(n.title)&&(s=a[o]);if(null==s)for(var o in a)return t(a[o]);t(s)}).catch(function(e){a(e)})})}}]),e}();t.a=i},2729:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(7),r=a(10),i=a(1),c=a(0),u=a.n(c),l=a(12),d=a(653),h=a(1062),p=a(1064);a(2730);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var v=function(e){Object(o.a)(a,e);var t=f(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"onClickSequencer",value:function(){window.location="/create/"}},{key:"onClickSampler",value:function(){"DISCOVER"!==this.props.view&&(window.location="/discover/")}},{key:"onClickExplore",value:function(){"EXPLORE"!==this.props.view&&(window.location="/explore/")}},{key:"onClickLogo",value:function(){window.location="/"}},{key:"render",value:function(){var e=this,t=this.props.view||"",a="DISCOVER"===t?"navigator-button selected":"navigator-button",n="EXPLORE"===t?"navigator-button selected":"navigator-button";return u.a.createElement("div",{className:"navigator"},u.a.createElement(p.a,{show:this.props.showLogin}),u.a.createElement("div",{onClick:function(){return e.onClickLogo()},className:"universal-sequences-logo "+t},"ZEQUENCER"),u.a.createElement("div",{onClick:function(){return e.onClickSequencer()},className:"navigator-button"},"CREATE"),u.a.createElement("div",{onClick:function(){return e.onClickExplore()},className:n},"EXPLORE"),u.a.createElement("div",{onClick:function(){return e.onClickSampler()},className:a},"SAMPLE"),u.a.createElement("div",{className:"guilds-menu-container"},u.a.createElement(h.a,{store:this.props.store}),u.a.createElement(d.a,{store:this.props.store})))}}]),a}(c.Component);t.a=Object(l.b)(function(e){return{showLogin:e.sequencer.showLogin}},null)(v)},2730:function(e,t,a){},2732:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(7),r=a(10),i=a(1),c=a(0),u=a.n(c),l=a(59);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var h=function(e){Object(o.a)(a,e);var t=d(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.props.onSearch()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement(l.h,null,u.a.createElement(l.g,{onChange:function(t){return e.props.onChange(t.target.value)},value:this.props.searchTerms,onKeyPress:function(t){return e.onKeyPress(t)},id:"search-input",placeholder:this.props.placeHolder,className:"tag-input"}),u.a.createElement(l.i,{addonType:"append"},u.a.createElement(l.b,{onClick:function(){return e.props.onSearch()},color:"secondary"},"Search"))))}}]),a}(c.Component);t.a=h},2745:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(20),r=a(7),i=a(10),c=a(1),u=a(0),l=a.n(u),d=a(75),h=a(1071),p=(a(15),a(196),a(1074)),f=a(59),v=a(354);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var s=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var b=new(window.AudioContext||window.webkitAudioContext),y=function(e){Object(r.a)(a,e);var t=m(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={soundId:e.soundId},s.audioUnit=new v.a(b),s.loadBuffer.bind(Object(o.a)(s)),s.handleLoadBuffer.bind(Object(o.a)(s)),s.loadBuffer(),s}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.soundId!==this.state.soundId&&(this.state.soundId=e.soundId,this.loadBuffer()),!0}},{key:"loadBuffer",value:function(){var e=this;console.log("loading buffer soundId = "+this.props.soundId),this.sample=new d.a(this.props.soundId,this.props.encryptedIpfs),this.sample.name=this.props.title,this.sample.videoId=this.props.videoId,this.state.name=this.props.title,this.state.videoId=this.props.videoId,console.log("gonna fetch audio for id = "+this.sample.getId()),this.sample.fetchAudio().then(function(t){e.audioUnit.setBuffer(t.audioBuffer),e.state.buffer=t.audioBuffer,e.setState(e.state)})}},{key:"handleLoadBuffer",value:function(e,t){var a=e.state;a.buffer=t,e.setState(a)}},{key:"render",value:function(){var e=this;return void 0!=this.state.buffer?l.a.createElement("div",{className:this.props.isSelected?"selected sound-row":"sound-row"},l.a.createElement("div",{className:"playlist-row"},l.a.createElement(h.a,{selections:[],sample:this.sample,store:this.props.store,buffer:this.audioUnit.buffer,onClickSelection:function(e,t){return[]},height:70,width:350,onSelection:function(e,t){return[]},audioUnit:this.audioUnit,waveformId:0}),l.a.createElement("div",{className:"youtube-info"},l.a.createElement(p.a,{onClickThumbnail:function(){return e.props.onClickThumbnail(e.state.soundId)},coverArt:this.props.coverArt,sample:this.sample,name:this.props.title,isMuted:!1,soundId:this.state.soundId,onNewSound:this.props.onNewSound,videoId:this.state.videoId})),l.a.createElement("div",{onClick:this.props.onDelete,className:"delete-button"},"x")),null!=this.props.tags?this.props.tags.map(function(t){return l.a.createElement(f.a,{onClick:function(){return e.props.onDeleteTag(t)},color:"light"},t)}):""):l.a.createElement("div",null)}}]),a}(u.Component);t.a=y},2748:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(7),r=a(10),i=a(1),c=a(0),u=a.n(c);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var d=function(e){Object(o.a)(a,e);var t=l(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"getYoutubeThumbnail",value:function(){return"https://img.youtube.com/vi/"+this.props.result.videoId+"/1.jpg"}},{key:"render",value:function(){return u.a.createElement("div",{onClick:this.props.onClick,className:"youtube-result"},u.a.createElement("img",{className:"youtube-result-thumbnail",src:this.getYoutubeThumbnail()}),u.a.createElement("div",{className:"youtube-result-title"},this.props.result.title))}}]),a}(c.Component),h=(a(59),a(6)),p=a(2732),f=a(196),v=a.n(f),m=a(12);a(2726);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var y="AIzaSyCf2k8RM7tFFlVGo4CVPvCsOhx86vWwTT0",g="YOUTUBE",k=function(e){Object(o.a)(a,e);var t=b(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={searchResults:[],mode:g,nextPageToken:null,prevPageToken:null,next:!1,previous:!1,relatedMode:!1,labelMode:!1,inspirationalWords:[]},s.addListeners(),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){""!==this.props.searchTerms&&this.searchYoutube()}},{key:"searchYoutube",value:function(e){var t=this,a="";void 0!==e?a="&pageToken="+e:(this.state.nextPageToken=null,this.state.prevPageToken=null),this.state.relatedMode=!1,v.a.get("https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&key="+y+"&maxResults=8&q="+this.props.searchTerms+a).then(function(e){"nextPageToken"in e.data&&(t.state.nextPageToken=e.data.nextPageToken),"prevPageToken"in e.data&&(t.state.prevPageToken=e.data.prevPageToken);var a=e.data.items.map(function(e){return new R(e.id.videoId,e.snippet.title)});t.state.searchResults=a,t.setState(t.state)})}},{key:"clearResults",value:function(){this.state.nextPageToken=null,this.state.prevPageToken=null,this.props.setYoutubeSearchTerms(""),this.state.searchResults=[],this.setState(this.state)}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.searchYoutube()}},{key:"addListeners",value:function(){var e=this;window.addEventListener("get_related_videos",function(){e.getRelatedResults()})}},{key:"getRelatedResults",value:function(e){var t=this;this.state.relatedMode=!0;var a="";void 0!==e?a="&pageToken="+e:(this.state.nextPageToken=null,this.state.prevPageToken=null),v.a.get("https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId="+this.props.videoId+"&type=video&key="+y+"&maxResults=8"+a).then(function(e){"nextPageToken"in e.data&&(t.state.nextPageToken=e.data.nextPageToken),"prevPageToken"in e.data&&(t.state.prevPageToken=e.data.prevPageToken);var a=e.data.items.map(function(e){return new R(e.id.videoId,e.snippet.title)});t.state.searchResults=a,t.setState(t.state)})}},{key:"onClickInspired",value:function(){var e=this.ethereumCache.index.TAG.TAG,t=e[Math.floor(Math.random()*e.length)];this.setState({inspirationalWords:t.values})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"youtube-search-container"},u.a.createElement(p.a,{placeHolder:"Search youtube",onChange:this.props.setYoutubeSearchTerms,searchTerms:this.props.searchTerms,onSearch:function(){return e.searchYoutube()}}),u.a.createElement("div",{className:"pagination-pane"},this.state.prevPageToken?u.a.createElement("div",{onClick:function(){e.state.relatedMode?e.getRelatedResults(e.state.prevPageToken):e.searchYoutube(e.state.prevPageToken)},className:"field-pagination-button"},"Previous"):"",this.state.nextPageToken?u.a.createElement("div",{onClick:function(){e.state.relatedMode?e.getRelatedResults(e.state.nextPageToken):e.searchYoutube(e.state.nextPageToken)},className:"field-pagination-button"},"Next"):"",u.a.createElement("div",{onClick:function(){return e.clearResults()},className:"field-pagination-button"},"Clear")),this.state.searchResults.map(function(t){return u.a.createElement(d,{onClick:function(){return e.props.onClickResult(t)},result:t})}))}}]),a}(c.Component),R=function e(t,a){Object(n.a)(this,e),this.videoId=t,this.title=a};t.a=Object(m.b)(function(e){return{searchTerms:e.discover.youtubeSearchTerms}},function(e){return{setYoutubeSearchTerms:function(t){return e(Object(h.Ph)(t))}}})(k)},2758:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(7),r=a(10),i=a(1),c=a(1078),u=a(0),l=a.n(u);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var h=function(e){Object(o.a)(a,e);var t=d(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={type:"youtube"},s.setState(s.state),s}return Object(s.a)(a,[{key:"handleOptionChange",value:function(e){"youtube"===e.target.value?this.state.type="youtube":this.state.type="vinyl",this.props.onSampleSourceChange(this.state.type),this.setState(this.state)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"sample-source"},l.a.createElement("form",null,l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{className:"filter-radio",type:"radio",value:"youtube",checked:"youtube"===this.state.type,onChange:function(t){return e.handleOptionChange(t)}}),"Youtube"),l.a.createElement("label",null,l.a.createElement("input",{className:"filter-radio",type:"radio",value:"vinyl",checked:"vinyl"===this.state.type,onChange:function(t){return e.handleOptionChange(t)}}),"Vinyl"),l.a.createElement(c.a,{defaultInput:"Soundflower (2ch)",deviceId:this.props.deviceId,onChooseAudio:function(t,a){return e.props.onChooseAudio(t,a)}}))))}}]),a}(u.Component);t.a=h},2761:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(7),r=a(10),i=a(1),c=(a(196),a(30),a(0)),u=a.n(c),l=a(59);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var h=function(e){Object(o.a)(a,e);var t=d(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={tags:[]},s._tag="",s.addListener(),s}return Object(s.a)(a,[{key:"addListener",value:function(){var e=this;window.addEventListener("sound_selected",function(){e.input&&e.input!==document.activeElement&&e.input.focus()})}},{key:"addTag",value:function(){this.state.tags.push(this._tag);this.props.onUpdateTags(this._tag),this._tag="",this.setState(this.state)}},{key:"onInputType",value:function(e){this._tag=e,this.setState(this.state)}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.addTag()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"tag-editor"},this.props.soundUploadMode?"":u.a.createElement("div",{onClick:this.props.onClickBack,className:"light-blue-button common-button"},"Back to search"),u.a.createElement("div",{className:"tags"},u.a.createElement(l.h,null,u.a.createElement("div",null,u.a.createElement("input",{type:"text",ref:function(t){return e.input=t},autoFocus:!0,onKeyPress:function(t){return e.onKeyPress(t)},value:this._tag,id:"search-input",onChange:function(t){return e.onInputType(t.target.value)},placeholder:"Enter tag name",className:"tag-discover-input"})),u.a.createElement(l.i,{addonType:"append"},u.a.createElement(l.b,{onClick:function(){return e.addTag()},color:"secondary"},"Tag")))))}}]),a}(c.Component);t.a=h},2764:function(e,t,a){"use strict";var n=a(2),s=a(4),o=a(7),r=a(10),i=a(1),c=a(0),u=a.n(c),l=a(2748),d=a(5),h=a.n(d),p=a(14);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var v=function(e){Object(o.a)(a,e);var t=f(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"record-labels"},u.a.createElement("div",{className:"record-labels-subheader"},"Record Labels"),0==this.props.labels.length?"No labels found...":"",this.props.labels.map(function(t){return u.a.createElement(m,{label:t,onClick:function(){return e.props.onClickLabel(t.id)}}," ")}))}}]),a}(c.Component),m=function(e){Object(o.a)(a,e);var t=f(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return u.a.createElement("div",{onClick:this.props.onClick,className:"youtube-result discogs-result"},u.a.createElement("div",{className:"floating-thumbnail"},u.a.createElement("img",{className:"youtube-result-thumbnail",src:this.props.label.thumbnail})),u.a.createElement("div",{className:"youtube-result-title"},this.props.label.name))}}]),a}(c.Component),b=v,y=a(2726),g=a(38);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var R=function(e){Object(o.a)(a,e);var t=k(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={videoId:s.props.videoId,name:""},s.updateName(s.props.videoId),s}return Object(s.a)(a,[{key:"onClickBuy",value:function(){window.open("https://www.discogs.com/sell/release/"+this.props.release.id,"_blank")}},{key:"shouldComponentUpdate",value:function(e){return e.videoId!==this.state.videoId&&this.updateName(e.videoId),this.state.videoId=e.videoId,!0}},{key:"updateName",value:function(){var e=Object(p.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(t);case 2:a=e.sent,this.setState({name:a});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getYoutubeThumbnail",value:function(){return"https://img.youtube.com/vi/"+this.props.videoId+"/1.jpg"}},{key:"onClickVideo",value:function(){this.props.loadVideo({videoId:this.props.videoId})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"youtube-discogs-container"},u.a.createElement("img",{onClick:function(){return e.onClickVideo()},className:"youtube-thumbnail",src:this.getYoutubeThumbnail()}),u.a.createElement("div",{className:"discogs-youtube-name"},this.state.name),u.a.createElement(g.a,{condition:void 0!==this.props.release},u.a.createElement("div",{onClick:function(t){return e.onClickBuy(t)},className:"discogs-result-url"},"Buy Vinyl")))}}]),a}(c.Component),T=a(2732),E=a(59),O=a(12),C=a(6);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var S=function(e){Object(o.a)(a,e);var t=w(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t="";return this.props.result===this.props.selectedRecord&&(t="selected-record"),u.a.createElement("div",{onClick:function(){return e.props.setSelectedRecord(e.props.result)},className:"discogs-result record"},u.a.createElement("img",{id:t,className:"discogs-thumbnail",src:this.props.result.thumb}),u.a.createElement("div",{className:"record-info"},u.a.createElement("div",{className:"title"},this.props.result.title),u.a.createElement("div",{className:"year"},this.props.result.year),u.a.createElement("div",{className:"styles"},this.props.result.style.map(function(e){return u.a.createElement(E.a,null," ",e," ")}))))}}]),a}(c.Component),I=Object(O.b)(function(e){return{selectedRecord:e.discover.selectedRecord}},function(e){return{setSelectedRecord:function(t){return e(Object(C.of)(t))}}})(S),j=a(164),L=a.n(j);function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var x=function(e){Object(o.a)(a,e);var t=N(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={},s}return Object(s.a)(a,[{key:"getYoutubeThumbnail",value:function(){return"https://img.youtube.com/vi/"+this.props.videoId+"/1.jpg"}},{key:"render",value:function(){var e=this.props.selectedLabel;return void 0===e?u.a.createElement("div",null):u.a.createElement("div",{className:"youtube-discogs-container"},u.a.createElement("img",{className:"youtube-thumbnail",src:e.thumbnail}),u.a.createElement("div",{className:"discogs-youtube-name"},e.name))}}]),a}(c.Component);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var B=function(e){Object(o.a)(a,e);var t=P(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"onClickBuy",value:function(e){return e.stopPropagation(),window.open("https://www.discogs.com/sell/release/"+this.props.release.id,"_blank"),!1}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{onClick:this.props.onClick,className:"youtube-result discogs-result"},""!==this.props.release.thumb?u.a.createElement("img",{className:"youtube-result-thumbnail",src:this.props.release.thumb}):"",u.a.createElement("div",{className:"discogs-result-title"},this.props.release.artist," - ",this.props.release.title," (",this.props.release.year,")"),u.a.createElement("div",{onClick:function(t){return e.onClickBuy(t)},className:"discogs-result-url"},"Buy Vinyl"))}}]),a}(c.Component),V=a(2727);function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var U=function(e){Object(o.a)(a,e);var t=Y(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={searchTerms:"",showSearchResults:!1,searchResults:[]},s.discogs=new V.a,s}return Object(s.a)(a,[{key:"onChangeSearch",value:function(e){this.setState({searchTerms:e})}},{key:"onSearch",value:function(){var e=Object(p.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.discogs.searchRecords(this.state.searchTerms);case 2:t=e.sent,this.setState({showSearchResults:!0,searchResults:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.show?u.a.createElement("div",null,u.a.createElement(T.a,{onChange:function(t){return e.onChangeSearch(t)},onSearch:function(){return e.onSearch()},placeHolder:"Type record name",searchTerms:this.state.searchTerms}),u.a.createElement("div",{className:"search-results"},this.state.searchResults.map(function(t){return u.a.createElement(I,{result:t,onClick:function(){return e.selectRecord(t)}})}))):u.a.createElement("div",null)}}]),a}(c.Component),D=a(420),A=a(9);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var _=function(e){Object(o.a)(a,e);var t=M(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={labelReleases:[],searchTerms:"",recordLabels:[],history:[],releasesPage:1,selectedLabel:void 0,oldVideoId:e.videoId,goneBack:!1,selectedRelease:void 0,isLoadingDiscogs:!1},s.discogs=new V.a,s.addListeners(),s.getRecordLabels(),s}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.videoId!==this.state.videoId&&(this.state.videoId=e.videoId),!0}},{key:"addListeners",value:function(){var e=this;window.addEventListener("get_record_labels",function(){e.getRecordLabels()})}},{key:"onClickBack",value:function(){var e=Object(A.a)(this.state.history),t=e.pop();this.state.goneBack||(t=e.pop(),this.state.goneBack=!0),this.state.history=e,void 0!==t.labelReleases&&t.labelReleases.length>0?this.setState({labelReleases:t.labelReleases,recordLabels:[]}):this.setState({labelReleases:[],recordLabels:t.recordLabels}),void 0!==t.videoId&&this.setState({videoId:t.videoId}),void 0!==t.selectedLabel&&this.setState({selectedLabel:t.selectedLabel})}},{key:"newHistory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.videoId;if((0!==this.state.recordLabels.length||0!==this.state.labelReleases.length)&&!this.state.history.some(function(t){return t.equals(e.state)})){var a=Object(A.a)(this.state.history).concat([new $(this.state.recordLabels,this.state.labelReleases,t,this.state.selectedLabel)]);this.setState({history:a,goneBack:!1})}}},{key:"getLabel",value:function(e){return this.state.recordLabels.filter(function(t){return t.id===e})[0]}},{key:"showLabelReleases",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0!==this.state.selectedLabel&&this.state.selectedLabel.id===e||(this.state.selectedLabel=this.getLabel(e)),this.setState({isLoadingDiscogs:!0}),this.discogs.getLabelReleases(e,this.state.releasesPage).then(function(e){t.setState({isLoadingDiscogs:!1}),a&&t.newHistory(),t.state.recordLabels=[],t.state.labelReleases=e.releases,a&&t.newHistory(),t.setState(t.state)})}},{key:"onClickNextReleases",value:function(){this.state.releasesPage++,this.setState(this.state),this.showLabelReleases(this.state.selectedLabel.id)}},{key:"onClickPreviousReleases",value:function(){this.state.releasesPage--,this.setState(this.state),this.showLabelReleases(this.state.selectedLabel.id)}},{key:"searchForRelease",value:function(e){this.setState({selectedRelease:e}),this.props.searchYoutube(e.artist+" - "+e.title)}},{key:"onClickLabel",value:function(e){this.setState({releasesPage:1}),this.showLabelReleases(e,!0)}},{key:"getRecordLabels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.videoId;arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.videoId;this.state.labelMode=!0,this.state.labelReleases=[],this.state.searchResults=[],this.state.releasesPage=1;this.setState({isLoadingDiscogs:!0}),Object(y.a)(t).then(function(t){return e.discogs.getLabels(t).then(function(t){e.setState({isLoadingDiscogs:!1}),e.state.recordLabels=t,e.newHistory(),e.setState(e.state)})})}},{key:"render",value:function(){var e=this;return this.props.show?u.a.createElement("div",null,u.a.createElement("div",{className:"discogs-header"},u.a.createElement(g.a,{condition:this.state.history.length>0},u.a.createElement("div",{onClick:function(){return e.onClickBack()},className:"back-button"},"Back")),u.a.createElement(g.a,{condition:this.state.recordLabels.length>0},u.a.createElement(R,{loadVideo:function(t){return e.props.onClickResult(t)},release:this.state.selectedRelease,videoId:this.state.videoId})),u.a.createElement(g.a,{condition:this.state.labelReleases.length>0},u.a.createElement(x,{recordLabels:this.state.recordLabels,selectedLabel:this.state.selectedLabel}))),u.a.createElement("div",{className:"pagination-pane"},this.state.releasesPage>1?u.a.createElement("div",{onClick:function(){return e.onClickPreviousReleases()},className:"field-pagination-button"},"Previous"):"",this.state.labelReleases.length>0?u.a.createElement("div",{onClick:function(){return e.onClickNextReleases()},className:"field-pagination-button"},"Next"):""),u.a.createElement(L.a,{sizeUnit:"px",size:10,color:"#123abc",loading:this.state.isLoadingDiscogs}),u.a.createElement(g.a,{condition:this.state.recordLabels.length>0},u.a.createElement(b,{onClickLabel:function(t){return e.onClickLabel(t)},labels:this.state.recordLabels})),u.a.createElement(g.a,{condition:this.state.labelReleases.length>0},u.a.createElement("div",{className:"record-labels-subheader"},"Label Releases"),this.state.labelReleases.map(function(t){return u.a.createElement(B,{release:t,onClick:function(){return e.searchForRelease(t)}})}))):u.a.createElement("div",null)}}]),a}(c.Component),$=function(){function e(t,a,s,o){Object(n.a)(this,e),this.recordLabels=t,this.labelReleases=a,this.videoId=s,this.selectedLabel=o}return Object(s.a)(e,[{key:"equals",value:function(e){return e.recordLabels.length>0&&this.recordLabels.length>0?JSON.stringify(e.recordLabels)===JSON.stringify(this.recordLabels):e.labelReleases.length>0&&this.labelReleases>0&&JSON.stringify(e.labelReleases)===JSON.stringify(e.labelReleases)}}]),e}(),H=_;function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(i.a)(e);if(t){var s=Object(i.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var q=new(a(662).a),F=(new D.a(q),"YOUTUBE"),K=function(e){Object(o.a)(a,e);var t=G(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={mode:F},s.addListeners(),s.sequencerEngine={store:s.props.store},s}return Object(s.a)(a,[{key:"addListeners",value:function(){var e=this;window.addEventListener("get_related_videos",function(){e.setState({mode:F})})}},{key:"onClickOption",value:function(e){"DISCOGS"===e&&window.dispatchEvent(new Event("get_record_labels")),this.setState({mode:e})}},{key:"searchYoutube",value:function(e){this.setState({mode:F}),this.props.setYoutubeSearchTerms(e)}},{key:"chooseSound",value:function(e){console.log("choose sample = "),console.log(e),this.props.onClickResult(e)}},{key:"render",value:function(){var e=this,t=this.state.mode===F?"option-tab selected":"option-tab",a="DISCOGS"===this.state.mode?"option-tab selected":"option-tab",n=(this.state.mode,"RECORD LABELS"===this.state.mode?"option-tab selected":"option-tab"),s="SAMPLES"===this.state.mode?"internet-navigator show-sounds":"internet-navigator";return u.a.createElement("div",{className:s},u.a.createElement("div",{className:"option-tabs"},u.a.createElement("div",{onClick:function(){return e.onClickOption(F)},className:t},"Youtube"),u.a.createElement("div",{onClick:function(){return e.onClickOption("DISCOGS")},className:a},"Discogs"),u.a.createElement("div",{onClick:function(){return e.onClickOption("RECORD LABELS")},className:n},"Record Labels")),u.a.createElement(g.a,{condition:this.state.mode===F},u.a.createElement(l.a,{videoId:this.props.videoId,onClickResult:this.props.onClickResult})),u.a.createElement(U,{show:"DISCOGS"===this.state.mode}),u.a.createElement(H,{show:"RECORD LABELS"===this.state.mode,searchYoutube:function(t){return e.searchYoutube(t)},videoId:this.props.videoId,onClickResult:this.props.onClickResult}))}}]),a}(c.Component);t.a=Object(O.b)(function(e){return{}},function(e){return{setYoutubeSearchTerms:function(t){return e(Object(C.Ph)(t))}}})(K)},2879:function(e,t,a){},2894:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a.n(n),o=a(14),r=a(8),i=a(28),c=a(2),u=a(4),l=a(7),d=a(10),h=a(1),p=a(0),f=a.n(p),v=a(1082),m=a(1062),b=a(1064),y=a(451),g=a(47),k=a(52),R=a(297),T=a(653),E=a(2758),O=a(2729),C=a(12),w=a(38),S=a(196),I=a.n(S),j=a(2726),L=(a(1078),a(30)),N=a(2727),x=a(2764),P=(a(289),a(36),new(a(1343).a),a(693),a(20)),B=a(2864),V=a(15),Y=a.n(V),U=(a(2878),a(901),a(457)),D=a.n(U),A=a(59),M=a(183),_=a(2745);a(2879),a(1067);function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var s=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(d.a)(this,a)}}var H=function(e){Object(l.a)(a,e);var t=$(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).state={sampling:!1,dropdownOpen:!1,recordingSetup:!1,videoId:e.videoId,startTime:null,endTime:null,stream:void 0};Object(P.a)(n);return n.soundUploader=new M.a(2,function(e,t){return n.props.onSoundUploaded(t,t)}),n.setupRecording(),n}return Object(u.a)(a,[{key:"toggleDropdown",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"shouldComponentUpdate",value:function(e){return this.props.playOutputRecording!=e.playOutputRecording&&(e.playOutputRecording?this.input.connect(this.audioContext.destination):this.input.disconnect(this.audioContext.destination)),e.stream!==this.state.stream&&(this.state.stream=e.stream,this.startUserMedia(this.state.stream)),!0}},{key:"startUserMedia",value:function(e){console.log("starting user media"),console.log(e),this.input=this.audioContext.createMediaStreamSource(e),this.input.channelCount=2,this.recorder=new window.Recorder(this.input,{numChannels:2,bufferLen:2048}),this.props.playOutputRecording&&this.input.connect(this.audioContext.destination),this.state.recordingSetup=!0,this.setState(this.state)}},{key:"setupRecording",value:function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,window.URL=window.URL||window.webkitURL,this.audioContext=Y.a.Master.context,D()(this.audioContext,"#playButton")}catch(e){console.log("No web audio support in this browser!")}}},{key:"onClickSampleButton",value:function(){var e=this;this.state.sampling=!this.state.sampling,this.state.sampling?(this.state.startTime=this.youtubePlayer.getCurrentTime(),console.log("recording started"),this.recorder.record()):(this.recorder.stop(Y.a.Master.context.currentTime+.01),setTimeout(function(){e.state.endTime=e.youtubePlayer.getCurrentTime(),e.recorder.getBuffer(function(t){return e.saveBuffer(t)})},[100])),this.setState(this.state)}},{key:"saveBuffer",value:function(){var e=Object(o.a)(s.a.mark(function e(t){var a,n,o=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("save buffer called w blob=",t),e.next=3,this.soundUploader.uploadBufferToIpfs(t,!0);case 3:a=e.sent,this.props.selectedRecord&&(n=this.props.selectedRecord.thumb,I.a.get("https://cors-anywhere.herokuapp.com/"+n,{responseType:"blob"}).then(function(e){var t=e.data;g.a.addBlob(t).then(function(e){return o.props.onCoverDownloaded(a,e)})})),this.recorder.clear();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRelatedVideos",value:function(){console.log("get related videos event dispatched"),window.dispatchEvent(new Event("get_related_videos"))}},{key:"getRecordLabels",value:function(){window.dispatchEvent(new Event("get_record_labels"))}},{key:"fastForward",value:function(e){e.preventDefault(),this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime()+5)}},{key:"rewind",value:function(e){e.preventDefault(),this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime()-5)}},{key:"checkQuality",value:function(){var e=this.youtubePlayer.getAvailableQualityLevels();this.youtubePlayer.setPlaybackQuality(e[0])}},{key:"render",value:function(){var e=this;console.log("selected record = "),console.log(this.props.selectedRecord);var t=this.props.styles,a=this.props.country,n=this.props.yeaer;return"VINYL"===this.props.sampleSource&&this.props.selectedRecord&&(t=this.props.selectedRecord.style,a=this.props.selectedRecord.country,n=this.props.selectedRecord.year),f.a.createElement("div",{className:"youtube-sampler"},f.a.createElement("span",{className:"#playButton"}),f.a.createElement(w.a,{condition:"YOUTUBE"===this.props.sampleSource},f.a.createElement("div",{className:"youtube-widget-container"},f.a.createElement(B.a,{videoId:this.props.videoId,opts:{height:"125",width:"400",playerVars:{autoplay:1}},onStateChange:function(t){return e.checkQuality()},onReady:function(t){return e._onReady(t)}}))),f.a.createElement(w.a,{condition:"VINYL"===this.props.sampleSource},f.a.createElement("img",{className:"cover-art",src:this.props.selectedRecord?this.props.selectedRecord.cover_image:""})),f.a.createElement("div",{className:"video-info-container"}),f.a.createElement("div",{className:"video-buttons-container"},f.a.createElement("div",{className:"action-buttons"},this.state.recordingSetup?f.a.createElement("span",{onClick:function(){return e.onClickSampleButton()},className:this.state.sampling?"record-button recording":"record-button"},this.state.sampling?"RECORDING":"RECORD"):"... initalizing"),f.a.createElement("div",{className:"action-buttons"},f.a.createElement("span",{onClick:function(t){return e.rewind(t)},className:"big-button player-button"},"RRWD")),f.a.createElement("div",{className:"action-buttons"},f.a.createElement("span",{onClick:function(t){return e.fastForward(t)},className:"big-button player-button"},"FFWD")),f.a.createElement("div",{className:"action-buttons"},f.a.createElement("span",{onClick:this.props.onClickTag,className:"big-button tag-samples-button"},"TAG")),f.a.createElement("div",{className:"float-right"},f.a.createElement(w.a,{condition:"YOUTUBE"===this.props.sampleSource},f.a.createElement(A.c,{show:this.state.dropdownOpen,isOpen:this.state.dropdownOpen,toggle:function(){return e.toggleDropdown()}},f.a.createElement(A.b,{onClick:function(){return e.getRelatedVideos()},id:"caret",color:"secondary"},f.a.createElement("span",{className:""},"Related")),f.a.createElement(A.f,{size:"sm",caret:!0,color:"secondary"}),f.a.createElement(A.e,null,f.a.createElement(A.d,{onClick:function(){return e.getRelatedVideos()},size:"sm"},"Related Videos"),f.a.createElement(A.d,{onClick:function(){return e.getRecordLabels()},size:"sm"},"Record Labels"),f.a.createElement(A.d,{onClick:function(){return e.props.onClickRandomVideo()},size:"sm"},"Random Video")))))),f.a.createElement("div",{className:"discogs-container"},"Styles:  ",t.map(function(e){return f.a.createElement(A.a,{color:"light"},e)})," ",void 0!==n?"Year: "+n:"",void 0!==a?" Country: "+a:""))}},{key:"_onReady",value:function(e){this.youtubePlayer=e.target,this.setState(this.state)}}]),a}(f.a.Component);var G=Object(C.b)(function(e){return{selectedRecord:e.discover.selectedRecord}},null)(H),q=(a(2748),a(2761)),F=a(423),K=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"tag",value:function(e,t){return new Promise(function(a,n){I.a.post("/tagSoundEasy/"+e+"/"+t).then(function(e){return a()}).catch(function(e){return n(e)})})}},{key:"getTags",value:function(e){}}]),e}(),z=(a(1516),a(662));function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var s=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(d.a)(this,a)}}var W="YOUTUBE",Q=function(e){Object(l.a)(a,e);var t=J(a);function a(e){var n,s;return Object(c.a)(this,a),(s=t.call(this,e)).ethereumCache=new z.a,L.a.store=s.props.store,k.a.setStore(s.props.store),k.a.setEthereum(L.a),k.a.checkLogin(),L.a.guilds.initGuilds(),s.state=(n={videoId:"j5L70BkuKlo",soundIds:[],sampleSource:W,selectedSoundIds:[],soundIdToHash:{},hashToSoundId:{},tagMode:!1,soundIdToTags:{},hashToStyles:{}},Object(i.a)(n,"hashToSoundId",{}),Object(i.a)(n,"hashToYear",{}),Object(i.a)(n,"hashToCountry",{}),Object(i.a)(n,"hashToVideoId",{}),Object(i.a)(n,"hashToVideoTitle",{}),Object(i.a)(n,"hashToDiscogsId",{}),Object(i.a)(n,"styles",[]),Object(i.a)(n,"hashToCoverArt",{}),Object(i.a)(n,"year",void 0),Object(i.a)(n,"country",void 0),Object(i.a)(n,"syncedToEthereum",!1),Object(i.a)(n,"calculatingNoteSequences",!1),Object(i.a)(n,"noteSequencesCalculated",0),Object(i.a)(n,"stream",void 0),Object(i.a)(n,"taggingSingleSound",!1),Object(i.a)(n,"soundIdToTag",void 0),n),s.onVideoIdChanged(s.state.videoId),s.discogs=new N.a,s.soundsTags=new K,L.a.crypto.store=s.props.store,s.contentKey=new R.a,s.encryptedIpfs=new F.a(s.props.store,L.a.guilds,L.a.encryption,L.a.crypto),s}return Object(u.a)(a,[{key:"onCoverArtDownloaded",value:function(e,t){console.log("onCoverARtDownloaded"),console.log(this.props.selectedRecord);var a=Object(r.a)({},this.state.hashToCoverArt);a[e]=t,this.setState({hashToCoverArt:a})}},{key:"onChooseAudio",value:function(e,t){console.log("deviceId chosen = "+t),this.setState({stream:e,deviceId:t})}},{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",function(e){e.returnValue="Hellooww"})}},{key:"onSoundUploaded",value:function(){var e=Object(o.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.syncedToEthereum=!1,this.state.soundIdToHash[t]=a,this.state.hashToSoundId[a]=t,this.state.soundIds.push(t),this.state.soundIdToTags[t]=[],"VINYL"!==this.state.sampleSource){e.next=14;break}this.state.hashToVideoTitle[a]=this.props.selectedRecord.title,this.state.hashToCountry[a]=this.props.selectedRecord.country,this.state.hashToStyles[a]=this.props.selectedRecord.style,this.state.hashToYear[a]=this.props.selectedRecord.year,this.state.hashToDiscogsId[a]=this.props.selectedRecord.id,this.soundsTags.tag(t,"vinyl"),e.next=21;break;case 14:return this.state.hashToVideoId[a]=this.state.videoId,e.next=17,this.getYoutubeTitle();case 17:this.state.hashToVideoTitle[a]=e.sent,this.state.hashToStyles[a]=this.state.styles,this.state.hashToYear[a]=void 0===this.state.year?null:this.state.year,this.state.hashToCountry[a]=void 0===this.state.country?null:this.state.country;case 21:this.setState(this.state);case 22:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"onVideoIdChanged",value:function(e){var t=this;console.log("on videddd changed"),this.state.videoId=e,this.getYoutubeTitle().then(function(e){t.discogs.searchYoutubeTitle(e).then(function(e){return t.loadDiscogsResults(e)})}),this.setState(this.state)}},{key:"loadDiscogsResults",value:function(e){if(null!=e&&void 0!==e){var t=e;if(void 0!==e.length){var a=Math.min.apply(Math,e.map(function(e){return e.year}));t=e.filter(function(e){return e.year===a})[0]}this.setState({styles:void 0!==t.style?t.style:[],country:t.country,year:t.year})}else this.setState({styles:[],country:void 0,year:void 0})}},{key:"getYoutubeTitle",value:function(){return Object(j.a)(this.state.videoId)}},{key:"onSampleSourceChange",value:function(e){this.state.sampleSource="youtube"===e?W:"VINYL",this.setState(this.state)}},{key:"loadVideo",value:function(e){this.onVideoIdChanged(e.videoId)}},{key:"selectSound",value:function(e){var t=this.state.selectedSoundIds.indexOf(e);t>-1?this.state.selectedSoundIds.splice(t,1):this.state.selectedSoundIds.push(e),1===this.state.selectedSoundIds.length&&t<0&&window.dispatchEvent(new Event("sound_selected")),this.setState({selectedSoundIds:this.state.selectedSoundIds,tagMode:!0})}},{key:"startTagging",value:function(){this.state.tagMode=!0,this.setState(this.state)}},{key:"backToSearch",value:function(){this.state.tagMode=!1,this.setState(this.state)}},{key:"onClickSequence",value:function(e){var t=this.state.selectedSoundIds.join(",");this.props.history.push("/sequencerSounds/"+t)}},{key:"onClickRandomVideo",value:function(){var e=this.ethereumCache.index.YOUTUBE.YOUTUBE,t=e[Math.floor(e.length*Math.random())].dimension;this.loadVideo({videoId:t})}},{key:"syncToEthereum",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a,n,o,r,i,c,u,l,d,h,p,f,v=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=[],n=[],e.t0=s.a.keys(this.state.hashToSoundId);case 4:if((e.t1=e.t0()).done){e.next=26;break}for(o=e.t1.value,a.push(this.state.hashToSoundId[o]),r=this.state.soundIdToTags[this.state.hashToSoundId[o]],(i=this.state.hashToStyles[o]).length>4&&(i=i.slice(0,4)),c=i.length;c<4;c++)i.push("");for(r.length>4&&(r=r.slice(0,4)),u=r.length;u<4;u++)r.push("");if(l=o,!this.props.selectedGuild){e.next=23;break}return e.next=17,g.a.getSound(o);case 17:return d=e.sent,e.next=20,this.encryptedIpfs.addSound(d,y.a,this.props.selectedGuild.guildId,this.contentKey);case 20:l=e.sent,console.log("hash to save = "),console.log(l);case 23:n.push({ipfsHash:l,title:this.state.hashToVideoTitle[o],videoId:this.state.hashToVideoId[o],tags:r,styles:i,country:this.state.hashToCountry[o],year:this.state.hashToYear[o],coverArt:this.state.hashToCoverArt[o],discogsId:this.state.hashToDiscogsId[o]}),e.next=4;break;case 26:return 0!==(h=this.props.selectedGuild?this.props.selectedGuild.guildId:0)?L.a.newEncryptedSamples(n,h,this.contentKey):L.a.newSamplesWithMetadata(n,0),e.next=30,Promise.all(t);case 30:for(p in e.sent,this.state.soundIdToHash)f=this.state.soundIdToHash[p],delete this.state.hashToVideoTitle[f],delete this.state.hashToVideoId[f],delete this.state.hashToVideoId[f],delete this.state.hashToStyles[f],delete this.state.hashToYear[f],delete this.state.hashToCountry[f],delete this.state.hashToSoundId[f];a.forEach(function(e){return delete v.state.soundIdToHash[e]}),this.setState({soundIds:[],syncedToEthereum:!0});case 34:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addTag",value:function(e){for(var t in this.state.selectedSoundIds){var a=this.state.selectedSoundIds[t];a in this.state.soundIdToTags?this.state.soundIdToTags[a].push(e):this.state.soundIdToTags[a]=[e]}this.setState(this.state)}},{key:"deleteSound",value:function(e){var t=this.state.soundIdToHash[e];delete this.state.hashToVideoTitle[t],delete this.state.hashToVideoId[t],delete this.state.hashToVideoId[t],delete this.state.hashToStyles[t],delete this.state.hashToYear[t],delete this.state.hashToCountry[t],delete this.state.hashToSoundId[t],delete this.state.soundIdToHash[e];var a=this.state.soundIds.indexOf(e);this.state.soundIds.splice(a,1),this.setState(this.state)}},{key:"deleteTag",value:function(e,t){var a=this.state.soundIdToTags[e].indexOf(t);this.state.soundIdToTags[e].splice(a,1),this.setState({soundIdToTags:this.state.soundIdToTags})}},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:"discover-full-view"},f.a.createElement(v.a,{crypto:L.a.crypto,show:!0}),f.a.createElement(b.a,{show:this.props.showLogin}),f.a.createElement(O.a,{view:"DISCOVER",store:this.props.store}),f.a.createElement("div",{className:"discover-view"},f.a.createElement("div",{className:"clear-fix"}),f.a.createElement("div",{className:"float-left"},f.a.createElement("div",{className:"discover-toolbar"},f.a.createElement(T.a,{store:this.props.store}),f.a.createElement(w.a,{condition:!this.state.syncedToEthereum&&this.state.soundIds.length>0},f.a.createElement("div",{onClick:function(){return e.syncToEthereum()},className:"pink-button common-button"},"SAVE ",this.state.soundIds.length," SOUNDS")),f.a.createElement(m.a,null),f.a.createElement(E.a,{deviceId:this.state.deviceId,onChooseAudio:function(t,a){return e.onChooseAudio(t,a)},onSampleSourceChange:function(t){return e.onSampleSourceChange(t)}})),f.a.createElement("div",{className:"youtube-pane"},f.a.createElement(G,{onCoverDownloaded:function(t,a){return e.onCoverArtDownloaded(t,a)},stream:this.state.stream,styles:this.state.styles,year:this.state.year,country:this.state.country,videoId:this.state.videoId,onClickTag:function(){return e.startTagging()},onSoundUploaded:function(t,a){return e.onSoundUploaded(t,a)},sampleSource:this.state.sampleSource,onClickRandomVideo:function(){return e.onClickRandomVideo()},playOutputRecording:"VINYL"===this.state.sampleSource}),f.a.createElement(w.a,{condition:this.state.soundIds.length>0},f.a.createElement("div",{className:"sampled-sounds-container"},this.state.soundIds.map(function(t){return f.a.createElement(_.a,{encryptedIpfs:e.encryptedIpfs,key:t,onDelete:function(){return e.deleteSound(t)},tags:e.state.soundIdToTags[t],isSelected:e.state.selectedSoundIds.indexOf(t)>-1,onClickThumbnail:function(){return e.selectSound(t)},onDeleteTag:function(a){return e.deleteTag(t,a)},onClickTag:function(){return e.tagSound(t)},coverArt:e.state.hashToCoverArt[t],videoId:e.state.hashToVideoId[e.state.soundIdToHash[t]],store:e.props.store,title:e.state.hashToVideoTitle[e.state.soundIdToHash[t]],soundId:e.state.soundIdToHash[t]})}))))),f.a.createElement("div",{className:"description-pane"},this.state.tagMode?f.a.createElement(q.a,{soundIdToHash:this.state.soundIdToHash,onClickBack:function(){return e.backToSearch()},onUpdateTags:function(t){return e.addTag(t)},selectedSoundIds:this.state.selectedSoundIds}):f.a.createElement(x.a,{store:this.props.store,videoId:this.state.videoId,onClickResult:function(t){return e.loadVideo(t)}}))))}}]),a}(p.Component);t.default=Object(C.b)(function(e){return{selectedRecord:e.discover.selectedRecord,selectedGuild:e.guilds.selectedGuild,showLogin:e.sequencer.showLogin}},null)(Q)}}]);
//# sourceMappingURL=11.6c4a0344.chunk.js.map