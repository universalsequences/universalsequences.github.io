{"version":3,"sources":["components/discover/getYoutubeTitle.js","discogs/Discogs.js","components/UniversalNavigator.js","components/discover/GenericSearcher.js","components/SampledSound.js","components/discover/YoutubeResultView.js","components/discover/YoutubeSearcher.js","components/discover/SampleSource.js","components/SoundTagger.js","components/discover/RecordLabels.js","components/discover/YoutubeThumbnail.js","components/discover/DiscogsSearchResult.js","components/discover/DiscogsThumbnail.js","components/discover/LabelRelease.js","components/discover/DiscogsView.js","components/discover/RecordLabelsView.js","components/discover/InternetNavigatorPane.js","decentralized/chords/NoteSequencePublisher.js","components/discover/YoutubeSampler.js","components/discover/constants.js","search/SoundsTags.js","components/discover/Discover.js"],"names":["apiKey","getYoutubeTitle","videoId","Promise","_ref","Object","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","resolve","reject","data","wrap","_context","prev","next","axios","get","undefined","sent","items","snippet","title","stop","_x","_x2","apply","this","arguments","apiToken","require","Discogs","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","titleToLabels","nameToLabelInfo","nameToLabel","idToReleases","_this","searchYoutubeTitle","then","result","label","map","getLabelInfo","ret","labelData","id","name","images","uri","push","length","catch","err","discogsId","url","results","recordName","console","log","split","join","labelName","callback","_this2","query","searchLabel","labelId","page","_this3","youtubeTitle","searchObject","string","partsCallback","artist","credits","escapeRegExp","str","replace","baddies","forEach","token","trim","toUpperCase","toLowerCase","parts","i","indexOf","splice","baddy","RegExp","creditMap","credit","keys","parseTitleString","earliestResult","year","includes","UniversalNavigator","window","location","props","view","samplerClassName","exploreClassName","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","className","components_modals_LoginModal_js__WEBPACK_IMPORTED_MODULE_9__","show","showLogin","onClick","onClickLogo","onClickSequencer","onClickExplore","onClickSampler","components_toolbar_TransactionsView__WEBPACK_IMPORTED_MODULE_8__","store","components_guilds_GuildsMenu_js__WEBPACK_IMPORTED_MODULE_7__","Component","connect","state","sequencer","GenericSearcher","e","key","onSearch","reactstrap__WEBPACK_IMPORTED_MODULE_6__","onChange","event","target","value","searchTerms","onKeyPress","placeholder","placeHolder","addonType","color","audioCtx","AudioContext","webkitAudioContext","SampledSound","_super","call","soundId","audioUnit","AudioUnit","loadBuffer","bind","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__","handleLoadBuffer","nextProps","sample","Sample","encryptedIpfs","getId","fetchAudio","setBuffer","audioBuffer","buffer","setState","self","react__WEBPACK_IMPORTED_MODULE_6___default","isSelected","components_Waveform_js__WEBPACK_IMPORTED_MODULE_8__","selections","onClickSelection","height","width","onSelection","start","end","waveformId","components_Youtube_js__WEBPACK_IMPORTED_MODULE_11__","onClickThumbnail","coverArt","isMuted","onNewSound","onDelete","tags","tag","reactstrap__WEBPACK_IMPORTED_MODULE_12__","onDeleteTag","YoutubeResultView","classCallCheck","react_default","src","getYoutubeThumbnail","YOUTUBE","YoutubeSearcher","searchResults","mode","nextPageToken","prevPageToken","previous","relatedMode","labelMode","inspirationalWords","addListeners","searchYoutube","pageToken","item","YoutubeResult","setYoutubeSearchTerms","addEventListener","getRelatedResults","ethereumCache","index","TAG","Math","floor","random","values","clearResults","discover_YoutubeResultView","onClickResult","discover","youtubeSearchTerms","dispatch","s","SampleSource","type","onSampleSourceChange","checked","handleOptionChange","components_AudioInputChooser_js__WEBPACK_IMPORTED_MODULE_5__","defaultInput","deviceId","onChooseAudio","x","SoundTagger","_tag","addListener","input","document","activeElement","focus","onUpdateTags","addTag","react__WEBPACK_IMPORTED_MODULE_7___default","soundUploadMode","onClickBack","reactstrap__WEBPACK_IMPORTED_MODULE_8__","ref","autoFocus","onInputType","RecordLabels","labels","RecordLabels_RecordLabel","onClickLabel","RecordLabel","_super2","thumbnail","YoutubeThumbnail","updateName","open","release","regenerator_default","loadVideo","onClickVideo","ConditionedComponent","condition","onClickBuy","DiscogsSearchResult","selectedRecord","setSelectedRecord","thumb","style","reactstrap_es","record","DiscogsThumbnail","selectedLabel","LabelRelease","stopPropagation","DiscogsView","showSearchResults","discogs","text","searchRecords","v","onChangeSearch","discover_DiscogsSearchResult","selectRecord","RecordLabelsView","labelReleases","recordLabels","history","releasesPage","oldVideoId","goneBack","selectedRelease","isLoadingDiscogs","getRecordLabels","toConsumableArray","pop","some","equals","concat","HistoryItem","filter","_this4","updateHistory","getLabel","getLabelReleases","newHistory","releases","showLabelReleases","_this5","getLabels","_this6","discover_YoutubeThumbnail","discover_DiscogsThumbnail","onClickPreviousReleases","onClickNextReleases","PulseLoader_default","sizeUnit","size","loading","discover_RecordLabels","discover_LabelRelease","searchForRelease","JSON","stringify","EthereumCache","EthereumSoundsSearcher","InternetNavigatorPane","sequencerEngine","opt","dispatchEvent","Event","searchString","youtubeClass","discogsClass","recordLabelsClass","onClickOption","discover_DiscogsView","discover_RecordLabelsView","NoteSequencesContract","YoutubeSampler","sampling","dropdownOpen","recordingSetup","startTime","endTime","stream","assertThisInitialized","soundUploader","SoundUploader","ipfsHash","onSoundUploaded","setupRecording","playOutputRecording","audioContext","destination","disconnect","startUserMedia","createMediaStreamSource","channelCount","recorder","Recorder","numChannels","bufferLen","navigator","getUserMedia","webkitGetUserMedia","URL","webkitURL","Tone","Master","context","StartAudioContext","youtubePlayer","getCurrentTime","currentTime","setTimeout","getBuffer","blob","saveBuffer","thumbnailUrl","uploadBufferToIpfs","responseType","ipfs","addBlob","coverHash","onCoverDownloaded","clear","preventDefault","seekTo","qualities","getAvailableQualityLevels","setPlaybackQuality","styles","country","yeaer","sampleSource","index_esm","opts","playerVars","autoplay","onStateChange","checkQuality","onReady","_onReady","cover_image","onClickSampleButton","rewind","fastForward","onClickTag","isOpen","toggle","toggleDropdown","getRelatedVideos","caret","onClickRandomVideo","React","SoundsTags","post","Discover","_this$state","ethereum","accounts","setStore","setEthereum","checkLogin","guilds","initGuilds","soundIds","selectedSoundIds","soundIdToHash","hashToSoundId","tagMode","soundIdToTags","hashToStyles","defineProperty","onVideoIdChanged","soundsTags","crypto","contentKey","ContentKey","EncryptedIpfs","encryption","sampleHash","hashToCoverArt","objectSpread","returnValue","syncedToEthereum","hashToVideoTitle","hashToCountry","hashToYear","hashToDiscogsId","hashToVideoId","loadDiscogsResults","minYear","min","videos","randomVideo","dimension","_callee2","promises","samples","hash","_i","hashToSave","sound","guildId","_hash","_context2","t0","t1","done","slice","selectedGuild","getSound","addSound","GUILD","newEncryptedSamples","newSamplesWithMetadata","all","PasswordModal","LoginModal","GuildsMenu","syncToEthereum","TransactionsView","discover_YoutubeSampler","onCoverArtDownloaded","startTagging","deleteSound","selectSound","deleteTag","tagSound","backToSearch"],"mappings":"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","file":"static/js/11.525bd846.chunk.js","sourcesContent":["import axios from 'axios';\nconst apiKey = \"AIzaSyCf2k8RM7tFFlVGo4CVPvCsOhx86vWwTT0\";\n\nexport function getYoutubeTitle(videoId) {\n    return new Promise(async (resolve, reject) => {\n        let data = await axios.get(\n            \"https://www.googleapis.com/youtube/v3/videos?id=\" +\n                videoId + \"&key=\"+ apiKey + \"&fields=items(snippet(title))&part=snippet\");\n        if (data.data.items[0] !== undefined) {\n            resolve(data.data.items[0].snippet.title);\n        } else {\n            resolve('Title not found');\n        }\n    });\n}\n\n","var apiToken = 'CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo';\nvar axios = require('axios');\n\nclass Discogs {\n\n    constructor() {\n        this.titleToLabels = {};\n        this.nameToLabelInfo = {};\n        this.nameToLabel = {};\n        this.idToReleases = {};\n    }\n\n    getLabels(title) {\n        return new Promise((resolve, reject) => {\n            if (this.titleToLabels[title] !== undefined) {\n                resolve(this.titleToLabels[title]);\n                return;\n            }\n\n            this.searchYoutubeTitle(title)\n                .then((result) => {\n                // get all the labels\n                var data = [];\n                if (result === null || result.label === undefined) {\n                    resolve(data);\n                }\n                result.label.map((label) => this.getLabelInfo(label, (ret) => {\n                    if (ret === null) {\n                        resolve(data);\n                        return;\n                    }\n                    var labelData = {\n                        id: ret.id,\n                        name: ret.name};\n                    if ('images' in ret) {\n                        labelData['thumbnail'] = ret.images[0].uri;\n                    }\n                    data.push(labelData);\n\n                    this.titleToLabels[title] = data;\n                    if (data.length == result.label.length) {\n                        resolve(data);\n                    } else {\n                    }\n                }));\n                })\n                .catch(err => {\n                    reject(err);\n                });\n        });\n    }\n\n    getReleaseInfo(discogsId) {\n        return new Promise((resolve, reject) => {\n            var url = 'https://api.discogs.com/releases/' + discogsId;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data !== undefined) {\n                    var results = ret.data;\n                    resolve(results);\n                } else {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n\n    searchRecords(recordName) {\n        return new Promise((resolve, reject) => {\n            console.log(\"searchinng name=\", recordName);\n            let query = recordName.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&type=release&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var results = ret.data.results;\n                    resolve(results);\n                } else {\n                    resolve([]);\n                }\n            });\n        });\n    }\n\n    searchLabel(labelName, callback) {\n        if (this.nameToLabel[labelName] !== undefined) {\n            return callback(this.nameToLabel[labelName]);\n        }\n        var query = labelName;\n        query = query.split(/\\s/g).join('+');\n        var url = 'https://api.discogs.com/database/search?q=' + query + '&type=label&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var result = ret.data.results[0];\n                    this.nameToLabel[labelName] = result;\n                    callback(result);\n                }\n            });\n\n    }\n\n    getLabelInfo(labelName, callback) {\n        this.searchLabel(labelName, function (result) {\n            var labelId = result.id\n            var url = 'https://api.discogs.com/labels/' + labelId + '?token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    callback(ret.data);\n                })\n                .catch(function (err) {\n                    callback(null);\n                });\n        });\n            \n    }\n\n    getLabelReleases(labelId, page) {\n        return new Promise((resolve, reject) => {\n            if (this.idToReleases[labelId + '_' + page] !== undefined) {\n                resolve(this.idToReleases[labelId + '_' + page]);\n                return;\n            }\n            var url = 'https://api.discogs.com/labels/' + labelId +\n            '/releases?token=' + apiToken + '&page=' + page + '&per_page=8';\n            axios.get(url)\n                .then((ret) => {\n                    this.idToReleases[labelId + '_' + page] = ret.data;\n                    resolve(ret.data);\n                })\n                .catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n    searchYoutubeTitle(youtubeTitle) {\n        return new Promise((resolve, reject) => {\n            var searchObject = parseTitleString(youtubeTitle);\n            var query = searchObject.artist + ' - ' + searchObject.title;\n            query = query.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    var results = ret.data.results;\n                    var earliestResult = null;\n                    for (var i in results) {\n                        if ((earliestResult == null ||\n                             (results[i].year < earliestResult.year)) && \n                            results[i].title.includes(searchObject.title))\n                        {\n                            earliestResult = results[i];\n                        }\n                    }\n                    if (earliestResult == null) {\n                        // get the first result\n                        for (var i in results) {\n                            return resolve(results[i]);\n                        }\n                    }\n                    resolve(earliestResult);\n                })\n                .catch(function (err) {\n                    reject(err);\n                });;\n        });\n    }\n}\n\n// TODO: provide an array of potential separators\n// var SEPARATORS = [' - ', '  ', ' -- ']\n// note that these can have spaces, but sometimes do not\n// TODO: output a testing dataset for changes to this function.\n\nvar TRACK_SEPARATOR = ' - ';\nfunction parseTitleString(string, partsCallback) {\n  var artist, title, credits = [];\n  var string = string || '';\n\n  function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n  }\n\n  // TODO: load from datafile\n    var baddies = ['Full Album', 'Full vinyl', 'LP', '[dubstep]', '(full album)', '[electro]', '[edm]', '[house music]',\n    '[glitch hop]', '[video]', '[official video]', '(official video)',\n    '(official music video)', '(lyrics)',\n    '[ official video ]', '[official music video]', '[free download]',\n    '[free dl]', '( 1080p )', '(with lyrics)', '(high res / official video)',\n    '(music video)', '[music video]', '[hd]', '(hd)', '[hq]', '(hq)',\n    '(original mix)', '[original mix]', '[lyrics]', '[free]', '[trap]',\n    '[monstercat release]', '[monstercat freebie]', '[monstercat]',\n    '[edm.com premeire]', '[edm.com exclusive]', '[enm release]',\n    '[free download!]', '[monstercat free release]'];\n  baddies.forEach(function(token) {\n    string = string.replace(token + ' - ', '').trim();\n    string = string.replace(token.toUpperCase() + ' - ', '').trim();\n    string = string.replace(token.toLowerCase() + ' - ', '').trim();\n\n    string = string.replace(token, '').trim();\n    string = string.replace(token.toUpperCase(), '').trim();\n    string = string.replace(token.toLowerCase(), '').trim();\n  });\n\n    string = string.replace(/ *\\([^)]*\\) */g, '').trim();\n    string = string.replace(/ *\\[[^)]*\\] */g, '').trim();\n\n\n  var parts = string.split( ' - ' );\n\n  for (var i = 0; i < parts.length; i++) {\n    if ( baddies.indexOf( parts[i].toLowerCase() ) >= 0 ) {\n      parts.splice( i , 1 );\n    }\n  }\n\n  if (parts.length == 2) {\n    artist = parts[0];\n    title = parts[1];\n  } else if (parts.length > 2) {\n    // uh...\n    artist = parts[0];\n    title = parts[1];\n  } else {\n    artist = parts[0];\n    title = parts[0];\n  }\n\n\n  // one last pass\n  baddies.forEach(function(baddy) {\n    title  = title.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n    artist = artist.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n  });\n\n  // look for certain patterns in the string\n  credits.push(  title.replace(/(.*)\\((.*) remix\\)/i,       '$2').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push(  title.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push( artist.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$1').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$2').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$1').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$2').trim() );\n\n  var creditMap = {};\n  credits.forEach(function(credit) {\n    if (credit !== title) { // temp., until we find out why title is in credits\n      creditMap[ credit ] = credit;\n    }\n  });\n\n  var output = {\n      artist: artist\n    , title: title\n    , credits: Object.keys(creditMap)\n  };\n\n    return output;\n}\n\nexport default Discogs;\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport GuildsMenu from 'components/guilds/GuildsMenu.js';\nimport TransactionsView from 'components/toolbar/TransactionsView';\nimport LoginModal from 'components/modals/LoginModal.js';\nimport '../navigator.scss';\n\nclass UniversalNavigator extends Component {\n    onClickSequencer() {\n        window.location = '/create/';\n    }\n\n    onClickSampler() {\n        if (this.props.view !== 'DISCOVER') {\n            window.location = '/discover/';\n        }\n    }\n\n    onClickExplore() {\n        if (this.props.view !== 'EXPLORE') {\n            window.location = '/explore/';\n        }\n    }\n\n    onClickLogo() {\n        window.location = '/';\n    }\n\n    render() {\n        let view = this.props.view || '';\n        let samplerClassName = view === 'DISCOVER' ? 'navigator-button selected' : 'navigator-button';\n        let exploreClassName = view === 'EXPLORE' ? 'navigator-button selected' : 'navigator-button';\n        return (\n            <div className=\"navigator\">\n              <LoginModal show={this.props.showLogin}/>\n              <div onClick={()=>this.onClickLogo()} className={\"universal-sequences-logo \" + view}>\n                ZEQUENCER\n              </div>\n              <div onClick={() => this.onClickSequencer()} className=\"navigator-button\">\n                CREATE\n              </div>\n              <div onClick={() => this.onClickExplore()} className={exploreClassName}>\n                EXPLORE\n              </div>\n              <div onClick={() => this.onClickSampler()} className={samplerClassName}>\n                SAMPLE \n              </div>\n              <div className=\"guilds-menu-container\">\n                <TransactionsView store={this.props.store}/>\n                <GuildsMenu store={this.props.store}/>\n              </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        showLogin: state.sequencer.showLogin,\n    }\n};\n\nexport default connect(mapStateToProps, null)(UniversalNavigator);\n","import React, { Component } from 'react';\nimport { Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\n\nclass GenericSearcher extends Component {\n    onKeyPress(e) {\n        if (e.key === 'Enter') {\n            this.props.onSearch();\n        }\n    }\n\n    render() {\n        return (\n            <div>\n              <InputGroup>\n                <Input onChange={(event) => this.props.onChange(event.target.value)}\n                       value={this.props.searchTerms}\n                       onKeyPress={(e) => this.onKeyPress(e)}\n                       id=\"search-input\"\n                  placeholder={this.props.placeHolder} className=\"tag-input\"/>\n                  <InputGroupAddon addonType=\"append\">\n                    <Button onClick={() => this.props.onSearch()} color=\"secondary\">Search</Button>\n                  </InputGroupAddon>\n              </InputGroup>\n            </div>\n        );\n    }\n}\n\nexport default GenericSearcher;\n","/*\n    This file is part of Universal Sequencer.\n    Universal Sequencer is free software: you can redistribute it and/or modif\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Universal Sequencer is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport React, { Component } from 'react';\nimport Sample from 'repos/Sample.js';\nimport Waveform from 'components/Waveform.js';\nimport { withRouter } from 'react-router';\nimport Tone from 'tone';\nimport axios from 'axios';\nimport YoutubeInfo from 'components/Youtube.js';\nimport { Badge, Card, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport AudioUnit from 'engine/audio.js';\nimport createHistory from \"history/createBrowserHistory\"\n\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar audioCtx = new AudioContext();\n\nclass SampledSound extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            soundId: props.soundId,\n        };\n        this.audioUnit = new AudioUnit(audioCtx);\n        this.loadBuffer.bind(this);\n        this.handleLoadBuffer.bind(this);\n        this.loadBuffer();\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.soundId !== this.state.soundId) {\n            this.state.soundId = nextProps.soundId;\n            this.loadBuffer();\n        }\n\n        return true;\n    }\n    \n    loadBuffer() {\n        var self = this;\n        console.log('loading buffer soundId = '+ this.props.soundId);\n        this.sample = new Sample(this.props.soundId, this.props.encryptedIpfs);\n        this.sample.name = this.props.title;\n        this.sample.videoId = this.props.videoId;\n        this.state.name = this.props.title;\n        this.state.videoId = this.props.videoId;\n        console.log('gonna fetch audio for id = ' + this.sample.getId());\n        this.sample.fetchAudio()\n            .then((sample) => {\n                this.audioUnit.setBuffer(sample.audioBuffer);\n                this.state.buffer = sample.audioBuffer;\n                this.setState(this.state);\n            });\n   }\n\n    handleLoadBuffer(self, buffer) {\n        var state = self.state;\n        state['buffer'] = buffer;\n        self.setState(state);\n    }\n    \n    render() {\n        var self = this;\n        if (this.state.buffer != undefined) {\n            return (\n                <div className={this.props.isSelected ? 'selected sound-row' : \"sound-row\"}>\n                    <div className=\"playlist-row\">\n                      <Waveform selections={[]}\n                                sample={this.sample}\n                                store={this.props.store}\n                                buffer={this.audioUnit.buffer}\n                                onClickSelection={(id, buffer) => []}\n                        height={70}\n                        width={350}\n                        onSelection={(start, end) => []}\n                        audioUnit={this.audioUnit}\n                        waveformId={0}></Waveform>\n                      <div className=\"youtube-info\">\n                            <YoutubeInfo onClickThumbnail={() => this.props.onClickThumbnail(this.state.soundId)}\n                              coverArt={this.props.coverArt}\n                                  sample={this.sample}\n                                  name={this.props.title}\n                                  isMuted={false}\n                                  soundId={this.state.soundId} \n                                  onNewSound={this.props.onNewSound} \n                                  videoId={this.state.videoId}>\n                        </YoutubeInfo>\n                      </div>\n                      <div\n                        onClick={this.props.onDelete}\n                        className=\"delete-button\">x</div>\n                    </div>\n                    {this.props.tags != null ? this.props.tags.map((tag) =>\n                      <Badge\n                        onClick={() => this.props.onDeleteTag(tag)}\n                        color=\"light\">{tag}</Badge>) : ''}\n                </div>\n                    );\n        } else {\n            return (<div></div>);\n        }\n    }\n}\n\nexport default SampledSound;\n","import React, { Component } from 'react';\n\nclass YoutubeResultView extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    getYoutubeThumbnail() {\n        return 'https://img.youtube.com/vi/' + this.props.result.videoId + '/1.jpg';\n    }\n\n    render() {\n        return (\n            <div onClick={this.props.onClick} className=\"youtube-result\">\n              <img className=\"youtube-result-thumbnail\" src={this.getYoutubeThumbnail()}/>\n              <div className=\"youtube-result-title\">{this.props.result.title}</div>\n            </div>\n        );\n    }\n}\n \nexport default YoutubeResultView;\n","import React, { Component } from 'react';\nimport YoutubeResultView from './YoutubeResultView.js';\nimport { Badge, Label, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport {setYoutubeSearchTerms} from 'actions/index.js';\nimport GenericSearcher from './GenericSearcher.js';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\nconst apiKey = \"AIzaSyCf2k8RM7tFFlVGo4CVPvCsOhx86vWwTT0\";\n\nconst DISCOGS = 'DISCOGS';\nconst YOUTUBE = 'YOUTUBE';\n\nclass YoutubeSearcher extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchResults: [],\n            mode: YOUTUBE,\n            nextPageToken: null,\n            prevPageToken: null,\n            next: false,\n            previous: false,\n            relatedMode: false,\n            labelMode: false,\n            inspirationalWords: [],\n        };\n\n        this.addListeners();\n    }\n\n    componentDidMount() {\n        if (this.props.searchTerms !== '') {\n            this.searchYoutube();\n        }\n    }\n\n    searchYoutube(pageToken) {\n        var self = this;\n        var token = '';\n        if (pageToken !== undefined) {\n            token = '&pageToken=' + pageToken;\n        } else {\n            // clear the tokens\n            this.state.nextPageToken = null;\n            this.state.prevPageToken = null;\n        }\n        this.state.relatedMode = false;\n        axios.get(\n            'https://www.googleapis.com/youtube/v3/search?part=snippet&' + \n                'type=video&key=' + apiKey +\n                '&maxResults=8&q=' + this.props.searchTerms + token)\n            .then(function (ret) {\n        \n                if ('nextPageToken' in ret.data) {\n                    self.state.nextPageToken = ret.data.nextPageToken;\n                }\n                if ('prevPageToken' in ret.data) {\n                    self.state.prevPageToken = ret.data.prevPageToken;\n                }\n                var results = ret.data.items.map((item) => new YoutubeResult(item.id.videoId, item.snippet.title));\n                self.state.searchResults = results;\n                self.setState(self.state);\n            });\n    }\n\n    clearResults() {\n        this.state.nextPageToken = null;\n        this.state.prevPageToken = null;\n        this.props.setYoutubeSearchTerms('');\n        this.state.searchResults = [];\n        this.setState(this.state);\n    }\n\n    onKeyPress(e) {\n        if (e.key === 'Enter') {\n            this.searchYoutube();\n        }\n    }\n\n    addListeners() {\n        window.addEventListener('get_related_videos', () => {\n            this.getRelatedResults();\n        });\n    }\n\n    getRelatedResults(pageToken) {\n        var self=this;\n        this.state.relatedMode = true;\n        var token = '';\n        if (pageToken !== undefined) {\n            token = '&pageToken=' + pageToken;\n        } else {\n            // clear the tokens\n            this.state.nextPageToken = null;\n            this.state.prevPageToken = null;\n        }\n        \n        axios.get(\n            'https://www.googleapis.com/youtube/v3/search?part=snippet&' + \n                'relatedToVideoId=' + this.props.videoId + '&' + \n                'type=video&key=' + apiKey +\n                '&maxResults=8' + token)\n            .then(function (ret) {\n                if ('nextPageToken' in ret.data) {\n                    self.state.nextPageToken = ret.data.nextPageToken;\n                }\n                \n                if ('prevPageToken' in ret.data) {\n                    self.state.prevPageToken = ret.data.prevPageToken;\n                }\n                \n                var results = ret.data.items.map((item) => new YoutubeResult(item.id.videoId, item.snippet.title));\n                self.state.searchResults = results;\n                self.setState(self.state);\n                });\n    }\n\n    onClickInspired() {\n        let tags = this.ethereumCache.index.TAG.TAG;\n\n        let tag = tags[Math.floor(Math.random() * tags.length)];\n        this.setState({inspirationalWords: tag.values});\n    }\n\n    render() {\n        return (\n            <div className=\"youtube-search-container\">\n              <GenericSearcher\n                placeHolder=\"Search youtube\"\n                onChange={this.props.setYoutubeSearchTerms}\n                searchTerms={this.props.searchTerms}\n                onSearch={() => this.searchYoutube()}/>\n              <div className=\"pagination-pane\">\n              {this.state.prevPageToken ?\n                  <div onClick={() => {this.state.relatedMode ? \n                                       this.getRelatedResults(this.state.prevPageToken) :\n                                       this.searchYoutube(this.state.prevPageToken)}}\n                     className='field-pagination-button'>Previous</div> : ''}\n              {this.state.nextPageToken ?\n                    <div onClick={() => {this.state.relatedMode ? \n                                         this.getRelatedResults(this.state.nextPageToken) :\n                                         this.searchYoutube(this.state.nextPageToken)}}\n                     className='field-pagination-button'>Next</div> : ''}\n              <div onClick={() => this.clearResults()} className=\"field-pagination-button\">Clear</div>\n              </div>\n              {this.state.searchResults.map((result) =>\n                  <YoutubeResultView onClick={() => this.props.onClickResult(result)} result={result}/>)}\n            </div>\n        );\n    }\n}\n\nclass YoutubeResult {\n    constructor(videoId, title) {\n        this.videoId = videoId;\n        this.title = title;\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setYoutubeSearchTerms: s => dispatch(setYoutubeSearchTerms(s)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        searchTerms: state.discover.youtubeSearchTerms\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(YoutubeSearcher);\n","import AudioInputChooser from 'components/AudioInputChooser.js';\nimport React, { Component } from 'react';\n\nclass SampleSource extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            type: 'youtube'\n        };\n        this.setState(this.state);\n    }\n\n    handleOptionChange(e) {\n        if (e.target.value === 'youtube') {\n            this.state.type = 'youtube';\n        } else {\n            this.state.type = 'vinyl';\n        }\n        this.props.onSampleSourceChange(this.state.type);\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div className=\"sample-source\">\n            <form>\n              <div className=\"radio\">\n                <label>\n                  <input className=\"filter-radio\"\n                         type=\"radio\"\n                         value=\"youtube\"\n                         checked={this.state.type === 'youtube'}\n                         onChange={(e) => this.handleOptionChange(e)} />\n                   Youtube \n                </label>\n                <label>\n                  <input className=\"filter-radio\"\n                         type=\"radio\"\n                         value=\"vinyl\"\n                         checked={this.state.type === 'vinyl'}\n                         onChange={(e) => this.handleOptionChange(e)} />\n                    Vinyl\n                </label>\n                <AudioInputChooser\n                  defaultInput=\"Soundflower (2ch)\"\n                  deviceId={this.props.deviceId}\n                  onChooseAudio={(x, deviceId) => this.props.onChooseAudio(x, deviceId)}/>\n              </div>\n            </form>\n        </div>);\n    }\n}\n\nexport default SampleSource;\n","import axios from 'axios';\nimport ethereum from 'decentralized/ethereum.js';\nimport React, { Component } from 'react';\nimport { Badge, Label, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\n\nclass SoundTagger extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            tags: []\n        };\n        this._tag = '';\n\n        this.addListener();\n    }\n\n    addListener() {\n        window.addEventListener('sound_selected', () => {\n            if (this.input) {\n                if (this.input !== document.activeElement) { \n                    this.input.focus();\n                }\n            }\n        });\n    }\n\n    addTag() {\n        this.state.tags.push(this._tag);\n        var self = this;\n        self.props.onUpdateTags(this._tag);\n        this._tag = '';\n        this.setState(this.state);\n    }\n\n    onInputType(value) {\n        this._tag = value;\n        this.setState(this.state);\n    }\n\n    onKeyPress(e) {\n        if (e.key === 'Enter') {\n            this.addTag();\n        }\n    }\n\n    render() {\n        return (<div className=\"tag-editor\">\n                {this.props.soundUploadMode ? '' : <div onClick={this.props.onClickBack} className=\"light-blue-button common-button\">Back to search</div>}\n                <div className=\"tags\">\n                   <InputGroup>\n                <div>\n                <input\n                type=\"text\"\n                ref={(input) => this.input = input}\n                autoFocus onKeyPress={(e) => this.onKeyPress(e)} value={this._tag} id=\"search-input\" onChange={(event) => this.onInputType(event.target.value)} placeholder=\"Enter tag name\" className=\"tag-discover-input\"/>\n                </div>\n                        <InputGroupAddon addonType=\"append\">\n                        <Button onClick={() => this.addTag()} color=\"secondary\">Tag</Button>\n                        </InputGroupAddon>\n                        </InputGroup>\n                </div>\n                </div>);\n    \n    }\n}\n\nexport default SoundTagger;\n","import React, { Component } from 'react';\n\nclass RecordLabels extends Component {\n    render() {\n        return (\n            <div className=\"record-labels\">\n              <div className=\"record-labels-subheader\">\n                Record Labels\n              </div>\n              {this.props.labels.length == 0 ? 'No labels found...' : ''}\n              {this.props.labels.map((label) =>\n              <RecordLabel label={label} onClick={() => this.props.onClickLabel(label.id)}> </RecordLabel>)} \n            </div>\n        );\n    }\n}\n\nclass RecordLabel extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div onClick={this.props.onClick} className=\"youtube-result discogs-result\">\n              <div className=\"floating-thumbnail\">\n                <img className=\"youtube-result-thumbnail\" src={this.props.label.thumbnail}/>\n              </div>\n              <div className=\"youtube-result-title\">{this.props.label.name}</div>\n            </div>);\n    }\n}\n\n\nexport default RecordLabels;\n","import React, { Component } from 'react';\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\n\nclass YoutubeThumbnail extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            videoId: this.props.videoId,\n            name: '',\n        };\n\n        this.updateName(this.props.videoId);\n    }\n\n    onClickBuy() {\n        window.open(\"https://www.discogs.com/sell/release/\" + this.props.release.id, \"_blank\");\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.videoId !== this.state.videoId) {\n            this.updateName(nextProps.videoId);\n        }\n\n        this.state.videoId = nextProps.videoId;\n\n        return true;\n    }\n\n    async updateName(videoId) {\n        let name = await getYoutubeTitle(videoId);\n        this.setState({\n            name: name\n        });\n    }\n\n    getYoutubeThumbnail() {\n        return 'https://img.youtube.com/vi/' + this.props.videoId + '/1.jpg';\n    }\n\n    onClickVideo() {\n        this.props.loadVideo({videoId: this.props.videoId});\n    }\n\n    render() {\n        return (\n            <div className=\"youtube-discogs-container\">\n              <img\n                onClick={() => this.onClickVideo()}\n                className=\"youtube-thumbnail\" src={this.getYoutubeThumbnail()}/>\n              <div className=\"discogs-youtube-name\">\n                {this.state.name}\n              </div>\n              <ConditionedComponent condition={this.props.release !== undefined}>\n                <div\n                  onClick={(e) => this.onClickBuy(e)}\n                  className=\"discogs-result-url\">\n                  Buy Vinyl\n                </div>\n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nexport default YoutubeThumbnail;\n","import React, { Component } from 'react';\nimport { Badge } from 'reactstrap';\nimport { connect } from \"react-redux\";\nimport {setSelectedRecord} from 'actions/index.js';\n\nclass DiscogsSearchResult extends Component {\n    render() {\n        let id= '';\n        if (this.props.result === this.props.selectedRecord) {\n            id = 'selected-record';\n        }\n        return (\n            <div\n              onClick={() => this.props.setSelectedRecord(this.props.result)}\n              className=\"discogs-result record\">\n              <img\n                id={id}\n                className=\"discogs-thumbnail\" src={this.props.result.thumb}/>\n              <div className=\"record-info\">\n                <div className=\"title\">\n                  {this.props.result.title}\n                </div>\n                <div className=\"year\">\n                  {this.props.result.year}\n                </div>\n                <div className=\"styles\">\n                  {this.props.result.style.map(style => <Badge> {style} </Badge>)}\n                </div>\n              </div>\n            </div>\n        );\n    }\n}\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedRecord: record => dispatch(setSelectedRecord(record)),\n    };\n};\n \nconst mapStateToProps = state => {\n    return {\n        selectedRecord: state.discover.selectedRecord,\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DiscogsSearchResult);\n","import React, { Component } from 'react';\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\n\nclass DiscogsThumbnail extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n        };\n    }\n\n    getYoutubeThumbnail() {\n        return 'https://img.youtube.com/vi/' + this.props.videoId + '/1.jpg';\n    }\n\n    render() {\n        let label = this.props.selectedLabel;\n        if (label === undefined) {\n            return (\n                <div></div>\n            );\n        }\n        return (\n            <div className=\"youtube-discogs-container\">\n              <img className=\"youtube-thumbnail\" src={label.thumbnail}/>\n              <div className=\"discogs-youtube-name\">\n                {label.name}\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default DiscogsThumbnail;\n","import React, { Component } from 'react';\n\nclass LabelRelease extends Component {\n    onClickBuy(e) {\n        e.stopPropagation();\n        window.open(\"https://www.discogs.com/sell/release/\" + this.props.release.id, \"_blank\");\n        return false;\n    }\n    \n    render() {\n        return (\n            <div onClick={this.props.onClick} className=\"youtube-result discogs-result\">\n              {this.props.release.thumb !== '' ? <img className=\"youtube-result-thumbnail\" src={this.props.release.thumb}/> : ''}\n              <div className=\"discogs-result-title\">{this.props.release.artist} - {this.props.release.title} ({this.props.release.year})</div>\n\n              <div\n                onClick={(e) => this.onClickBuy(e)}\n                className=\"discogs-result-url\">\n                Buy Vinyl\n              </div>\n            </div>);\n    }\n}\n \nexport default LabelRelease;\n","import React, { Component } from 'react';\nimport RecordLabels from './RecordLabels.js';\nimport YoutubeThumbnail from './YoutubeThumbnail.js';\nimport GenericSearcher from './GenericSearcher.js';\nimport DiscogsSearchResult from './DiscogsSearchResult.js';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport DiscogsThumbnail from './DiscogsThumbnail.js';\nimport LabelRelease from './LabelRelease.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\nimport Discogs from 'discogs/Discogs.js';\n\nclass DiscogsView extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchTerms:'',\n            showSearchResults: false,\n            searchResults: [],\n        };\n        this.discogs = new Discogs();\n    }\n\n    onChangeSearch(text) {\n        this.setState({\n            searchTerms: text\n        });\n    }\n\n    async onSearch() {\n        let results = await this.discogs.searchRecords(\n            this.state.searchTerms);\n\n        this.setState({\n            showSearchResults: true,\n            searchResults: results});\n    }\n\n    render() {\n        if (!this.props.show) {\n            return (\n                <div></div>\n            );\n        }\n\n        return (\n            <div>\n              <GenericSearcher\n                onChange={(v) => this.onChangeSearch(v)}\n                onSearch={() => this.onSearch()}\n                placeHolder=\"Type record name\"\n                searchTerms={this.state.searchTerms}>\n              </GenericSearcher>\n              <div className=\"search-results\">\n                {this.state.searchResults.map(\n                    result =>\n                        <DiscogsSearchResult\n                              result={result}\n                              onClick={() => this.selectRecord(result)}/>\n                )}\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default DiscogsView;\n","import React, { Component } from 'react';\nimport RecordLabels from './RecordLabels.js';\nimport YoutubeThumbnail from './YoutubeThumbnail.js';\nimport GenericSearcher from './GenericSearcher.js';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport DiscogsThumbnail from './DiscogsThumbnail.js';\nimport LabelRelease from './LabelRelease.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\nimport Discogs from 'discogs/Discogs.js';\n\nclass RecordLabelsView extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            labelReleases: [],\n            searchTerms:'',\n            recordLabels: [],\n            history: [],\n            releasesPage:1,\n            selectedLabel: undefined,\n            oldVideoId: props.videoId,\n            goneBack: false,\n            selectedRelease: undefined,\n            isLoadingDiscogs: false,\n        };\n        this.discogs = new Discogs();\n        this.addListeners();\n        this.getRecordLabels();\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.videoId !== this.state.videoId) {\n            this.state.videoId = nextProps.videoId;\n        } \n\n        return true;\n    }\n\n    addListeners() {\n        window.addEventListener('get_record_labels', () => {\n            this.getRecordLabels();\n        });\n    }\n\n    onClickBack() {\n        let history = [...this.state.history];\n        let item = history.pop();\n        if (!this.state.goneBack) {\n            item = history.pop();\n            this.state.goneBack = true;\n        }\n\n        this.state.history = history;\n\n        if (item.labelReleases !== undefined && item.labelReleases.length > 0) {\n            this.setState({\n                labelReleases: item.labelReleases,\n                recordLabels: [],\n            });\n        } else {\n            this.setState({\n                labelReleases: [],\n                recordLabels: item.recordLabels,\n            });\n        } \n\n        if (item.videoId !== undefined) {\n            this.setState({\n                videoId: item.videoId\n            });\n        }\n\n        if (item.selectedLabel !== undefined) {\n            this.setState({\n                selectedLabel: item.selectedLabel,\n            });\n        }\n\n    }\n\n    newHistory(videoId=this.state.videoId) {\n        if (this.state.recordLabels.length === 0 &&\n            this.state.labelReleases.length === 0) {\n            return;\n        }\n\n        // don't add the same history we've already done\n        if (this.state.history.some(history => history.equals(this.state))) {\n            return;\n        }\n\n        let history = [...this.state.history]\n            .concat([new HistoryItem(\n                this.state.recordLabels,\n                this.state.labelReleases,\n                videoId,\n                this.state.selectedLabel)]);\n\n        this.setState({history: history, goneBack: false});\n    }\n\n    getLabel(id) {\n        return this.state.recordLabels.filter(x => x.id === id)[0];\n\n    }\n\n    showLabelReleases(id, updateHistory=false) {\n        var self = this;\n        if (this.state.selectedLabel === undefined ||\n            this.state.selectedLabel.id !== id) {\n            this.state.selectedLabel = this.getLabel(id);\n        }\n        this.setState({isLoadingDiscogs: true});\n        this.discogs.getLabelReleases(id, this.state.releasesPage)\n            .then(ret => {\n                this.setState({isLoadingDiscogs: false});\n                if (updateHistory) {\n                    this.newHistory();\n                }\n                this.state.recordLabels = [];\n                this.state.labelReleases = ret.releases;\n                if (updateHistory) {\n                    this.newHistory();\n                }\n                this.setState(this.state);\n            });\n    }\n\n    onClickNextReleases() {\n        this.state.releasesPage++;\n        this.setState(this.state);\n        this.showLabelReleases(this.state.selectedLabel.id);\n    }\n\n    onClickPreviousReleases() {\n        this.state.releasesPage--;\n        this.setState(this.state);\n        this.showLabelReleases(this.state.selectedLabel.id);\n    }\n\n    searchForRelease(release) {\n        this.setState({selectedRelease: release});\n        this.props.searchYoutube(release.artist + ' - ' + release.title);\n    }\n\n    onClickLabel(id) {\n        this.setState({releasesPage: 1});\n        this.showLabelReleases(id, true);\n    }\n\n    getRecordLabels(videoId=this.props.videoId, oldVideoId=this.state.videoId) {\n        this.state.labelMode = true;\n        this.state.labelReleases = [];\n        this.state.searchResults = [];\n        this.state.releasesPage = 1;\n        var self = this;\n\n        this.setState({isLoadingDiscogs: true});\n        getYoutubeTitle(videoId)\n            .then(title =>\n                  this.discogs.getLabels(title)\n                  .then(ret => {\n                      this.setState({isLoadingDiscogs: false});\n                      this.state.recordLabels = ret;\n                      this.newHistory();\n                      this.setState(this.state);\n                  }));\n    }\n\n\n    render() {\n        if (!this.props.show) {\n            return (\n                <div></div>\n            );\n        }\n\n        return (\n            <div>\n             <div className=\"discogs-header\">\n                <ConditionedComponent condition={this.state.history.length > 0}>\n                  <div\n                    onClick={() => this.onClickBack()}\n                    className=\"back-button\">\n                    Back\n                  </div>\n                </ConditionedComponent>\n                <ConditionedComponent condition={this.state.recordLabels.length > 0}>\n                  <YoutubeThumbnail\n                    loadVideo={(x) => this.props.onClickResult(x)}\n                    release={this.state.selectedRelease} videoId={this.state.videoId}/>\n                </ConditionedComponent>\n                <ConditionedComponent condition={this.state.labelReleases.length > 0}>\n                  <DiscogsThumbnail\n                    recordLabels={this.state.recordLabels} selectedLabel={this.state.selectedLabel}/>\n                </ConditionedComponent>\n              </div>\n              <div className=\"pagination-pane\">\n                {this.state.releasesPage > 1 ?\n                  <div onClick={() => this.onClickPreviousReleases()}\n                    className='field-pagination-button'>Previous</div> : ''}\n                {this.state.labelReleases.length > 0 ?\n                  <div onClick={() => this.onClickNextReleases()}\n                    className='field-pagination-button'>Next</div> : ''}\n              </div>\n              <PulseLoader\n                sizeUnit={\"px\"}\n                size={10}\n                color={'#123abc'}\n                loading={this.state.isLoadingDiscogs}\n                />\n              <ConditionedComponent condition={this.state.recordLabels.length > 0}>\n                <RecordLabels\n                  onClickLabel={(id) => this.onClickLabel(id)}\n                  labels={this.state.recordLabels}\n                  />\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.state.labelReleases.length > 0}>\n                <div className=\"record-labels-subheader\">\n                  Label Releases\n                </div>\n                {this.state.labelReleases.map(\n                    (release) =>\n                        <LabelRelease\n                              release={release}\n                          onClick={() => this.searchForRelease(release)}/>)} \n            </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nclass HistoryItem {\n    constructor(recordLabels, labelReleases, videoId, selectedLabel) {\n        this.recordLabels = recordLabels;\n        this.labelReleases = labelReleases;\n        this.videoId = videoId;\n        this.selectedLabel = selectedLabel;\n    }\n\n    equals(state) {\n        if (state.recordLabels.length > 0 && this.recordLabels.length > 0) {\n            return JSON.stringify(state.recordLabels) === JSON.stringify(this.recordLabels);\n        }\n\n        if (state.labelReleases.length > 0 && this.labelReleases > 0) {\n            return JSON.stringify(state.labelReleases) === JSON.stringify(state.labelReleases);\n        }\n        return false;\n    }\n}\n\nexport default RecordLabelsView;\n","import React, { Component } from 'react';\nimport YoutubeSearcher from './YoutubeSearcher.js';\nimport DiscogsView from './DiscogsView.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {setYoutubeSearchTerms} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport EthereumSoundsSearcher from 'search/EthereumSoundsSearcher.js';\nimport RecordLabelsView from './RecordLabelsView.js';\nimport EthereumCache from 'decentralized/cache/EthereumCache.js';\nconst ethereumCache = new EthereumCache();\nconst ethereumSearcher = new EthereumSoundsSearcher(ethereumCache);\n\nconst YOUTUBE = 'YOUTUBE';\nconst DISCOGS = 'DISCOGS';\nconst RECORD_LABELS = 'RECORD LABELS';\nconst SAMPLES = 'SAMPLES';\n\nclass InternetNavigatorPane extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state ={\n            mode: YOUTUBE,\n        };\n\n        this.addListeners();\n\n        this.sequencerEngine = {\n            store: this.props.store,\n        };\n    }\n\n    addListeners() {\n        window.addEventListener('get_related_videos', () => {\n            this.setState({\n                mode: YOUTUBE\n            });\n        });\n    }\n\n    onClickOption(opt) {\n        if (opt === DISCOGS) {\n            window.dispatchEvent(new Event('get_record_labels'));\n        }\n        this.setState({mode: opt});\n    }\n\n    searchYoutube(searchString) {\n        this.setState({\n            mode: YOUTUBE\n        });\n\n        this.props.setYoutubeSearchTerms(searchString);\n    }\n\n    chooseSound(sample) {\n        console.log('choose sample = ');\n        console.log(sample);\n        this.props.onClickResult(sample);\n    }\n\n    render() {\n        let youtubeClass = this.state.mode === YOUTUBE ?\n            \"option-tab selected\" : \"option-tab\";\n        let discogsClass= this.state.mode === DISCOGS ?\n            \"option-tab selected\" : \"option-tab\";\n        let samplesClass = this.state.mode === SAMPLES ?\n            \"option-tab selected\" : \"option-tab\";\n        let recordLabelsClass = this.state.mode === RECORD_LABELS ?\n            \"option-tab selected\" : \"option-tab\";\n\n        let className = this.state.mode === SAMPLES ? 'internet-navigator show-sounds' : 'internet-navigator';\n        return (\n            <div className={className}>\n              <div className=\"option-tabs\">\n                <div\n                  onClick={() => this.onClickOption(YOUTUBE)}\n                  className={youtubeClass}>\n                  Youtube\n                </div>\n                <div\n                  onClick={() => this.onClickOption(DISCOGS)}\n                  className={discogsClass}>\n                  Discogs\n                </div>\n                <div\n                  onClick={() => this.onClickOption(RECORD_LABELS)}\n                  className={recordLabelsClass}>\n                  Record Labels\n                </div>\n              </div>\n              <ConditionedComponent condition={this.state.mode===YOUTUBE}>\n                <YoutubeSearcher videoId={this.props.videoId} onClickResult={this.props.onClickResult}/>\n              </ConditionedComponent>\n              <DiscogsView\n                show={this.state.mode === DISCOGS}\n                />\n              <RecordLabelsView\n                show={this.state.mode === RECORD_LABELS}\n                searchYoutube={(s) => this.searchYoutube(s)}\n                videoId={this.props.videoId}\n                onClickResult={this.props.onClickResult}/>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setYoutubeSearchTerms: s => dispatch(setYoutubeSearchTerms(s)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InternetNavigatorPane);\n","import Web3 from 'web3';\nimport {web3} from '../web3.js';\nimport NoteSequencesContract from '../contracts/NoteSequencesContract.js';\n\nvar contract = new NoteSequencesContract();\n\nclass NoteSequencePublisher {\n    constructor() {\n        this.contract = new web3.eth.Contract(contract.abi, contract.contractAddress);\n        this.ethAddress = this.contract.options.address;\n    }\n\n    publish(args) {\n        return new Promise(async (resolve, reject) => {\n            const accounts = await web3.eth.getAccounts();\n            this.contract.methods.newNoteSequenceLarge(args[0], args[1], args[2], args[3], args[4])\n                .send({\n                    from: accounts[0] \n                }, (error, transactionHash) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve();\n                }\n                });\n        });\n    }\n}\n\nexport default NoteSequencePublisher;\n","import React from 'react'; import YouTube from 'react-youtube';\nimport { connect } from \"react-redux\";\nimport Tone from 'tone';\nimport domToImage from 'dom-to-image';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport recorder from '../../recorder.js';\nimport axios from 'axios';\nimport StartAudioContext from 'startaudiocontext';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {YOUTUBE, VINYL} from './constants.js';\nimport { Label, Button, Input, ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport SoundUploader from 'api/SoundUploader.js';\nimport SampledSound from 'components/SampledSound.js';\nimport { Badge } from 'reactstrap';\n\nimport '../../Discover.scss';\nimport '../../App.css';\n\nclass YoutubeSampler extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sampling : false,\n            dropdownOpen: false,\n            recordingSetup : false,\n            videoId: props.videoId,\n            startTime: null,\n            endTime: null,\n            stream: undefined\n        };\n        var self = this;\n        this.soundUploader = new SoundUploader(\n            2, (soundId, ipfsHash) => this.props.onSoundUploaded(ipfsHash, ipfsHash));\n        this.setupRecording();\n    }\n\n    toggleDropdown() {\n        this.setState({dropdownOpen: !this.state.dropdownOpen});\n    }\n    \n    shouldComponentUpdate(nextProps) {\n        if (this.props.playOutputRecording != nextProps.playOutputRecording) {\n            if (nextProps.playOutputRecording) {\n                this.input.connect(this.audioContext.destination);\n            } else {\n                this.input.disconnect(this.audioContext.destination);\n            }\n        }\n\n        if (nextProps.stream !== this.state.stream) {\n            this.state.stream = nextProps.stream;\n            this.startUserMedia(this.state.stream);\n        }\n\n        return true;\n    }\n\n\n    startUserMedia(stream) {\n        console.log('starting user media');\n        console.log(stream);\n        this.input = this.audioContext.createMediaStreamSource(stream);\n        this.input.channelCount = 2;\n\n\n        this.recorder = new window.Recorder(this.input, {numChannels: 2, bufferLen:2048});\n        if (this.props.playOutputRecording) {\n            this.input.connect(this.audioContext.destination);\n        }\n        this.state.recordingSetup = true;\n        this.setState(this.state);\n    }\n\n    setupRecording() {\n        try {\n            // webkit shim\n            window.AudioContext = window.AudioContext || window.webkitAudioContext;\n            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;\n            window.URL = window.URL || window.webkitURL;\n            \n            this.audioContext = Tone.Master.context;\n\n            StartAudioContext(this.audioContext, \"#playButton\")\n        } catch (e) {\n            console.log('No web audio support in this browser!');\n        }\n    }\n\n    onClickSampleButton() {\n        this.state.sampling = !this.state.sampling;\n        if (this.state.sampling) {\n            this.state.startTime = this.youtubePlayer.getCurrentTime();\n            console.log(\"recording started\");\n            this.recorder.record();\n        } else {\n            this.recorder.stop(Tone.Master.context.currentTime + 0.01);\n            setTimeout(() => {\n                this.state.endTime = this.youtubePlayer.getCurrentTime();\n                this.recorder.getBuffer((blob) => this.saveBuffer(blob));\n            }, [100]);\n        }\n        this.setState(this.state);\n    }\n\n    async saveBuffer(blob) {\n        console.log(\"save buffer called w blob=\", blob);\n        let ipfsHash = await this.soundUploader.uploadBufferToIpfs(\n            blob, true);\n\n        // get the cover art of selected record\n        if (this.props.selectedRecord) {\n            let thumbnailUrl = this.props.selectedRecord.thumb;\n \n            axios.get('https://cors-anywhere.herokuapp.com/' + thumbnailUrl,\n                      {\n                          responseType: 'blob'\n                      })\n                .then(result => {\n                    let blob = result.data;\n                    ipfs.addBlob(blob).then(coverHash =>\n                        this.props.onCoverDownloaded(ipfsHash, coverHash));\n                });\n        }\n        \n        this.recorder.clear();\n    }\n\n    getRelatedVideos() {\n        console.log('get related videos event dispatched');\n        window.dispatchEvent(new Event('get_related_videos'));\n    }\n\n    getRecordLabels() {\n        window.dispatchEvent(new Event('get_record_labels'));\n    }\n\n    fastForward(e) {\n        e.preventDefault();\n        this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() + 5);\n    }\n\n    rewind(e) {\n        e.preventDefault();\n        this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 5);\n    }\n\n    checkQuality() {\n        let qualities = this.youtubePlayer.getAvailableQualityLevels();\n        this.youtubePlayer.setPlaybackQuality(qualities[0]);\n    }\n\n    render() {\n        console.log('selected record = ');\n        console.log(this.props.selectedRecord);\n        const opts = {\n            height: '125',\n            width: '400',\n            playerVars: { // https://developers.google.com/youtube/player_parameters\n                autoplay: 1\n            }\n        };\n\n        let styles = this.props.styles;\n        let country = this.props.country;\n        let year = this.props.yeaer;\n        if (this.props.sampleSource === VINYL &&\n            this.props.selectedRecord) {\n            styles = this.props.selectedRecord.style;\n            country = this.props.selectedRecord.country;\n            year = this.props.selectedRecord.year;\n        }\n\n        return (\n            <div className=\"youtube-sampler\">\n              <span className=\"#playButton\"></span>\n              <ConditionedComponent condition={this.props.sampleSource === YOUTUBE}>\n                <div className=\"youtube-widget-container\">\n                  <YouTube\n                    videoId={this.props.videoId}\n                    opts={opts}\n                    onStateChange={(e) => this.checkQuality()}\n                    onReady={(e) => this._onReady(e)}\n                    />\n                </div>\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.sampleSource === VINYL}>\n                <img className=\"cover-art\" src={this.props.selectedRecord ? this.props.selectedRecord.cover_image : ''}/>\n              </ConditionedComponent>\n               <div className=\"video-info-container\">\n              </div>\n              <div className=\"video-buttons-container\">\n                <div className=\"action-buttons\">\n                {this.state.recordingSetup ? \n                    <span onClick={() => this.onClickSampleButton()}\n                          className={this.state.sampling ? 'record-button recording' : \"record-button\"}>\n                      {this.state.sampling ? 'RECORDING' : 'RECORD'}\n                    </span>\n                : '... initalizing'}\n                  </div>\n                <div className=\"action-buttons\">\n                  <span onClick={(e) => this.rewind(e)} className='big-button player-button'>RRWD</span>\n                </div>\n                <div className=\"action-buttons\">\n                  <span onClick={(e) => this.fastForward(e)} className='big-button player-button'>FFWD</span>\n                </div>\n                <div className=\"action-buttons\">\n                  <span onClick={this.props.onClickTag} className='big-button tag-samples-button'>TAG</span>\n                </div>\n                <div className=\"float-right\">\n                  <ConditionedComponent condition={this.props.sampleSource === YOUTUBE}>\n                <ButtonDropdown\n                               show={this.state.dropdownOpen}\n                               isOpen={this.state.dropdownOpen}\n                               toggle={() => this.toggleDropdown()}>\n                                   <Button\n                                         onClick={() => this.getRelatedVideos()}\n                                         id=\"caret\" color=\"secondary\"><span className=\"\">Related</span></Button>\n                               <DropdownToggle size=\"sm\" caret color=\"secondary\">\n                               </DropdownToggle>\n                               <DropdownMenu>\n                                 <DropdownItem onClick={() => this.getRelatedVideos()} size=\"sm\">Related Videos</DropdownItem>\n                                 <DropdownItem onClick={() => this.getRecordLabels()} size=\"sm\">Record Labels</DropdownItem>\n                                 <DropdownItem onClick={() => this.props.onClickRandomVideo()} size=\"sm\">Random Video</DropdownItem>\n                               </DropdownMenu>\n                             </ButtonDropdown>\n                  </ConditionedComponent>\n              </div>\n              </div>\n              <div className=\"discogs-container\">\n                Styles:  {styles.map((style) => <Badge color=\"light\">{style}</Badge>)} {year !== undefined ? \"Year: \" + year : ''}\n                {country !== undefined ? \" Country: \" + country: ''}\n              </div>\n              </div>\n        );\n    }\n\n    _onReady(event) {\n        this.youtubePlayer = event.target;\n        this.setState(this.state);\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        selectedRecord: state.discover.selectedRecord,\n    };\n};\n\nfunction loadXHR(url) {\n\n    return new Promise(function(resolve, reject) {\n        console.log('loading image');\n        let node = document.getElementById(\"selected-record\");\n        var options = {\n        quality: 0.95 \n        };\n\n        domToImage.toJpeg(node, options).then(function (dataUrl) {\n            console.log('got the image');\n            console.log(dataUrl);\n            // Do something with the dataURL (data:image/jpeg;base64,i........)\n        });\n    });\n}\nfunction str2ab(str) {\n  var buf = new ArrayBuffer(str.length*2); // 2 bytes for each char\n  var bufView = new Uint16Array(buf);\n  for (var i=0, strLen=str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\nexport default connect(mapStateToProps, null)(YoutubeSampler);\n\n","export const YOUTUBE = 'YOUTUBE';\nexport const VINYL = 'VINYL';\n","import axios from 'axios';\n\nclass SoundsTags {\n    tag(soundId, tag) {\n        return new Promise((resolve, reject) => {\n            axios.post('/tagSoundEasy/' + soundId + '/' + tag)\n                .then((ret) => resolve())\n                .catch(err => reject(err));\n        });\n    }\n\n    getTags(soundId) {\n    }\n}\n\nexport default SoundsTags;\n","import React, { Component } from 'react';\nimport PasswordModal from 'components/modals/PasswordModal.js';\nimport TransactionsView from 'components/toolbar/TransactionsView.js';\nimport LoginModal from 'components/modals/LoginModal.js';\nimport {GUILD, USER, NONE} from 'constants/encryption-levels.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport accounts from 'accounts/Accounts.js';\nimport ContentKey from 'crypto/ContentKey.js';\nimport GuildsMenu from 'components/guilds/GuildsMenu.js';\nimport SampleSource from './SampleSource.js';\nimport UniversalNavigator from 'components/UniversalNavigator.js';\nimport { connect } from \"react-redux\";\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport axios from 'axios';\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\nimport AudioInputChooser from 'components/AudioInputChooser.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport Discogs from 'discogs/Discogs.js';\nimport InternetNavigatorPane from './InternetNavigatorPane.js';\nimport NoteSequencePublisher from 'decentralized/chords/NoteSequencePublisher.js';\nimport { withRouter } from 'react-router-dom'\nimport {getEthereumNoteSequence} from 'tensorflow/Midifier.js';\nimport YoutubeSampler from './YoutubeSampler.js';\nimport YoutubeSearcher from './YoutubeSearcher.js';\nimport SampledSound from 'components/SampledSound.js';\nimport { Badge, Label, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport SoundTagger from 'components/SoundTagger.js';\nimport EncryptedIpfs from 'decentralized/guilds/EncryptedIpfs.js';\nimport SoundsTags from 'search/SoundsTags.js';\nimport '../../Common.css';\nimport EthereumCache from 'decentralized/cache/EthereumCache.js';\n\nconst apiKey = \"AIzaSyBrWhZMYJjBRGh9K3BDqj2bKT8sQ7K7JGc\";\n\nconst VINYL = 'VINYL';\nconst YOUTUBE = 'YOUTUBE';\n\nclass Discover extends Component {\n    constructor(props) {\n        super(props);\n\n        this.ethereumCache = new EthereumCache();\n        ethereum.store = this.props.store;\n        accounts.setStore(this.props.store);\n        accounts.setEthereum(ethereum);\n        accounts.checkLogin();\n        ethereum.guilds.initGuilds();\n        this.state = {\n            videoId: 'j5L70BkuKlo',\n            soundIds: [],\n            sampleSource: YOUTUBE,\n            selectedSoundIds: [],\n            soundIdToHash: {},\n            hashToSoundId: {},\n            tagMode: false,\n            soundIdToTags: {},\n            hashToStyles: {},\n            hashToSoundId: {},\n            hashToYear: {},\n            hashToCountry: {},\n            hashToVideoId: {},\n            hashToVideoTitle: {},\n            hashToDiscogsId: {},\n            styles: [],\n            hashToCoverArt: {},\n            year: undefined,\n            country: undefined,\n            syncedToEthereum: false,\n            calculatingNoteSequences: false,\n            noteSequencesCalculated: 0,\n            stream: undefined,\n            taggingSingleSound: false,\n            soundIdToTag: undefined\n        };\n\n        this.onVideoIdChanged(this.state.videoId);\n\n        this.discogs = new Discogs();\n        this.soundsTags = new SoundsTags();\n\n        ethereum.crypto.store = this.props.store;\n        this.contentKey = new ContentKey();\n        this.encryptedIpfs = new EncryptedIpfs(\n            this.props.store,\n            ethereum.guilds,\n            ethereum.encryption,\n            ethereum.crypto);\n    }\n\n    onCoverArtDownloaded(sampleHash, coverHash) {\n        console.log('onCoverARtDownloaded');\n        console.log(this.props.selectedRecord);\n        let hashToCoverArt = { ... this.state.hashToCoverArt };\n        hashToCoverArt[sampleHash] = coverHash;\n        this.setState({\n            hashToCoverArt: hashToCoverArt\n        });\n    }\n\n    onChooseAudio(stream, deviceId) {\n        console.log('deviceId chosen = ' + deviceId);\n        this.setState({stream: stream, deviceId});\n    }\n\n    componentDidMount() {\n       window.addEventListener(\"beforeunload\", function (event) {\n            event.returnValue = \"Hellooww\"\n        })\n    }\n\n    async onSoundUploaded(soundId, ipfsHash) {\n        this.state.syncedToEthereum = false;\n        this.state.soundIdToHash[soundId] = ipfsHash;\n        this.state.hashToSoundId[ipfsHash] = soundId;\n        this.state.soundIds.push(soundId);\n        this.state.soundIdToTags[soundId] = [];\n\n        // keep track of discogs data for ipfs hash (to later save to ethereum)\n\n        if (this.state.sampleSource === VINYL) {\n            // it's vinyl so tag it as vinyl\n            this.state.hashToVideoTitle[ipfsHash] = this.props.selectedRecord.title;\n            this.state.hashToCountry[ipfsHash] = this.props.selectedRecord.country;\n            this.state.hashToStyles[ipfsHash] = this.props.selectedRecord.style;\n            this.state.hashToYear[ipfsHash] = this.props.selectedRecord.year;\n            this.state.hashToDiscogsId[ipfsHash] = this.props.selectedRecord.id;\n            this.soundsTags.tag(soundId, 'vinyl');\n        } else {\n            this.state.hashToVideoId[ipfsHash] = this.state.videoId;\n            this.state.hashToVideoTitle[ipfsHash] = await this.getYoutubeTitle();\n            this.state.hashToStyles[ipfsHash] = this.state.styles;\n            this.state.hashToYear[ipfsHash] = this.state.year === undefined ? null : this.state.year;\n            this.state.hashToCountry[ipfsHash] = this.state.country === undefined ? null : this.state.country;\n        }\n        this.setState(this.state);\n    }\n\n    onVideoIdChanged(videoId) {\n        console.log(\"on videddd changed\");\n        this.state.videoId = videoId;\n        this.getYoutubeTitle()\n            .then(title =>\n                  {\n                      this.discogs.searchYoutubeTitle(title)\n                          .then((results) =>this.loadDiscogsResults(results));\n                  });\n        this.setState(this.state);\n    }\n\n    loadDiscogsResults(results) {\n        if (results == null || results === undefined) {\n            this.setState({styles: [], country: undefined, year: undefined});\n            return;\n        }\n\n        // get result with earliest year\n        let result = results;\n        if (results.length !== undefined ) {\n            let minYear = Math.min.apply(Math, results.map(x => x.year));\n            result = results.filter(x => x.year === minYear)[0];\n        }\n        this.setState({styles: result.style !== undefined ? result.style : [],\n                       country: result.country,\n                       year: result.year});\n    }\n\n    getYoutubeTitle() {\n        return getYoutubeTitle(this.state.videoId);\n    }\n\n    onSampleSourceChange(type) {\n        this.state.sampleSource = type === 'youtube' ?\n            YOUTUBE : VINYL;\n        this.setState(this.state);\n    }\n\n    loadVideo(result) {\n        this.onVideoIdChanged(result.videoId);\n\n    }\n\n   selectSound(soundId) {                           \n       var index = this.state.selectedSoundIds.indexOf(soundId);\n       if (index > -1) {\n           this.state.selectedSoundIds.splice(index, 1);\n       } else {\n           this.state.selectedSoundIds.push(soundId);\n       }\n       \n       \n       if (this.state.selectedSoundIds.length === 1 && index < 0) {\n           window.dispatchEvent(new Event('sound_selected'));\n       }\n       \n       this.setState({\n           selectedSoundIds: this.state.selectedSoundIds,\n           tagMode: true\n       });\n    }\n\n    startTagging() {\n        this.state.tagMode = true;\n        this.setState(this.state);\n    }\n\n    backToSearch() {\n        this.state.tagMode = false;\n        this.setState(this.state);\n    }\n\n    onClickSequence(history) {\n        var soundIds = this.state.selectedSoundIds.join(',');\n        this.props.history.push('/sequencerSounds/' + soundIds);\n    }\n\n    onClickRandomVideo() {\n        var self = this;\n        let videos = this.ethereumCache.index.YOUTUBE.YOUTUBE;\n        let randomVideo = videos[Math.floor(videos.length * Math.random())].dimension;\n\n        this.loadVideo({videoId: randomVideo});\n    }\n\n    async syncToEthereum() {\n        let promises:Promise<void>[] = [];\n        let soundIds = [];\n        let samples = [];\n        for (let hash in this.state.hashToSoundId) {\n            soundIds.push(this.state.hashToSoundId[hash]);\n            let tags = this.state.soundIdToTags[this.state.hashToSoundId[hash]];\n            let styles = this.state.hashToStyles[hash];\n            if (styles.length > 4) {\n                styles = styles.slice(0, 4);\n            } \n            for (let i=styles.length; i < 4; i++) {\n                styles.push('');\n            }\n\n            if (tags.length > 4) {\n                tags = tags.slice(0, 4);\n            } \n            for (let i=tags.length; i < 4; i++) {\n                tags.push('');\n            }\n\n            let hashToSave = hash;\n            if (this.props.selectedGuild) {\n                let sound = await ipfs.getSound(hash) \n                // use the same content key to encrypt every sound uploaded here\n                hashToSave = await this.encryptedIpfs.addSound(\n                    sound, GUILD, this.props.selectedGuild.guildId, this.contentKey);\n                console.log('hash to save = ');\n                console.log(hashToSave);\n            }\n\n            samples.push({\n                ipfsHash: hashToSave,\n                title: this.state.hashToVideoTitle[hash],\n                videoId: this.state.hashToVideoId[hash],\n                tags: tags,\n                styles: styles,\n                country: this.state.hashToCountry[hash],\n                year: this.state.hashToYear[hash],\n                coverArt: this.state.hashToCoverArt[hash],\n                discogsId: this.state.hashToDiscogsId[hash],\n            });\n        }\n        let guildId = this.props.selectedGuild ? this.props.selectedGuild.guildId : 0;\n        if (guildId !== 0) {\n            ethereum.newEncryptedSamples(\n                samples, guildId, this.contentKey);\n        }  else {\n            ethereum.newSamplesWithMetadata(\n                samples, 0);\n        }\n\n        let finished = await Promise.all(promises);\n\n        for (let id in this.state.soundIdToHash) {\n            let hash = this.state.soundIdToHash[id];\n            delete this.state.hashToVideoTitle[hash];\n            delete this.state.hashToVideoId[hash];\n            delete this.state.hashToVideoId[hash];\n            delete this.state.hashToStyles[hash];\n            delete this.state.hashToYear[hash];\n            delete this.state.hashToCountry[hash];\n            delete this.state.hashToSoundId[hash];\n        }\n\n        soundIds.forEach(id => delete this.state.soundIdToHash[id]);\n\n        this.setState({\n            soundIds: [],\n            syncedToEthereum: true});\n    }\n\n    addTag(tag) {\n        for (let i in this.state.selectedSoundIds) {\n            let id = this.state.selectedSoundIds[i];\n            if (id in this.state.soundIdToTags) {\n                this.state.soundIdToTags[id].push(tag);\n            } else {\n                this.state.soundIdToTags[id] = [tag];\n            }\n        }\n        \n        this.setState(this.state);\n    }\n \n    deleteSound(id) {\n        let hash = this.state.soundIdToHash[id];\n        delete this.state.hashToVideoTitle[hash];\n        delete this.state.hashToVideoId[hash];\n        delete this.state.hashToVideoId[hash];\n        delete this.state.hashToStyles[hash];\n        delete this.state.hashToYear[hash];\n        delete this.state.hashToCountry[hash];\n        delete this.state.hashToSoundId[hash];\n        delete this.state.soundIdToHash[id];\n        let index = this.state.soundIds.indexOf(id);\n        this.state.soundIds.splice(index, 1);\n        this.setState(this.state);\n    }\n\n    deleteTag(soundId, tag) {\n        let index = this.state.soundIdToTags[soundId].indexOf(tag);\n        this.state.soundIdToTags[soundId].splice(index, 1);\n        this.setState({soundIdToTags: this.state.soundIdToTags});\n    }\n   \n    render() {\n        return (\n            <div className=\"discover-full-view\">\n              <PasswordModal crypto={ethereum.crypto} show={true}/>\n              <LoginModal show={this.props.showLogin}/>\n              <UniversalNavigator view=\"DISCOVER\" store={this.props.store}/>\n             <div className=\"discover-view\">\n             \n              <div className=\"clear-fix\"/>\n             \n              <div className=\"float-left\">\n              <div className=\"discover-toolbar\">\n                <GuildsMenu store={this.props.store}/>\n                <ConditionedComponent condition={!this.state.syncedToEthereum && this.state.soundIds.length > 0}>\n                  <div\n                    onClick={() => this.syncToEthereum()}\n                    className=\"pink-button common-button\">\n                    SAVE {this.state.soundIds.length} SOUNDS\n                  </div>\n                </ConditionedComponent>\n                <TransactionsView/>\n                <SampleSource\n                  deviceId={this.state.deviceId}\n                  onChooseAudio={(x, deviceId) => this.onChooseAudio(x, deviceId)}\n                  onSampleSourceChange={(type) => this.onSampleSourceChange(type)}/>\n              </div>\n              <div className=\"youtube-pane\">\n                <YoutubeSampler\n                  onCoverDownloaded={(sampleHash, coverHash) => this.onCoverArtDownloaded(sampleHash, coverHash)}\n                  stream={this.state.stream}\n                  styles={this.state.styles}\n                  year={this.state.year}\n                  country={this.state.country}\n                  videoId={this.state.videoId}\n                  onClickTag={() => this.startTagging()}\n                  onSoundUploaded={(id, hash) => this.onSoundUploaded(id, hash)}\n                  sampleSource={this.state.sampleSource}\n                  onClickRandomVideo={() => this.onClickRandomVideo()}\n                  playOutputRecording={this.state.sampleSource === VINYL}\n                  />\n                <ConditionedComponent condition={this.state.soundIds.length > 0}>\n                  <div className=\"sampled-sounds-container\">\n                    {this.state.soundIds.map((soundId) =>\n                      <SampledSound \n                        encryptedIpfs={this.encryptedIpfs}\n                        key={soundId}\n                        onDelete={() => this.deleteSound(soundId)}\n                        tags={this.state.soundIdToTags[soundId]}\n                        isSelected={this.state.selectedSoundIds.indexOf(soundId) > -1}\n                        onClickThumbnail={() => this.selectSound(soundId)}\n                        onDeleteTag={(tag) => this.deleteTag(soundId, tag)}\n                        onClickTag={() => this.tagSound(soundId)}\n                        coverArt={this.state.hashToCoverArt[soundId]}\n                        videoId={this.state.hashToVideoId[this.state.soundIdToHash[soundId]]}\n                        store={this.props.store}\n                        title={this.state.hashToVideoTitle[this.state.soundIdToHash[soundId]]}\n                        soundId={this.state.soundIdToHash[soundId]}/>\n                        )}\n                  </div>\n                </ConditionedComponent>\n              </div>\n                </div>\n              <div className=\"description-pane\">\n                {this.state.tagMode ?\n                 <SoundTagger soundIdToHash={this.state.soundIdToHash} onClickBack={() => this.backToSearch()} onUpdateTags={(tag) => this.addTag(tag)} selectedSoundIds={this.state.selectedSoundIds}/> :\n                 <InternetNavigatorPane store={this.props.store} videoId={this.state.videoId} onClickResult={(result) => this.loadVideo(result)}/>}\n              </div>\n                </div>\n                </div>\n        );\n    }\n}\n\n                  \nconst mapStateToProps = state => {\n    return {\n        selectedRecord: state.discover.selectedRecord,\n        selectedGuild: state.guilds.selectedGuild,\n        showLogin: state.sequencer.showLogin,\n    };\n};\n\nexport default connect(mapStateToProps, null)(Discover);\n"],"sourceRoot":""}