{"version":3,"sources":["discogs/Discogs.js","components/selector2/getSoundResults.js","utils/downloadImage.js","components/lfo/LFOTrackComponent.js","components/track/SendComponent.js","components/track/SendsTrackComponent.js","components/upload/Tags.js","components/track/SendEffect.js","components/mix/mix2/MidiEffects.js","components/system5/ModuleOption.js","components/system5/AutomationPaths.js","components/system5/ModuleLoader.js","components/system5/constants.js","components/system5/HigherOrderHeader.js","components/system5/ModuleRouter.js","components/system5/RoutingMatrix.js","components/system5/ModuleScripter.js","components/system5/OrientationRouting.js","components/system5/useOrientation.js","components/system5/Choice.js","components/system5/Triangle.js","components/system5/AlgorithmChooser.js","components/system5/ParameterResult.js","components/system5/ParameterSearcher.js","components/system5/HigherOrderParameters.js","components/system5/Sidebar.js","components/system5/Playhead.js","components/system5/HigherOrderStepComponent.js","components/system5/useMouse.js","components/system5/HigherColumn.js","components/system5/HigherOrderComponent.js","components/system5/useKeys.js","components/mix/GridsContainer.js","components/mix/mix2/MixBottomPaneOptions.js","components/mix/mix2/AudioEffects.js","components/mix/mix2/MixEffects.js","components/mix/mix2/constants.js","components/mix/MixTab.js","components/mix/TrackVisualizer.js","components/mix/TracksVisualizer.js","components/mix/filterTags.js","components/mix/TrackToggleButton.js","components/mix/TrackMuteButton.js","components/mix/GroupMuteButton.js","components/mix/GroupThumbnailPart.js","components/mix/GroupThumbnail.js","components/mix/Group.js","components/mix/NewGroup.js","components/mix/GroupsComponent.js","components/mix/MultiParameterSlider.js","components/mix/MixesComponent.js","components/mix/MixParametersComponent.js","components/mix/EffectsPaneSidebar.js","components/mix/MixTrackParametersView.js","components/mix/MixEffectsPane.js","components/mix/SendMuteButton.js","components/mix/SendThumbnail.js","components/mix/SendComponent.js","components/mix/Mix.js","components/groups/getPath.js","components/groups/DraggingEdge.js","components/groups/MarkovEdge.js","components/groups/GroupEdges.js","components/upload/RecordInfo.js","components/mix/OutputChannelChooser.js","utils/truncate.js","components/installation/SamplePackFlow.js","constants/release-types.js","components/installation/ReleaseType.js","components/installation/DiscogsFlow.js","components/installation/SaveNewSample.js","components/installation/Rating.js","components/installation/PresetsBreadcrumb.js","components/installation/CreatedBy.js","utils/date.js","components/installation/SynthBrowser.js","components/installation/SamplesBreadcrumb.js","components/installation/GoToSource.js","components/installation/getThumbnails.js","components/installation/SampleTooltip.js","components/installation/SampleInfo.js","components/installation/SampleExplorer.js","components/installation/SamplerBrowser.js","components/installation/SimpleSequencerBottomToolbar.js","components/subpatch/ZObjectWindow.js","components/subpatch/SubPatchSidebar.js","components/subpatch/ObjectTree.js","components/subpatch/SubPatchObjectSidebar.js","components/subpatch/getParents.js","components/subpatch/SubPatchBreadcrumb.js","components/subpatch/SubPatchMenu.js","components/subpatch/SubPatchColors.js","components/subpatch/SubPatch.js","components/subpatch/useSubPatchScroll.js","components/subpatch/SubPatches.js","components/sidebar/EffectPresets.js","components/sidebar/EffectChoice.js","components/sidebar/EffectChoices.js","components/sidebar/SidebarOptions.js","components/audition/SampleSearcher.js","components/sidebar/QuickSampleChooser.js","components/xanadu/SourceSamples.js","components/xanadu/VisualLink.js","components/xanadu/SourceExploring.js","components/xanadu/YearExploring.js","components/xanadu/Xanadu.js","components/installation/StepActions.js","components/installation/Modes.js","components/installation/AutomationToolbar.js","components/sidebar/StepsButton.js","components/sidebar/TrackQuickView.js","utils/getProjectsUsed.js","components/automation/AutomationParameterDropdowns.js","parameters/getParametersWithAutomation.js","components/sidebar/StepGroupEditor.js","components/selector2/Day.js","components/sidebar/ZNumberInspector.js","components/user/CommentsComponent.js","components/user/getNotes.js","components/folders/FoldersComponent.js","components/v3/sidebar/SynthThumbnail.js","components/v3/sidebar/Navigator.js","components/modals/ArrangementSearcher.js","components/arrangement/PatternComponent.js","components/arrangement/useXVisible.js","components/arrangement/RollComponent.js","components/arrangement/ArrangementBottom.js","components/arrangement/ArrangementBottomResizer.js","components/folders/XanaduFolders.js","components/arrangement/SideBrowserContainer.js","components/arrangement/keyDown.js","components/arrangement/quantizeStep.js","components/arrangement/SelectionComponent.js","components/arrangement/selectors.js","components/arrangement/MouseHelper.js","components/arrangement/useSticky.js","components/arrangement/onScale.js","components/arrangement/getHeight.js","components/arrangement/TimeRowComponent.js","components/arrangement/TimeBackgroundComponent.js","components/arrangement/ClockTickComponent.js","components/arrangement/RowSelection.js","components/arrangement/useRowSelection.js","components/arrangement/tracks/TrackPattern.js","components/arrangement/tracks/TrackPatterns.js","components/arrangement/tracks/TrackTimeLine.js","components/arrangement/tracks/useYVisible.js","components/arrangement/tracks/SubSequenceTracks.js","components/arrangement/getScrollLeft.js","components/arrangement/PatternRoll.js","components/arrangement/MiniPianoRoll.js","components/arrangement/automation/positionUtils.js","components/arrangement/automation/VolumeAutomationPoint.js","components/arrangement/automation/VolumeGuidePoint.js","components/arrangement/automation/VolumeChangeAutomation.js","components/arrangement/tracks/TrackSidePanel.js","components/arrangement/tracks/TracksSidePanel.js","components/arrangement/tracks/TracksShowButton.js","components/arrangement/AutomationTypeDropdown.js","components/arrangement/SubSequenceSidePanel.js","components/arrangement/cursor.js","components/arrangement/SubArrangementComponent.js","components/arrangement/SidePanelToolbar.js","components/arrangement/SidePanelContainer.js","components/arrangement/SelectionBox.js","components/arrangement/RollsArrangementComponent.js","components/arrangement/ArrangementContainer.js","components/arrangement/ArrangementView.js","components/v3/sidebar/recent/RecentlyAddedSounds.js","components/v3/sidebar/plugins/PluginOption.js","components/v3/sidebar/plugins/PluginsList.js","components/v3/sidebar/plugins/PluginsViewer.js","components/v3/sidebar/track/ParamValue.js","components/v3/sidebar/track/TrackParameters.js","components/v3/sidebar/track/TrackInformation.js","components/v3/sidebar/track/InstrumentViewer.js","components/v3/sidebar/zobject/ZObjectInformation.js","components/v3/sidebar/zobject/ZMessageInformation.js","components/v3/sidebar/pad/PadInformation.js","components/v3/sidebar/effects/EffectInformation.js","components/v3/sidebar/ObjectInformation.js","components/v3/sidebar/Sends.js","components/v3/sidebar/zobject/OperationDocs.js","components/v3/sidebar/zobject/SubPatchTools.js","components/v3/sidebar/zobject/ZObjectActions.js","components/v3/sidebar/zobject/AttributesInspector.js","components/v3/sidebar/zobject/ObjectConnector.js","components/v3/sidebar/zobject/ZObjectTools.js","components/v3/sidebar/pad/PadQuickEffects.js","components/v3/sidebar/pad/PadToolsSidebar.js","components/v3/sidebar/track/TrackQuickSends.js","components/v3/sidebar/track/TrackQuickEnvelopes.js","components/v3/sidebar/track/WarpKnob.js","components/hooks/useWindowSlider.js","components/v3/sidebar/track/TrackQuickInstrument.js","components/v3/sidebar/track/TrackQuickEffects.js","components/v3/sidebar/track/TrackQuickAux.js","components/v3/sidebar/track/TrackFreezes.js","components/v3/sidebar/track/TrackToolsSidebar.js","components/v3/sidebar/zobject/ZMessageTools.js","components/v3/sidebar/effects/PlaneTools.js","components/v3/sidebar/effects/EffectTools.js","components/v3/sidebar/ToolsSidebar.js","components/v3/sidebar/RightSidebar.js","components/sounds/OptionTabs.js","components/presets/PresetModal.js","components/instruments/InstrumentsView.js","components/sidebar/ZObjectSidebar.js","components/notes/NotesComponent.js","components/packs/PackSearch.js","components/packs/PackDetails.js","components/packs/PackOption.js","components/packs/PacksSelector.js","components/packs/PacksComponent.js","components/packs/NewPackFlow.js","components/sidebar/SidebarComponent.js","components/mix/mix2/moveTrackToGroup.js","components/mix/mix2/useEffects.js","track/freeze/freezeGroupByPatterns.js","components/mix/mix2/GroupActions.js","components/mix/mix2/VolumeSlider.js","components/mix/mix2/GroupVolumeControl.js","components/mix/mix2/PanKnob.js","components/mix/mix2/TrackControls.js","components/mix/mix2/Track.js","components/mix/mix2/Group.js","components/mix/mix2/NewGroupsComponent.js","components/selector2/SourceFinder.js","components/selector2/Rating.js","components/selector2/SampleOption.js","components/selector2/SourceResults.js","components/selector2/SourceEditor.js","components/selector2/DayResults.js","components/selector2/ListResults.js","components/selector2/SoundGrid.js","components/selector2/SourceToSearch.js","components/selector2/PackToSearch.js","components/selector2/Selector.js","components/selector2/presets/PresetOption.js","components/selector2/presets/SourceResults.js","components/selector2/presets/DayResults.js","components/selector2/presets/ContentGrid.js","components/selector2/presets/getPresets.js","components/selector2/presets/Presets.js","components/windows/adjustEdgeSize.js","components/spatial/StyleSetter.js","components/spatial/ModuleSpatialView.js","components/spatial/useModuleDrop.js","components/zobject/ZObjectContextMenu.js","components/v3/sidebar/ObjectOption.js","components/v3/sidebar/NestedZObject.js","decentralized/artists/constants.js","components/installation/UnsourcedFlow.js","utils/loadSampleFromProject.js","components/installation/SampleUsed.js","components/sidebar/TrackOverview.js","components/sidebar/TracksOverview.js","components/folders/ItemComponent.js","components/folders/FolderComponent.js"],"names":["apiToken","axios","require","Discogs","Object","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","titleToLabels","nameToLabelInfo","nameToLabel","idToReleases","title","_this","Promise","resolve","reject","undefined","searchYoutubeTitle","then","result","data","label","map","getLabelInfo","ret","labelData","id","name","images","uri","push","length","catch","err","discogsId","url","get","results","recordName","console","log","split","join","labelName","callback","_this2","query","searchLabel","labelId","page","_this3","youtubeTitle","searchObject","string","partsCallback","artist","credits","escapeRegExp","str","replace","baddies","forEach","token","trim","toUpperCase","toLowerCase","parts","i","indexOf","splice","baddy","RegExp","creditMap","credit","keys","parseTitleString","earliestResult","year","includes","GuildSamplesContract","contractAddress","getSoundResultsServer","pageSize","arguments","searchTerms","guildId","groupBy","start","filterFavorites","sourceToSearch","tag","packToSearch","isNumber","_year","parseInt","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_ref2","releaseId","videoId","guildIds","pack","userId","body","wrap","_context","prev","next","t0","ethereum","getGuildsWithAccess","sent","packHash","accounts","getAccount","JSON","stringify","size","Math","floor","searchTerm","user","fetch","method","headers","Accept","Content-Type","resp","json","sort","b","blockNumber","stop","_x","_x2","apply","getByDay","_step6","blocks","_iterator6","_createForOfIteratorHelper","s","n","done","value","lastBlock","lastBlockNumber","abs","e","f","partitionBySource","byDay","_step7","_iterator7","_step8","dayResult","discogs","instrumentTypes","youtube","unsourced","_iterator8","coverArtHash","tags","some","find","instrumentType","fetchDaysForBlocks","_ref8","_callee7","byDayAndSource","_context7","abrupt","_x10","__webpack_require__","d","__webpack_exports__","downloadImage","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","decentralized_Ipfs_js__WEBPACK_IMPORTED_MODULE_1__","thumb","responseType","blob","ipfs","addBlob","hash","LFOTrackComponent","props","showLFOs","lfoPatternLocked","showEnvelopes","envelopePatternLocked","setShowEnvelopes","setShowLFOs","lfosTrack","togglePatternLocked","envelopesTrack","className","isMixView","lfoThumbnailClassName","envelopeThumbnailClassName","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","key","onClick","onMouseOver","setContextualHelp","LFOS_BUTTON","onMouseLeave","onClickLFOThumbnail","ENVELOPES_BUTTON","onClickEnvelopeThumbnail","components_ConditionedComponent_js__WEBPACK_IMPORTED_MODULE_6__","condition","lfos","lfo","_SingleLFOComponent_js__WEBPACK_IMPORTED_MODULE_7__","number","sequencerEngine","envelopes","envelope","components_envelope_SystemEnvelopeComponent_js__WEBPACK_IMPORTED_MODULE_8__","scrollContainer","envelopeTrack","onClickLock","src","patternLocked","Component","connect","state","tracks","envelopePatternLocks","subSequence","currentPattern","lfoPatternLocks","sequencer","dispatch","element","masterChannel","effects","effectsChain","send","_useState","useState","_useState2","slicedToArray","setValue","channel","handleChooseEffect","useCallback","effect","initializeEffect","enable","wetParameter","set","addEffect","useEffect","moveEffectTo","from","to","react_default","dist_default","options","effectOptions","onChange","placeholder","SendEffect","effectNumber","selectedEffect","selectedSendEffect","setSelectedSendEffect","sends","setSends","ref","useRef","onDelete","x","channelMixer","EffectComponent","noSelect","isDraggable","onDeleteEffect","createNewSend","toConsumableArray","filter","pad","track_SendComponent","setTags","_ref$placeholder","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","deleteTag","t","onKeyDown","concat","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2___default","type","target","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","components_mix_mix2_ParameterVisual_js__WEBPACK_IMPORTED_MODULE_1__","react_redux__WEBPACK_IMPORTED_MODULE_2__","actions_index_js__WEBPACK_IMPORTED_MODULE_3__","effectDragging","isSelected","dragEffect","onDragStart","onDrop","stopPropagation","selectEffect","parameters","getParameters","slice","onDragOver","preventDefault","draggable","parameter","Colors","selectedTrack","track","selectedGroup","mix","subId","currentSubSequence","engineId","effectsLength","midiEffects","selectedTrackMidiEffects","setSelectedEffect","sub","trackNumber","groupNumber","setSelectedMixEffect","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","moveMidiEffectTo","fxComponent","react__WEBPACK_IMPORTED_MODULE_1___default","components_effects_MidiEffectComponent_js__WEBPACK_IMPORTED_MODULE_4__","compact","initializeMidiEffect","style","_EffectOption_js__WEBPACK_IMPORTED_MODULE_2__","effectType","react_dropdown__WEBPACK_IMPORTED_MODULE_3___default","midiEffectOptions","NAMES","project","setData","_useState3","_useState4","modules","setModules","_useState5","_useState6","module","getJson","newSequence","onClickModule","loadSequence","subSequences","clicked","setClicked","projects","setProjects","useScroll","getProjects","p","system5_ModuleOption","newSubSequence","automationPaths","_path","fill","path","y","strokeWidth","stroke","show","higherOrder","setShowHigherOrderSequencer","num","higherOrderSequencer","inputModules","outputModules","mod","toggleInput","scriptEffect","system5_ModuleRouter","UserScriptComponent","doc","orientationRoutings","modulesLen","setHigherOrderStepsSelected","orientation","routings","isConnected","toggle","disconnectModules","connectModules","toggleFreeform","isFreeform","disconnectFromFreeform","connectToFreeform","toModule","_useOrientation","dragging","setDragging","selectedEdge","setSelectedEdge","window","addEventListener","removeEventListener","getModule","getMouseXY","rect","current","getBoundingClientRect","clientX","left","clientY","top","onMouseUp","onMouseMove","_getMouseXY","objectSpread","x2","y2","onMouseDown","_getMouseXY2","x1","y1","useOrientation","routing","getXY","getModNumber","getRectXY","onFreeformUp","routeKeys","rectXY","rectX","rectY","height","width","markerWidth","markerHeight","refX","refY","orient","points","freeformModules","fromPos","toPos","markerEnd","cx","cy","r","_getXY","SIZE","algorithmTypes","chosen","setChosen","borderLeft","borderTop","borderRight","borderBottom","system5_Triangle","system5_RoutingMatrix","system5_Choice","PLAY_MODULE","RESTART_MODULE","ROLL_MODULE","PLAY_SPEED_MODULE","colors","mouseDown","selectedParameters","setSelectedParameters","setParameters","context","instrument","subDevice","midiEffect","setParameter","_parameters","isMetronome","formant","enabled","metaKey","backgroundColor","color","getColorForTrack","getName","getColorForHash","setResults","index","search","audioParam","audioParams","createMacro","params","Array","Set","macro","macroParameter","hasMacro","system5_ParameterResult","setIsMacroMapping","isMapping","setAccumulatorParameterSelected","param","ParametersMapper","parametersList","EffectParameterSlider","min","max","step","automationDepthParameter","system5_ParameterSearcher","selected","system5_HigherOrderHeader","system5_AlgorithmChooser","system5_HigherOrderParameters","trackStep","playing","isDragging","setSelected","stepData","setSelection","objectWithoutProperties","acted","setColor","_useContextMenu","useContextMenu","onContextMenu","dropdownPos","setDropdownPos","_useMouse","matrix","useMouse","HigherColumn","selection","justPressed","getSelection","dist","setStepSize","getStepClass","obj","selectedSteps","moving","setMoving","tagName","deleteSteps","pt","moveStepTo","useKeys","svgClass","system5_Playhead","col","system5_HigherColumn","steps","system5_HigherOrderStepComponent","system5_AutomationPaths","system5_Sidebar","modulesCollapsed","pads","scale","setScale","onMouseWheel","deltaX","deltaY","wheelDeltaY","wheelDeltaX","ctrlKey","_scale","transform","ModuleSpatialView","showEffects","system5_HigherOrderComponent","selectedTrackEffects","selectedGroupEffects","trackOrGroup","groups","_track","_group","group","presetName","EffectOption","groupTracks","option","setOption","mix2_MixBottomPaneOptions","EnvelopeOptions","MidiEffects","mix2_AudioEffects","ContextualHelpComponent","MixTab","setMixViewMode","switchToSubSequence","MixTabOption","SUBSEQUENCE","isCurrent","mixViewMode","getSubSequenceName","React","COLORS","triggerColor","getColor","DRUM_TAGS","muted","lastTrigger","setLastTrigger","lastRelease","setLastRelease","thumbnailStyle","setThumbnailStyle","_useState7","_useState8","additionalStyle","setAdditionalStyle","onClickMute","mute","onTrigger","setTimeout","Date","getTime","duration","brightness","sliceStartTime","sliceDuration","brighten","onRelease","time","currentSubSequenceId","removeEventListeners","TRIGGER_SAMPLE","RELEASE_SAMPLE","sample","thumbnail","getThumbnail","stringToConvert","getId","innerText","has","getInstrumentType","MULTI_SYNTH","SAMPLED_INSTRUMENT","samples","getSamples","innerComponent","getTrackType","MULTI_FREEZE","MultiFreezeThumbnails","ConditionedComponent","mix_TrackVisualizer","_intersect","set1","set2","z","TrackToggleButton","classCallCheck","_super","call","isEnabled","toggleEnabled","setState","onToggleClicked","isToggled","TrackMuteButton","onMuteClicked","trackMutes","GroupMuteButton","mix_TrackToggleButton","onTrackMuteClicked","onGroupMuteClicked","mix_TrackMuteButton","groupMutes","TAGS","GroupThumbnailPart","nextProps","nextState","renders","timer","setInterval","trackMeter","getLevel","clearInterval","onDraggingTrack","trackDragging","addToGroup","onGroupsChanged","truncate","thumbnailPartStyle","unselected","isSelectedGroup","opacity","isTrackSelected","coloredThumbnailStyle","nameStyle","getNameToShow","numParts","onClickTrack","onError","GroupThumbnail","onSelectTrack","partWidth","THUMBNAIL_WIDTH","mix_GroupMuteButton","mix_GroupThumbnailPart","Group","volume","getVolume","pattern","getSelectedTrackInGroup","cursor","selectTrack","setSelectedTrack","setSelectedGroup","setVolume","tagsToRemove","j","otherTag","delete","filterTags","react_bootstrap_slider_default","handle","change","onChangeVolume","reversed","stereoConnected","OutputChannelChooser","mix_GroupThumbnail","getTags","reactstrap_es","selectedTrackInGroup","groupVolumes","trackVolumes","NewGroup","newGroup","MultiParameterSlider","minSelected","maxSelected","isMouseDown","setParametersToRecord","IS_TRACK","IS_GROUP","IS_SEND","parameterLocks","val","selectedParameter","normalizeOriginal","setMultiParameterSliderValue","getParameterLocks","parameterLock","normalizedSet","getEffectsTrackIf","sendNumber","addParameterLock","deleteParameterLock","onClickMin","formatNumber","onClickMax","onAdd","flashing","MultiParameterSlider_ParameterElement","onDeleteParameterLock","onClickParameterLock","ParameterElement","effectName","selectedParameterFlashing","multiParameterSliderValues","MixesComponent","MixParametersComponent","LFOS","onClickOption","bind","assertThisInitialized","EffectsPaneSidebar","setEffectsPaneOption","HIDE","EFFECTS","TRACK","effectsPaneOption","MixTrackParametersView","trackData","durationParameter","transposeParameter","chopParameter","velocityParameter","attackParameter","releaseParameter","pitchAttackParameter","pitchDecayParameter","pitchSustainParameter","pitchReleaseParameter","MixTrackParametersView_ParametersBox","ParametersBox","Parameter","ConnectedParameter","setSelectedParameter","setSelectedParameterFlashing","_this4","originalMax","originalMin","isParameter","lfoEnabled","onParameterChanged","effectParameters","MixEffectsPane","getEffectsTrack","updateEffects","mix_EffectsPaneSidebar","mix_MixTrackParametersView","hide","EffectsComponent","EffectsView","store","onEffectsChange","panning","onChangePanning","SendMuteButton","setSendMuted","onSendMuteClicked","sendMutes","SendThumbnail","mix_SendMuteButton","SendComponent","mix_SendThumbnail","Mix","createRef","play","MIXES","setHideMixer","hideMixer","showingPiano","SimpleSequencerBottomToolbar","SubPatches","containerRef","mix_MixTab","mix_MixParametersComponent","mix_GridsContainer","NewGroupsComponent","SubMixComponent","SendsTrackComponent","toggleHide","bottomMode","arrangement","showPianoRoll","PIANO_ROLL","getPath","sqrt","xd","xDistance","pow","transformationEdgeDragging","container","pos","setPos","transformation","fromId","fromEl","document","getElementById","fromRect","bounds","scrollLeft","scrollTop","offsetLeft","Arrow","tension","pointerLength","pointerWidth","trackSteps","toId","whenValue","toEl","toRect","stepsGroupMode","setTransformationEdgeDragging","pageX","pageY","markovTransformations","getAllGroups","g","transformations","whenType","MARKOV","reduce","scrollHeight","groups_DraggingEdge","groups_MarkovEdge","records","_ref$showTags","showTags","record","setRecord","_records","styles","genre","country","releaseName","getReleaseInfo","artistName","artists","react_dropdown__WEBPACK_IMPORTED_MODULE_5___default","o","_Tags_js__WEBPACK_IMPORTED_MODULE_4__","getOption","switchChannelOutput","outputNode","right","outputs","react_dropdown__WEBPACK_IMPORTED_MODULE_2___default","controlClassName","arrowClassName","getOptions","channelCount","truncateLength","substring","guilds","selectedGuild","setUploadingFile","setArtistName","setName","coverArtUrl","setCoverArtUrl","samplePack","setSamplePack","_useState9","_useState10","editedCoverArt","setEditedCoverArt","_useState11","_useState12","copiedAll","setCopiedAll","getSamplePack","copyToAll","_step","_iterator","_sample","sessionStorage","setItem","releaseType","saveWithCoverArt","saveSample","saveAll","_callee2","_iterator2","_step2","_context2","finish","ImageHandler","imageHash","setImageHash","setReleaseType","Result","_ref3","stripExtension","extensionIndex","isLoggedIn","userToken","setShowLogin","selectedId","setSelectedId","onClickResult","lstorage","searchRecords","getItem","parsed","parse","onClickSave","DiscogsFlow_Result","installation_ReleaseType","installation_DiscogsFlow","installation_SamplePackFlow","Star","rating","content","setRating","xanadu","rateSound","getSoundRating","Rating_Star","presets","trackBrowsedPresets","setBrowsedPresets","setTrackBrowsedPresets","preset","_ref$presets","auditionPreset","loadMods","loadEffects","onClickPrev","contentHash","onClickNext","getClassName","nextClass","prevClass","contentName","setContentName","userName","setUserName","createdDate","setCreatedDate","isCreated","users","getUserName","sampledByUser","getBlockDate","date","getFullYear","month","getMonth","toString","day","getDate","getFormattedDate","ipfsHash","saveContent","save","creationWord","getContentType","SAMPLE","creation","PRESET","hasEdits","createdBy","subTrack","setTagSelected","synth","tagSelected","_ref$type","installation_PresetsBreadcrumb","CreatedBy","TagsInfo","installation_Rating","PRESET_RATED","PresetsExplorer","trackBrowsedSamples","setBrowsedSamples","setTrackBrowsedSamples","_ref$samples","auditionSound","goToSource","open","contract","cache","getThumbnails","videoIds","coverArts","thumbnails","_r","BackendQuery","SampleYoutube","select","whereIn","executeQuery","NewDiscogsSample","getThumbnails_createForOfIteratorHelper","sampleHash","getHashUrl","sampleInfo","audition","sampleTooltip","SampleInfo","sampleId","annotations","position","onClickSample","hovered","setHovered","setSampleInfo","setSampleTooltip","c","Sample","load","borderColor","saturate","backgroundImage","counter","pendingTransactions","transactions","setSampleDragging","audioUnit","setStart","showSamples","setShowSamples","setSamples","setThumbnails","setAnnotations","playSound","stopSound","_ref4","_callee3","_counter","s2","_context3","_x3","scrollTo","getSoundsWithTag","sounds","getSoundsWithVideo","getSoundsWithDiscogs","getSoundsWithUserBlockNumber","onScroll","getAnnotations","SAMPLE_ANNOTATION","el","offsetHeight","samplesToShow","installation_SampleInfo","installation_SampleTooltip","selectedInstrument","loaded","frozenColumns","selectedRackSubTrack","trackIsLoading","isFrozen","AudioUnit","dispose","WAVEFORM","SAMPLER","DetailsView","showParameters","hideKeyboard","alreadyLoaded","onGoBack","keyboardEngine","midiEngine","midi","resolution","parentView","SEQUENCER_VIEW","bpm","sampler","samplers","selectedSampler","defaultSampler","INSTRUMENT_RACK","installation_SynthBrowser","audioBuffer","setBuffer","TrackThumbnail","onClickThumbnail","Waveform","buffer","installation_SamplesBreadcrumb","needsSave","installation_GoToSource","SOUND_RATED","UnsourcedFlow","SampleUsed","installation_SaveNewSample","installation_SampleExplorer","sidebarCollapsed","viewMode","numTracks","bottomHeight","selectedRows","setArrangementBottomResizing","resizing","toolbar","AutomationToolbar","PianoRollComponent","parentClassName","isLooping","installation","hideToolbar","windowPosition","windows","windowPositions","zobject","setViewableZObjects","setSize","sizeRef","ordering","setOrdering","elements","_useWindowManager","useWindowManager","basicContainerRef","windowScale","setWindowScale","_style","startResizing","closeWindow","viewableZObjects","ZObjectComponent","isStatic","customMode","subpatch","selectedZObject","opened","setOpened","RightSidebar","seauencerEngine","zobjects","zObjects","zmessages","zMessages","objectDragging","setSelectedZObject","setObjectDragging","onClickZObject","maxHeight","dataTransfer","NUMBER","storedMessage","NestedZObject","subpatch_ObjectTree","getParents","parents","zObject","setViewableSubPatches","setWindowPosition","goTo","_subpatch","subpatches","viewableSubPatches","_parents","reverse","toAdd","args","presentationMode","spatial","setFullScreenZObject","setEditLayout","editLayout","setCustomMode","toggled","setToggled","toggleCustom","isCustom","isOpen","caret","hex","fillColor","setFill","showing","setShowing","react_color_es","setModuleSize","subPatches","contentRef","arrangeWindows","useArrangeWindows","dropdownPosRef","scrollRef","styleSize","setStyleSize","onWheel","passive","lastScrollTime","_ref$current","innerWidth","innerHeight","_size","useSubPatchScroll","onDoubleClickHeader","onHeaderClick","useDoubleClick","orderingRef","hideSubPatch","_subPatches","deencapsulate","createInlet","_dropdownPosRef$curre","createZMessage","_dropdownPosRef$curre2","newInlet","createInstanceInlet","_dropdownPosRef$curre3","newInstanceInlet","createOutlet","_dropdownPosRef$curre4","newOutlet","includeInPresentation","pulledElements","selectedElements","_i","_ids","node","findNodeById","setAttribute","zIndex","segment","segmentAllCables","encapsulate","encapsulateObjects","_elements","NW","NE","SW","SE","subpatch_SubPatchBreadcrumb","ContextMenu","MenuItem","ZObjectToolbar","subpatch_SubPatchMenu","subpatch_SubPatchObjectSidebar","SubPatchContent","subpatch_SubPatchSidebar","fullScreenZObject","_useWindows","useWindows","toHide","SubPatches_createForOfIteratorHelper","subpatch_ZObjectWindow","subpatch_SubPatch","matchedPresets","setPresets","getEffectPresets","loadPreset","fx","effectHash","fromJson","loadLostParameters","isCollapsed","setIsCollapsed","sidebar_EffectPresets","sidebar_EffectChoice","searchText","auditionTrack","samplesStream","setStream","searching","setSearching","searchForSounds","UnknownProgressBar","text","SamplesStreamExplorer","Tag","isRainbow","isDark","openSelector","scrollTags","setSampleTagDragging","loading","setLoading","trackRef","offset","useClientBounds","fields","ethereumCache","getAllForField","random","isArray","warp","Documented","QUICK_ADD_BUTTON","arg","selector","quickAddSearchText","getSelectedTrack","explorerMaximized","setSearchText","setQuickAddSearchText","setShowPianoRoll","setArrangementBottomMode","setSidebarSearchInput","setSelectorMode","m","setSidebarViewMode","setSelectedSteps","setSelectedPianoRollSteps","setShowPlugins","selectedTag","setSelectedTag","DEFAULT_TAGS","setEffects","rainbow","_useSearcher","useSearcher","clear","showBottom","INFO","addAudioTrack","addSynth","addMultiSynthTrack","addInstrumentRackTrack","addSampledInstrumentTrack","sampleClassName","instClassName","selectedPianoRollSteps","getBrightness","quickClassName","tagsToShow","sidebar_SidebarOptions","SIDEBAR_SEARCH","spellcheck","audition_SampleSearcher","QuickSampleChooser_Tag","QUICK_ADD_INSTRUMENT_BUTTON","loadingSample","ids","flatMap","getBulkSampleInfo","onClickTag","_tags","_x4","_samples","localeCompare","SampleStreamOption","topOffset","getParentScroll","parent","parentElement","setCoords","_ref$coords","coords","setTarget","HEIGHT","scroll","calculatePts","pRect","stopColor","sourceExploring","setSourceExploring","setYearExploring","setStyles","guildSamples","getStylesForSound","xanadu_SourceSamples","xanadu_VisualLink","yearExploring","getElementsByClassName","offsetTop","SampleYear","where","xanadu_SourceExploring","xanadu_YearExploring","quantized","setQuantized","addSteps","doubleTrackLength","removeSteps","halfTrackLength","toggleQuantize","quantizedStyle","ResolutionDropdown","Mode","selectedOption","setBottomMode","borderBottomWidth","borderBottomStyle","borderBottomColor","showQuickTracks","setShowQuickTracks","hasSampler","hasPiano","hasInfo","INSTRUMENT","TracksOverview","showName","mode","Modes_Mode","DOUBLE_CLICK_TIME","MIN_HEIGHT","numEffects","selectedDevice","automation","trackDevice","trackSubDevice","trackParameter","showAutomation","selectedRackDevice","trackRackDevice","setTrackAutomationParameter","setTrackAutomationDevice","device","setTrackAutomationRackDevice","setTrackAutomationSubDevice","setArrangementBottomHeight","setShowAutomation","setBottomOffset","bottomOffset","setBottomToolbarOffset","parametersWithAutomation","getParametersWithAutomation","hideAutomation","onParameterClicked","lastClick","setLastClick","now","getState","MODE_TO_HEIGHT","automationIcon","installation_Modes","toggleContent","AutomationParameterDropdowns","getParameterName","installation_StepActions","groupMode","setGroupMode","setStepsGroupMode","onClickGroupSteps","groupSteps","onClickUngroup","ungroupSteps","onClickRollSteps","rollSteps","onClickLegatoSteps","legato","ConditionedCheckmark","TrackQuickView","getTrackData","gangMode","parametersToUpdate","operationManager","updateStepParameter","updateSteps","auditionNext","auditionPrevious","getMin","getMax","favoriteButton","FavoriteButton","PulseLoader_default","sizeUnit","BROWSE_SOUNDS","previousSample","nextSample","ParameterOption","chooseParameter","isCirklonSelected","cirklonParameterSelected","ParameterValue","getValue","parseFloat","onUpdateParameter","sidebar_StepsButton","StepGroupEditor","keyboard","stepGroups","TokenizedSequencesContract","getProjectsUsed","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","hashes","SampleInSequence","sequenceHash","TokenizedSequenceEdited","getDeviceOption","isRack","instrumentRack","getParameterOption","prettyName","getParametersForDevice","isMix","mixAutomation","automations","automatable","uxAutomatable","isMapped","addMacroDeviceOptions","deviceOptions","macrosEffect","liveEffects","MACROS_EFFECT","macroOptions","macros","subMacros","getDeviceOptionsForTrack","rackOptions","subDeviceOptions","onChangeRackDevice","getSubDevices","parameterOptions","deviceToChoose","dev","parameterWithName","onChangeDevice","onChangeSubDevice","getSubDeviceOption","opt","dropdownClassName","getAllParameters","setTransformations","onClickNew","newTransformation","components_sidebar_TransformationEditor_js__WEBPACK_IMPORTED_MODULE_5__","tran2","tran","Source","setSourceToSearch","onClickSource","setSamplesDragging","bookLeftStyle","display","_color","INSTRUMENT_TYPE_TO_NAME","counts","_tag","maxTag","person","cleanTitle","transparent","components_help_Documented_js__WEBPACK_IMPORTED_MODULE_8__","FILTER_BY_DAY_TAG","charCodeAt","setCurrentTagInList","onClickDay","dayResults","setDayResults","totalResults","setDate","formatDate","ratio","useScrollTo","expanded","FILTER_BY_DAY","Checkbox","checked","znumber","setMin","setMax","round","setRound","setter","field","handleRoundChange","CommentsComponent","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","commentText","commentSent","notes","messageSent","getNotes","watchForNotes","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","sequence","messaging","watchForNewMessages","note","onNewNote","messageHash","referenceHash","messageContent","messageType","SEQUENCE","sendMessage","react__WEBPACK_IMPORTED_MODULE_8___default","components_ConditionedComponent_js__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","event","addonType","sendComment","react_spinners_PulseLoader__WEBPACK_IMPORTED_MODULE_15___default","Note","odd","onHide","_super2","messageText","fromUser","isFavorite","getMessage","_callee4","message","_args4","_context4","toLocaleString","isPrevious","focus","_this5","onClickUser","onClickText","_getNotes","checkSequences","nextSequences","previousSequences","favorites","fullNotes","_args","getMessages","tokenizedSequences","getNextSequences","sequenceMetadata","getFavorites","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","FoldersComponent","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","loadFolders","folders","isLoaded","selectedFolder","subFolders","root","react__WEBPACK_IMPORTED_MODULE_7___default","folder","_FolderComponent_js__WEBPACK_IMPORTED_MODULE_10__","onFoldersUpdated","onChooseItem","onChooseFolder","onTestItem","showItems","react_redux__WEBPACK_IMPORTED_MODULE_1__","actions_index_js__WEBPACK_IMPORTED_MODULE_2__","setTrackDragging","constants_contextual_help_js__WEBPACK_IMPORTED_MODULE_1__","components_help_Documented_js__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_4__","constants_object_types_js__WEBPACK_IMPORTED_MODULE_5__","components_v2_trackRightClickActions_js__WEBPACK_IMPORTED_MODULE_6__","streamSize","_ref$showSave","showSave","auditionName","getObjectType","GO_BACK_HOME","_option","savePreset","showSearcher","setShow","setShowArrangementSearcher","Modal","dialogClassName","QuickSampleChooser","SidebarPresets","PatternComponent","memo","showVisuals","horizontalScroll","scrollRight","offsetWidth","mid","useXVisible","arrangementContainer","onRightMouseDown","SEQUENCE_ROLL","onLeftMouseDown","onSelect","PATTERN_SWITCH","getAdditionalStyling","hasEdges","topStyle","isRoll","eventKey","isNaN","backgroundSize","fullStyle","getBarWidth","xScale","isLast","restStyle","maxWidth","smallPattern","getVisualization","selectedEvents","subEventsLength","subEvents","getSubEvents","arrangement_PatternComponent","NO_SUB_SEQUENCE","isFirst","onRightMouseUp","onLeftMouseUp","mixSession","patternSelected","showTracks","setPatternSelected","setArrangementPatternSelected","getEffectsComponent","patterns","patternNumber","XanaduFolders","setSubFolders","item","fromData","loadSampleFromSequence","subFoldersToShow","FolderComponent","COLLAPSED_WIDTH","PRESETS","SEQUENCES","browserMode","collapsed","setCollapsed","toggleCollapse","loadPresetAsSubSequence","linkFolder","rolling","getRowsSelected","isRollsRowSelected","selectedRollEvents","getSelectedEvents","editResolution","NUMBER_TO_RESOLUTION","selectedPatternSwitchEvents","editPattern","setSelectedArrangementEvents","onNumberDown","subSequenceId","engine","quantizeStep","RIGHT","LEFT","getSelectionStyle","marginLeft","selectionStart","selectionEnd","end","loopSelected","DEFAULT_RESOLUTION","setArrangementRowSelections","selections","setArrangementSelection","setArrangementLoopSelected","setIsDragging","dragOffset","setDragOffset","directionResizing","setDirectionResizing","didDrag","setDidDrag","getStepFromPosition","getMouseX","onMiddleMouseUp","unselectAll","selectAll","newStart","newEnd","quantizedStart","quantizedEnd","rowSelections","onEdgeDown","direction","getIsSelected","createSelector","mouseX","cursorStep","seekToTrackStep","useSticky","isBottom","stickyContainer","sticky","setSticky","scrollBottom","onScale","setArrangementXScale","getHeight","getSubSequence","Bars","getEvents","numBars","totalLength","arr","visibleView","events","eventsLength","bars","barWidth","minWidth","preWidth","TimeRowComponent_BarComponent","constantHeight","BarComponent","beat","beatStyle","firstStyle","beatClass","PureComponent","numSubSequences","setArrangementMouseX","setArrangementCursorStep","yScrollContainer","dragStartY","dragY","dragX","timeout","diff","_xScale","arrangement_MouseHelper","children","TimeBackgroundComponent","numberOfBars","bar","TimeBackgroundComponent_BarComponent","ClockTickComponent","unlockedScroll","unlockScroll","isPlaying","prevProps","getX","equals","getSequenceId","mouseDownX","isRecordingMix","useRowSelection","resizingSelection","onRowSelectionDown","onRowSelectionUp","onRowSelectionMove","TrackPattern","onClickHeader","onHeaderMouseDown","setCursorStep","mixEvents","patternSwitchEvents","patternDragging","automationTypeToShow","wrapperRef","_ref$events","tracks_TrackPattern","isSelectedTrack","setAutomationPointsSelected","setSelectedEvents","getEvent","_useRowSelection","verticalScroll","bottom","useYVisible","rowSelection","getSelectedAutomations","arrangement_RowSelection","tracks_TrackPatterns","ParameterAutomation","tracks_TrackTimeLine","getScrollLeft","trackPatternSteps","ARRANGEMENT_TRACK_PATTERN","patternStartStep","patternStartSteps","startStep","setArrangementMode","setPatternDragging","setArrangementPatternDragging","setPatternResizing","setArrangementPatternResizing","stepNumber","on","startDragging","INFO_COLUMN_WIDTH","switchToPattern","onEdgeMouseDown","Step","trackColor","numPatterns","_props$sequencerEngin","offsetX","movePianoRollPattern","arrangement_PatternRoll","INNER_HEIGHT","getXPositionFromStep","getYPositionFromVolume","getValueFromYPosition","VolumeAutomationPoint","highlightPoint","unhighlightPoint","isHighlighted","VolumeGuidePoint","guidePoint","ReactKonva","eventType","fade","subSequenceFades","isPlayingMix","clearSelection","setGuidePoint","pointBeingDragged","setPointBeingDragged","highlightedPoint","setHighlightedPoint","pointHasDragged","setPointHasDragged","onClickLine","SubSequenceVolumeChangeEvent","insertEvent","_getXY2","volumeAutomationMix","updateRedux","showGuidePoint","_getXY3","onHighlightPoint","clearState","deleteIfNecessary","deleteEvent","pts","last","getLinePoints","alpha","closed","automation_VolumeAutomationPoint","solod","getSolo","onClickSolo","solo","onClickEnable","setIsEnabled","borderRightColor","InstallationVolume","tracks_TrackSidePanel","setShowArrangementTracks","OPTIONS","SUB_SEQUENCE_VOLUME_CHANGE","setAutomationToShow","MAX_NAME_LENGTH","trackIsEnabled","subSequenceMuted","setSelectedRows","setArrangementSelectedRows","clearSelectedArrangementEvents","nameClass","isTrack","tracks_TracksShowButton","tracks_TracksSidePanel","DEFAULT_PATTERN_DURATION","getCursorStep","dragPattern","patternEventDragging","draggingDiff","lastClickTime","onDragPatternEvent","patternEvent","_direction","resizedStep","nextEvent","getNextEvent","nextStepAfter","updateAllTypeRedux","previousEvent","getPreviousEvent","nextStep","selectRow","patternResizing","_patternResizing","resizePianoRollPattern","patternSwitch","PatternSwitchEvent","eventComponents","arrangement_MiniPianoRoll","_patternSwitchEvents","eventsToShow","_selectedEvents","automation_VolumeChangeAutomation","currentTime","displayResolution","setTotalArrangementLength","getTotalLength","insertPatternEventAtCursor","tracks_SubSequenceTracks","dropdownOpen","setDropdownOpen","deleteAutomations","isRollSelected","rollClassName","arrangement_SidePanelToolbar","arrangement_SubSequenceSidePanel","sequenceRollEvents","numEvents","widthExtension","resizingSubEvent","rollDragging","rollDragOffset","currentClickTime","eventOn","SequenceRollEvent","dur","insertRollEvent","initialSubEvent","insertRollEventAtCursor","getStepFromMouseEvent","originalStep","quantizedStep","moveRollEvent","difference","isRightEventInBounds","isRightSubEventInBounds","resizeSequenceRoll","isLeftEventInBounds","isLeftSubEventInBounds","stepToResize","subEvent","getPreviousSubEvent","getNextSubEvent","_React$createElement","arrangement_RollComponent","defineProperty","ArrangementContainer","lastCursor","_cursorStep","arrangement_ClockTickComponent","arrangement_TimeRowComponent","arrangement_SelectionComponent","SelectionBox","arrangement_SubArrangementComponent","arrangement_RollsArrangementComponent","ArrangementView","idToEvent","savedArrangementContainer","copyRing","updateTrackSteps","copy","paste","duplicate","splitPattern","setMouseDownX","selecting","updateSelectedPatterns","getQuantizedStepFromPosition","getType","resizeEvent","fromStep","getSelectionStart","toStep","getSelectionEnd","overlapsStep","splitPianoRollPattern","onGlobalMouseUp","onMouseMoveResize","modals_ArrangementSearcher","arrangement_SidePanelContainer","arrangement_ArrangementContainer","arrangement_ArrangementBottom","playMix","setIsPlayingMix","setArrangementMouseDownX","recentlyAddedSounds","Tone","Master","setPluginsLoaded","plugin","description","setDescription","setThumbnail","creator","setCreator","versions","pluginMetadataURI","image","loadPlugin","pluginContentHash","createZObject","loadPresetJson","pluginsLoaded","plugins","setPlugins","getPlugins","plugins_PluginOption","plugins_PluginsList","isRecording","lastPlayedStepData","setStepParameterSelected","_ref$rounded","rounded","hover","setHover","getParameterValue","editing","setEditing","distY","_number","PARAMS","stepParameterSelected","cirklon","isAudioTrack","TrackFrozenComponent","isTrackFrozen","FreezeHistory","track_ParamValue","AUDIO","AUDITION_PREVIOUS","SynthThumbnail","hasInner","AUDITION_NEXT","getInstrumentComponent","div","small","zmessage","BANG","_locked","locked","getEffectTrack","setLocked","toggleLock","lock","getEffectType","AUDIO_FX","MIDI_FX","object","pluginViewerFor","track_TrackInformation","PAD","pad_PadInformation","ZOBJECT","zobject_ZObjectInformation","ZMESSAGE","zobject_ZMessageInformation","EFFECT","effects_EffectInformation","_doc","operationDocs","operationNames","paramName","replaceAll","actions","executeAction","Styler","setShowingColor","showingColor","setFocus","skey","setStyle","onChangeKey","onChangeValue","isNum","inner","ZNumber","hideNumber","attributes","readOnly","onFocus","startsWith","setObjectStyling","styling","","buttonRef","isLoading","AttributesInspector_Styler","connects","connectObject","inlet","outlet","found","createPad","fromObject","outlets","inlets","connectInlet","_outlet","connections","destNode","isPad","inputText","zobjectInputText","op","onClickOperation","bang","operation","operations","zobject_SubPatchTools","zobject_ObjectConnector","zobject_AttributesInspector","zobject_OperationDocs","TrackEffects","hasMidi","needsLabel","showEffect","PadVisualizer","names","sendNodeVolumeParameters","ParameterKnob","warpLength","warpFactor","resolvedTempo","warpLengthParameter","down","warpFactorParameter","up","_useWindowSlider","useWindowSlider","getWarp","trackPatternLocks","planar","showTrackInstrument","isWarped","trackWarps","setPulledEffects","setShowTrackInstrument","clearSelectedEffect","flip","pulledEffects","LockButton","togglePatternLock","unfreeze","freezePatterns","WarpButton","track_WarpKnob","ChokesAndMatches","CheckboxParameter","skipMidiMasterParameter","makeInstrumentRack","getSamplers","detuneParameter","track_TrackParameters","track_TrackQuickInstrument","track_TrackQuickEnvelopes","track_TrackQuickSends","track_TrackQuickAux","tools","ZNumberInspector","plane","filteredParameters","macroToShow","isRegionMode","regionMode","setIsRegionMode","setPlanarRegionMode","setMacroToShow","setPlanarMacroToShow","setSelectedPlanarParameters","setFilteredParameters","setFilteredPlanarParameters","_ref$selected","PlaneSidebar","setSelectedColor","isBoundsMode","effects_PlaneTools","documentation","track_TrackToolsSidebar","pad_PadToolsSidebar","zobject_ZMessageTools","zobject_ZObjectTools","effects_EffectTools","sidebarsShowing","secondaryZObject","rightSidebarOption","showPlugins","setRightSidebarOption","onKey","shiftKey","plugins_PluginsViewer","track_InstrumentViewer","Navigator","sidebar_ObjectInformation","sidebar_ToolsSidebar","AuditionSidebar","recent_RecentlyAddedSounds","sidebar_Sends","OptionTabs","SOUNDS","sidebarViewMode","getSelectedOption","OptionTabs_OptionTab","ADD_SOUNDS_BUTTON","onClear","hideUnderline","showSelectorMode","ADD_INSTRUMENTS_BUTTON","INSTRUMENTS","ADD_SEQUENCES_BUTTON","PACKS","OptionTab","PresetModal","sharingMode","usersInGuilds","usersToShare","shareToAll","sharePresetWithAllGuilds","presetId","sharePreset","onClose","Header","closeButton","Title","Body","getUserOptions","onSelectUser","onShareToAllCheckbox","Footer","variant","executeShare","onClickNo","onClickYes","onClickShare","InstrumentsView","addInstrumentTrack","addMetalSynthTrack","addFMSynthTrack","addZ4Track","addMidiTrack","setInstrumentTypeDragging","InstrumentsView_InstrumentOption","ADD_FM_SYNTH_BUTTON","onClickMultiSampler","ADD_MULTI_SYNTH_BUTTON","onClickMultiSynth","ADD_EXTERNAL_INSTRUMENT_BUTTON","onClickExternalInstrument","onClickInstrumentRack","InstrumentOption","help","setTrackPresetSaving","numInlets","numOutlets","function","PadPacks","initialSize","NotesComponent","getUserId","getUser","t1","t2","_onChange","_text","packs","packSelected","isEditing","packToEdit","currentPreset","currentSoundInList","setPackToEdit","setPackSelected","setCurrentSoundInList","loadAsPads","loadPackAsPads","onClickEdit","promises","matchingContent","all","_presets","getPresetsData","currentPresetHash","PackContent","setIsCurrent","setJson","packs_PackDetails","setSearchTerm","setPacks","filteredPacks","setFilteredPacks","searchPacks","getPacks","_packs","packs_PackSearch","packs_PackOption","setNewPack","setCreatingNewPack","packs_PacksSelector","SidebarComponent","showPresetModal","onClosePresetModal","loadWithLFOs","loadWithoutLFOs","padMappings","midiEffectDragging","setMidiEffectDragging","setEffectDragging","setPresetDragging","layerMode","chordSample","chord","addSound","setSampleAuditioning","EXTERNAL","setSidebarCollapsed","presetToLoad","folderToLoad","getAllItems","hideSequencer","MIX_VIEW","soundsSelectorComponent","Selector","ethereumSearcher","onAudition","onAddSound","packs_PacksComponent","instrumentsComponent","instruments_InstrumentsView","sequencesComponent","Sequences","presetsComponent","Presets","notesComponent","NOTES","notes_NotesComponent","ceil","isShowingSoundsPane","hidePresets","zIndexHack","sidebarClassName","disableStickiness","defaultView","sounds_OptionTabs","sidebar_ZObjectSidebar","presets_PresetModal","soundPane","showingContextMenu","isTrackFocused","trackFocused","showPresets","isShowingEffects","showTrackEffects","isMacroMapping","addSamplePack","moveTrackToGroup","destinationGroup","useEffects","getPatternLengths","patternLengths","freezeGroupByPatterns","bounces","_getGroupData","frozenGroup","frozenTracks","setLoadingText","sleep","bounceGroupPatterns","chopByPatterns","getGroupData","deleteGroup","addMultiFreezeTrack","newPattern","freeze","changeLength","getTrackJson","freezeGroup","getVolumeRatio","setParameterSliderDown","volumeParameter","smoothen","vol","fullRatio","getVolumeFromRatio","TrackMeter","meter","groupCollapsed","setGroupCollapsed","_useEffects","v","infoStyle","borderStyle","mix2_VolumeSlider","mix2_GroupActions","trackPannings","activeElement","blur","setPanning","rc_knob","angleOffset","angleRange","initialValue","arcWidth","background","radius","elem","mix2_PanKnob","marginTop","TrackOutputType","truncateName","selectedMidiEffect","setMixTrackDragging","isAlone","trackStyle","boxShadow","thumbnailClass","toggleMute","getTrackShortName","MidiEffectComponent","TriggerMeter","mix2_TrackControls","groupClassName","mix2_GroupVolumeControl","mix2_Track","mix2_Group","setIsSourcing","setRecords","RecordInfo","loadedRating","len","setExpandedProject","isNext","setPackToSearch","source","_ref$autoLoad","autoLoad","playOnLoad","added","loadedAudio","setLoadedAudio","stopped","disposed","isSourcing","setIsLoading","setSample","_useState13","_useState14","showSample","setShowSample","_useState15","_useState16","projectsUsed","setProjectsUsed","_useState17","_useState18","selectedSlice","setSelectedSlice","_useState19","_useState20","isTagging","setIsTagging","_useFavorites","useFavorites","toggleFavorite","isFavorited","_useState21","_useState22","guildName","setGuildName","getGuildName","isResample","loadSample","useNewSound","addSample","force","fetchAudio","_audioUnit","onHover","ContentDropdown","isUnsourced","margin","lineHeight","edits","FILTER_BY_TAG","SELECTOR_WAVEFORM","onChooseSlice","selector2_SourceFinder","setShowingSoundList","_ref$resultsCounter","resultsCounter","alone","resultsSize","isPack","loadEverything","setAutoLoad","thumbClassName","selector2_SampleOption","selector2_SourceResults","unsourcedResults","resultsCount","list","_results","currentTagInList","displayOption","resultsElement","lastQuery","_useScroll","scrollPosition","listResults","LIST","selector2_ListResults","Day","TAG","_ref$defaultGroupBy","defaultGroupBy","setDay","GRID","setDisplayOption","setGroupBy","setSource","setFilterFavorites","sourceToEdit","setSourceToEdit","goBack","backButton","hasBack","selector2_SourceEditor","selector2_SourceToSearch","selector2_PackToSearch","selector2_DayResults","selector2_SoundGrid","SampleSearch","dotStyle","presets_PresetOption","presets_SourceResults","getContent","_id","GuildPresetsContract","getPresets","taggedResults","combined","NewPreset2","decryptResults","getTagPresets","getInstrumentTypePresets","combineAll","filterBySearchTerms","PresetTag","PresetInstrumentType","_step3","_iterator3","_step4","_iterator4","setLoadEffects","setLoadMods","presets_DayResults","presets_ContentGrid","useEdgeAdjuster","_getMinLeftAndTop","getMinLeftAndTop","minTop","minLeft","_getMaxLeftAndTop","getMaxLeftAndTop","maxTop","maxLeft","_sequencerEngine$stat","edgesSize","edgesPadding","newSize","setEdgesSize","setEdgesPadding","adjust","scr","moduleSizes","mainScrollRef","showingSubpatch","editorPadding","showPadSequencer","uxLocked","setEditorPadding","editorRef","isExplore","edgesRef","lastZoom","startZoomPosition","startZoomScroll","mouseRef","paddingTop","paddingLeft","minHeight","killScrolling","handleScale","_mainScrollRef$curren","sx","sy","_width","_height","_y","_mainScrollRef$curren2","_mainScrollRef$curren3","doneLoading","innerRef","setSelectedPulledElements","useContainerCoords","_onDoubleClick","useSelection","onDoubleClick","_subSequence$tracks","createZNumber","createButton","createToggle","createSequencer","zobjectTypeDragging","tokens","subType","setZObjectTypeDragging","useModuleDrop","PulledEffects","playhead","noWrapper","ZObjectTooltip","ZObjectContextMenus","ZMessageComponent","TrackMidiEffects","effectRack","PadEffects","sequencers","PulledSequencer","GridTab","spatial_StyleSetter","ModuleSys5","completelyDoneLoading","pulledSequencers","mintToHic","useMintToHic","mintToZora","useMintToZora","fullScreen","openAsWindow","deleteZObject","SubMenu","hidden","hiddenObjects","lockedObjects","setUXLockObject","setUXHideObject","useTop","onDragLeave","effectAllowed","zobject_ZObjectContextMenu","dropActive","getAllNodesInSub","moveObjectInto","_className","onDragEnter","sidebar_ObjectOption","LINK_TYPES","_ref$show","alreadyMatched","setAlreadyMatched","artistInfo","setArtistInfo","showFlow","setShowFlow","linkType","setLinkType","artistValue","setArtistValue","websiteValue","setWebsiteValue","getArtistForSample","getArtistInfo","info","saveArtistInfo","newSampleByArtist","newArtistInfo","link","onChangeArtistName","href","loadSampleFromProject","_getTrackNumber","getTrackNumber","loadPattern","tracksData","_loop","_ret","_pattern","jsonStepBucket","stepBucket","stepBuckets","StepData","simpleLoad","loadStepBuckets","_trackData","slices","startTime","endTime","newSlice","_midiEffects","tracksMidiEffects","_ref$initialShow","initialShow","selectedProject","setSelectedProject","setNumPatterns","selectedPattern","setSelectedPattern","onClickProject","setShowEffects","setShowTrackEffects","setShowParams","setCirklonParameterSelected","toggleWaveform","useToggledWaveform","showPresetName","TRACK_RECORD_ARM_BUTTON","sidebar_TrackOverview","ItemComponent","lastDate","setSelectedPreset","depth","selectedPreset","nameValue","hovering","isDynamic","onClickName","onClickCollapsed","folderDragging","presetDragging","setFolderDragging","addFolder","deleteItem","addItem","setHasChangesToFolders","setSelectedFolder","folderNameClass","getArrow","onInputType","input","items","getNameComponent","subFolder","assign","folders_ItemComponent"],"mappings":"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","file":"static/js/2.5c32b21d.chunk.js","sourcesContent":["var apiToken = 'CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo';\nvar axios = require('axios');\n\nclass Discogs {\n\n    constructor() {\n        this.titleToLabels = {};\n        this.nameToLabelInfo = {};\n        this.nameToLabel = {};\n        this.idToReleases = {};\n    }\n\n    getLabels(title) {\n        return new Promise((resolve, reject) => {\n            if (this.titleToLabels[title] !== undefined) {\n                resolve(this.titleToLabels[title]);\n                return;\n            }\n\n            this.searchYoutubeTitle(title)\n                .then((result) => {\n                // get all the labels\n                var data = [];\n                if (result === null || result.label === undefined) {\n                    resolve(data);\n                }\n                result.label.map((label) => this.getLabelInfo(label, (ret) => {\n                    if (ret === null) {\n                        resolve(data);\n                        return;\n                    }\n                    var labelData = {\n                        id: ret.id,\n                        name: ret.name};\n                    if ('images' in ret) {\n                        labelData['thumbnail'] = ret.images[0].uri;\n                    }\n                    data.push(labelData);\n\n                    this.titleToLabels[title] = data;\n                    if (data.length == result.label.length) {\n                        resolve(data);\n                    } else {\n                    }\n                }));\n                })\n                .catch(err => {\n                    reject(err);\n                });\n        });\n    }\n\n    getReleaseInfo(discogsId) {\n        return new Promise((resolve, reject) => {\n            var url = 'https://api.discogs.com/releases/' + discogsId;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data !== undefined) {\n                    var results = ret.data;\n                    resolve(results);\n                } else {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n\n    searchRecords(recordName) {\n        return new Promise((resolve, reject) => {\n            console.log(\"searchinng name=\", recordName);\n            let query = recordName.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&type=release&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var results = ret.data.results;\n                    resolve(results);\n                } else {\n                    resolve([]);\n                }\n            });\n        });\n    }\n\n    searchLabel(labelName, callback) {\n        if (this.nameToLabel[labelName] !== undefined) {\n            return callback(this.nameToLabel[labelName]);\n        }\n        var query = labelName;\n        query = query.split(/\\s/g).join('+');\n        var url = 'https://api.discogs.com/database/search?q=' + query + '&type=label&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var result = ret.data.results[0];\n                    this.nameToLabel[labelName] = result;\n                    callback(result);\n                }\n            });\n\n    }\n\n    getLabelInfo(labelName, callback) {\n        this.searchLabel(labelName, function (result) {\n            var labelId = result.id\n            var url = 'https://api.discogs.com/labels/' + labelId + '?token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    callback(ret.data);\n                })\n                .catch(function (err) {\n                    callback(null);\n                });\n        });\n            \n    }\n\n    getLabelReleases(labelId, page) {\n        return new Promise((resolve, reject) => {\n            if (this.idToReleases[labelId + '_' + page] !== undefined) {\n                resolve(this.idToReleases[labelId + '_' + page]);\n                return;\n            }\n            var url = 'https://api.discogs.com/labels/' + labelId +\n            '/releases?token=' + apiToken + '&page=' + page + '&per_page=8';\n            axios.get(url)\n                .then((ret) => {\n                    this.idToReleases[labelId + '_' + page] = ret.data;\n                    resolve(ret.data);\n                })\n                .catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n    searchYoutubeTitle(youtubeTitle) {\n        return new Promise((resolve, reject) => {\n            var searchObject = parseTitleString(youtubeTitle);\n            var query = searchObject.artist + ' - ' + searchObject.title;\n            query = query.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    var results = ret.data.results;\n                    var earliestResult = null;\n                    for (var i in results) {\n                        if ((earliestResult == null ||\n                             (results[i].year < earliestResult.year)) && \n                            results[i].title.includes(searchObject.title))\n                        {\n                            earliestResult = results[i];\n                        }\n                    }\n                    if (earliestResult == null) {\n                        // get the first result\n                        for (var i in results) {\n                            return resolve(results[i]);\n                        }\n                    }\n                    resolve(earliestResult);\n                })\n                .catch(function (err) {\n                    reject(err);\n                });;\n        });\n    }\n}\n\n// TODO: provide an array of potential separators\n// var SEPARATORS = [' - ', '  ', ' -- ']\n// note that these can have spaces, but sometimes do not\n// TODO: output a testing dataset for changes to this function.\n\nvar TRACK_SEPARATOR = ' - ';\nfunction parseTitleString(string, partsCallback) {\n  var artist, title, credits = [];\n  var string = string || '';\n\n  function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n  }\n\n  // TODO: load from datafile\n    var baddies = ['Full Album', 'Full vinyl', 'LP', '[dubstep]', '(full album)', '[electro]', '[edm]', '[house music]',\n    '[glitch hop]', '[video]', '[official video]', '(official video)',\n    '(official music video)', '(lyrics)',\n    '[ official video ]', '[official music video]', '[free download]',\n    '[free dl]', '( 1080p )', '(with lyrics)', '(high res / official video)',\n    '(music video)', '[music video]', '[hd]', '(hd)', '[hq]', '(hq)',\n    '(original mix)', '[original mix]', '[lyrics]', '[free]', '[trap]',\n    '[monstercat release]', '[monstercat freebie]', '[monstercat]',\n    '[edm.com premeire]', '[edm.com exclusive]', '[enm release]',\n    '[free download!]', '[monstercat free release]'];\n  baddies.forEach(function(token) {\n    string = string.replace(token + ' - ', '').trim();\n    string = string.replace(token.toUpperCase() + ' - ', '').trim();\n    string = string.replace(token.toLowerCase() + ' - ', '').trim();\n\n    string = string.replace(token, '').trim();\n    string = string.replace(token.toUpperCase(), '').trim();\n    string = string.replace(token.toLowerCase(), '').trim();\n  });\n\n    string = string.replace(/ *\\([^)]*\\) */g, '').trim();\n    string = string.replace(/ *\\[[^)]*\\] */g, '').trim();\n\n\n  var parts = string.split( ' - ' );\n\n  for (var i = 0; i < parts.length; i++) {\n    if ( baddies.indexOf( parts[i].toLowerCase() ) >= 0 ) {\n      parts.splice( i , 1 );\n    }\n  }\n\n  if (parts.length == 2) {\n    artist = parts[0];\n    title = parts[1];\n  } else if (parts.length > 2) {\n    // uh...\n    artist = parts[0];\n    title = parts[1];\n  } else {\n    artist = parts[0];\n    title = parts[0];\n  }\n\n\n  // one last pass\n  baddies.forEach(function(baddy) {\n    title  = title.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n    artist = artist.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n  });\n\n  // look for certain patterns in the string\n  credits.push(  title.replace(/(.*)\\((.*) remix\\)/i,       '$2').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push(  title.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push( artist.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$1').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$2').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$1').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$2').trim() );\n\n  var creditMap = {};\n  credits.forEach(function(credit) {\n    if (credit !== title) { // temp., until we find out why title is in credits\n      creditMap[ credit ] = credit;\n    }\n  });\n\n  var output = {\n      artist: artist\n    , title: title\n    , credits: Object.keys(creditMap)\n  };\n\n    return output;\n}\n\nexport default Discogs;\n","import BackendQuery from 'decentralized/BackendQuery.js';\nimport {isNumber} from 'utils/IsNumber.js';\nimport accounts from 'accounts/Accounts.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport {getReleases} from 'decentralized/artists/Artists.js';\nimport {getRatings} from 'utils/getRatings.js';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport GuildSamplesContract from 'decentralized/contracts/GuildSamplesContract.js';\nimport {\n    SampleCreated,\n    SampleYoutube,\n    NewDiscogsSample,\n    SampleTagged\n} from 'decentralized/EthereumEvents.js';\n\nlet contractAddress = new GuildSamplesContract().contractAddress;\nconst blocksPerDay = 6425;\nconst cache = {};\n\n/**\n * Want to return a list of grouped samples, grouped by:\n ** day\n ** source\n ** tag\n \n * First need to get recent results paginated for a certain range\n * \n*/\n\nexport const getSoundResultsServer = (pageSize=50, searchTerms, guildId=0, groupBy, start, filterFavorites, sourceToSearch, tag, packToSearch) => {\n    let year = undefined;\n    if (isNumber(searchTerms)) {\n        let _year = parseInt(year);\n        if (_year > 1945 && _year < 2200) {\n            year = _year\n        } \n    }\n    return new Promise(async (resolve, reject) => {\n        let {releaseId, videoId} = sourceToSearch || {};\n        let guildIds = guildId !== 0 ? [guildId] : await ethereum.getGuildsWithAccess();\n        let pack = packToSearch ? packToSearch.packHash : undefined;\n        let userId = await accounts.getAccount();\n        let body = JSON.stringify({\n            size: Math.floor(pageSize),\n            pack,\n            searchTerm: searchTerms,\n            guildIds: guildIds,\n            groupBy,\n            year,\n            start: Math.floor(start),\n            filterFavorites,\n            releaseId,\n            videoId,\n            tag,\n            user: userId\n        });\n        fetch('/searchByDay/' , {\n                method: 'POST',\n            body,\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                resp.sort((a,b) => b.blockNumber - a.blockNumber)\n                resolve(resp);\n            });\n    });\n}\n\nexport const getSoundResults = async (searcher, searchTerms, len=8000, guildIds=[0]) => {\n    if (searchTerms in cache) {\n        return cache[searchTerms];\n    }\n\n    let recentSounds =  await getRecentSounds(searcher, searchTerms, len, guildIds);\n    if (recentSounds.length === 0) {\n        return [];\n    }\n    let recentDiscogs =  await getRecentDiscogs(recentSounds, len, guildIds);\n    let recentReleases =  await getRecentReleases(recentDiscogs);\n    let recentYoutubes =  await getRecentYoutubeSamples(recentSounds, len, guildIds);\n    let recentTags =  await getRecentTags(recentSounds, len*3, guildIds);\n    let ratings = await getRatings(recentSounds.map(x => x.ipfsHash));\n    let sounds = combineAll(recentSounds, recentDiscogs, recentYoutubes, recentTags, ratings, recentReleases);\n\n    let byDay = getByDay(sounds);\n    let byDayAndSource = partitionBySource(byDay, searchTerms);\n    let x = await fetchDaysForBlocks(byDayAndSource);\n    cache[searchTerms] = x;\n    return x;\n};\n\nexport const getRecentSounds = async (searcher, searchTerm, len=500, guildIds) => {\n    let soundIds = undefined;\n    let filterByTitle = false;\n    if (searchTerm.trim() !== \"\") {\n        let searchResults = await searcher.freeTextSearch(searchTerm);\n        let tags = searchResults.TAG.map(x => x.value);\n        if (tags.length === 0) {\n            filterByTitle = true;\n        } else {\n            soundIds = await getSoundsWithOrTags(tags);\n            if (soundIds.length === 0) {\n                return [];\n            }\n        }\n    }\n\n    let query = new BackendQuery(contractAddress)\n        .from(SampleCreated)\n        .select(\"ipfsHash\")\n        .select(\"user\")\n        .select(\"title\")\n        .whereIn(\"guildId\", guildIds)\n        .limit(len);\n\n    if (soundIds) {\n        query.whereIn(\"ipfsHash\", soundIds);\n    }\n\n    let ret = await query.executeQuery();\n    if (filterByTitle) {\n        searchTerm = searchTerm.toLowerCase();\n        return ret.filter(\n            x => x.title.toLowerCase().includes(searchTerm));\n    }\n    return ret;\n};\n\nexport const getRecentDiscogs = async (recentSounds, len=500, guildIds) => {\n    let query = new BackendQuery(contractAddress)\n        .from(NewDiscogsSample)\n        .select(\"sampleHash\")\n        .select(\"coverArtHash\")\n        .select(\"discogsId\")\n        .whereIn(\"guildIds\", guildIds)\n        .whereIn(\"sampleHash\", recentSounds.map(x => x.ipfsHash))\n        .limit(len);\n\n    return await query.executeQuery();\n};\n\nexport const getRecentYoutubeSamples = async (recentSounds, len=500, guildIds) => {\n    let query = new BackendQuery(contractAddress)\n        .from(SampleYoutube)\n        .select(\"ipfsHash\")\n        .select(\"videoId\")\n        .whereIn(\"guildIds\", guildIds)\n        .whereIn(\"ipfsHash\", recentSounds.map(x => x.ipfsHash))\n        .limit(len);\n\n    return await query.executeQuery();\n};\n\nexport const getRecentTags = async (recentSounds, len=500, guildIds) => {\n    let query = new BackendQuery(contractAddress)\n        .from(SampleTagged)\n        .select(\"ipfsHash\")\n        .select(\"tag\")\n        .whereIn(\"guildIds\", guildIds)\n        .whereIn(\"ipfsHash\", recentSounds.map(x => x.ipfsHash))\n        .limit(len);\n\n    let results = await query.executeQuery();\n    let tags = {};\n    for (let result of results) {\n        if (!(result.ipfsHash in tags)) {\n            tags[result.ipfsHash] = [];\n        }\n        tags[result.ipfsHash].push(result.tag);\n    }\n    for (let key in tags) {\n        tags[key] = Array.from(new Set(tags[key]));\n    }\n    return tags;\n};\n\nconst combineAll = (sampleCreated, newDiscogs, sampleYoutube, tags, ratings, recentReleases) => {\n    let combined = {};\n    for (let result of sampleCreated) {\n        combined[result.ipfsHash] = {\n            ... result,\n            tags: tags[result.ipfsHash] || [],\n            rating: ratings[result.ipfsHash]\n        };\n    }\n\n    for (let ipfsHash in recentReleases) {\n        combined[ipfsHash] = {\n            ... combined[ipfsHash],\n            ... recentReleases[ipfsHash]\n        };\n    }\n\n    for (let result of newDiscogs) {\n        combined[result.sampleHash] = {\n            ... combined[result.sampleHash],\n            ... result\n        };\n    }\n\n    for (let result of sampleYoutube) {\n        combined[result.ipfsHash] = {\n            ... combined[result.ipfsHash],\n            ... result\n        };\n    }\n\n    let results = [];\n    for (let result of sampleCreated) {\n        results.push(combined[result.ipfsHash]);\n    }\n\n    return results;\n}\n\nexport const getByDay = (results) => {\n    // first try to find blocks that are within a certain range\n    let blocks = [];\n    for (let result of results) {\n        let {blockNumber} = result;\n        let lastBlock = blocks[blocks.length - 1];\n        if (lastBlock === undefined) {\n            blocks.push({\n                blockNumber,\n                results: [result]\n            });\n        } else {\n            let lastBlockNumber = lastBlock.blockNumber;\n            if (Math.abs(lastBlockNumber - blockNumber) <= blocksPerDay) {\n                lastBlock.results.push(result);\n            } else {\n                blocks.push({\n                    blockNumber,\n                    results: [result]\n                });\n            }\n        }\n    }\n    return blocks;\n};\n\nexport const partitionBySource = (byDay, searchTerm) => {\n    for (let dayResult of byDay) {\n        let {results} = dayResult;\n        let discogs = {};\n        let instrumentTypes = {};\n        let youtube = {};\n        let unsourced = {};\n        for (let result of results) {\n            if (result.discogsId) {\n                if (discogs[result.coverArtHash] === undefined) {\n                    discogs[result.coverArtHash] = [];\n                } else {\n                }\n                discogs[result.coverArtHash].push(result);\n            } else if (result.videoId) {\n                if (youtube[result.videoId] === undefined) {\n                    youtube[result.videoId] = [];\n                }\n                youtube[result.videoId].push(result);\n            } else {\n                let tag = result.tags[0] || '';\n                if (searchTerm !== '' && result.tags.some(tag => !tag.toLowerCase().includes(searchTerm.toLowerCase()))) {\n                    tag = result.tags.find(tag => !tag.toLowerCase().includes(searchTerm.toLowerCase()) &&\n                                          tag !== 'Resampled');\n                    if (tag === undefined) {\n                        tag = result.tags[0];\n                    }\n                }\n                if (unsourced[tag] === undefined) {\n                    unsourced[tag] = [];\n                }\n                unsourced[tag].push(result);\n\n                if (result.instrumentType) {\n                    if (instrumentTypes[result.instrumentType] === undefined) {\n                        instrumentTypes[result.instrumentType] = [];\n                    }\n                    instrumentTypes[result.instrumentType].push(result);\n                }\n            }\n        }\n        dayResult.discogs = discogs;\n        dayResult.youtube = youtube;\n        dayResult.unsourced = unsourced;\n        dayResult.instrumentTypes = instrumentTypes;\n    }\n    return byDay;\n};\n\nexport const fetchDaysForBlocks = async (byDayAndSource) => {\n    for (let i in byDayAndSource) {\n        let result = byDayAndSource[i];\n        /*\n        let day = new Date(); //await getBlockDate(parseInt(result.blockNumber));\n        result.date = day;\n        */\n    }\n    return byDayAndSource;\n};\n\nconst getSoundsWithOrTags = async (tags) => {\n    let soundIds = [];\n    let query = new BackendQuery(contractAddress)\n        .from(SampleTagged)\n        .select(\"ipfsHash\")\n        .whereIn(\"tag\", tags);\n    let results = await query.executeQuery();\n    return results.map(x => x.ipfsHash);\n};\n\nconst getRecentReleases = async (recentDiscogs) => {\n    let discogIds = recentDiscogs.map(x => x.discogsId);\n    let releases = await getReleases(discogIds);\n    let results = {};\n    for (let result of recentDiscogs) {\n        results[result.sampleHash] = releases[result.discogsId];\n    }\n    return results;\n}\n","import axios from 'axios';\nimport ipfs from 'decentralized/Ipfs.js';\n\nexport const downloadImage = (thumb) =>  {\n    return new Promise((resolve, reject) => {\n        axios.get('http://0.0.0.0:9092/' + thumb,\n                  {\n                      responseType: 'blob'\n                  })\n            .then(result => {\n                let blob = result.data;\n                ipfs.addBlob(blob).then((hash) => {\n                    console.log('Downloaded thumb = ', hash);\n                    resolve(hash);\n                });\n            });\n    });\n};\n \n","import React, { Component } from 'react';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport SingleLFOComponent from './SingleLFOComponent.js';\nimport SystemEnvelopeComponent from 'components/envelope/SystemEnvelopeComponent.js';\nimport {setShowEnvelopes} from 'actions/index.js';\nimport {setShowLFOs} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport {setContextualHelp} from \"actions/index.js\";\nimport {LFOS_BUTTON} from 'constants/contextual-help.js';\nimport {ENVELOPES_BUTTON} from 'constants/contextual-help.js';\n\nclass LFOTrackComponent extends Component {\n\n    get patternLocked() {\n        if (this.props.showLFOs) {\n            return this.props.lfoPatternLocked;\n        } else if (this.props.showEnvelopes) {\n            return this.props.envelopePatternLocked;\n        }\n        return false;\n    }\n\n    onClickLFOThumbnail() {\n        this.props.setShowEnvelopes(false);\n        this.props.setShowLFOs(!this.props.showLFOs);\n    }\n\n    onClickEnvelopeThumbnail() {\n        this.props.setShowLFOs(false);\n        this.props.setShowEnvelopes(!this.props.showEnvelopes);\n    }\n\n    onClickLock() {\n        if (this.props.showLFOs) {\n            this.props.lfosTrack.togglePatternLocked();\n        } else if (this.props.showEnvelopes) {\n            this.props.envelopesTrack.togglePatternLocked();\n        }\n    }\n\n    render() {\n        let className = this.props.isMixView ? 'track flex lfos-track mix-view' : 'track flex lfos-track';\n        let lfoThumbnailClassName = this.props.showLFOs ?\n            'lfo-thumbnail selected' : 'lfo-thumbnail';\n        let envelopeThumbnailClassName = this.props.showEnvelopes ?\n            'lfo-thumbnail selected' : 'lfo-thumbnail';\n        return (\n            <div\n              key={'lfo-tracks'}\n              onClick={() => []} className={className}>\n              <a name='lfos'/>\n              <a name='envelopes'/>\n              <div className='unselected youtube-container'>\n                <div className='lfo-envelope-button-container'>\n                  <div\n                    onMouseOver={() => this.props.setContextualHelp(LFOS_BUTTON)}\n                    onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                    onClick={() => this.onClickLFOThumbnail()} \n                    className={lfoThumbnailClassName}>\n                    LFO\n                  </div>\n                  <div \n                    onMouseOver={() => this.props.setContextualHelp(ENVELOPES_BUTTON)}\n                    onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                    onClick={() => this.onClickEnvelopeThumbnail()} \n                    className={envelopeThumbnailClassName}>\n                    ENV\n                  </div>\n                </div>\n              </div>\n              <ConditionedComponent condition={this.props.showLFOs}>\n                <div className=\"lfo-effects-view\">\n                  {this.props.lfosTrack.lfos.map(\n                      lfo => \n                          <SingleLFOComponent key={lfo.number} sequencerEngine={this.props.sequencerEngine} lfo={lfo}/>)}\n                </div>\n             </ConditionedComponent>\n              <ConditionedComponent condition={this.props.showEnvelopes}>\n                <div className=\"lfo-effects-view\">\n                  {this.props.envelopesTrack.envelopes.map(\n                      envelope => \n                    <SystemEnvelopeComponent\n                      key={envelope.number}\n                      scrollContainer={this.props.scrollContainer}\n                      sequencerEngine={this.props.sequencerEngine}\n                      envelopeTrack={envelope}/>)}\n                </div>\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.showLFOs || this.props.showEnvelopes}>\n                <div className=\"lock-button-container\">\n                  <img\n                    onClick={() => this.onClickLock()}\n                    className=\"lock-button\"\n                    src={this.patternLocked ? \"/closed-padlock.png\" : \"/opened-padlock.png\"}/>\n                </div>\n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setShowEnvelopes: s => dispatch(setShowEnvelopes(s)),\n        setShowLFOs: s => dispatch(setShowLFOs(s)),\n        setContextualHelp: (element) => dispatch(setContextualHelp(element)),\n    };\n};\n\nconst mapStateToProps = (state, props) => {\n    let subSequenceEnvelopeLocks = state.tracks.envelopePatternLocks[props.envelopesTrack.subSequence.id] || {};\n    let envelopePatternLocked = subSequenceEnvelopeLocks[props.sequencerEngine.currentPattern];\n    let subSequenceLFOLocks = state.tracks.lfoPatternLocks[props.lfosTrack.subSequence.id] || {};\n    let lfoPatternLocked = subSequenceLFOLocks[props.sequencerEngine.currentPattern];\n    return {\n        showLFOs: state.sequencer.showLFOs,\n        showEnvelopes: state.sequencer.showEnvelopes,\n        lfoPatternLocked: lfoPatternLocked,\n        envelopePatternLocked: envelopePatternLocked,\n    };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LFOTrackComponent);\n","import React, { useEffect, useState, useCallback } from 'react';\nimport SendEffect from './SendEffect.js';\nimport { connect } from \"react-redux\";\nimport Dropdown from 'react-dropdown';\nimport {effectOptions, getEffectOption, initializeEffect} from 'components/effects/constants.js';\nimport '../../Sends.scss';\n\nconst SendComponent = (props) => {\n    let [value, setValue] = useState(undefined);\n    let channel = props.masterChannel || props.send;\n    let effects = props.masterChannel ?\n        props.masterChannel.effectsChain.effects : props.send.effects;\n\n    const handleChooseEffect = useCallback((e) => {\n        let effect = initializeEffect(e.value, props.sequencerEngine);\n        effect.enable(true);\n        if (effect.wetParameter) {\n            effect.wetParameter.set(1);\n        }\n        channel.addEffect(effect);\n        setValue(e.value);\n        return false;\n    }, [setValue, props.sequencerEngine, channel]);\n\n    useEffect(() => {\n        if (value) {\n            setValue(undefined);\n        }\n    }, [value, setValue]);\n\n    const moveEffectTo = useCallback((from, to) => {\n        channel.moveEffectTo(from, to);\n        setValue({from, to});\n    }, [setValue, channel]);\n\n    return (\n        <div className=\"send\">\n          <div className=\"name-and-chooser\">\n            <div className=\"send-name\">\n              {props.name || props.send.name}\n            </div>\n            <Dropdown\n              className='send-effects-dropdown'\n              options={effectOptions}\n              value={value}\n              onChange={handleChooseEffect}\n              placeholder=\"FX\" />\n          </div>\n          {effects.map(\n              (effect, i) =>\n                  <SendEffect key={effect.id} moveEffectTo={moveEffectTo} effectNumber={i} effect={effect}/>)}\n       </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    if (props.masterChannel) {\n        return {\n            effects: props.masterChannel.effectsChain.effects\n        };\n    } else {\n        return {\n            effects: props.send.effects\n        };\n    }\n};\n\nexport default connect(mapStateToProps, null)(SendComponent);\n\n","import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { connect } from \"react-redux\";\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport SendComponent from './SendComponent.js';\nimport {\n    setSelectedSendEffect,\n} from 'actions/index.js';\nimport '../../Sends.scss';\n\nfunction SendsTrackComponent(props) {\n    const [sends, setSends] = useState(props.sequencerEngine.sends.sends);\n    let ref = useRef(undefined);\n\n    const onDelete = useCallback(() => {\n        props.setSelectedSendEffect(undefined);\n    }, []);\n\n\n    useEffect(() => {\n        return () => props.setSelectedSendEffect(undefined);\n    }, []);\n    let selectedEffect = '';\n    if (props.selectedEffect) {\n        let send = sends.find(x => x.effects.indexOf(props.selectedEffect) > -1);\n        if (!send) {\n            let masterChannel = props.sequencerEngine.channelMixer.masterChannel;\n            if (masterChannel.effectsChain.effects.includes(props.selectedEffect)) {\n                send = masterChannel;\n            }\n        }\n        if (send) {\n            selectedEffect = (\n                <EffectComponent\n                  sequencerEngine={props.sequencerEngine}\n                    noSelect={true}\n                  scrollContainer={[props.scrollContainer, ref]}\n                  isDraggable={false}\n                  onDeleteEffect={() => onDelete()}\n                  effect={props.selectedEffect}\n                  send={send}/>);\n        }\n    }\n\n    const createNewSend = useCallback(() => {\n        props.sequencerEngine.sends.createNewSend();\n        setSends([... props.sequencerEngine.sends.sends]);\n    }, [setSends]);\n\n    return (\n        <div ref={ref} className=\"track sends\">\n          <div className=\"track-container\">\n          <div className=\"track-header\">\n            <div className=\"track-name-view\">\n              Routing\n            </div>\n          </div>\n          <div className=\"sends-container\">\n            {sends\n             .filter(send => !send.pad)\n             .map((send, i) => <SendComponent key={i} sequencerEngine={props.sequencerEngine} send={send}/>)}\n            <SendComponent name=\"Mix\" sequencerEngine={props.sequencerEngine}\n                           masterChannel={props.sequencerEngine.channelMixer.masterChannel}/>\n            {selectedEffect}\n            <div\n              onClick={createNewSend}\n              className=\"new-send-button\">New Send</div>\n        </div>\n          </div>\n        </div>\n    );\n}\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedEffect: state.effects.selectedSendEffect,\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedSendEffect: (e) => dispatch(setSelectedSendEffect(e))\n   }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendsTrackComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Tags = ({setTags, tags, placeholder=\"Type tags\"}) => { \n    let [value, setValue] = useState('');\n    const deleteTag = useCallback(t => {\n        setTags(\n            tags.filter(x => x !== t));\n    }, [tags, setTags]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter') {\n            setTags([... tags, value]);\n            setValue('');\n        }\n    }, [setTags, tags, value]);\n \n    return (\n        <div className=\"tags\">\n          {tags.map(tag => <div onClick={() => deleteTag(tag)} className=\"tag-option\">{tag}</div>)}\n          <input placeholder={placeholder} className=\"tag-sample-input\" onKeyDown={onKeyDown} value={value} type=\"text\" onChange={e => setValue(e.target.value)}/>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tags);\n","import React, { useCallback } from 'react';\nimport ParameterVisual from 'components/mix/mix2/ParameterVisual.js';\nimport { connect } from \"react-redux\";\nimport {\n    dragEffect,\n    setSelectedSendEffect,\n} from 'actions/index.js';\nimport '../../Sends.scss';\n\nfunction SendEffect(props) {\n    const onDragOver = (e) => {\n        e.preventDefault();\n    };\n\n    const onDragStart = useCallback((e) => {\n        props.dragEffect({effectNumber: props.effectNumber});\n    }, [props.effectNumber]);\n\n    const onDrop = useCallback((e) => {\n        e.stopPropagation()\n        if (props.effectDragging === undefined) {\n            return;\n        }\n        let {effectNumber} = props.effectDragging;\n        props.moveEffectTo(effectNumber, props.effectNumber);\n    }, [props.effectNumber, props.effectDragging]);\n\n    const selectEffect = useCallback((e) => {\n        console.log('setting selected send effect=',\n            props.isSelected ? undefined : props.effect);\n        props.setSelectedSendEffect(\n            props.isSelected ? undefined : props.effect);\n    }, [props.isSelected, props.effect]);\n\n    let className = \"send-effect\";\n    if (props.isSelected) {\n        className += \" selected\";\n    }\n\n    let parameters = props.effect.getParameters();\n    if (parameters.length > 10) {\n        parameters = parameters.slice(0, 10);\n    }\n    return (\n        <div\n          onClick={selectEffect}\n          onDragOver={onDragOver}\n          onDrop={onDrop}\n          onDragStart={onDragStart}\n          draggable\n          className={className}>\n          <div className=\"effect-name\">\n            {props.effect.name}\n          </div>\n          {parameters.map(parameter => <ParameterVisual key={parameter.id} parameter={parameter}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        effectDragging: state.sequencer.effectDragging,\n        isSelected: state.effects.selectedSendEffect === props.effect,\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        dragEffect: (e) => dispatch(dragEffect(e)),\n        setSelectedSendEffect: (e) => dispatch(setSelectedSendEffect(e))\n   }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendEffect);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectOption from './EffectOption.js';\nimport Dropdown from 'react-dropdown';\nimport MidiEffectComponent from 'components/effects/MidiEffectComponent.js';\nimport Colors from 'components/Colors.js';\nimport SendEffect from '../../track/SendEffect.js';\nimport {midiEffectOptions, getMidiEffectOption, initializeMidiEffect} from 'components/effects/constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedMixEffect,\n} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst AudioEffects = ({\n    currentSubSequence,\n    track,\n    sequencerEngine,\n    selectedEffect,\n    setSelectedEffect}) => { \n        let [value, setValue] = useState(undefined);\n        let effects = track ? track.midiEffects.effects : [];\n        \n        const moveEffectTo = useCallback((from, to) => {\n            track.moveMidiEffectTo(from, to);\n            setValue({from, to});\n        }, [track, setValue]);\n        \n        const onDelete = useCallback(() => {\n            setSelectedEffect(currentSubSequence, track.id, undefined, undefined);\n        }, [currentSubSequence, track]);\n\n        let fxComponent = '';\n        if (selectedEffect && effects.some(e => e.id === selectedEffect.id)) {\n            fxComponent = (\n                <MidiEffectComponent\n                  sequencerEngine={sequencerEngine}\n                  isDraggable={false}\n                  track={track}\n                  compact={true}\n                  onDeleteEffect={() => onDelete()}\n                  effect={selectedEffect}\n                  send={undefined}/>);\n        }\n\n        const handleChooseEffect = useCallback((e) => {\n            let effect = initializeMidiEffect(e.value, track);\n            track.midiEffects.addEffect(effect);\n            setSelectedEffect(currentSubSequence, track.id, undefined, effect);\n            return false;\n        }, [setValue, sequencerEngine, track]);\n\n        let name = \"\";\n        let style = {\n        };\n        console.log(\"SELECTED EFFECT =\" , selectedEffect);\n        return (\n            <div className=\"audio-effects\">\n              <div\n                style={style}\n                className=\"effects-channel-strip\">\n               <div className=\"effects-list\">\n                  {effects.map(\n                      (effect, i) =>\n                          <EffectOption\n                            key={effect.id}\n                            track={track}\n                            currentSubSequence={track}\n                            effectType={\"MIDI_FX\"}\n                            moveEffectTo={moveEffectTo}\n                            effectNumber={i}\n                            effect={effect}/>)}\n                </div>\n                <Dropdown\n                  className='send-effects-dropdown'\n                  options={midiEffectOptions}\n                  onChange={handleChooseEffect}\n                  placeholder=\"MIDI FX\" />\n             </div>\n\n              <div className=\"effects-view\">\n                {fxComponent}\n              </div>\n            </div>);\n    }\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrack = props.track.id;\n    let selectedGroup = state.mix.selectedGroup;\n    let subId = state.sequencer.currentSubSequence[props.sequencerEngine.engineId];\n    let track = props.track;\n    return {\n        selectedTrack, \n        selectedGroup,\n        effectsLength: track.midiEffects.effects.length,\n        selectedEffect: selectedTrack !== undefined ? state.mix.selectedTrackMidiEffects[subId] &&\n            state.mix.selectedTrackMidiEffects[subId][selectedTrack] :\n            undefined,\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedEffect: (sub, trackNumber, groupNumber, effect) => dispatch(\n            setSelectedMixEffect(sub, trackNumber, groupNumber, \"MIDI_FX\", effect))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from \"decentralized/Ipfs.js\";\nimport {connect} from 'react-redux';\n\nconst NAMES = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];\n\nconst ModuleOption = ({project, sequencerEngine}) => { \n    let [data, setData]= useState(undefined);\n    let [modules, setModules] = useState([]);\n    let [module, setModule] = useState(undefined);\n    useEffect(() => {\n        ipfs.getJson(project.newSequence).then(setData);\n    }, [setData]);\n\n    const onClickModule = useCallback((i) => {\n        sequencerEngine.loadSequence(project.newSequence, i);\n    }, [project]);\n\n    useEffect(() => {\n        if (data) {\n            setModules(data.subSequences);\n        }\n    }, [data, setModules]);\n    return (\n        <div\n          className=\"module-option\">\n          <div className=\"basic\">\n            <div className=\"project-name\">{project.title}</div>\n            <div className=\"module-types\">\n              {modules.map((x, i) => <div\n                                       onClick={() => onClickModule(i)}\n                                       className=\"module-name\">{NAMES[i]}</div>)}\n            </div>\n          </div>\n          {module !== undefined &&\n           <div className=\"expansion\">\n           </div>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {SIZE} from './constants.js';\n\nconst AutomationPaths = ({automationPaths}) => { \n    const getPath = (path) => {\n        return \"M \" + SIZE*path[0].x + ','+ SIZE*path[0].y + \" L \" +\n            path.slice(1).map(({x,y}) => x*SIZE +','+ y*SIZE).join(',');\n        \n    };\n    return automationPaths.map(\n        _path =>\n            <path fill=\"transparent\" d={getPath(_path)} strokeWidth={2} stroke=\"red\"/>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AutomationPaths);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ModuleOption from './ModuleOption.js';\nimport {connect} from 'react-redux';\nimport '../../ModuleLoader.scss';\nimport {useScroll} from 'components/selector2/useScroll.js';\nimport {getProjects} from 'components/sequences2/getProjects.js';\n\nconst ModuleLoader = (props) => { \n    let [clicked, setClicked] = useState(false);\n    let [value, setValue] = useState('');\n    let [projects, setProjects] = useState([]);\n    const ref = useRef(undefined);\n    let {size} = useScroll(ref, 16, true, value);\n\n    useEffect(() => {\n        if (clicked) {\n            getProjects(value).then(\n                setProjects);\n        }\n    }, [clicked, setProjects, value]);\n\n    if (!clicked) {\n        return (<div>\n                  <div\n                    onClick={() => props.sequencerEngine.newSubSequence()}\n                    className=\"needs-click module-loader new-module\">\n                    <div className=\"click-me\">\n                      New Module\n                    </div>\n                  </div>\n                  <div\n                    onClick={() => setClicked(true)}\n                    className=\"needs-click module-loader\">\n                    <div className=\"click-me\">\n                      Click to load modules\n                    </div>\n                  </div>\n                </div>\n               );\n    }\n    return (\n        <div className=\"module-loader\">\n          <input type=\"text\" placeholder=\"Search for modules\" value={value} onChange={e => setValue(e.target.value)}/>\n          <div ref={ref} className=\"module-list\">\n            {projects.filter(p => p.guildId === 0).slice(0, size).map(\n                p => <ModuleOption\n                       key={p.newSequence}\n                       sequencerEngine={props.sequencerEngine} project={p}/>)}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleLoader);\n","export const SIZE = 32;\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setShowHigherOrderSequencer,\n    } from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst HigherOrderHeader = ({setShowHigherOrderSequencer, show}) => { \n    return (\n        <div\n          className=\"higher-order-component\">\n          <div className=\"higher-order-header\">\n            <div className=\"name\">\n              H=O Sequencer\n            </div>\n            <div className=\"collapse-container\">\n              <div onClick={() => setShowHigherOrderSequencer(!show)} className={show ? \"arrow-down\" : \"arrow-left\"}>\n              </div>\n            </div>\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.higherOrder.show\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowHigherOrderSequencer: (x) => dispatch(setShowHigherOrderSequencer(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderHeader);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst ModuleRouter = ({inputModules, outputModules, higherOrderSequencer}) => { \n    let modules = higherOrderSequencer.sequencerEngine.subSequences;\n    return (\n        <div className=\"module-router\">\n        {modules.map(\n            mod =>\n                <div className=\"module-routes\">\n                  <div className=\"module-indicator\">\n                    {mod.name}\n                  </div>\n                  <img\n                    onClick={() => higherOrderSequencer.toggleInput(mod)}\n                    src={!inputModules.includes(mod) ?\n                            \"/black-arrow.svg\" :\n                            \"/gray-arrow.svg\"}/>\n                </div>\n        )}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let modules = props.higherOrderSequencer.sequencerEngine.subSequences;\n    return {\n        num: modules.length,\n        inputModules: state.higherOrder.inputModules,\n        outputModules: state.higherOrder.outputModules,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleRouter);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setHigherOrderStepsSelected} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst RoutingMatrix = ({orientation, higherOrderSequencer, setHigherOrderStepsSelected}) => { \n    let routings = higherOrderSequencer.routings[orientation];\n    let modules = higherOrderSequencer.modules;\n\n    const isConnected = useCallback((from, to) => {\n        return routings[from.id] && routings[from.id].includes(to);\n    }, [routings]);\n\n    const toggle = useCallback((from, to) => {\n        if (isConnected(from, to)) {\n            higherOrderSequencer.disconnectModules(orientation, from, to);\n        } else {\n            higherOrderSequencer.connectModules(orientation, from, to);\n        }\n    }, [routings]);\n\n    const toggleFreeform = useCallback((module) => {\n        if (higherOrderSequencer.isFreeform(module)) {\n            higherOrderSequencer.disconnectFromFreeform(module);\n        } else {\n            higherOrderSequencer.connectToFreeform(module);\n        }\n    }, []);\n\n    return (\n        <div className=\"orientation-routing\">\n          <div className=\"out-label\">\n            OUTPUT\n          </div>\n          <div className=\"module-outs\">\n            {modules.map(\n                module =>\n                    <div key={module.id}>\n                      <div className=\"m-name\">{module.name}</div>\n                      <div className=\"out-line\"/>\n                    </div>\n            )}\n            <div>\n              <div className=\"m-name\">free</div>\n              <div className=\"out-line\"/>\n            </div>\n          </div>\n          <div className=\"m-row\">\n            <div className=\"in-label\">\n              INPUT\n            </div>\n            <div>\n            {modules.map(\n                module =>\n                    <div\n                      key={module.id}\n                      className=\"m-routing\">\n                      <div className=\"m-name\">\n                        {module.name}\n                      </div>\n                      <div className=\"in-line\"/>\n                      {modules.map(\n                          toModule => \n                              <div\n                                key={toModule.id}\n                                onClick={() => toggle(module, toModule)}\n                                className=\n                                  {isConnected(module, toModule) ?\n                                   \"m-option connected\" : \"m-option\"}/>)}\n                      <div\n                        onClick={() => toggleFreeform(module)}\n                        className={higherOrderSequencer.isFreeform(module) ?\n                                   \"m-option connected\" : \"m-option\"}/>\n                    </div>)}\n            </div>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      orientationRoutings: state.higherOrder.orientationRoutings,\n      modulesLen: props.higherOrderSequencer.modules.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setHigherOrderStepsSelected: x=>dispatch(setHigherOrderStepsSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoutingMatrix);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {doc} from 'effects/midi/scripting/documentation.js';\nimport ModuleRouter from './ModuleRouter.js';\nimport UserScriptComponent from \"components/effects/scripting/UserScriptComponent.js\";\nimport {connect} from 'react-redux';\n\nconst ModuleScripter = ({higherOrderSequencer}) => { \n    let {scriptEffect} = higherOrderSequencer;\n    return (\n        <div className=\"module-scripter\">\n          <ModuleRouter higherOrderSequencer={higherOrderSequencer}/>\n          <UserScriptComponent doc={doc} effect={scriptEffect}/>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleScripter);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {setHigherOrderStepsSelected} from 'actions/index.js';\nimport {useOrientation} from './useOrientation.js';\nimport {connect} from 'react-redux';\n\nlet SIZE = 10;\nlet MARGIN= 17;\n\nconst TO_X = 70;\nconst FROM_X = SIZE;\n\nconst OrientationRouting = ({orientation, higherOrderSequencer, setHigherOrderStepsSelected}) => { \n    let ref = useRef(undefined);\n\n    let {selectedEdge, setSelectedEdge, onMouseMove, onMouseUp, onMouseDown, setDragging, dragging} =\n        useOrientation({ref, orientation, higherOrderSequencer});\n\n\n    useEffect(() => {\n        if (selectedEdge) {\n            setHigherOrderStepsSelected(undefined);\n        }\n    }, [selectedEdge]);\n    let routing = higherOrderSequencer.routings[orientation];\n    let modules = higherOrderSequencer.modules;\n    \n    let getXY = (col=0, i) => {\n        let x = col === 0 ? SIZE : TO_X;\n        let y = SIZE+(SIZE+MARGIN)*i;\n        return {x,y};\n    };\n\n    const getModNumber = (mod) => {\n        let modules = higherOrderSequencer.modules;\n        for (let i=0; i < modules.length; i++ ){\n            if (modules[i].id === mod) {\n                return i;\n            }\n        }\n        return -1;\n    };\n\n    const getRectXY = useCallback(() => {\n        let rectXY = getXY(0, higherOrderSequencer.modules.length);\n        let rectX = 25;\n        let rectY = rectXY.y;\n        return {\n            x: rectX,\n            y: rectY,\n        };\n    }, []);\n\n    const onFreeformUp = useCallback(() => {\n        if (!dragging) {\n            return;\n        }\n        higherOrderSequencer.connectToFreeform(dragging.module);\n    }, [dragging]);\n\n    const getPath = (x1, y1, x2, y2) => {\n        return \"M \" +x1 + ', ' + y1 + ' C ' +\n            (x1+x2)/2 +', ' + y1 + ',' + \n            (x1+x2)/2 +', ' + y2 + ','+\n            (x2-10) +', ' + y2;\n    };\n\n    let routeKeys = Object.keys(routing);\n    let rectXY = getRectXY();\n    let rectX = rectXY.x;\n    let rectY = rectXY.y;\n    return (\n        <svg\n          height={rectY+15}\n          width={100}\n          ref={ref}\n          onMouseUp={() => setDragging(undefined)}\n          onMouseLeave={() => setDragging(undefined)}\n          onMouseMove={onMouseMove}\n          className=\"orientation-routing\">\n          <marker id=\"o-arrowhead\" markerWidth=\"10\" markerHeight=\"8\" \n\t          refX=\"4\" refY=\"2\" orient=\"auto\">\n            <polygon points=\"0 0, 5 2, 0 4\" fill=\"white\"/>\n          </marker>\n          {dragging && <line\n                         stroke=\"white\" x1={dragging.x1} x2={dragging.x2} y1={dragging.y1} y2={dragging.y2}/>}\n          {higherOrderSequencer.freeformModules.map(\n              module => {\n                  let fromPos = getXY(0, getModNumber(module.id));\n                  let toPos = getRectXY();\n                  let x1 = fromPos.x;\n                  let y1 = fromPos.y;\n                  let x2 = toPos.x + 15;\n                  let y2 = toPos.y;\n                  let d = `M ${x1},${y1} C ${x1+30}, ${y1} ${x1+15}, ${y1+5} ${x2}, ${y2}`;\n                  let className= \"module-edge\";\n                  if (selectedEdge && selectedEdge.to === -1 &&\n                      selectedEdge.from === module.id) {\n                      className += \" selected\";\n                  }\n                  return (<path\n                            onMouseUp={(e) => {\n                                e.stopPropagation();\n                                setSelectedEdge({\n                                    from: module.id,\n                                    to: -1\n                                });\n                            }}\n                            className={className}\n                            markerEnd=\"url(#o-arrowhead)\"\n                            stroke=\"white\"\n                            d={d}\n                          />);\n              })}\n          {routeKeys.map(\n              from =>\n                  routing[from].map(\n                      to => {\n                          let fromPos = getXY(0, getModNumber(from));\n                          let toPos = getXY(1, getModNumber(to.id));\n                          let d = getPath(fromPos.x, fromPos.y, toPos.x, toPos.y);\n                          let className = \"module-edge\";\n                          if (selectedEdge) {\n                              if (selectedEdge.from === from &&\n                                  selectedEdge.to === to.id) {\n                                  className += \" selected\";\n                              }\n                          }\n\n                          return (\n                              <path\n                                onMouseUp={(e) => {\n                                    e.stopPropagation();\n                                    setSelectedEdge({\n                                        from: from,\n                                        to: to.id\n                                    });\n                                }}\n                                d={d}\n                                markerEnd=\"url(#o-arrowhead)\"\n                                stroke=\"white\"\n                                className={className}\n                              />);\n                      }))}\n\n          {modules.map(\n              (mod, i) =>\n                  <g>\n                    <circle\n                      onMouseDown={(e) => onMouseDown(e, mod)}\n                      fill=\"white\" cx={getXY(0, i).x} cy={getXY(0, i).y} r={SIZE}/>\n                    <text x={2+SIZE*0.5} y={0.5*SIZE+getXY(0,i).y} fill=\"black\">\n                      {mod.name}\n                    </text>\n                  </g>)}\n          {modules.map(\n              (mod, i) =>{\n                let {x,y} = getXY(1, i);\n                  return (\n                      <g>\n                        <circle\n                          onMouseUp={() => onMouseUp(mod)}\n                          fill=\"white\" cx={x} cy={y} r={SIZE}/>\n                        <text x={2+x-SIZE*0.5} y={0.5*SIZE+y} fill=\"black\">\n                          {mod.name}\n                        </text>\n                      </g>);\n              })}\n          <rect\n            onMouseUp={onFreeformUp}\n            fill=\"white\" x={rectX} y={rectY} width={30} height={15}/>\n          <text fill=\"black\" x={6+rectX} y={rectY+11}>Free</text>\n        </svg>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      orientationRoutings: state.higherOrder.orientationRoutings,\n      modulesLen: props.higherOrderSequencer.modules.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setHigherOrderStepsSelected: x=>dispatch(setHigherOrderStepsSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrientationRouting);\n","import React, { useRef, useState, useEffect, useCallback} from 'react';;\nexport const useOrientation = ({ref, higherOrderSequencer, orientation}) => {\n    let [dragging, setDragging] = useState(undefined);\n    let [selectedEdge, setSelectedEdge] = useState(undefined);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [selectedEdge, setSelectedEdge]);\n\n    const onKeyDown = useCallback((e) => {\n        if (!selectedEdge) {\n            return;\n        }\n        if (e.key === 'Backspace') {\n            let {from, to} = selectedEdge;\n            from = higherOrderSequencer.getModule(from);\n            if (to === -1) {\n                higherOrderSequencer.disconnectFromFreeform(from);\n            } else {\n                to = higherOrderSequencer.getModule(to);\n                higherOrderSequencer.disconnectModules(orientation, from, to);\n            }\n            setSelectedEdge(undefined);\n        }\n    }, [selectedEdge, setSelectedEdge]);\n\n    const getMouseXY = (e) => {\n        let rect = ref.current.getBoundingClientRect();\n        let x = e.clientX - rect.left;\n        let y = e.clientY - rect.top;\n        return {x,y};\n    };\n\n    const onMouseUp = useCallback((mod) => {\n        if (selectedEdge) {\n            setSelectedEdge(undefined);\n        }\n        if (!dragging) {\n            return;\n        }\n\n        higherOrderSequencer.connectModules(orientation, dragging.module, mod);\n    }, [dragging, selectedEdge, setSelectedEdge]);\n\n    const onMouseMove = useCallback((e) => {\n        if (!dragging) {\n            return;\n        }\n        let {x,y} = getMouseXY(e);\n        setDragging({\n            ... dragging,\n            x2: x,\n            y2: y\n        });\n    }, [dragging, setDragging]);\n\n    const onMouseDown = useCallback((e, module) => {\n        let {x,y} = getMouseXY(e);\n        setDragging({\n            module,\n            x1: x,\n            y1: y,\n            x2: x,\n            y2: y\n        });\n    }, [setDragging]);\n\n    return {onMouseMove, onMouseUp, onMouseDown, setDragging, dragging, selectedEdge, setSelectedEdge};\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Choice = ({sequencer, orientation, type, name}) => { \n    let [chosen, setChosen] = useState(sequencer.algorithmTypes[orientation].includes(type));\n\n    const toggle = useCallback(() => {\n        if (chosen) {\n            sequencer.algorithmTypes[orientation] =\n                sequencer.algorithmTypes[orientation].filter(\n                    n => n !== type);\n        } else {\n            sequencer.algorithmTypes[orientation] =\n                [... sequencer.algorithmTypes[orientation],\n                 type];\n        }\n        setChosen(!chosen);\n    }, [sequencer, chosen, setChosen]);\n\n    let className = \"algorithm-choice\";\n    if (chosen) {\n        className += \" chosen\";\n    }\n    return (<div onClick={toggle} className={className}>{name}</div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Choice);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Triangle = ({orientation}) => { \n    let style = {\n    };\n    if (orientation === 0) {\n        style.borderLeft = '32px solid white';\n        style.borderTop = '32px solid transparent';\n    } else {\n        style.borderRight = '32px solid white';\n        style.borderBottom = '32px solid transparent';\n    }\n    return (\n        <div className=\"triangle-icon\" style={style}></div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Triangle);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RoutingMatrix from './RoutingMatrix.js';\nimport OrientationRouting from './OrientationRouting.js';\nimport Choice from './Choice.js';\nimport {connect} from 'react-redux';\nimport Triangle from './Triangle.js';\nimport {PLAY_SPEED_MODULE, RESTART_MODULE, PLAY_MODULE, ROLL_MODULE} from 'higherorder/algorithm-types.js';\n\nconst AlgorithmChooser = ({orientation, higherOrderSequencer}) => { \n    return (\n        <div className=\"algorithm-chooser\">\n          <Triangle orientation={orientation}/>\n          <RoutingMatrix orientation={orientation} higherOrderSequencer={higherOrderSequencer}/>\n          {/*<OrientationRouting orientation={orientation} higherOrderSequencer={higherOrderSequencer}/>*/}\n          <div className=\"algorithm-choices\">\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={PLAY_MODULE} name=\"Play\"/>\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={RESTART_MODULE} name=\"Restart\"/>\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={ROLL_MODULE} name=\"Roll\"/>\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={PLAY_SPEED_MODULE} name=\"Speed\"/>\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AlgorithmChooser);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst ParameterResult = ({\n    i,\n    mouseDown,\n    selectedParameters,\n    setSelectedParameters,\n    higherOrderSequencer,\n    parameter,\n    setParameters,\n}) => { \n    let {context} = parameter;\n    let {lfosTrack, track, instrument, effect, midiEffect, subDevice} = context;\n    let subSequence = track && track.subSequence;\n    if (lfosTrack) {\n        subSequence = lfosTrack.subSequence;\n    }\n\n    const onClick = useCallback(() => {\n        higherOrderSequencer.setParameter(parameter);\n        setParameters([... higherOrderSequencer._parameters])\n    }, [parameter]);\n\n    const onMouseOver = useCallback((e) => {\n        if (selectedParameters && mouseDown.current) {\n            setSelectedParameters([... selectedParameters, i]);\n        }\n    }, [i, selectedParameters, setSelectedParameters]);\n\n    if (track && track.isMetronome) {\n        return '';\n    }\n    if (context.formant && !context.formant.enabled) {\n        return '';\n    }\n\n    let sorted = selectedParameters && [...selectedParameters].sort();\n    let className = \"parameter-result\";\n    if (sorted) {\n        if (selectedParameters.includes(i)) {\n            className += \" selected\";\n        }\n    }\n    return (\n        <div\n          onMouseOver={onMouseOver}\n          onMouseDown={(e) => e.metaKey && selectedParameters ? setSelectedParameters([... selectedParameters, i]) : setSelectedParameters([i])}\n          onClick={onClick} className={className}>\n          {subSequence &&\n           <div\n             style={{backgroundColor: subSequence.color}}\n             className=\"p-sub-sequence\">{subSequence.name}</div>}\n          <div className=\"p-name\">\n            {parameter.name}\n          </div>\n          {track &&\n           <div style={{backgroundColor: colors.getColorForTrack(track)}}\n                className=\"p-track\">{track.trackNumber + 1}. {track.getName()}</div>}\n          {subDevice && <div\n                          style={{backgroundColor: colors.getColorForHash(track ? track.getName() + subDevice.name : subDevice.name)}}\n                          className=\"p-sub-device\">{subDevice.name}</div>}\n          {effect && <div className=\"p-effect\">{effect.name}</div>}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParameterResult);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ParameterResult from './ParameterResult.js';\nimport {index} from \"parameters/ParameterIndex.js\";\nimport {connect} from 'react-redux';\n\nconst ParameterSearcher = ({higherOrderSequencer, setParameters}) => { \n    const [value, setValue] = useState('');\n    const [results, setResults] = useState([]);\n    const [selectedParameters, setSelectedParameters] = useState(undefined);\n    const mouseDown = useRef(false);\n    \n    useEffect(() => {\n        if (value !== \"\") {\n            setResults(\n                index.search(value)\n                    .filter(\n                        p => p.audioParam || p.audioParams));\n        } else {\n            setResults([]);\n        }\n    }, [value, setResults]);\n\n    useEffect(() => {\n        setSelectedParameters(undefined);\n    }, [results, setSelectedParameters]);\n\n    const createMacro = useCallback(() => {\n        let params = Array.from(new Set(selectedParameters.map(\n            x => results[x])));\n        let macro = higherOrderSequencer.createMacro(params);\n        setSelectedParameters(undefined);\n        setParameters([macro.macroParameter])\n    }, [selectedParameters, results, setSelectedParameters])\n\n    const onChange = useCallback((e) => {\n        setValue(e.target.value);\n    }, [setValue]);\n    \n    return (\n        <div\n          onMouseDown={() => mouseDown.current=true}\n          onMouseUp={() => mouseDown.current=false}\n          onMouseLeave={() => mouseDown.current=false}\n          className=\"parameter-searcher\">\n          <input placeholder=\"Search for parameters\" className=\"parameter-searcher\" value={value} type=\"text\" onChange={onChange}/>\n          <div onClick={() => setValue('')} className=\"delete-btn\">\n            x\n          </div>\n          <div className=\"parameter-results\">\n            {results\n             .filter(\n                 p =>\n                     !higherOrderSequencer._parameters.includes(p)) // dont show stuff weve already mapped\n             .filter(p => !p.hasMacro) // dont show macros \n             .map(\n                (r, i) => <ParameterResult\n                            mouseDown={mouseDown}\n                            selectedParameters={selectedParameters}\n                            setSelectedParameters={setSelectedParameters}\n                            i={i}\n                            setParameters={setParameters}\n                            higherOrderSequencer={higherOrderSequencer}\n                            key={r.id + '-' + i} parameter={r}/>)}\n          </div>\n          {selectedParameters && <div\n                                   onClick={createMacro}\n                                   className=\"create-macro-btn\">Create Macro ({selectedParameters.length})</div>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParameterSearcher);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectParameterSlider from \"components/effects/EffectParameterSlider.js\";\nimport ParameterSearcher from './ParameterSearcher.js';\nimport {\n    setAccumulatorParameterSelected,\n    setIsMacroMapping} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport ParametersMapper from \"components/effects/ParametersMapper.js\";\n\nconst HigherOrderParameters = ({higherOrderSequencer}) => { \n    let [parameters, setParameters] = useState([]);\n    return (\n        <div className=\"higher-order-parameters\">\n          <div>\n            <ParametersMapper parametersList={parameters} effect={higherOrderSequencer}/>\n            <EffectParameterSlider\n              name=\"Depth\"\n              sequencerEngine={higherOrderSequencer.sequencerEngine}\n              min={0}\n              max={1}\n              step={0.001}\n              parameter={higherOrderSequencer.automationDepthParameter}/>\n          </div>\n          <ParameterSearcher parametersList={parameters} setParameters={setParameters} higherOrderSequencer={higherOrderSequencer}/>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setIsMacroMapping: (isMapping) => dispatch(\n            setIsMacroMapping(isMapping)),\n      setAccumulatorParameterSelected: (param) => dispatch(\n          setAccumulatorParameterSelected(param))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderParameters);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport HigherOrderHeader from \"components/system5/HigherOrderHeader.js\";\nimport ModuleScripter from './ModuleScripter.js';\nimport {connect} from 'react-redux';\nimport AlgorithmChooser from './AlgorithmChooser.js';\nimport HigherOrderParameters from './HigherOrderParameters.js';\n\nconst Sidebar = ({higherOrderSequencer, selected}) => { \n    return (\n        <div className=\"higher-sidebar\">\n          <HigherOrderHeader/>\n          <div className=\"inner-higher-sidebar\">\n            <div>\n              <AlgorithmChooser higherOrderSequencer={higherOrderSequencer} orientation={0}/>\n              <AlgorithmChooser higherOrderSequencer={higherOrderSequencer} orientation={1}/>\n            </div>\n            <HigherOrderParameters higherOrderSequencer={higherOrderSequencer}/>\n          </div>\n        {/*\n          <ModuleScripter\n            higherOrderSequencer={higherOrderSequencer}\n            />*/}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nlet size = 32;\nconst Playhead = ({playing, trackStep}) => { \n    let style = {\n        left: (trackStep % 32) * 16\n    };\n    if (!playing) {\n        return '';\n    }\n    return (\n        <div style={style} className=\"higher-playhead\">\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      trackStep: props.sequencerEngine.trackStep,\n      playing: props.sequencerEngine.playing\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Playhead);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useMouse} from './useMouse.js';\nimport {connect} from 'react-redux';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\n\nlet SIZE = 32;\nconst HigherOrderStepComponent = ({\n    setDragging,\n    dragging,\n    isDragging,\n    setSelected,\n    orientation,\n    stepData,\n    size,\n    higherOrderSequencer,\n    isSelected,\n    setSelection,\n    x,\n    y,\n    ... props\n}) => { \n    let ref = useRef(undefined);\n    let acted = useRef(false);\n    let [color, setColor] = useState(stepData.module && stepData.module.color);\n    let className=\"higher-order-step\";\n    if (isDragging) {\n        className += \" dragging\";\n    }\n    let {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref});\n    let style = {};\n    useEffect(() => {\n        setColor(props.color);\n    }, [props.color, setColor]);\n    let _size = SIZE*size;\n    className += \" on\";\n    className += \" orientation-\" + orientation;\n\n    const {onMouseDown, onMouseUp} = useMouse({\n        setSelection,\n        acted,\n        setSelected,\n        higherOrderSequencer,\n        dragging,\n        setDragging});\n\n    let points=[x*SIZE,y*SIZE];\n    if (orientation === 0) {\n        points = [... points, x*SIZE, (y+size)*SIZE, (x+size)*SIZE, (y+size)*SIZE];\n    } else {\n        points = [... points, (x+size)*SIZE, (y)*SIZE, (x+size)*SIZE, (y+size)*SIZE];\n    }\n\n    const chooseModule = useCallback((module) => {\n        if (!stepData) {\n            return;\n        }\n        stepData.module = module;\n        if (module) {\n            setColor(module.color);\n        }\n    }, [x,y, setColor, stepData]);\n\n    if (dropdownPos) {\n        className += \" context\";\n    }\n    if (isSelected) {\n        className += \" selected\";\n    }\n    let {subSequences} = higherOrderSequencer.sequencerEngine;\n    return (\n        <polygon\n          points={points}\n          ref={ref}\n          onContextMenu={(e) => {\n              if (stepData) {\n                  onContextMenu(e);\n                  setDragging(undefined);\n              }\n          }}\n          onMouseDown={(e) => {\n              e.stopPropagation();\n              onMouseDown(x,y,e);\n          }}\n          onMouseUp={(e) => {\n              e.stopPropagation();\n              if (!dropdownPos) {\n                  onMouseUp(x,y);\n              }\n          }}\n          style={style} className={className}>\n        {/*\n          <ContextMenu dropdownPos={orientation === 0 ?\n                                    dropdownPos && {x: (-_size) + 'vw', y: (-_size) + 'vw'} :\n                                    dropdownPos} setDropdownPos={setDropdownPos}>\n            <MenuItem\n              onMouseUp={(e) => e.stopPropagation()}\n              onMouseDown={(e) => {\n                  e.stopPropagation();\n                  chooseModule(null);\n                  setDropdownPos(undefined);\n              }}>\n              <div className=\"module-name\">All</div>\n              <div  className=\"color-btn\"></div>\n            </MenuItem>\n            {subSequences.map(\n                module =>\n                    <MenuItem\n                      onMouseUp={(e) => e.stopPropagation()}\n                      onMouseDown={(e) => {\n                          e.stopPropagation();\n                          chooseModule(module);\n                          setDropdownPos(undefined);\n                      }}>\n                      <div className=\"module-name\">{module.name} </div>\n                      <div style={{backgroundColor: module.color}} className=\"color-btn\"></div>\n                    </MenuItem>)}\n          </ContextMenu>\n         */}\n        </polygon>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderStepComponent);\n","import React, {useCallback} from 'react';\nexport const useMouse = ({setSelection, acted, setSelected, higherOrderSequencer, dragging, setDragging}) => {\n    const onMouseUp = useCallback((x, y) => {\n        if (acted.current && dragging && dragging.x===x && dragging.y==y) {\n            higherOrderSequencer.toggle(x,y);\n        }\n        setDragging(undefined);\n    }, [setDragging, dragging]);\n\n    const onMouseDown = useCallback((x, y, e) => {\n        if (e.metaKey) {\n            setSelection({x1: x, y1: y, x2: x, y2: y});\n            return;\n        }\n        // higherOrderSequencer.toggle(x,y);\n        setDragging({x,y});\n        setSelected([higherOrderSequencer.matrix[x][y]]);\n        acted.current = true;\n    }, [setDragging, setSelection]);\n\n    return {onMouseDown, onMouseUp};\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport HigherOrderStepComponent from './HigherOrderStepComponent.js';\n\nconst HigherColumn = ({\n    x,\n    higherOrderSequencer,\n    dragging,\n    setDragging,\n    selected,\n    setSelected,\n    selection,\n    setSelection\n}) => { \n    const justPressed = useRef(false);\n    const onMouseUp = useCallback((y, e) => {\n        if (selection) {\n            setSelected(higherOrderSequencer.getSelection(selection));\n            return setSelection(undefined);\n        }\n\n        if (dragging && dragging.x===x && dragging.y==y) {\n            if (!justPressed.current && !e.metaKey) {\n                higherOrderSequencer.toggle(x,y);\n            }\n        }\n        setDragging(undefined);\n        justPressed.current = false;\n    }, [x, setSelected, setDragging, dragging, selection, setSelection]);\n\n    const onMouseOver  = useCallback((y) => {\n        if (selection) {\n            setSelection({... selection, x2: x, y2: y});\n            return;\n        }\n\n        if (!dragging) return;\n\n        let xDist = x-dragging.x;\n        let yDist = y-dragging.y;\n        let dist = Math.max(x - dragging.x, y - dragging.y);\n        if (dist >= 0) {\n            higherOrderSequencer.setStepSize(\n                dragging.x,\n                dragging.y,\n                dist+1);\n        } \n    }, [dragging, setDragging, selection, setSelection]);\n\n    const onMouseDown = useCallback((y, e) => {\n        if (e.metaKey) {\n            setSelection({x1: x, y1: y, x2: x, y2: y});\n            return;\n        }\n\n        if (!higherOrderSequencer.matrix[x][y]) {\n            justPressed.current=true;\n            higherOrderSequencer.toggle(x,y);\n        }\n        setDragging({x,y});\n        setSelected([higherOrderSequencer.matrix[x][y]]);\n    }, [setSelection, selection, setDragging]);\n\n    const getStepClass = useCallback((stepData, y) => {\n        let className = \"higher-step\";\n        if (y%2 === 0) {\n            className += \" even\";\n        }\n        if (selected && selected.includes(stepData)) {\n            className += \" selected\";\n        }\n        if (selection) {\n            let {x1, y1, x2, y2} = selection;\n            if (x1 <= x && x <= x2 &&\n                y1 <= y && y <= y2) {\n                className += \" selection\";\n            }\n        }\n        return className;\n    }, [selected, selection]);\n\n    let className = \"higher-col\";\n    if (x%2===0) {\n        className += \" even\";\n    } \n    if (dragging) {\n        className += \" dragging\";\n    }\n   return (\n        <div className={x%2==0 ? \"higher-col even\" :\"higher-col\"}>\n          {higherOrderSequencer.matrix[x].map(\n              (obj, y) =>\n                  <div\n                    onMouseLeave={() => justPressed.current=false}\n                    onMouseOver={() => onMouseOver(y)}\n                    onMouseDown={(e) => onMouseDown(y,e)}\n                    onMouseUp={(e) => onMouseUp(y,e)}\n                    className={getStepClass(obj, y)}>\n                 </div>)}\n        </div>\n    );\n};\n\nexport default HigherColumn;\n","import React, { useEffect, useCallback, useState} from 'react';\nimport AutomationPaths from './AutomationPaths.js';\nimport HigherOrderHeader from \"components/system5/HigherOrderHeader.js\";\nimport Sidebar from './Sidebar.js';\nimport Playhead from './Playhead.js';\nimport HigherOrderStepComponent from './HigherOrderStepComponent.js';\nimport {\n    setShowHigherOrderSequencer,\n    setHigherOrderStepsSelected} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport HigherColumn from \"components/system5/HigherColumn.js\";\nimport {useKeys} from './useKeys.js';\nimport '../../HigherOrder.scss';\n\nconst HigherOrderComponent = ({setShowHigherOrderSequencer, sequencerEngine, selected, setSelected, show}) => { \n    let {higherOrderSequencer} = sequencerEngine;\n    let {matrix} = higherOrderSequencer;\n    let [dragging, setDragging] = useState(undefined);\n    let [selection, setSelection] = useState(undefined);\n    let [moving, setMoving] = useState(undefined);\n\n    useEffect(() => {\n        window.addEventListener(\"mouseup\", onMouseUp);\n        return () => {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n        };\n    }, [setDragging]);\n\n    useEffect(() => {\n        return () => setSelected(undefined);\n    }, []);\n\n    useKeys({higherOrderSequencer, setSelected, selected});\n\n    const onMouseUp = useCallback(() => {\n        setDragging(undefined);\n        setMoving(false);\n    }, [setDragging]);\n\n    const onMouseMove = useCallback(() => {\n        if (dragging) {\n            setMoving(true);\n        }\n    }, [dragging, setMoving]);\n\n    if (!show) {\n        return (<HigherOrderHeader/>);\n    }\n    let svgClass  = selection ? \"shape-container selection\" : \"shape-container\";\n    if (moving) {\n        svgClass += \" moving\";\n    }\n    return (\n        <div\n          onMouseMove={onMouseMove}\n          className=\"higher-order-component\">\n          <div className=\"higher-inner\">\n            <Playhead sequencerEngine={sequencerEngine}/>\n            {matrix.map(\n                (col, x) =>\n                    <HigherColumn\n                      setSelection={setSelection}\n                      selection={selection}\n                      setSelected={setSelected}\n                      selected={selected}\n                      setDragging={setDragging}\n                      dragging={dragging} x={x} higherOrderSequencer={higherOrderSequencer}/>\n            )}\n            <svg className={svgClass}>\n              {higherOrderSequencer.steps.map(\n                  stepData => \n                      <HigherOrderStepComponent\n                        setSelected={setSelected}\n                        setSelection={setSelection}\n                        isSelected={selected && selected.includes(stepData)}\n                        dragging={dragging}\n                        x={stepData.x} y={stepData.y}\n                        orientation={stepData.orientation}\n                        isDragging={dragging && dragging.x === stepData.x && dragging.y === stepData.y}\n                        size={stepData.size}\n                        setDragging={setDragging}\n                        color={stepData.module && stepData.module.color}\n                        stepData={stepData}\n                        higherOrderSequencer={higherOrderSequencer}/>)}\n              {higherOrderSequencer.automationPaths &&\n               <AutomationPaths automationPaths={higherOrderSequencer.automationPaths}/>}\n            </svg>\n          </div>\n          <Sidebar higherOrderSequencer={higherOrderSequencer} selected={selected}/>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      matrix: state.higherOrder.matrix,\n      selected: state.higherOrder.selectedSteps,\n      show: state.higherOrder.show\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowHigherOrderSequencer: (x) => dispatch(setShowHigherOrderSequencer(x)),\n      setSelected: (x) => dispatch(setHigherOrderStepsSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderComponent);\n","import React, {useEffect, useCallback} from 'react';\nexport const useKeys = ({selected, setSelected, higherOrderSequencer}) => {\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => {\n            window.removeEventListener(\"keydown\", onKeyDown);\n        };\n    }, [, selected, setSelected]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.target.tagName === 'INPUT' ||\n            e.target.tagName === 'TEXTAREA') {\n            return;\n        }\n\n        if (e.key === 'Backspace') {\n            e.preventDefault();\n            if (selected && selected.length > 0) {\n                higherOrderSequencer.deleteSteps(selected);\n                setSelected(undefined);\n            }\n        } else {\n            if (!selected) {\n                return;\n            }\n            let x=0;\n            let y=0;\n            if (e.key === 'Enter') {\n                e.preventDefault();\n                selected.forEach(\n                    ({x,y}) => \n                        higherOrderSequencer.toggle(x,y));\n                return;\n            }\n            if (e.key === 'ArrowLeft') {\n                e.preventDefault();\n                x--;\n            } else if (e.key === 'ArrowUp') {\n                e.preventDefault();\n                y--;\n            } else if (e.key === 'ArrowRight') {\n                e.preventDefault();\n                x++;\n            } else if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                y++;\n            }\n            selected.forEach(\n                pt => higherOrderSequencer.moveStepTo(\n                    pt.x, pt.y, pt.x+x, pt.y+y));\n        }\n    }, [selected, setSelected]);\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ModuleSpatialView from \"components/spatial/ModuleSpatialView.js\";\nimport ModuleLoader from 'components/system5/ModuleLoader.js';\nimport HigherOrderComponent from 'components/system5/HigherOrderComponent.js';\nimport Grids from \"components/explore/details/Grids.js\";\nimport {connect} from 'react-redux';\n\nconst MIN_SCALE = 0.30;\nconst GridsContainer = ({scale, setScale, sequencerEngine}) => { \n    const ref = useRef(ref);\n\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onMouseWheel);\n        return () => ref.current.removeEventListener(\"mousewheel\", onMouseWheel);\n    }, [setScale, scale]);\n\n    const onMouseWheel = useCallback((e) => {\n       let {deltaX, deltaY, wheelDeltaX, wheelDeltaY} = e;\n        if (!e.ctrlKey) { return; }\n        if (Math.abs(wheelDeltaY) > 80 ||\n            (Math.abs(wheelDeltaY) > 40 && Math.abs(deltaX) < 20 && Math.abs(deltaY) < 20)) {\n            e.preventDefault();\n            let _scale=1;\n            if (wheelDeltaY > 0) {\n                _scale =  scale * wheelDeltaY / 115.0;\n            } else {\n                _scale = Math.abs(scale / (wheelDeltaY / 115.0));\n            }\n            window._scale = Math.max(MIN_SCALE, Math.min(1, _scale));\n            setScale(Math.max(MIN_SCALE, Math.min(1, _scale)));\n        } \n    }, [setScale, scale]);\n\n    let style = {\n\n    };\n    if (scale !== 1) {\n        style.transform = \"scale(\" + scale + \")\";\n    }\n    \n    return (\n        <div ref={ref} className=\"grids-box\">\n          <div style={style} className=\"grids-container\">\n            {sequencerEngine.subSequences.map(\n                subSequence => \n                    <ModuleSpatialView\n                      key={subSequence.id}\n                      scale={scale}\n                      showEffects={true}\n                      subSequence={subSequence}\n                      sequencerEngine={sequencerEngine}/>)}\n          </div>\n          <HigherOrderComponent sequencerEngine={sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let {modulesCollapsed} = state.pads;\n    return {\n        modulesCollapsed,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GridsContainer);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst MixBottomPaneOptions = (props) => { \n    return (\n        <div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixBottomPaneOptions);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectOption from './EffectOption.js';\nimport Dropdown from 'react-dropdown';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport Colors from 'components/Colors.js';\nimport SendEffect from '../../track/SendEffect.js';\nimport {effectOptions, getEffectOption, initializeEffect} from 'components/effects/constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedMixEffect,\n} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst AudioEffects = ({\n    currentSubSequence,\n    selectedTrack,\n    selectedGroup,\n    sequencerEngine,\n    selectedEffect,\n    setSelectedEffect}) => { \n        let [value, setValue] = useState(undefined);\n        let trackOrGroup = undefined;\n        if (selectedTrack !== undefined) {\n            trackOrGroup = sequencerEngine.tracks[selectedTrack];\n        } else if (selectedGroup !== undefined) {\n            trackOrGroup = sequencerEngine.groups.groups[selectedGroup];\n        }\n\n        let _track = sequencerEngine.tracks[selectedTrack];\n        let _group = sequencerEngine.groups.groups[selectedGroup];\n\n        let effects = trackOrGroup ? trackOrGroup.effects : [];\n\n        const moveEffectTo = useCallback((from, to) => {\n            trackOrGroup.moveEffectTo(from, to);\n            setValue({from, to});\n        }, [trackOrGroup, setValue]);\n\n        const onDelete = useCallback(() => {\n            setSelectedEffect(currentSubSequence, selectedTrack, selectedGroup, undefined);\n        }, [currentSubSequence, selectedTrack, selectedGroup]);\n\n        let fxComponent = '';\n        if (selectedEffect && effects.some(e => e.id === selectedEffect.id)) {\n            fxComponent = (\n                <EffectComponent\n                  sequencerEngine={sequencerEngine}\n                  track={sequencerEngine.tracks[selectedTrack]}\n                  group={sequencerEngine.groups.groups[selectedGroup]}\n                  compact={true}\n                  onDeleteEffect={() => onDelete()}\n                  effect={selectedEffect}\n                  send={undefined}/>);\n        }\n\n        const handleChooseEffect = useCallback((e) => {\n            let effect = initializeEffect(e.value, sequencerEngine);\n            effect.enable(true);\n            if (effect.wetParameter) {\n                effect.wetParameter.set(1);\n            }\n            trackOrGroup.effectsChain.addEffect(effect);\n            setValue(e.value);\n            return false;\n        }, [setValue, sequencerEngine, trackOrGroup]);\n\n        let name = \"\";\n       if (_track) {\n            name = _track.presetName || _track.getName();\n        } else if (_group) {\n            name = \"Group \" + (_group.groupNumber + 1);\n        }\n\n        let style = {\n            backgroundColor: _track ? colors.getColorForTrack(_track) :\n                _group ?\n                colors.getColorForTrack(_group.tracks[0]) : 'black'\n        };\n        return (\n            <div className=\"audio-effects\">\n              <div\n                style={style}\n                className=\"effects-channel-strip\">\n                <Dropdown\n                  className='send-effects-dropdown'\n                  options={effectOptions}\n                  onChange={handleChooseEffect}\n                  placeholder=\"Audio FX\" />\n                <div className=\"effects-list\">\n                  {effects.map(\n                      (effect, i) =>\n                          <EffectOption\n                            key={effect.id}\n                            track={selectedTrack}\n                            group={selectedGroup}\n                            currentSubSequence={currentSubSequence}\n                            effectType={\"AUDIO_FX\"}\n                            moveEffectTo={moveEffectTo}\n                            effectNumber={i}\n                            effect={effect}/>)}\n                </div>\n             </div>\n              {fxComponent}\n            </div>);\n    }\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrack = state.mix.selectedGroup === undefined ?\n            state.mix.selectedTrack : undefined;\n    let selectedGroup = state.mix.selectedGroup;\n    let subId = state.sequencer.currentSubSequence[props.sequencerEngine.engineId];\n    return {\n        selectedTrack, \n        selectedGroup,\n        selectedEffect: selectedTrack !== undefined ? state.mix.selectedTrackEffects[subId] &&\n            state.mix.selectedTrackEffects[subId][selectedTrack] :\n            state.mix.selectedGroupEffects[subId] &&\n            state.mix.selectedGroupEffects[subId][selectedGroup],\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedEffect: (sub, trackNumber, groupNumber, effect) => dispatch(\n            setSelectedMixEffect(sub, trackNumber, groupNumber, \"AUDIO_FX\", effect))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport MixBottomPaneOptions from './MixBottomPaneOptions.js';\nimport EnvelopeOptions from 'components/track/EnvelopeOptions.js';\nimport ContextualHelpComponent from 'components/sidebar/ContextualHelpComponent.js';\nimport Keyboard from 'components/midi/Keyboard.js';\nimport AudioEffects from './AudioEffects.js';\nimport MidiEffects from './MidiEffects.js';\nimport Dropdown from 'react-dropdown';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport Colors from 'components/Colors.js';\nimport SendEffect from '../../track/SendEffect.js';\nimport {effectOptions, getEffectOption, initializeEffect} from 'components/effects/constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedSendEffect,\n} from 'actions/index.js';\nimport {EFFECTS} from './constants.js';\n\nconst colors = new Colors();\n\nconst MixEffects = ({\n    sequencerEngine,\n    selectedGroup,\n    selectedTrack\n}) => { \n    const [option, setOption] = useState(EFFECTS);\n    let hasTracks = sequencerEngine.tracks.length > 0;\n    if (!hasTracks) {\n        return (\n            <div className=\"mix-effects-pane\"/>\n        );\n    }\n\n    let _track = sequencerEngine.tracks[selectedTrack];\n    let _group = sequencerEngine.groups.groups.find(\n        x => x.groupNumber === selectedGroup);\n\n\n    let color = _track ? colors.getColorForTrack(_track) :\n            _group ?\n        colors.getColorForTrack(_group.tracks[0]) : 'black';\n\n    let style = {\n        backgroundColor: color\n    };\n\n    let name = \"\";\n    if (_track) {\n        name = _track.presetName || _track.getName();\n    } else if (_group) {\n        name = \"Group \" + (_group.groupNumber + 1);\n    }\n\n    let innerStyle = {\n        // background: \"linear-gradient(45deg, \" + color + \", #1513a2c2)\"\n    };\n    \n    return (\n        <div className=\"mix-effects-pane\">\n          <div\n            style={style}\n            className=\"mix-effects-header\">\n            <div className=\"element-name\">\n              {name}\n            </div>\n            <MixBottomPaneOptions setOption={setOption} option={option}/>\n            {_track ? <EnvelopeOptions track={_track}/> : ''}\n          </div>\n          <div style={innerStyle} className=\"mix-effects-inner\">\n            {selectedGroup !== undefined ? \"\" : <MidiEffects sequencerEngine={sequencerEngine}/>}\n            <AudioEffects sequencerEngine={sequencerEngine}/>\n            <ContextualHelpComponent sequencerEngine={sequencerEngine}/>\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrack = state.mix.selectedGroup === undefined ?\n            state.mix.selectedTrack : undefined;\n    return {\n        selectedGroup: state.mix.selectedGroup,\n        selectedTrack, \n        ... state.tracks.groupTracks,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixEffects);\n","export const EFFECTS = 1;\nexport const WAVEFORM = 2;\nexport const PIANO_ROLL = 3;\n","import React, { useState, useEffect } from 'react';\nimport {HIDE, MIXES, SUBSEQUENCE} from 'components/mix/constants.js';\nimport {setMixViewMode} from 'actions/index.js';\nimport { connect } from \"react-redux\";\n\nclass MixTab extends React.Component {\n    onClick(type, subSequence) {\n        this.props.setMixViewMode(type);\n\n        if (subSequence !== undefined) {\n            this.props.sequencerEngine.switchToSubSequence(subSequence);\n        }\n    }\n\n    render() {\n        let subSequences = this.props.sequencerEngine.subSequences.map(x => x.id);\n        return (\n            <div className=\"mix-tab\">\n              {subSequences.map(\n                  id => \n                      <MixTabOption\n                        key={id}\n                        onClick={() => this.onClick(SUBSEQUENCE, id)}\n                        isCurrent={this.props.currentSubSequence === id}\n                        selected={this.props.mixViewMode === SUBSEQUENCE && this.props.currentSubSequence === id}\n                        name={this.props.sequencerEngine.getSubSequenceName(id)}/>)}\n            {/*<MixTabOption\n                  onClick={() => this.onClick(MIXES)}\n                  selected={this.props.mixViewMode === MIXES} name=\"ALL\"/>*/}\n            </div>\n        );\n    }\n}\n\nfunction MixTabOption(props) {\n    let className = \"mix-tab-option\";\n    if (props.selected) {\n        className += ' selected';\n    }\n    if (props.isCurrent) {\n        className += ' current';\n    }\n    return (\n        <div onClick={props.onClick} className={className}>{props.name}</div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n        mixViewMode: state.mix.mixViewMode,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setMixViewMode: mixViewMode => dispatch(setMixViewMode(mixViewMode)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixTab);\n","import React, { useState, useCallback, useEffect } from 'react';\nimport MultiFreezeThumbnails from 'components/freeze/MultiFreezeThumbnails.js';\nimport {MULTI_FREEZE} from 'constants/track-types.js';\nimport {MULTI_SYNTH, SAMPLED_INSTRUMENT} from 'constants/instrument-types.js';\nimport {TRIGGER_SAMPLE, RELEASE_SAMPLE} from 'constants/event-types.js';\nimport { connect } from \"react-redux\";\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport Colors from 'components/Colors.js';\n\nconst COLORS = new Colors();\nconst triggerColor = COLORS.getColor(1);\nconst DRUM_TAGS = new Set(['clap', 'tom', 'toms', 'clave', 'perc', 'snare', 'kick', 'hi-hat', 'rim', 'side-stick', 'breaks', 'sub', 'ride', 'piano', 'violin']);\n\nfunction TrackVisualizer(props) {\n    let [lastTrigger, setLastTrigger] = useState(0);\n    let [lastRelease, setLastRelease] = useState(0);\n    let [thumbnailStyle, setThumbnailStyle] = useState({});\n    let [additionalStyle, setAdditionalStyle] = useState({});\n\n    const onClickMute = useCallback(() => {\n        props.track.mute(!props.track.muted);\n    }, [props.track]);\n\n    const onTrigger = useCallback((e) => {\n        if (e.trackNumber === props.track.trackNumber) {\n            setTimeout(() => {\n                setLastTrigger(new Date().getTime() + e.duration + 50);\n                let brightness = 1 - e.sliceStartTime/e.sliceDuration;\n                let style = {... additionalStyle};\n                style['borderBottomColor'] = COLORS.brighten(triggerColor, brightness);\n                setAdditionalStyle(style);\n                setTimeout(onRelease, e.duration * 1000);\n            }, e.time);\n        }\n    }, [props.track, props.currentSubSequenceId, additionalStyle]);\n\n    const onRelease = useCallback((e) => {\n        if (e === undefined ||\n            e.trackNumber === props.track.trackNumber) {\n            setLastRelease(new Date().getTime());\n        }\n    }, [props.track]);\n\n    const addEventListeners = () => {\n        window.addEventListener(TRIGGER_SAMPLE, onTrigger);\n        window.addEventListener(RELEASE_SAMPLE, onRelease);\n    };\n\n    const removeEventListeners = () => {\n        window.removeEventListener(TRIGGER_SAMPLE, onTrigger);\n        window.removeEventListener(RELEASE_SAMPLE, onRelease);\n    };\n\n    useEffect(() => {\n        addEventListeners();\n        return removeEventListeners;\n    }, []);\n\n    let sample =     props.track.sample;\n    let thumbnail = sample === undefined ? undefined : sample.getThumbnail();\n\n    useEffect(() => {\n        let style = {};\n        let color = undefined;\n\n        if ( thumbnail === undefined || thumbnail === '') {\n            let stringToConvert = sample && sample.getId() !== undefined ? \n                sample.getId() :\n                props.track.getName();\n            color = COLORS.getColorForHash(stringToConvert);\n            style.backgroundColor = color;\n        }\n        \n        if (props.muted) {\n            style['opacity'] = 0.2;\n        } else {\n            style['opacity'] = 1;\n        }\n\n        setThumbnailStyle(style);\n    }, [props.track, props.muted]);\n\n    let className = \"track-visualizer\";\n    let triggering = lastTrigger > lastRelease;\n    if (lastTrigger > lastRelease) {\n        className += ' triggering';\n    }\n\n    let track = props.track;\n    let innerText = undefined;\n    if (sample && sample.tags) {\n        innerText = sample.tags.find(tag => DRUM_TAGS.has(tag));\n        if (!innerText) {\n            innerText = sample.tags[0];\n        }\n    }\n    if (track && track.getInstrumentType() == MULTI_SYNTH) {\n        innerText = 'Synth';\n    }\n    if (track && track.getInstrumentType() === SAMPLED_INSTRUMENT) {\n        let samples = track.instrument.getSamples();\n        if (samples[0]) {\n            innerText = samples[0].tags.find(tag => DRUM_TAGS.has(tag));\n        }\n    }\n\n    let innerComponent = '';\n    if (track && track.getTrackType() === MULTI_FREEZE) {\n        innerComponent = (<MultiFreezeThumbnails track={track}/>)\n        className += \" is-multi \";\n    }\n\n    return (\n        <div\n          onClick={() => onClickMute()}\n          style={{... thumbnailStyle, ... additionalStyle}} className={className}>\n          <ConditionedComponent condition={thumbnail !== undefined} >\n            <img src={thumbnail}/>\n          </ConditionedComponent>\n          {!thumbnail && innerText ? <span className=\"inner-text\">{innerText}</span> : ''}\n          {innerComponent}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        muted: props.track.muted\n    };\n};\n\nexport default connect(mapStateToProps, null)(TrackVisualizer);\n\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport TrackVisualizer from './TrackVisualizer.js';\n\nfunction TracksVisualizer(props) {\n    let tracks = props.sequencerEngine.tracks;\n\n    return (\n        <div className=\"tracks-visualizer\">\n          {tracks.map(track => <TrackVisualizer\n                                 currentSubSequenceId={props.currentSubSequence}\n                                 track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nexport default connect(mapStateToProps, null)(TracksVisualizer);\n\n","function _intersect(set1, set2) {\n    let z = Array.from(set1).filter(x => set2.has(x));\n    return new Set(z);\n}\n\nexport function filterTags(tags) {\n    let tagsToRemove = [];\n    for (let i in tags) {\n        let tag = tags[i];\n        for (let j in tags) {\n            let otherTag = tags[j];\n            if (otherTag === tag) {\n                continue;\n            }\n            let tagSplit = new Set(tag.split(' '));\n            let otherTagSplit = new Set(otherTag.split(' '));\n            let intersect = _intersect(tagSplit, otherTagSplit);\n            if (intersect.size > 1) {\n                tagsToRemove.push(tag);\n                break;\n            }\n        }\n    }\n\n    tags = new Set(tags);\n    for (let i in tagsToRemove) {\n        tags.delete(tagsToRemove[i]);\n    }\n\n    return Array.from(tags);\n}\n\n","import React, { Component } from 'react';\n\nclass TrackToggleButton extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    isToggled() {\n        return this.props.track.isEnabled;\n    }\n\n    onToggleClicked() {\n        this.props.track.toggleEnabled();\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div\n              onClick={() => this.onToggleClicked()}\n              className={this.isToggled() ? 'toggled track-toggle-button' : 'track-toggle-button'}>\n            </div>\n        );\n    }\n}\n\nexport default TrackToggleButton;\n","import React, { Component } from 'react';\n\nimport { connect } from \"react-redux\";\n\nclass TrackMuteButton extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    onMuteClicked() {\n        this.props.track.mute(!this.props.muted);\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div\n              onClick={() => this.onMuteClicked()}\n              className={this.props.muted ? \"muted track-mute-button\" : \"track-mute-button\"}>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        muted: state.tracks.trackMutes[props.track.trackNumber]\n    };\n};\n\n\nexport default connect(mapStateToProps, null)(TrackMuteButton);\n","import React, { Component } from 'react';\nimport TrackToggleButton from 'components/mix/TrackToggleButton.js';\nimport TrackMuteButton from 'components/mix/TrackMuteButton.js';\nimport { connect } from \"react-redux\";\n\nclass GroupMuteButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    isGroupMuted() {\n        return this.props.group.muted;\n    }\n\n    onGroupMuteClicked() {\n        this.props.group.mute(!this.props.group.muted);\n        this.setState(this.state);\n    }\n\n    onTrackMuteClicked() {\n        let track = this.props.group.tracks[0];\n        track.mute(!track.muted);\n        this.setState(this.state);\n    }\n\n    isTrackMuted() {\n        let track = this.props.group.tracks[0];\n        return track.muted;\n    }\n\n    render() {\n        if (this.props.group.tracks.length == 1) {\n            return (\n                <div className=\"group-top-buttons\">\n                  <div className=\"toggle-buttons-container\">\n                    <TrackToggleButton track={this.props.group.tracks[0]}/>\n                  </div>\n                  <div\n                    onClick={() => this.onTrackMuteClicked()}\n                    className={this.props.muted ? \"muted group-mute-button\" : \"group-mute-button\"}>\n                  </div>\n                </div>\n            );\n        }\n        return (\n            <div className=\"group-top-buttons\">\n              <div\n                  onClick={() => this.onGroupMuteClicked()}\n                  className={this.props.muted ? \"muted small-group-mute-button\" : \"small-group-mute-button\"}>\n              </div>\n              <div className=\"toggle-buttons-container\">\n                {this.props.group.tracks.map(\n                track => <TrackToggleButton track={track}/>)}\n              </div>\n             <div className=\"track-mute-buttons-container\">\n                {this.props.group.tracks.map(\n                track => <TrackMuteButton track={track}/>)}\n              </div>\n         \n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    let muted = state.tracks.groupMutes[props.group.groupNumber];\n    if (props.group.tracks.length == 1) {\n        muted = state.tracks.trackMutes[props.group.tracks[0].trackNumber];\n    }\n    return {\n        muted: muted\n    };\n};\n\nexport default connect(mapStateToProps, null)(GroupMuteButton);\n","import React, { Component } from 'react';\nimport {truncate} from 'utils/truncate.js';\nimport Colors from 'components/Colors.js';\nlet colors = 0;\nconst COLORS = new Colors();\nconst UPDATE_RATE = 100;\n\nconst TAGS = new Set(['hi-hat', 'kick', 'snare', 'clap', 'crash', 'ride', 'breaks', 'tom']);\n\nclass GroupThumbnailPart extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            height: 0\n        };\n    }\n\n    get thumbnail() {\n        let sample = this.props.track.sample;\n        if (sample === undefined) {\n            return undefined;\n        }\n        return sample.getThumbnail();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (this.state.height !== nextState.height) {\n            return true;\n        }\n\n        if (this.props.selectedTrack !== nextProps.selectedTrack) {\n            return true;\n        }\n\n        if (this.props.renders !== nextProps.renders) {\n            return true;\n        }\n\n        if (this.props.track !== nextProps.track) {\n            return true;\n        }\n\n        return false;\n    }\n    \n    componentDidMount() {\n        this.timer = setInterval(() => {\n            this.setState({\n                height: Math.min(60 + this.props.track.trackMeter.getLevel(), 100)});\n        }, UPDATE_RATE);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.timer);\n    }\n\n    onDragOver(e) {\n        e.preventDefault();\n    }\n\n    onDragStart(e) {\n        this.props.onDraggingTrack(this.props.track);\n    }\n\n    onDrop(e, tags) {\n        if (this.props.trackDragging !== undefined &&\n           this.props.trackDragging.group !== this.props.group) {\n            this.props.groups.addToGroup(this.props.trackDragging, this.props.group);\n            this.props.onGroupsChanged();\n        }\n    }\n\n    getNameToShow() {\n        if (this.props.track.sample !== undefined) {\n            let tag = this.props.track.sample.tags.filter(x => TAGS.has(x))[0];\n            if (tag) {\n                return tag;\n            }\n        }\n\n        return truncate(this.props.track.getName());\n    }\n\n    render() {\n        let style = {\n            //width: this.props.partWidth,\n            height: this.state.height,\n        }\n\n        let thumbnailStyle = {\n            height: 100,\n            opacity: 1,\n        }\n\n        let thumbnailPartStyle = {};\n        let color = undefined;\n        if ( this.thumbnail === undefined || this.thumbnail === '') {\n            let stringToConvert = this.props.track.sample && this.props.track.sample.getId() !== undefined ? \n                this.props.track.sample.getId() :\n                this.props.track.getName();\n            color = COLORS.getColorForHash(stringToConvert);\n            thumbnailPartStyle.backgroundColor = color;\n        }\n        \n        let unselected =\n            this.props.selectedTrack !== undefined &&\n            this.props.selectedTrack !== this.props.track.trackNumber;\n\n        if (unselected && this.props.isSelectedGroup) {\n            thumbnailPartStyle.opacity = 0.5;\n        }\n\n        let isTrackSelected =\n            this.props.selectedTrack === this.props.track.trackNumber;\n        \n        let coloredThumbnailStyle = style;\n        coloredThumbnailStyle['background-color'] = rainbow(colors+=5);\n\n        let nameStyle = {\n        };\n        if (color) {\n            nameStyle['backgroundColor'] = COLORS.brighten(color, 1.2);\n        }\n\n        let name = this.getNameToShow();\n        if (this.props.numParts === 3) {\n            name = name.slice(0, 2);\n        } else if (this.props.numParts > 3) {\n            name = name.slice(0, 1);\n        }\n\n        return (\n            <div\n              onDragStart={(e) => this.onDragStart(e)}\n              onDragOver={(e) => this.onDragOver(e)}\n              onDrop={(e)=>{this.onDrop(e)}}                   \n              draggable\n              style={thumbnailPartStyle}\n             className={isTrackSelected ? 'thumbnail-part-container selected-track' : unselected ? \"thumbnail-part-container\" : \"thumbnail-part-container selected\"}\n              onClick={() => this.props.onClickTrack(this.props.track)}\n              >\n            <div\n              style={coloredThumbnailStyle}\n              className={unselected ? \"blank-thumbnail thumbnail-part unselected\" : \"blank-thumbnail thumbnail-part\"}>\n              {this.thumbnail !== undefined ? \n                <img \n                      onError={() => this.setState({thumbnail: undefined})}\n                  src={this.thumbnail}\n                  className={unselected ? \"draggable droppable thumbnail-part unselected\" : \"draggable droppable thumbnail-part\"}/>\n                  : ''} \n            </div>\n            {this.thumbnail === undefined ? \n                <div style={nameStyle} className=\"group-part-name\">{name}</div>\n            : ''}\n          </div>);\n    }\n}\n\nfunction rainbow(n) {\n    n = n * 240 / 512;\n    return 'hsl(' + n + ',100%,50%)';\n}\n\nexport default GroupThumbnailPart;\n","import React, { Component } from 'react';\nimport GroupMuteButton from 'components/mix/GroupMuteButton.js';\nimport GroupThumbnailPart from 'components/mix/GroupThumbnailPart.js';\nimport {THUMBNAIL_WIDTH} from 'components/mix/constants.js';\n\nclass GroupThumbnail extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    onClickTrack(track) {\n        if (this.props.selectedTrack === track.trackNumber &&\n           this.props.group.tracks.length > 1) {\n            this.props.onSelectTrack(undefined);\n        } else {\n            this.props.onSelectTrack(track);\n        }\n    }\n\n    render() {\n        let group = this.props.group;\n\n        // we want to show a thumbnail for the group\n        // but split vertically between the # of tracks w/in the group.\n        let size = group.tracks.length;\n\n        // figure out the width of each track slice within\n        let partWidth = THUMBNAIL_WIDTH / size;\n\n        return (\n            <div>\n              <GroupMuteButton partWidth={partWidth} group={group}/>\n              <div\n                className=\"group-thumbnail\">\n                {group.tracks.map(\n                  track =>\n                      <GroupThumbnailPart\n                        key={\"group-thumbnail-track-\" + track.trackNumber}\n                        onDraggingTrack={this.props.onDraggingTrack}\n                        trackDragging={this.props.trackDragging}\n                        onGroupsChanged={this.props.onGroupsChanged}\n                        renders={this.props.renders}\n                        groups={this.props.groups}\n                        onClickTrack={(track) => this.onClickTrack(track)}\n                        numParts={group.tracks.length}\n                        isSelectedGroup={this.props.isSelectedGroup}\n                        selectedTrack={this.props.selectedTrack}\n                        track={track}\n                        partWidth={partWidth}\n                        group={group}/>\n                       )}\n            </div>\n          </div>\n        );\n    }\n}\n\nexport default GroupThumbnail;\n","import React, { Component } from 'react';\nimport {filterTags} from './filterTags.js';\nimport GroupThumbnail from 'components/mix/GroupThumbnail.js';\nimport OutputChannelChooser from './OutputChannelChooser.js';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport { Badge } from 'reactstrap';\nimport { connect } from \"react-redux\";\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\n\nclass Group extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            groups: props.groups\n        };\n        this.state = {volume: this.getVolume(), pattern: props.pattern};\n    }\n\n    get selectedTrack() {\n        return this.props.sequencerEngine.tracks[this.props.selectedTrack];\n    }\n\n    isSelectedGroup() {\n        return this.props.group.tracks.indexOf(this.selectedTrack) > -1 ||\n            this.props.group === this.props.selectedGroup;\n    }\n\n    /**\n     * returns the selected track within a group, if the selected track\n     * is indeed found inside the given group. Otherwise, returns undefined\n     */\n    getSelectedTrackInGroup() {\n        if (this.props.group.tracks.length == 1) {\n            return this.props.group.tracks[0];\n        } else if (this.props.group.tracks.indexOf(this.selectedTrack) > -1) {\n            return this.selectedTrack;\n        } else {\n            return undefined;\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (this.state.pattern != nextProps.pattern) {\n            this.state.pattern = nextProps.pattern;\n            return true;\n        }\n\n        if (this.props.isSelected !== nextProps.isSelected ||\n            this.props.group !== nextProps.group ||\n            this.props.renders !== nextProps.renders ||\n            this.props.trackDragging !== nextProps.trackDragging ||\n            this.props.selectedTrack !== nextProps.selectedTrack ||\n            this.state.selectedGroup !== nextProps.selectedGroup ||\n            nextProps.volume != this.getVolume()) {\n            return true;\n        } \n        return false;\n    }\n\n    getVolume() {\n        let selectedTrack = this.getSelectedTrackInGroup();\n        if (this.props.group.tracks.length == 1) {\n            return this.props.group.tracks[0].getVolume() - 15;\n        } else if (selectedTrack === undefined ) {\n            return this.props.group.volume;\n        } else {\n            return selectedTrack.getVolume() - 15;\n        }\n    }\n\n    onSelectTrack(track) {\n        if (track !== undefined) {\n            this.props.cursor.track = track.trackNumber;\n            this.props.sequencerEngine.selectTrack(track.trackNumber);\n        } else {\n            this.props.setSelectedTrack(undefined);\n        }\n        this.props.setSelectedGroup(this.props.group);\n    }\n\n    onChangeVolume(volume) {\n        let selectedTrack = this.getSelectedTrackInGroup();\n        if (this.props.group.tracks.length != 1 &&\n            selectedTrack === undefined) {\n            // change the volume of the entire group\n            this.onSelectTrack(undefined);\n            this.props.setSelectedGroup(this.props.group);\n            this.props.group.setVolume(volume);\n        } else {\n            selectedTrack.setVolume(volume);\n            this.onSelectTrack(selectedTrack);\n        }\n        this.setState({volume: volume});\n    }\n\n    getTags() {\n        let tags = [];\n        let selectedTrack = this.getSelectedTrackInGroup();\n        if (selectedTrack === undefined ) {\n            // show the groups tracks because a specific track is\n            // not selected\n            tags = []; // filterTags(this.props.group.tags);\n        } else if (selectedTrack.sample !== undefined ) {\n            // we have a selected track and it's not MIDI\n            tags = filterTags(selectedTrack.sample.tags);\n        } else {\n            // other wise show the selected track's name (usually is gonna be MIDI)\n            tags = [selectedTrack.getName()];\n        }\n\n        if (tags.length > 6) {\n            tags.splice(0, 6);\n        }\n        return tags;\n    }\n\n    render() {\n        return (\n            <div\n              className={this.isSelectedGroup() ? 'group selected with-tracks' : 'group with-tracks'}>\n              <div className=\"volume-slider-container\">\n                <ReactBootstrapSlider\n                  handle=\"square\"\n                  value={this.props.volume}\n                  change={(e) => this.onChangeVolume(e.target.value)}\n                  step={0.1}\n                  max={6}\n                  min={-40}\n                  orientation=\"vertical\"\n                  reversed={true}\n                  /> \n              </div>\n                {!this.props.channelMixer.stereoConnected ? \n                  <OutputChannelChooser channel={this.props.group}/>\n                  : ''}\n              <GroupThumbnail\n                onDraggingTrack={this.props.onDraggingTrack}\n                trackDragging={this.props.trackDragging}\n                renders={this.props.renders}\n                groups={this.props.groups}\n                onGroupsChanged={this.props.onGroupsChanged}\n                isSelectedGroup={this.isSelectedGroup()}\n                selectedTrack={this.props.selectedTrack}\n                onSelectTrack={(track) => this.onSelectTrack(track)}\n                group={this.props.group}/>\n              <div className=\"tags-container\">\n                {this.getTags().map((tag) => <Badge size=\"sm\" color=\"dark\">{tag}</Badge>)}\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedTrack: track => dispatch(setSelectedTrack(track)),\n        setSelectedGroup: group => dispatch(setSelectedGroup(group))\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrackInGroup = undefined;\n    let selectedTrack = props.sequencerEngine.tracks[state.mix.selectedTrack];\n    if (props.group.tracks.length == 1) {\n        selectedTrackInGroup = props.group.tracks[0].trackNumber;\n    } else if (props.group.tracks.indexOf(selectedTrack) > -1) {\n        selectedTrackInGroup = state.mix.selectedTrack;\n    } \n    let volume = 0;\n    if (props.group.tracks.length == 1) {\n        volume = props.group.tracks[0].getVolume();\n    } else if (selectedTrackInGroup === undefined ) {\n        volume = state.tracks.groupVolumes[props.group.groupNumber];\n    } else {\n        volume = state.tracks.trackVolumes[selectedTrackInGroup];\n    }\n    \n    return {\n        volume: volume,\n        selectedGroup: state.mix.selectedGroup,\n        selectedTrack: state.mix.selectedTrack};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Group);\n","import React, { Component } from 'react';\n\nclass NewGroup extends Component {\n    onDragOver(e) {\n        e.preventDefault();\n    }\n\n    onDrop(e) {\n        if (this.props.trackDragging !== undefined &&\n           this.props.trackDragging.group !== this.props.group) {\n            this.props.groups.newGroup(this.props.trackDragging);\n            this.props.onGroupsChanged();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"group\">\n              <div\n                onDragOver={(e) => this.onDragOver(e)}\n                onDrop={(e)=>{this.onDrop(e)}}                   \n                draggable\n                className=\"new-group-box\">\n                NEW GROUP\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default NewGroup;\n","import React, { Component } from 'react';\nimport Group from 'components/mix/Group.js';\nimport NewGroup from 'components/mix/NewGroup.js';\n\nclass GroupsComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            renders: 0,\n        };\n    }\n\n    onDraggingTrack(track) {\n        this.setState({\n            trackDragging: track,\n            renders: this.state.renders+2\n        });\n    }\n\n    // Forces renders everywhere (used for drag and drop)\n    // TODO: use a better way to determine when state has changed in a way\n    // where there should be a re-render\n    onGroupsChanged() {\n        this.setState({renders: this.state.renders+2});\n    }\n\n\n    get groups() {\n        return this.props.sequencerEngine.groups;\n    }\n\n    render() {\n        return (\n            <div className=\"groups-component\">\n               {this.groups.groups.map(\n                       group =>\n                           <Group\n                                 sequencerEngine={this.props.sequencerEngine}\n                                 trackDragging={this.state.trackDragging}\n                                 renders={this.state.renders}\n                                 onGroupsChanged={() => this.onGroupsChanged()}\n                                 cursor={this.props.sequencerEngine.cursor}\n                                 groups={this.groups}\n                                 onDraggingTrack={(track) => this.onDraggingTrack(track)}\n                                 pattern={this.props.sequencerEngine.currentPattern}\n                                 channelMixer={this.props.sequencerEngine.channelMixer}\n                             group={group}/>)}\n                   <NewGroup\n                     onGroupsChanged={() => this.onGroupsChanged()}\n                     groups={this.groups}\n                     trackDragging={this.state.trackDragging}\n                   />\n            </div>\n        );\n    }\n}\n\nexport default GroupsComponent;\n","import React, { Component } from 'react';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport {IS_GROUP} from 'components/mix/constants.js';\nimport {IS_TRACK} from 'components/mix/constants.js';\nimport {IS_SEND} from 'components/mix/constants.js';\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\nimport {setMultiParameterSliderValue} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport {setParametersToRecord} from 'actions/index.js';\n\nclass MultiParameterSlider extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            // put this value in redux so you don't have to keep checking\n            minSelected: false,\n            maxSelected: false,\n            isMouseDown: false,\n        };\n    }\n\n    onMouseDown() {\n    }\n\n    onMouseUp() {\n        this.props.setParametersToRecord([]);\n    }\n\n    getEffectsTrackIf(type) {\n        let sends = this.props.sequencerEngine.sends.sends;\n        if (type === IS_TRACK) {\n            return this.props.selectedTrack;\n        } else if (\n            type == IS_GROUP &&\n                sends.indexOf(this.props.selectedGroup) == -1) {\n            return this.props.selectedGroup;\n        }  else if (type == IS_SEND &&\n                    sends.indexOf(this.props.selectedGroup) > -1) {\n            return this.props.selectedGroup;\n        }\n        return undefined;\n    }\n\n    getParameterLocks() {\n        if (this.props.sequencerEngine.parameterLocks[this.props.id] === undefined) {\n            return [];\n        }\n        return this.props.sequencerEngine.parameterLocks[this.props.id].parameterLocks;\n    }\n\n    onChange(val) {\n        if (this.state.minSelected) {\n            if (this.state.selectedParameter !== undefined) {\n                this.state.selectedParameter.min = this.state.selectedParameter.normalizeOriginal(val);\n                this.state.selectedParameter.set(this.state.selectedParameter.min);\n                this.props.setMultiParameterSliderValue(this.props.id, val);\n            }\n        } else if (this.state.maxSelected) {\n            if (this.state.selectedParameter !== undefined) {\n                this.state.selectedParameter.max  = this.state.selectedParameter.normalizeOriginal(val);\n                this.state.selectedParameter.set(this.state.selectedParameter.max);\n                this.props.setMultiParameterSliderValue(this.props.id, val);\n            }\n        } else {\n            // actually alter the parameter with the set min/max defining\n            let parameters = this.getParameterLocks().map(parameterLock => parameterLock.parameter);\n            parameters.forEach(param => param.normalizedSet(val));\n            this.props.setMultiParameterSliderValue(this.props.id, val);\n            this.props.setParametersToRecord(parameters);\n        }\n    }\n\n    onAdd() {\n        if (this.props.selectedParameter !== undefined) {\n            // get group number and track number\n            let groupNumber = this.getEffectsTrackIf(IS_GROUP) !== undefined ?\n                this.getEffectsTrackIf(IS_GROUP).groupNumber : undefined;\n            let trackNumber = this.getEffectsTrackIf(IS_TRACK) !== undefined ?\n                this.getEffectsTrackIf(IS_TRACK).trackNumber  : undefined;\n            let sendNumber = this.getEffectsTrackIf(IS_SEND) !== undefined ?\n                this.getEffectsTrackIf(IS_SEND).sendNumber : undefined;\n            let effectNumber = this.props.selectedEffect;\n            this.props.sequencerEngine.parameterLocks[this.props.id].addParameterLock(\n                trackNumber,\n                groupNumber,\n                sendNumber,\n                effectNumber,\n                this.props.selectedParameter);\n            this.setState(this.state);\n        }\n    }\n\n    onDeleteParameterLock(parameterLock) {\n        this.props.sequencerEngine.parameterLocks[this.props.id].deleteParameterLock(\n            parameterLock);\n    }\n\n    onClickParameterLock(parameterLock) {\n        if (this.state.selectedParameter === parameterLock.parameter) {\n            this.setState({selectedParameter: undefined});\n        } else {\n            if (parameterLock.trackNumber !== undefined) {\n                let track =this.props.sequencerEngine.tracks[parameterLock.trackNumber];\n                this.props.setSelectedTrack(track.trackNumber)\n                this.props.setSelectedGroup(undefined);\n            } else if (parameterLock.groupNumber !== undefined) {\n                this.props.setSelectedTrack(undefined);\n                this.props.setSelectedGroup(this.props.sequencerEngine.groups.groups[parameterLock.groupNumber]);\n            } else if (parameterLock.sendNumber !== undefined) {\n                let send = this.props.sequencerEngine.sends.sends[parameterLock.sendNumber];\n                this.props.setSelectedTrack(undefined);\n                this.props.setSelectedGroup(send);\n            }\n            this.setState({selectedParameter: parameterLock.parameter});\n        }\n    }\n\n    onClickMin() {\n        this.setState({minSelected: !this.state.minSelected, maxSelected: false});\n    }\n\n    onClickMax() {\n        this.setState({maxSelected: !this.state.maxSelected, minSelected: false});\n    }\n\n    formatNumber(n) {\n        if (n <= 1) {\n            return n;\n        } else {\n            return Math.floor(n);\n        }\n    }\n\n    render() {\n        return (\n            <div\n              onMouseDown={() => this.onMouseDown()}\n              onMouseLeave={() => this.onMouseUp()}\n              onMouseUp={() => this.onMouseUp()}\n              className=\"multi-parameter-slider-container\">\n              <div className=\"ranged-slider-container\">\n                <div\n                  onClick={() => this.onClickMin()}\n                  className={this.state.minSelected ? \"selected min-label\" : \"min-label\"}>\n                  {this.state.selectedParameter !== undefined ? this.formatNumber(this.state.selectedParameter.min) : 'MIN'}\n              </div>\n              <div className=\"slider-container\">\n                <ReactBootstrapSlider\n                  handle=\"square\"\n                  value={this.props.value}\n                  change={(e) => this.onChange(e.target.value)}\n                  step={0.01}\n                  max={1}\n                  min={0}\n                  orientation=\"horizontal\"\n                  reversed={false}/>\n              </div>\n              <div\n                onClick={() => this.onClickMax()}\n                className={this.state.maxSelected ? \"selected max-label\" : \"max-label\"}>\n                {this.state.selectedParameter !== undefined ? this.formatNumber(this.state.selectedParameter.max) : 'MAX'}\n              </div>\n              </div>\n              <div className=\"parameters-container\">\n                <div className=\"parameters-title\">PARAMETERS</div>\n                <div\n                  onClick={() => this.onAdd()}\n                  className={this.props.flashing !== undefined ? \"flashit add-parameter-button\" : \"add-parameter-button\"}>\n                  +\n                </div>\n              <div className=\"parameters-list\">\n                {this.getParameterLocks().map(parameterLock =>\n                  <ParameterElement\n                    onDelete={() => this.onDeleteParameterLock(parameterLock)}\n                    onClick={() => this.onClickParameterLock(parameterLock)}\n                    isSelected={this.state.selectedParameter === parameterLock.parameter}\n                    parameter={parameterLock.parameter}/>)}\n              </div>\n            </div>\n          </div>);\n            \n    }\n}\n\nclass ParameterElement extends Component {\n    render() {\n        return (\n            <div className={this.props.isSelected ? \"selected parameter-lock\" : \"parameter-lock\"} onClick={this.props.onClick}>\n              {this.props.parameter.effectName !== undefined ?\n                  <div>\n                    {this.props.parameter.effectName} - {this.props.parameter.name}\n                        <div className=\"delete-button\" onClick={this.props.onDelete}>x</div>\n                  </div>\n                      :\n                  <div>\n                     {this.props.parameter.name}\n                         <div className=\"delete-button\" onClick={this.props.onDelete}>x</div>\n                  </div>}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedTrack: track => dispatch(setSelectedTrack(track)),\n        setSelectedGroup: group => dispatch(setSelectedGroup(group)),\n        setParametersToRecord: params => dispatch(setParametersToRecord(params)),\n        setMultiParameterSliderValue: (id, value) => dispatch(setMultiParameterSliderValue(id, value))\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedParameter: state.mix.selectedParameter,\n        flashing: state.mix.selectedParameterFlashing,\n        selectedEffect: state.effects.selectedEffect,\n        selectedTrack: state.mix.selectedTrack,\n        selectedGroup: state.mix.selectedGroup,\n        value: state.mix.multiParameterSliderValues[props.id] || 0,\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MultiParameterSlider);\n\n\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\n\nclass MixesComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"sub-sequence-chooser\">\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n    };\n};\n\nexport default connect(mapStateToProps, null)(MixesComponent);\n","import React, { Component } from 'react';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport MultiParameterSlider from 'components/mix/MultiParameterSlider.js';\nimport MixesComponent from 'components/mix/MixesComponent.js';\nimport SingleLFOComponent from 'components/lfo/SingleLFOComponent.js';\nimport {setShowLFOs} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport {LFOS, MIXES, PARAMETERS} from './constants.js';\nimport {setMixViewMode} from 'actions/index.js';\n\nclass MixParametersComponent extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            option: LFOS,\n        };\n\n        this.onClickOption = this.onClickOption.bind(this);\n    }\n\n    onClickOption(option) {\n        this.props.setMixViewMode(option);\n    }\n\n    onClickThumbnail() {\n        this.props.setShowLFOs(!this.props.showLFOs);\n    }\n\n    onClickLock() {\n        this.props.lfosTrack.togglePatternLocked();\n    }\n\n    render() {\n        let className = this.props.isMixView ? 'track flex lfos-track mix-lfo-view' : 'track flex lfos-track';\n        return (\n            <div></div>\n        );\n        return (\n            <div\n              key={'lfo-tracks'}\n              onClick={() => []} className={className}>\n              <div className=''>\n                <MixParameterOption\n                  option={LFOS}\n                  selectedOption={this.props.mixViewMode}\n                  onClickOption={this.onClickOption}/>\n                <MixParameterOption\n                  option={PARAMETERS}\n                  selectedOption={this.props.mixViewMode}\n                  onClickOption={this.onClickOption}/>\n                <MixParameterOption\n                  option={MIXES}\n                  selectedOption={this.props.mixViewMode}\n                  onClickOption={this.onClickOption}/>\n              </div>\n              <ConditionedComponent condition={this.props.mixViewMode === PARAMETERS}>\n                <MultiParameterSlider\n                  id={0}\n                  sequencerEngine={this.props.sequencerEngine}/>\n                <MultiParameterSlider\n                  id={1}\n                 sequencerEngine={this.props.sequencerEngine}\n                  />\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.mixViewMode === MIXES}>\n                <MixesComponent sequencerEngine={this.props.sequencerEngine}/>\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.mixViewMode === LFOS}>\n                <div className=\"effects-view\">\n                  {this.props.lfosTrack.lfos.map(\n                      lfo => \n                  <SingleLFOComponent sequencerEngine={this.props.sequencerEngine} lfo={lfo}/>)}\n                </div>\n                   <div className=\"lock-button-container\">\n                   <img\n                   onClick={() => this.onClickLock()}\n                   className=\"lock-button\"\n                   src={this.props.patternLocked ? \"/closed-padlock.png\" : \"/opened-padlock.png\"}/>\n                   </div>\n \n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nclass MixParameterOption extends Component {\n    render() {\n        let className = 'mix-parameters-option';\n        if (this.props.option === this.props.selectedOption) {\n            className += ' selected';\n        }\n        return (\n            <div onClick={() => this.props.onClickOption(this.props.option)}\n              className={className}>\n              {this.props.option}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setShowLFOs: s => dispatch(setShowLFOs(s)),\n        setMixViewMode: s => dispatch(setMixViewMode(s)),\n    };\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        mixViewMode: state.mix.mixViewMode,\n        showLFOs: state.sequencer.showLFOs,\n        patternLocked: state.tracks.lfoPatternLocks[props.sequencerEngine.currentPattern]\n    };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixParametersComponent);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {setEffectsPaneOption} from 'actions/index.js';\nimport {HIDE} from 'components/mix/constants.js';\nimport {TRACK} from 'components/mix/constants.js';\nimport {EFFECTS} from 'components/mix/constants.js';\n\n/**\n * side bar that lets you hide the pane, navigate to track parameters,\n * and also effect parameterse\n */\nclass EffectsPaneSidebar extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onClickOption(option) {\n        this.props.setEffectsPaneOption(option);\n    }\n\n    render() {\n        if (this.props.option == HIDE) {\n            return (\n                <div className=\"effects-pane-sidebar\">\n                  <div\n                    onClick={() => this.onClickOption(EFFECTS)}\n                    className=\"sidebar-option\">\n                    SHOW\n                  </div>\n                </div>\n                   );\n        }\n\n        return (\n            <div className=\"effects-pane-sidebar\">\n              <div\n                onClick={() => this.onClickOption(HIDE)}\n                className=\"sidebar-option\">\n                HIDE\n              </div>\n              <div\n                onClick={() => this.onClickOption(TRACK)}\n                className={this.props.option == TRACK ?\n                  \"selected sidebar-option\" : \"sidebar-option\"}>\n                TRACK\n              </div>\n              <div\n                onClick={() => this.onClickOption(EFFECTS)}\n                className={this.props.option == EFFECTS ?\n                  \"selected sidebar-option\" : \"sidebar-option\"}>\n                EFFECTS\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        option: state.mix.effectsPaneOption,\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setEffectsPaneOption: option => dispatch(setEffectsPaneOption(option)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectsPaneSidebar);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport {setSelectedParameter} from 'actions/index.js';\nimport EffectParameterSlider from 'components/effects/EffectParameterSlider.js';\nimport {setSelectedParameterFlashing} from 'actions/index.js';\n\nclass MixTrackParametersView extends Component {\n    getParameters() {\n        if (this.props.track === undefined) {\n            return [];\n        }\n\n        let trackData = this.props.track.trackData;\n        return [[\n            trackData.durationParameter,\n            trackData.transposeParameter,\n            trackData.chopParameter],\n            [trackData.velocityParameter,\n            trackData.attackParameter,\n            trackData.releaseParameter],\n            [trackData.pitchAttackParameter,\n             trackData.pitchDecayParameter,\n            trackData.pitchSustainParameter,\n            trackData.pitchReleaseParameter]\n        ];\n    }\n\n    render() {\n        return (\n            <div className=\"track-parameters\">\n              {this.getParameters()\n                  .map(parameters =>\n                       <ParametersBox\n                         sequencerEngine={this.props.sequencerEngine}\n                         parameters={parameters}/>)}\n            </div>\n        );\n    }\n}\n\nclass ParametersBox extends Component {\n    render() {\n        return (\n            <div className=\"parameters-box\">\n              {this.props.parameters\n                  .map(parameters =>\n                       <Parameter\n                         sequencerEngine={this.props.sequencerEngine}\n                         parameter={parameters}/>)}\n            </div>\n        );\n    }\n}    \n\nclass ConnectedParameter extends Component {\n    onChange(value) {\n        this.props.setSelectedParameter(this.props.parameter);\n        this.props.setSelectedParameterFlashing(this.props.parameter);\n        setTimeout(() => {\n            this.props.setSelectedParameterFlashing(undefined);\n        }, 3000);\n    }\n\n    render() {\n        let step = (this.props.parameter.originalMax - this.props.parameter.originalMin) <= 20 ? 0.01  : 1;\n        let isSelected = this.props.isSelected;\n        return (\n            <div className={isSelected ? \"selected parameter\" :\"parameter\"}>\n                <EffectParameterSlider\n                  name={this.props.parameter.name}\n                  parameter={this.props.parameter}\n                  isParameter={true}\n                  lfoEnabled={true}\n                  sequencerEngine={this.props.sequencerEngine}\n                  value={this.props.value}\n                  onParameterChanged={(e) => this.onChange()}\n                  step={step}\n                  max={this.props.parameter.originalMax}\n                  min={this.props.parameter.originalMin}\n                  orientation=\"horizontal\"\n                  reversed={false}\n                /> \n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.parameter.id;\n    return {\n        value: state.effects.effectParameters[id],\n        isSelected: state.mix.selectedParameter === props.parameter\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedParameter: parameter => dispatch(setSelectedParameter(parameter)),\n        setSelectedParameterFlashing: parameter => dispatch(setSelectedParameterFlashing(parameter)),\n    }\n};\n\nconst Parameter = connect(mapStateToProps, mapDispatchToProps)(ConnectedParameter);\n\nexport default connect(null, null)(MixTrackParametersView);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport EffectComponents from 'components/effects/EffectsComponent.js';\nimport EffectsPaneSidebar from 'components/mix/EffectsPaneSidebar.js';\nimport MixTrackParametersView from 'components/mix/MixTrackParametersView.js';\nimport {IS_GROUP} from 'components/mix/constants.js';\nimport {IS_TRACK} from 'components/mix/constants.js';\nimport {IS_SEND} from 'components/mix/constants.js';\nimport {TRACK} from 'components/mix/constants.js';\nimport {EFFECTS} from 'components/mix/constants.js';\n\nclass MixEffectsPane extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    getEffectsTrack() {\n        let track = this.props.selectedGroup !== undefined ? this.props.selectedGroup :\n            this.props.sequencerEngine.tracks[this.props.selectedTrack];\n        return track;\n    }\n\n    getEffectsTrackIf(type) {\n        let sends = this.props.sequencerEngine.sends.sends;\n        if (type === IS_TRACK) {\n            if (typeof(this.props.selectedTrack) === 'number') {\n                return this.props.sequencerEngine.tracks[this.props.selectedTrack];\n            }\n            return this.props.selectedTrack;\n        } else if (\n            type == IS_GROUP &&\n                sends.indexOf(this.props.selectedGroup) == -1) {\n            return this.props.selectedGroup;\n       }  else if (type == IS_SEND &&\n                    sends.indexOf(this.props.selectedGroup) > -1) {\n            return this.props.selectedGroup;\n        }\n        return undefined;\n    }\n\n    onEffectsChange() {\n        let track = this.getEffectsTrack();\n        if (track !== undefined) {\n            track.updateEffects();\n        }\n    }\n\n    render() {\n        if (this.props.effectsPaneOption === TRACK) {\n            return (\n            <div className=\"effects-pane\">\n              <EffectsPaneSidebar/>\n              <MixTrackParametersView\n                sequencerEngine={this.props.sequencerEngine}\n                track={this.props.sequencerEngine.tracks[this.props.selectedTrack]}/>\n            </div>\n            );\n        } else if (this.props.hide) {\n            return (\n                <div className=\"effects-pane hide\">\n                  <EffectsPaneSidebar/>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"effects-pane\">\n              <EffectsPaneSidebar/>\n              {this.getEffectsTrack(IS_TRACK) !== undefined || this.getEffectsTrack(IS_SEND) !== undefined ||\n                  this.getEffectsTrack(IS_GROUP) ? \n                  <EffectComponents.EffectsView\n                    store={this.props.sequencerEngine.store}\n                    sequencerEngine={this.props.sequencerEngine}\n                    onParameterChanged={(parameter) => this.props.onParameterChanged(parameter)}\n                    onEffectsChange={() => this.onEffectsChange()}\n                    panning={0}\n                    onChangePanning={(i) => console.log('panning changed = ' + i)}\n                    sends={this.props.sequencerEngine.sends}\n                    tracks={this.props.sequencerEngine.tracks}\n                    track={this.getEffectsTrackIf(IS_TRACK)}\n                    send={this.getEffectsTrackIf(IS_SEND)}\n                    group={this.getEffectsTrackIf(IS_GROUP)}/> : ''}\n              </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedGroup: state.mix.selectedGroup,\n        selectedTrack: state.mix.selectedTrack,\n        effectsPaneOption: state.mix.effectsPaneOption,\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nexport default connect(mapStateToProps, null)(MixEffectsPane);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {setSendMuted} from 'actions/index.js';\n\nclass SendMuteButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    onSendMuteClicked() {\n        this.props.send.mute(!this.props.send.muted);\n        this.props.setSendMuted(this.props.send.sendNumber, this.props.send.muted);\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div className=\"group-top-buttons\">\n              <div\n                onClick={() => this.onSendMuteClicked()}\n                className={this.props.muted ? \"muted group-mute-button\" : \"group-mute-button\"}>\n              </div>\n            </div>\n        );\n   }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        muted: state.tracks.sendMutes[props.send.sendNumber]\n    };\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSendMuted: (sendNumber, muted) => dispatch(setSendMuted(sendNumber, muted))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendMuteButton);\n","import React, { Component } from 'react';\nimport {THUMBNAIL_WIDTH} from 'components/mix/constants.js';\nimport SendMuteButton from 'components/mix/SendMuteButton.js';\n\nclass SendThumbnail extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>\n              <SendMuteButton partWidth={THUMBNAIL_WIDTH} send={this.props.send}/>\n              <div className=\"group-thumbnail\">\n              </div>\n            </div>);\n    }\n}\n\nexport default SendThumbnail;\n","import React, { Component } from 'react';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport SendThumbnail from 'components/mix/SendThumbnail.js';\nimport OutputChannelChooser from './OutputChannelChooser.js';\nimport { connect } from \"react-redux\";\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\n\nclass SendComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n  \n    isSelected() {\n        return this.props.send == this.props.selectedGroup;\n    }\n\n    onChangeVolume(volume) {\n        this.props.send.setVolume(volume);\n        this.props.setSelectedGroup(this.props.send);\n        this.props.setSelectedTrack(undefined);\n    }\n\n    render() {\n        return (\n            <div\n              className={this.isSelected() ? 'group selected' : 'group'}>\n              <div className=\"volume-slider-container\">\n                <ReactBootstrapSlider\n                  handle=\"square\"\n                  value={this.props.volume}\n                  change={(e) => this.onChangeVolume(e.target.value)}\n                  step={0.1}\n                  max={3}\n                  min={-40}\n                  orientation=\"vertical\"\n                  reversed={true}\n                  /> \n              </div>\n                {!this.props.channelMixer.stereoConnected ? \n                  <OutputChannelChooser channel={this.props.send}/>\n                  : ''}\n              <SendThumbnail\n                send={this.props.send}/>\n              <div className=\"send-name\">\n                SEND {this.props.send.name}\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedGroup: state.mix.selectedGroup,\n        volume: props.send.getVolume(),\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedGroup: group => dispatch(setSelectedGroup(group)),\n        setSelectedTrack: track => dispatch(setSelectedTrack(track))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendComponent);\n","import React, { Component } from 'react';\nimport SimpleSequencerBottomToolbar from \"components/installation/SimpleSequencerBottomToolbar.js\"\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport SidebarComponent from \"components/sidebar/SidebarComponent.js\";\nimport SubPatches from 'components/subpatch/SubPatches.js';\nimport GroupEdges from \"components/groups/GroupEdges.js\";\nimport LinkedParameterVisualizer from \"components/parameters/LinkedParameterVisualizer.js\";\nimport GridsContainer from \"components/mix/GridsContainer.js\";\nimport SendsTrackComponent from 'components/track/SendsTrackComponent.js';\nimport NewGroupsComponent from './mix2/NewGroupsComponent.js';\nimport MixEffects from './mix2/MixEffects.js';\nimport MixTab from './MixTab.js';\nimport StepsVisualizer from './StepsVisualizer.js';\nimport TracksVisualizer from './TracksVisualizer.js';\nimport TrackQuickView from 'components/sidebar/TrackQuickView.js';\nimport Group from 'components/mix/Group.js';\nimport NewGroup from 'components/mix/NewGroup.js';\nimport GroupsComponent from 'components/mix/GroupsComponent.js';\nimport MixParametersComponent from 'components/mix/MixParametersComponent.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport MixesComponent from 'components/mix/MixesComponent.js';\nimport { connect } from \"react-redux\";\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setHideMixer} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\nimport {setSelectedParameter} from 'actions/index.js';\nimport {setSelectedParameterFlashing} from 'actions/index.js';\nimport MixEffectsPane from 'components/mix/MixEffectsPane.js';\nimport GroupMuteButton from 'components/mix/GroupMuteButton.js';\nimport Sample from 'repos/Sample.js';\nimport EffectComponents from 'components/effects/EffectsComponent.js';\nimport SendComponent from 'components/mix/SendComponent.js';\nimport SubMixComponent from './SubMixComponent.js';\nimport {HIDE, MIXES} from 'components/mix/constants.js';\nimport '../../Mix.scss';\n\n/**\n * Mode for mixing sounds by groups easily, similar to the mix view in ableton\n */\nclass Mix extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            scale: 1,\n            selectedGroup: undefined,\n            renders: 0,\n            pattern: props.sequencerEngine.currentPattern\n        };\n\n        // this.props.setSelectedTrack(props.sequencerEngine.cursor.track);\n        \n        this.sequencerEngine = props.sequencerEngine;\n\n        this.onDrop = this.onDrop.bind(this);\n        this.ref = React.createRef();\n    }\n\n    get groups() {\n        return this.sequencerEngine.groups;\n    }\n\n    // plays or stops the sequencer\n    onClickPlayStop() {\n        this.sequencerEngine.play();\n        this.setState(this.state);\n    }\n\n    onParameterChanged(parameter) {\n        this.props.setSelectedParameter(parameter);\n        this.props.setSelectedParameterFlashing(parameter);\n        setTimeout(() => {\n            this.props.setSelectedParameterFlashing(undefined);\n        }, 3000);\n    }\n\n    get hide() {\n        return this.props.effectsPaneOption === HIDE ||\n            this.props.mixViewMode === MIXES;\n    }\n\n    onDrop(e) {\n        let state = this.props.sequencerEngine.state;\n        if (state.sequencer.effectDragging) {\n            return;\n        }\n        let trackDragging = state.mix.trackDragging;\n        this.props.sequencerEngine.groups.newGroup(\n            trackDragging);\n    }\n\n    toggleHide() {\n        this.props.setHideMixer(\n            !this.props.hideMixer);\n    }\n\n    render() {\n        if (this.props.showingPiano) {\n            console.log('showing piano');\n            return (<SimpleSequencerBottomToolbar sequencerEngine={this.props.sequencerEngine}/>);\n        }\n        return (\n            <div className=\"full-view\">\n                <SubPatches containerRef={this.ref}/>\n              <div ref={this.ref} className={this.props.mixViewMode === MIXES ? \"mixes mix-view\" : \"mix-view\"}>\n                {/*\n                <GroupEdges scrollContainer={this.ref} sequencerEngine={this.props.sequencerEngine}/>\n                <LinkedParameterVisualizer\n                  scale={this.state.scale}\n                  scrollContainer={this.ref}/>*/}\n                <ConditionedComponent\n                  condition={this.props.sequencerEngine.tracks.length > 0}>\n                  <MixTab sequencerEngine={this.props.sequencerEngine}/>\n                  <MixParametersComponent\n                    isMixView={true}\n                    sequencerEngine={this.props.sequencerEngine}\n                    lfosTrack={this.props.sequencerEngine.lfosTrack}/>\n                </ConditionedComponent>\n                <ConditionedComponent\n                  condition={this.props.mixViewMode === MIXES}>\n                  <GridsContainer \n                    scale={this.state.scale}\n                    setScale={(x) => this.setState({scale: x})}\n                    sequencerEngine={this.props.sequencerEngine}/>\n                </ConditionedComponent>\n                <div\n                  onDrop={this.onDrop}\n                  className={this.hide ? \"channel-mixer lower\" : \"channel-mixer\"}>\n                  {this.props.hideMixer && this.props.mixViewMode === MIXES ? \"\" : \n                   <div className=\"channel-mixer-parts\">\n                     <div className=\"groups-container\" id=\"mix-scroll\">\n                       <ConditionedComponent\n                         condition={this.props.mixViewMode !== MIXES}>\n                         <NewGroupsComponent sequencerEngine={this.sequencerEngine}/>\n                       </ConditionedComponent>\n                       <ConditionedComponent\n                         condition={this.props.mixViewMode === MIXES}>\n                         <SubMixComponent sequencerEngine={this.props.sequencerEngine}/>\n                       </ConditionedComponent>\n                     </div>\n                     <SendsTrackComponent sequencerEngine={this.props.sequencerEngine}/>\n                   </div>}\n                  {this.props.mixViewMode === MIXES && \n                  <div className=\"mix-bottom-bar\">\n                    <div onClick={() => this.toggleHide()} className=\"collapse-button\">\n                      {this.props.hideMixer ?\n                       <div className=\"arrow-right\"/> :\n                       <div className=\"arrow-up\"/>}\n                    </div>\n                  </div>}\n                </div>\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedTrack: track => dispatch(setSelectedTrack(track)),\n        setHideMixer: x => dispatch(setHideMixer(x)),\n        setSelectedGroup: group => dispatch(setSelectedGroup(group)),\n        setSelectedParameter: parameter => dispatch(setSelectedParameter(parameter)),\n        setSelectedParameterFlashing: parameter => dispatch(setSelectedParameterFlashing(parameter))\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    let bottomMode = state.arrangement.bottomMode;\n    let showingPiano = state.sequencer.showPianoRoll && bottomMode === PIANO_ROLL;\n    return {\n        showingPiano,\n        effectsPaneOption: state.mix.effectsPaneOption,\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n        mixViewMode: state.mix.mixViewMode,\n        hideMixer: state.mix.hideMixer\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Mix);\n","export const getPath = (x1,y1,x2,y2) => {\n    let d = Math.sqrt(dist(x1,y1,x2,y2)) * window.dist;\n    let yDistance = Math.abs(y2-y1);\n    let xd = Math.abs(x2 - x1);\n    let xDistance = Math.sqrt(xd);\n    if (x2 - x1 < 0) {\n        xDistance *= -1;\n    }\n    if (xd < 20) {\n        xDistance += (20 - xd);\n    }\n \n    return [x1, y1, x1 + window.x*xDistance, y1+d, x2 - window.x*xDistance, y2-d, x2, y2];\n};\n\nconst dist = (x1, y1, x2, y2) => {\n    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport Arrow from \"components/effects/rack/Arrow.js\";\nimport {getPath} from './getPath.js';\n\nconst DraggingEdge = ({dragging, scrollContainer, container}) => { \n    let [pos, setPos] = useState(undefined);\n\n    useEffect(() => {\n        if (!dragging) {\n            return;\n        }\n        let {transformation, x, y} = dragging;\n        let fromId = transformation.id;\n        let fromEl = document.getElementById(\"transformation-\" + fromId);\n        if (fromEl ) {\n            let fromRect = fromEl.getBoundingClientRect();\n            let bounds = container.current.getBoundingClientRect();\n            let scrollTop = scrollContainer.current.scrollTop;\n            let scrollLeft = scrollContainer.current.scrollLeft;\n            let left = scrollContainer.current.offsetLeft - scrollLeft;\n            setPos({\n                x1: fromRect.left - left, \n                y1: fromRect.top - bounds.top,\n                x2: x - 3 - left,\n                y2: y - bounds.top -2 \n            });\n        }\n    }, [dragging]);\n\n    if (!dragging || !pos) { return [] };\n\n    let {x1, y1,x2,y2} = pos;\n\n    return (\n         <Arrow\n          className=\"markov-edge new-edge\" \n          tension={window.tension}\n          pointerLength= {6}\n          pointerWidth={4}\n           points={[x1,y1,0.75*x1 + 0.25*x2, 0.75*y1 + 0.25*y2, 0.25*x1 + 0.75*x2, 0.25*y1 + 0.75*y2,  x2,y2]}\n          strokeWidth={2} />\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      dragging: state.groups.transformationEdgeDragging\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DraggingEdge);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport Arrow from \"components/effects/rack/Arrow.js\";\nimport {getPath} from './getPath.js';\n\nconst MarkovEdge = ({transformation, container, scrollContainer, trackSteps}) => { \n    let [pos, setPos] = useState(undefined);\n    useEffect(() => {\n        setTimeout(() => {\n            let fromId = transformation.id;\n            let toId = transformation.whenValue.get();\n            let fromEl = document.getElementById(\"transformation-\" + fromId);\n            let toEl = document.getElementById(\"transformation-\" + toId);\n            if (fromEl && toEl) {\n                let fromRect = fromEl.getBoundingClientRect();\n                let toRect = toEl.getBoundingClientRect();\n                let bounds = container.current.getBoundingClientRect();\n                let scrollTop = scrollContainer.current.scrollTop;\n                let scrollLeft = scrollContainer.current.scrollLeft;\n                let left = scrollContainer.current.offsetLeft - scrollLeft;\n                setPos({\n                    x2: fromRect.left + 3 - left,\n                    y2: fromRect.top - bounds.top,\n                    x1: toRect.left + 4 - left,\n                    y1: toRect.top - bounds.top \n                });\n            }\n        }, 100);\n    }, [setPos, transformation, trackSteps]);\n\n    if (!pos) {\n        return [];\n    }\n\n    let {x1, y1,x2,y2} = pos;\n\n    return (\n        <Arrow\n          className=\"markov-edge\" \n          tension={window.tension}\n          pointerLength= {6}\n          pointerWidth={4}\n          points={getPath(x1, y1, x2, y2)}\n          strokeWidth={2} />);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      trackSteps: state.tracks.trackSteps[props.track.trackNumber],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MarkovEdge);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport DraggingEdge from './DraggingEdge.js';\nimport MarkovEdge from \"components/groups/MarkovEdge.js\"\nimport {\n    setTransformationEdgeDragging} from 'actions/index.js';\nimport {MARKOV} from 'pattern/groups/transformations.js';\nimport {connect} from 'react-redux';\n\nconst GroupEdges = ({\n    stepsGroupMode,\n    scrollContainer,\n    sequencerEngine,\n    setTransformationEdgeDragging,\n}) => { \n    let ref = useRef(undefined);\n    \n    \n    useEffect(() => {\n        window.addEventListener(\"mouseup\", onMouseUp);\n        window.addEventListener(\"mousemove\", onMouseMove);\n\n        return () => {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n            window.removeEventListener(\"mousemove\", onMouseMove);\n        };\n    }, []);\n\n    const onMouseUp = useCallback((e) => {\n        if (sequencerEngine.state.groups.stepsGroupMode) {\n            setTransformationEdgeDragging(undefined);\n        }\n    },  []);\n\n    const onMouseMove = useCallback((e) => {\n        let dragging = sequencerEngine.state.groups.transformationEdgeDragging;\n        if (!dragging) { return; }\n        let x = e.pageX;\n        let y = e.pageY;\n        setTransformationEdgeDragging({\n            ... dragging,\n            x,\n            y\n        });\n    }, []);\n\n    if (!stepsGroupMode) {\n        return [];\n    }\n    let markovTransformations = sequencerEngine.tracks.map(\n        (track) => track.pattern.getAllGroups().map(g => g.transformations.filter(x => x.whenType === MARKOV).map(\n            t => ({transformation: t, track})))\n            .reduce((a,b) => [...a,...b], []))\n        .reduce((a,b) => [...a, ...b], []);\n    let style = {\n        height: scrollContainer.current && scrollContainer.current.scrollHeight \n    };\n\n    if (!scrollContainer.current) {\n        return [];\n    }\n    return (\n        <svg\n          style={style} ref={ref} className=\"group-edges\">\n          <defs>\n            <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"8\" \n\t            refX=\"4\" refY=\"2\" orient=\"auto\">\n              <polygon points=\"0 0, 5 2, 0 4\" />\n            </marker>\n          </defs>\n          <DraggingEdge scrollContainer={scrollContainer} container={ref}/>\n        {markovTransformations.map(\n            ({transformation, track}) =>\n                <MarkovEdge\n                  key={transformation.id}\n                  scrollContainer={scrollContainer}\n                  track={track}\n                  container={ref}\n                  transformation={transformation}/>)}\n        </svg>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      stepsGroupMode: state.groups.stepsGroupMode,\n      trackSteps: state.tracks.trackSteps[0],\n      isDragging: state.groups.transformationEdgeDragging !== undefined\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTransformationEdgeDragging: x => dispatch(setTransformationEdgeDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupEdges);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {downloadImage} from \"utils/downloadImage.js\"\nimport Tags from './Tags.js';\nimport Dropdown from 'react-dropdown';\nimport {connect} from 'react-redux';\n\nconst RecordInfo = ({discogs, records, sample, showTags=true}) => { \n    let [tags, setTags] = useState([]);\n    let [record, setRecord] = useState(records[0]);\n    useEffect(() => {\n        let _records = [...records];\n        _records.sort((a,b) => a.year - b.year);\n        setRecord(_records[0]);\n    }, [records, setRecord]);\n\n    useEffect(() => {\n        if (showTags) {\n            sample.tags = [... tags];\n        }\n    }, [tags, sample]);\n\n    useEffect(() => {\n        if (record) {\n            sample.year = record.year;\n            sample.styles = record.genre || [];\n            sample.country = record.country;\n            sample.discogsId = record.id;\n            sample.releaseName = record.title;\n            downloadImage(record.thumb).then(\n                t => sample.coverArtHash = t);\n            discogs.getReleaseInfo(record.id)\n                .then(d => {\n                    sample.artistName = d.artists[0].name;\n                });\n        }\n    }, [record, sample]);\n\n   \n    if (!record) {\n        return '';\n    }\n\n    let options = records.map(\n        r => ({label: r.title + '(' + (r.year) + ')', value: r}));\n        \n    return (\n        <div className=\"record-info\">\n          <div className=\"meta\">\n            <img src={record.thumb}/>\n            <div className=\"record-meta\">\n              <div className=\"record-title\">{record.title}</div>\n              <div className=\"record-year\">{record.year}</div>\n              <div className=\"record-genre\">{record.genre.map(g => <span>{g}</span>)}</div>\n            </div>\n          </div>\n          <div className=\"others\">\n            <Dropdown\n              onChange={(o) => setRecord(o.value)}\n              options={options}\n              value={options.find(o => o.value === record)}/>\n          </div>\n          {showTags ? <Tags tags={tags} setTags={setTags}/> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecordInfo);\n","import React, {useState, useCallback} from 'react';\nimport Dropdown from 'react-dropdown';\n\nexport default function OutputChannelChooser(props) {\n    let channelMixer = props.channel.channelMixer;\n    const [option, setOption] = useState(getOption(props.channel));\n\n    const onChange = useCallback((value) => {\n        channelMixer.switchChannelOutput(\n            props.channel.outputNode, \n            value.left,\n            value.right);\n\n        props.channel.outputs = [value.left, value.right];\n\n        setOption(getOption(props.channel));\n    }, [props.channel, setOption]);\n\n    return (\n        <div className=\"outputs-container\">\n              <Dropdown\n                className='channel-dropdown'\n                controlClassName='channel-control-dropdown'\n                arrowClassName='channel-arrow-dropdown'\n                options={getOptions(channelMixer)}\n                onChange={(o) => onChange(o.value)}\n                value={option}\n                placeholder=\"Rate\" />\n        </div>\n    );\n}\n\nfunction getOption(channel) {\n    let left = channel.outputs[0];\n    let right = channel.outputs[1];\n    let label = '';\n    if (right !== undefined) {\n        label =  (left + 1) + '/' + (right + 1);\n    } else {\n        label = left + 1;\n    }\n    return {\n        label,\n        value: {\n            left,\n            right\n        },\n    };\n}\n\nfunction getOptions(channelMixer) {\n    let options = [];\n    for (let i=0; i < channelMixer.channelCount; i+=2) {\n        options.push({\n            label: (i + 1) + '/' + (i + 2),\n            value: {\n                left: i,\n                right: i + 1,\n            }\n        });\n    }\n    for (let i=0; i < channelMixer.channelCount; i++) {\n        options.push({\n            label: i + 1,\n            value: {\n                left: i,\n            }\n        });\n    }\n    return options;\n}\n","export function truncate(str, truncateLength=14) {\n    if (str === undefined || str === null) {\n        return '';\n    }\n    let x = str.length > truncateLength? str.substring(0, truncateLength) + '...' : str;\n    return x.trim();\n}\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {getSamplePack} from 'decentralized/artists/Artists.js';\nimport {setUploadingFile} from 'actions/index.js';\nimport {SAMPLE_PACK} from 'constants/release-types.js';\nimport {connect} from 'react-redux';\nimport {downloadImage} from 'utils/downloadImage.js';\nimport ImageHandler from \"components/explore/lists/ImageHandler.js\"\n\n\nconst SamplePackFlow = ({track, sample, setUploadingFile, guildId}) => { \n    const [artistName, setArtistName] = useState('');\n    const [name, setName] = useState('');\n    const [coverArtUrl, setCoverArtUrl] = useState('');\n    const [samplePack, setSamplePack] = useState(undefined);\n    const [editedCoverArt, setEditedCoverArt] = useState(false);\n    const [copiedAll, setCopiedAll] = useState(false);\n\n    useEffect(() => {\n        if (sample.copiedAll) {\n            setCopiedAll(true);\n        }\n    }, [sample, setCopiedAll]);\n\n    useEffect(() => {\n        // check if this sample pack exists already, and if so auto fill\n        // the cover art hash\n        getSamplePack(artistName, name)\n            .then(samplePack => {\n                if (samplePack) {\n                    setName(samplePack.releaseName);\n                    setCoverArtUrl(samplePack.coverArtHash);\n                    setSamplePack(samplePack);\n                } else {\n                    setSamplePack(undefined);\n                }\n            });\n    }, [artistName, name, setName, setCoverArtUrl, setSamplePack]);\n\n    const copyToAll = useCallback(() => {\n        let coverArtHash = \"\";\n        if (coverArtUrl && editedCoverArt) {\n            coverArtHash = coverArtUrl;\n        } else if (samplePack && samplePack.coverArtHash) {\n            coverArtHash = samplePack.coverArtHash;\n        } \n\n        for (let _track of track.sequencerEngine.tracks) {\n            let _sample = _track.sample;\n            if (sample.tags) {\n                _sample.tags = [...sample.tags];\n            }\n            if (samplePack) {\n                window.sessionStorage.setItem(\"getSamplePack(\" + artistName + ',' + name+ \")\", JSON.stringify(samplePack));\n                if (!samplePack.releaseId) {\n                    _sample.discogsId =  Math.floor(new Date().getTime() / 10000);\n                } else {\n                    _sample.discogsId = samplePack.releaseId;\n                }\n            } else {\n                _sample.discogsId = Math.floor(new Date().getTime() / 10000);\n            }\n            _sample.releaseType = SAMPLE_PACK;\n \n            _sample.coverArtHash = coverArtHash;\n            _sample.releaseName = name;\n            _sample.artistName = artistName;\n            _sample.year = 0;\n            _sample.styles = [];\n            _sample.country = \"\";\n            _sample.copiedAll = true;\n        }\n        setCopiedAll(true);\n    }, [sample, name, coverArtUrl, editedCoverArt, samplePack, setCopiedAll]);\n\n    const saveWithCoverArt = useCallback((hash) => {\n        sample.coverArtHash = hash;\n        sample.releaseName = name;\n        sample.artistName = artistName;\n        sample.year = 0;\n        sample.styles = [];\n        sample.country = \"\";\n        \n        // since this isnt actually from discogs we use the current\n        // time stamp as the discogs id\n        if (samplePack) {\n            window.sessionStorage.setItem(\"getSamplePack(\" + artistName + ',' + name+ \")\", JSON.stringify(samplePack));\n            if (!samplePack.releaseId) {\n                sample.discogsId =  Math.floor(new Date().getTime() / 10000);\n            } else {\n                sample.discogsId = samplePack.releaseId;\n            }\n        } else {\n            sample.discogsId = Math.floor(new Date().getTime() / 10000);\n        }\n        sample.releaseType = SAMPLE_PACK;\n        setUploadingFile(true);\n        \n        setTimeout(async () => {\n            await sample.saveSample(guildId);\n            setUploadingFile(false);\n        }, 100);\n    }, [artistName, name, sample, samplePack, guildId]);\n\n    const saveAll = useCallback(() => {\n        setUploadingFile(true);\n        setTimeout(async () => {\n            for (let _track of track.sequencerEngine.tracks) {\n                await _track.sample.saveSample(guildId);\n            }\n            setUploadingFile(false);\n        }, 100);\n    }, [track, guildId]);\n    \n\n    const saveSample = useCallback((e) => {\n        if (coverArtUrl && editedCoverArt) {\n            saveWithCoverArt(coverArtUrl);\n        } else if (samplePack && samplePack.coverArtHash) {\n            saveWithCoverArt(samplePack.coverArtHash);\n        } else {\n            saveWithCoverArt(undefined);\n        }\n    }, [name, artistName, coverArtUrl, sample, samplePack, guildId, editedCoverArt]);\n\n    useEffect(() => {\n        setSamplePack(undefined);\n    }, [setSamplePack, sample]);\n\n    return (\n        <div className=\"sample-pack-flow\">\n          <div className=\"input-container\">\n            <div className=\"input-type\">\n              Artist Name:\n            </div>\n            <input\n              value={artistName}\n              onChange={(e) => setArtistName(e.target.value)}\n              type=\"text\"\n              className=\"sample-pack-name-input\"/>\n          </div>\n          <div className=\"input-container\">\n            <div className=\"input-type\">\n              Sample Pack:\n            </div>\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              type=\"text\"\n              className=\"sample-pack-name-input\"/>\n          </div>\n\n          <ImageHandler placeholder=\"Drag cover art here\" imageHash={coverArtUrl} setImageHash={(e) => {\n                  setCoverArtUrl(e);\n                  setEditedCoverArt(true);\n              }}/>\n\n          {!copiedAll ?\n           <div\n              onClick={saveSample}\n              className={artistName === \"\" ? \"save-button disabled\" : \"save-button\"}>\n              Save\n           </div> : ''}\n          {copiedAll ?\n           <div onClick={saveAll} className=\"save-button\">\n             Save All\n           </div> :\n           <div onClick={copyToAll} className=\"save-button\">\n             Copy To All Tracks\n           </div>}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUploadingFile: (a) => dispatch(setUploadingFile(a)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplePackFlow);\n","export const SAMPLE_PACK = \"SAMPLE_PACK\";\nexport const RECORD = \"RECORD\";\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {RECORD, SAMPLE_PACK} from 'constants/release-types.js';\nimport {connect} from 'react-redux';\n\nconst ReleaseType = ({releaseType, setReleaseType}) => { \n    return (\n        <div className=\"release-type-chooser\">\n          <div\n            onClick={() => setReleaseType(RECORD)}\n            className={releaseType === RECORD ? \"option selected\" : \"option\"}>\n            Record\n          </div>\n          <div\n            onClick={() => setReleaseType(SAMPLE_PACK)}\n            className={releaseType === SAMPLE_PACK ? \"option selected\" : \"option\"}>\n            Sample Pack\n          </div>\n          <div\n            onClick={() => setReleaseType(undefined)}\n            className={releaseType === undefined ? \"option selected\" : \"option\"}>\n          None\n        </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReleaseType);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {lstorage} from 'utils/lstorage.js';\nimport {setUploadingFile} from 'actions/index.js';\nimport {setSelectedGuild, setShowLogin, setSigningUp} from 'actions/index.js';\nimport accounts from 'accounts/Accounts.js';\nimport Discogs from 'discogs/Discogs.js';\nimport {connect} from 'react-redux';\nimport axios from 'axios';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {downloadImage} from 'utils/downloadImage.js';\n\n\nconst discogs = new Discogs();\n\nconst SAMPLE_PACK = 'SAMPLE_PACK';\nconst RECORD = 'RECORD';\n\nconst DiscogsFlow = ({\n    sample,\n    setUploadingFile,\n    isLoggedIn,\n    setShowLogin,\n    guildId}) => { \n    const [results, setResults] = useState([]);\n    const [name, setName] = useState('');\n    const [selectedId, setSelectedId] = useState(undefined);\n\n    const onClickResult = useCallback((result) => {\n        if (result.id === selectedId) {\n            setSelectedId(undefined);\n            sample.discogsId = undefined;\n            sample.year = undefined;\n            sample.releaseName = undefined;\n            sample.styles = [];\n            sample.country = null;\n            sample.coverArtHash = undefined;\n            sample.artistName = undefined;\n            sample.releaseType = undefined;\n            return;\n        }\n\n        setSelectedId(result.id);\n        sample.discogsId = result.id;\n        sample.year = result.year;\n        sample.releaseName = result.title;\n        sample.styles = result.style || [];\n        sample.country = result.country;\n        downloadImage(result.thumb)\n            .then(hash => sample.coverArtHash = hash);\n        discogs.getReleaseInfo(result.id)\n            .then(r => {\n                if (r !== undefined) {\n                    sample.artistName = r.artists[0].name;\n                    sample.releaseName = r.title;\n                    sample.releaseType = 'RECORD';\n                }\n            });\n        lstorage.setItem(\"lastDiscogs\", JSON.stringify(result));\n    }, [sample, setSelectedId, selectedId]);\n\n    const search = useCallback(() => {\n        discogs.searchRecords(stripExtension(name))\n            .then(x => setResults(x));\n    }, [name, setResults]);\n\n    useEffect(() => {\n        let n = stripExtension(sample.name);\n        setName(n);\n        discogs.searchRecords(stripExtension(n))\n            .then(x => {\n                if (lstorage.getItem(\"lastDiscogs\")) {\n                    let parsed = JSON.parse(lstorage.getItem(\"lastDiscogs\"));\n                    if (!x.some(y => y.id === parsed.id)) {\n                        x = [parsed, ... x];\n                        onClickResult(parsed);\n                    }\n                }\n                setResults(x);\n            });\n    }, [sample, setResults, setName, setSelectedId]);\n\n    const onClickSave = useCallback(() => {\n        setUploadingFile(true);\n        setTimeout(async () => {\n            await sample.saveSample(guildId);\n            setUploadingFile(false);\n        }, 100);\n    }, [sample, guildId]);\n\n    const showLogin = () => {\n        setShowLogin(true);\n    };\n\n    if (!isLoggedIn) {\n        return (\n            <div className=\"save-new-sample\">\n            Please <span className=\"login-button\" onClick={showLogin}>log in</span> to save this new sound.\n            </div>\n        );\n    }\n    return (\n        <div>\n          <div className=\"input-container\">\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              type=\"text\"\n              className=\"discogs-search-input\"/>\n            <div\n              onClick={search}\n              className=\"search-button\">\n              Search\n            </div>\n          </div>\n          {results.length === 0 ? <div className=\"no-results\">No results found. Try editing the name and searching again.</div> : ''}\n          <div className=\"results\">\n            {results.map(x => <Result isSelected={x.id === selectedId} onClick={onClickResult} result={x}/>)}\n          </div>\n          <div onClick={onClickSave} className=\"save-sample-button\">\n            Save\n          </div>\n        </div>\n    );\n}\n\nconst Result = ({result, isSelected, onClick}) => {\n    let className = \"result\";\n    if (isSelected) {\n        className += \" selected\";\n    }\n    return (\n        <div\n          onClick={() => onClick(result)}\n          className={className}>\n          <img src={result.thumb} className=\"discogs-thumb\"/>\n          <div className=\"result-title\">{result.title}</div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isLoggedIn: state.sequencer.userToken !== undefined,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUploadingFile: (a) => dispatch(setUploadingFile(a)),\n      setShowLogin: show=> dispatch(setShowLogin(show))\n  };\n};\n\n\nconst stripExtension = (name) => {\n    let extensionIndex = name.indexOf('.flac');\n    if (extensionIndex > -1) {\n        name = name.slice(0, extensionIndex);\n    }\n    extensionIndex = name.indexOf('.wav');\n    if (extensionIndex > -1) {\n        name = name.slice(0, extensionIndex);\n    }\n    return name;\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DiscogsFlow);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SamplePackFlow from './SamplePackFlow.js';\nimport ReleaseType from './ReleaseType.js';\nimport DiscogsFlow from './DiscogsFlow.js';\n\nimport {connect} from 'react-redux';\nimport {SAMPLE_PACK, RECORD} from 'constants/release-types.js';\n\nconst SaveNewSample = ({track, sample}) => { \n    const [releaseType, setReleaseType] = useState(undefined);\n\n    return (\n        <div className=\"save-new-sample\">\n          <div className=\"sample-save-info\">\n            Match the sample to it's source\n          </div>\n          <ReleaseType setReleaseType={setReleaseType} releaseType={releaseType}/>\n          {releaseType === RECORD ? <DiscogsFlow sample={sample}/> : \"\"}\n          {releaseType === SAMPLE_PACK ? <SamplePackFlow track={track} sample={sample}/> : \"\"}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveNewSample);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ethereum from 'decentralized/ethereum.js';\nimport {connect} from 'react-redux';\n\nconst Rating = ({content, color, type}) => { \n    const [rating, setRating] = useState(undefined);\n    let list = [0, 1, 2, 3, 4];\n    const onClick = useCallback((r) => {\n        setRating(r);\n        ethereum.xanadu.rateSound(content, r, type);\n    }, [setRating, content]);\n\n    useEffect(() => {\n        ethereum.xanadu.getSoundRating(content, type)\n            .then(x => {\n                setRating(x);\n            });\n    }, [setRating, content]);\n\n    return (\n        <div className=\"rating\">\n          {list.map(\n              x =>\n                  <Star\n                    color={color}\n                    onClick={onClick}\n                    number={x}\n                    rating={rating}/>)}\n       </div>\n    );\n}\n\nconst Star = ({number, rating, onClick, color}) => {\n\n    let className = \"star\";\n    if (number <= rating) {\n        className += \" starred\";\n    }\n\n    let style = {\n        color: color\n    };\n\n    return (\n        <div\n          style={style}\n          onClick={() => onClick(number)}\n          className={className}>\n          <span>&#9734;</span>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setTrackBrowsedPresets} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst PresetsBreadcrumb = ({track, preset, presets=[], setBrowsedPresets}) => { \n    const onClick = useCallback((p) => {\n        track.sequencerEngine.auditionPreset(p, track.trackNumber, p.loadMods, p.loadEffects, false);\n    }, [track]);\n\n    const onClickPrev = useCallback(() => {\n        let index = presets.map(x => x.contentHash).indexOf(preset.contentHash);\n        index++;\n        let s = presets[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, presets, preset]);\n\n    const onClickNext = useCallback(() => {\n        let index = presets.map(x => x.contentHash).indexOf(preset.contentHash);\n        index--;\n        let s = presets[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, presets, preset]);\n\n    const getClassName = useCallback((x) => {\n        if (x.contentHash === preset.contentHash) {\n            return \"sample-option selected\";\n        }\n        return \"sample-option\";\n    }, [preset]);\n\n    let index = presets.map(x => x.contentHash).indexOf(preset.contentHash);\n    let len = presets.length;\n\n    let nextClass = \"next-button\";\n    let prevClass = \"previous-button\";\n\n    if (index >= len - 1) {\n        prevClass += \" disabled\";\n    }\n\n    if (index < 1) {\n        nextClass += \" disabled\";\n    }\n\n    return (\n        <div>\n          <div className=\"fwd-back-buttons\">\n            <div\n              onClick={onClickPrev}\n              className={prevClass}/>\n            <div\n              onClick={onClickNext}\n              className={nextClass}/>\n          </div>\n          <div className=\"samples-breadcrumb\">\n            {presets.map(\n                (x, i) =>\n                    <div\n                      key={x.name + '.' + i}\n                      onClick={() => onClick(x)}\n                      className={getClassName(x)}>\n                      {x.name} ( \n                      {x.tags && x.tags.join(\", \")})\n                    </div>)}\n            \n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presets: state.tracks.trackBrowsedPresets[props.track.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setBrowsedPresets: (presets) => dispatch(\n          setTrackBrowsedPresets(props.track.id, presets))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresetsBreadcrumb);\n","import ethereum from \"decentralized/ethereum.js\"\nimport {getFormattedDate} from 'utils/date.js';\nimport {SAMPLE, PRESET} from 'constants/content-types.js';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst CreateBy = ({content}) => { \n    let [contentName, setContentName] = useState('');\n    let [userName, setUserName] = useState('');\n    let [createdDate, setCreatedDate] = useState('');\n\n    useEffect(() => {\n        if (!content.isCreated()) {\n            setCreatedDate('');\n            setUserName('');\n            return;\n        }\n        ethereum.users.getUserName(content.sampledByUser || content.user)\n            .then(name => setUserName(name));\n        getBlockDate(content.blockNumber)\n            .then(date => {\n                if (date) {\n                    setCreatedDate(getFormattedDate(date));\n                }\n            });\n    }, [setUserName, setCreatedDate, content.ipfsHash, content]);\n\n    const saveContent = useCallback(() => {\n        content.save(contentName);\n    }, [content, contentName]);\n\n    const onChange = useCallback((e) => {\n        setContentName(e.target.value);\n    }, [setContentName]);\n\n    let creationWord = content.getContentType() === SAMPLE ?\n        'sampled' : 'created';\n\n    let creation = '';\n    if (content.getContentType() === PRESET &&\n        content.hasEdits) {\n        creation = (\n            <div className=\"needs-creation\">\n              <div className=\"info-text\">You've edited this sound</div>\n              <div className=\"name-input-container\">\n                <input\n                  placeholder=\"Type new name for sound\"\n                  onChange={onChange}\n                  value={contentName} type=\"text\" className=\"preset-name-input\"></input>\n                <div\n                  onClick={saveContent}\n                  className={contentName === '' ? \"preset-save-button disabled\" : \"preset-save-button\"}>\n                  Save\n                </div>\n              </div>\n            </div>\n        );\n    }\n\n    let createdBy = '';\n    if (content.isCreated() && content.getContentType() === SAMPLE) {\n        createdBy = (\n            <div className=\"sampled-by\">\n              <span className=\"sample-finder\">{userName}</span> {creationWord} this on <span className=\"sampled-date\">{createdDate}</span>\n            </div>);\n\n    }\n    return (\n        <div className=\"created-by\">\n          {creation}\n          {createdBy}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateBy);\n","export function getFormattedDate(date) {\n  var year = date.getFullYear();\n\n  var month = (1 + date.getMonth()).toString();\n  month = month.length > 1 ? month : '0' + month;\n\n  var day = date.getDate().toString();\n  day = day.length > 1 ? day : '0' + day;\n  \n  return month + '/' + day + '/' + year;\n}\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ContextualHelp from \"components/sidebar/ContextualHelpComponent.js\";\nimport {MULTI_SYNTH, SAMPLED_INSTRUMENT} from 'constants/instrument-types.js';\nimport Rating from './Rating.js';\nimport {PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport PresetsBreadcrumb from './PresetsBreadcrumb.js';\nimport PresetsExplorer from './PresetsExplorer.js';\nimport TagsInfo from './TagsInfo.js';\nimport CreatedBy from './CreatedBy.js';\nimport YoutubeInfo from \"components/Youtube.js\";\nimport {connect} from 'react-redux';\nimport '../../SynthBrowser.scss';\nimport Colors from 'components/Colors.js';\n\nconst colors = new Colors();\n\nconst SynthBrowser = ({track, subTrack, synth, setTagSelected, tagSelected, hasEdits, name, type=MULTI_SYNTH}) => { \n    let t = subTrack || track;\n    let preset = t.preset;\n\n    let color = colors.getColorForTrack(t);\n    let thumbnailStyle = {\n        backgroundColor: color\n    };\n    \n    return (\n        <div\n          className=\"sampler-browser synth-browser\">\n          <div>\n            <div style={thumbnailStyle} className=\"synth-thumbnail\">\n            </div>\n            <PresetsBreadcrumb preset={preset} track={subTrack || track}/>\n          </div>\n          <div className=\"sample-info\">\n            <div className=\"name-info\">\n              <div className=\"sample-name\">{name || t.presetName || t.getName()}</div>\n              <CreatedBy hasEdits={hasEdits} content={preset}/>\n              <div className=\"blank-patch\">\n                {!hasEdits && name === undefined ?\n                 'Blank Patch' : ''}\n              </div>\n            </div>\n            {preset.isCreated() ?\n             <TagsInfo\n               tags={preset.tags}\n               tagSelected={tagSelected}\n               setTagSelected={setTagSelected}\n               content={preset}/>\n             : ''}\n            {!hasEdits && name ?\n             <Rating\n               color={color}\n               content={preset.contentHash}\n               type={PRESET_RATED}/> : ''}\n          </div>\n          <PresetsExplorer\n            type={type}\n            track={t}\n            tagSelected={tagSelected}\n            content={preset}\n          />\n          <ContextualHelp sequencerEngine={track.sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, {subTrack, track}) => {\n    let t = subTrack || track;\n    let preset = t.preset;\n    return {\n        hasEdits: preset.hasEdits === undefined ? true : preset.hasEdits,\n        name: preset.name,\n        tags: preset.tags,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SynthBrowser);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setTrackBrowsedSamples} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst SamplesBreadcrumb = ({track, sample, samples=[], setBrowsedSamples}) => { \n    const onClick = useCallback((s) => {\n        track.auditionSound(s, undefined, undefined, false);\n    }, [track]);\n\n    const onClickPrev = useCallback(() => {\n        let index = samples.indexOf(sample);\n        index++;\n        let s = samples[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, samples, sample]);\n\n    const onClickNext = useCallback(() => {\n        let index = samples.indexOf(sample);\n        index--;\n        let s = samples[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, samples, sample]);\n\n    const getClassName = useCallback((x) => {\n        if (x === sample) {\n            return \"sample-option selected\";\n        }\n        return \"sample-option\";\n    }, [sample]);\n\n    let index = samples.indexOf(sample);\n    let len = samples.length;\n\n    let nextClass = \"next-button\";\n    let prevClass = \"previous-button\";\n\n    if (index >= len - 1) {\n        prevClass += \" disabled\";\n    }\n\n    if (index < 1) {\n        nextClass += \" disabled\";\n    }\n\n    return (\n        <div>\n          <div className=\"fwd-back-buttons\">\n            <div\n              onClick={onClickPrev}\n              className={prevClass}/>\n            <div\n              onClick={onClickNext}\n              className={nextClass}/>\n          </div>\n          <div className=\"samples-breadcrumb\">\n            {samples.map(\n                x =>\n                    <div\n                      onClick={() => onClick(x)}\n                      className={getClassName(x)}>\n                      {x.name} ( \n                      {x.tags ? x.tags.join(\", \") : \"\"})\n                    </div>)}\n            \n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      samples: state.tracks.trackBrowsedSamples[props.track.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setBrowsedSamples: (samples) => dispatch(\n          setTrackBrowsedSamples(props.track.id, samples))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplesBreadcrumb);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst GoToSource = ({sample}) => { \n    const goToSource = useCallback(() => {\n        if (sample.videoId) {\n            window.open('https://youtube.com/watch?v=' + sample.videoId, '_blank');\n        } else if (sample.discogsId) {\n            window.open('https://discogs.com/release/' + sample.discogsId, '_blank');\n        }\n    }, [sample]);\n\n    return (\n        <div className=\"go-to-source\">\n          <span onClick={goToSource}>Go to source</span>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GoToSource);\n","import BackendQuery from 'decentralized/BackendQuery.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {SampleYoutube} from 'decentralized/EthereumEvents.js';\nimport {NewDiscogsSample} from 'decentralized/EthereumEvents.js';\nimport GuildSamplesContract from 'decentralized/contracts/GuildSamplesContract.js';\nconst contract = new GuildSamplesContract();\n\nconst cache = {};\nexport const getThumbnails = async (samples) => {\n    let key = samples.join(',');\n    if (key in cache) {\n        return cache[key];\n    }\n    let videoIds = await new BackendQuery(contract.contractAddress)\n        .from(SampleYoutube)\n        .select('ipfsHash')\n        .select('videoId')\n        .whereIn('ipfsHash', samples)\n        .executeQuery(true);\n\n    let coverArts = await new BackendQuery(contract.contractAddress)\n        .from(NewDiscogsSample)\n        .select('sampleHash')\n        .select('coverArtHash')\n        .whereIn('sampleHash', samples)\n        .executeQuery(true);\n\n    let thumbnails = {};\n    for (let r of videoIds) {\n        thumbnails[r.ipfsHash] = 'https://img.youtube.com/vi/' + r.videoId + '/1.jpg';\n    }\n    for (let r of coverArts) {\n        thumbnails[r.sampleHash] = ipfs.getHashUrl(r.coverArtHash);\n    }\n    cache[key] = thumbnails;\n    return thumbnails;\n}\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst SampleTooltip = ({sampleInfo}) => { \n    if (sampleInfo === undefined) {\n        return (<div></div>);\n    } else {\n        return (\n            <div className=\"sample-tooltip\">\n              <div className=\"sample-name\">{sampleInfo.name.trim()}</div>\n              <div className=\"sample-tags\">\n                {sampleInfo.tags.map(tag => <div className=\"s-tag\">{tag}</div>)}\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      sampleInfo: state.audition.sampleTooltip\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleTooltip);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setSampleTooltip} from 'actions/index.js';\nimport Sample from 'repos/Sample.js';\nimport Colors from \"components/Colors.js\";\n\nimport ConditionedComponent from \"components/ConditionedComponent.js\"\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\nlet id = 0;\n\nconst SampleInfo = ({\n    thumbnail,\n    sample,\n    sampleId,\n    annotations,\n    onDragStart,\n    onMouseDown,\n    onMouseUp,\n    position,\n    sequencerEngine,\n    onClickSample\n}) => { \n    let [hovered, setHovered] = useState(undefined);\n\n    const setSampleInfo = (sampleInfo) => {\n        sequencerEngine.store.dispatch(setSampleTooltip(sampleInfo));\n    };\n\n    useEffect(() => {\n        if (!hovered) {\n            setSampleInfo(undefined);\n            return;\n        }\n        let c = ++id;\n        setTimeout(() =>  {\n            if (c === id) {\n                let sample = new Sample(hovered);\n                sample.load(false)\n                    .then(x => {\n                        setSampleInfo(sample);\n                    });\n            }\n        }, 100);\n    }, [hovered, setSampleInfo]);\n    \n    let style = {\n        borderColor: colors.saturate(colors.getColorForHash(sampleId), 3)\n    };\n\n    if (thumbnail && thumbnail !== '') {\n        style.backgroundImage = \"url(\\\"\" + thumbnail + \"\\\")\"; \n    } else {\n    }\n\n    return (\n        <div\n          style={{backgroundColor: colors.saturate(colors.getColorForHash(sampleId), 3)}}\n          draggable={true}\n          onDragStart={(e) => onDragStart(sampleId)}\n          onDragOver={(e) => e.stopPropagation()}\n          className='sample-container'>\n          <div\n            onMouseDown={() => onMouseDown(sampleId)}\n            onMouseOver={() => setHovered(sampleId)}\n            onMouseLeave={() => setHovered(undefined)}\n            onMouseUp={() => onMouseUp(sampleId)}\n            onClick={() => onClickSample(sampleId)}\n            className={sampleId === sample.ipfsHash ? \"sample-from-source selected\" : \"sample-from-source\"}\n            style={style}>\n            <ConditionedComponent condition={annotations.has(sampleId)}>\n              <div className=\"dot sample-annotation\"></div>\n            </ConditionedComponent>\n          </div>\n        </div>\n    );\n};\n\nexport default SampleInfo;\n","import ConditionedComponent from \"components/ConditionedComponent.js\"\nimport Discogs from 'discogs/Discogs.js';\nimport {newSampleByArtist, newRelease, getRelease} from 'decentralized/artists/Artists.js';\nimport {\n    getSoundsWithDiscogs,\n    getSoundsWithTag,\n    getSoundsWithVideo,\n    getSoundsWithUserBlockNumber} from 'search/getSounds.js';\nimport {getThumbnails} from './getThumbnails.js';\nimport SampleTooltip from './SampleTooltip.js';\nimport SampleInfo from './SampleInfo.js';\nimport React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {SAMPLE_ANNOTATION} from 'constants/annotation-types.js';\nimport Sample from 'repos/Sample.js';\nimport Colors from \"components/Colors.js\";\nimport {connect} from 'react-redux';\nimport ethereum from \"decentralized/ethereum.js\";\nimport {\n    setSampleDragging} from \"actions/index.js\";\n    \nlet id = 0;\nlet counter = 0;\nconst colors = new Colors();\nconst SAMPLES_TO_SHOW = 64;\nconst discogs = new Discogs();\n\nconst SampleExplorer = ({\n    setTagSelected,\n    setSampleDragging,\n    sample,\n    track,\n    tagSelected,\n    audioUnit,\n    pendingTransactions}) => { \n\n        let ref = useRef(undefined);\n        let [start, setStart] = useState(0);\n        let [showSamples, setShowSamples] = useState(false);\n        let [samples, setSamples] = useState([]);\n        let [thumbnails, setThumbnails] = useState({});\n        let [annotations, setAnnotations] = useState(new Set());\n\n        const onMouseDown = useCallback(async (s) => {\n            if (s !== sample.ipfsHash) {\n                return;\n            }\n            audioUnit.playSound();\n        }, [sample]);\n        \n        useEffect(() => {\n            setShowSamples(false);\n        }, [setShowSamples, track]);\n        const onMouseUp= useCallback(async (s) => {\n            if (s !== sample.ipfsHash) {\n                return;\n            }\n            audioUnit.stopSound();\n        }, [sample]);\n\n        const onClickSample = useCallback(async (s) => {\n            if (s === sample.ipfsHash) {\n                return;\n            }\n            let _counter = ++counter;\n            let s2 = new Sample(s);\n            await s2.load();\n            if (_counter === counter) {\n                track.auditionSound(s2);\n            }\n        }, [track, sample]);\n\n        useEffect(() => {\n            ref.current.scrollTo(0, 0);\n            setStart(0);\n        }, [tagSelected, track, setStart]);\n\n        useEffect(() => {\n            if (tagSelected) {\n                getSoundsWithTag(tagSelected)\n                    .then(sounds => setSamples(sounds));\n                return;\n            }\n\n            if (sample.videoId) {\n                getSoundsWithVideo(sample.videoId)\n                    .then(sounds => setSamples(sounds));\n            } else if (sample.discogsId) {\n                getSoundsWithDiscogs(sample.discogsId)\n                    .then(sounds => {\n                        setSamples(sounds);\n                    });\n            } else {\n                getSoundsWithUserBlockNumber(sample.sampledByUser, sample.blockNumber)\n                    .then(sounds => setSamples(sounds));\n            }\n        }, [sample, setSamples, tagSelected, sample.videoId, sample.discogsId]);\n\n        useEffect(() => {\n            getThumbnails(samples)\n                .then(t => setThumbnails(t));\n            onScroll();\n        }, [samples, setThumbnails]);\n        \n\n        useEffect(() => {\n            setTagSelected(undefined);\n        }, [track]);\n\n        useEffect(() => {\n            ethereum.xanadu.getAnnotations(\n                SAMPLE_ANNOTATION)\n                .then(a => {\n                    setAnnotations(new Set(a.map(x => x.data)))\n                });\n        }, [setAnnotations, pendingTransactions]);\n\n        useEffect(() => {\n            ref.current.addEventListener('scroll', onScroll);\n            return () => {\n                ref.current.removeEventListener('scroll', onScroll);\n            };\n        }, [setStart, start, samples]);\n\n        const onScroll = useCallback((e) => {\n            let i = ++id;\n            setTimeout(() => {\n                if (i !== id || !ref.current) {\n                    return;\n                }\n                let el = ref.current;\n                let scrollTop = el.scrollTop + el.offsetHeight;\n                if (scrollTop >= el.scrollHeight - 20) {\n                    if (samples.length > start + SAMPLES_TO_SHOW) {\n                        setStart(start + SAMPLES_TO_SHOW);\n                    }\n                }\n            }, 100);\n        }, [setStart, samples, start]);\n\n        const onDragStart = useCallback((sample) => {\n            setSampleDragging(sample);\n        }, []);\n\n        /*\n        useEffect(() => {\n            if (sample.discogsId) {\n                getRelease(sample.discogsId).then(\n                    async (r) => {\n                        if (!r) {\n                            let release = await discogs.getReleaseInfo(sample.discogsId);\n                            console.log(\"RELEASE FETCHED = \", release);\n                            sample.artistName = release.artists[0].name;\n                            sample.releaseName = release.title;\n                            sample.releaseType = 'RECORD';\n                            newRelease(\n                                sample.artistName,\n                                sample.discogsId,\n                                sample.releaseName,\n                                sample.coverArtHash,\n                                \"RECORD\");\n                            newSampleByArtist(\n                                sample.artistName,\n                                sample.ipfsHash\n                            );\n                        }\n                    });\n            }\n        }, [sample]);\n        */\n\n        let samplesToShow = showSamples ? samples.slice(0, start + SAMPLES_TO_SHOW) : [];\n        return (\n            <div className=\"sample-explorer\">\n              {tagSelected ?\n               <div className=\"info\">\n                 {samples.length} \n                 <span\n                   onClick={() => setShowSamples(!showSamples)}\n                   className={showSamples ? \"samples-button selected\" : \"samples-button\"}\n                 >\n                   sounds\n                 </span>\n                 with this tag\n               </div>  :\n               <div className=\"info\">\n                 {samples.length} \n                 <span\n                   onClick={() => setShowSamples(!showSamples)}\n                   className={showSamples ? \"samples-button selected\" : \"samples-button\"}\n                 >\n                   sounds\n                 </span>\n                 from this source\n               </div>}\n              <div ref={ref} className=\"samples-from-source\">\n                {samplesToShow.map(\n                    (x, i) =>\n                        <SampleInfo\n                          thumbnail={thumbnails[x]}\n                          key={'sample-'+ i}\n                          onDragStart={(e) => onDragStart(x)}\n                          onMouseDown={() => onMouseDown(x)}\n                          position={i % 6}\n                          onMouseUp={() => onMouseUp(x)}\n                          sequencerEngine={track.sequencerEngine}\n                          annotations={annotations}\n                          onDragOver={(e) => e.stopPropagation()}\n                          onClickSample={() => onClickSample(x)}\n                          sampleId={x}\n                          sample={sample}/>\n                )}\n              </div>\n              <SampleTooltip/>\n            </div>\n        );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      pendingTransactions: state.transactions.pendingTransactions\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setSampleDragging: (sample) => dispatch(setSampleDragging(sample)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleExplorer);\n","import TrackThumbnail from \"components/TrackThumbnail.js\";\nimport UnsourcedFlow from './UnsourcedFlow.js';\nimport ContextualHelp from \"components/sidebar/ContextualHelpComponent.js\";\nimport SampleUsed from './SampleUsed.js';\nimport SaveNewSample from './SaveNewSample.js';\nimport Rating from './Rating.js';\nimport {SOUND_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport SynthBrowser from './SynthBrowser.js';\nimport SamplesBreadcrumb from './SamplesBreadcrumb.js';\nimport Colors from 'components/Colors.js';\nimport Waveform from 'components/Waveform.js';\nimport AnnotationEdit from \"components/explore/links/AnnotationEdit.js\"\nimport {SAMPLE_ANNOTATION} from 'constants/annotation-types.js';\nimport {WAVEFORM, PIANO_ROLL, INFO} from 'constants/arrangement-modes.js';\nimport AudioUnit from 'engine/audio.js';\nimport TagsInfo from './TagsInfo.js';\nimport GoToSource from './GoToSource.js';\nimport CreatedBy from './CreatedBy.js';\nimport {SEQUENCER_VIEW} from \"constants/view-modes.js\";\nimport React, { useEffect, useCallback, useState} from 'react';\nimport DetailsView from 'components/DetailsView.js';\nimport {SAMPLER, SAMPLED_INSTRUMENT, MULTI_SYNTH} from \"constants/instrument-types.js\";\nimport {INSTRUMENT_RACK, MULTI_FREEZE} from \"constants/track-types.js\";\nimport SampleExplorer from './SampleExplorer.js';\nimport {connect} from 'react-redux';\nimport '../../SamplerBrowser.scss';\n\nconst colors = new Colors();\n\nconst SamplerBrowser = ({bottomMode, track, sequencerEngine, id, loaded, selectedInstrument, isFrozen}) => { \n    let [tagSelected, setTagSelected] = useState(undefined);\n    let [audioUnit, setAudioUnit] = useState(new AudioUnit());\n\n\n   useEffect(() => {\n        return () => audioUnit.dispose();\n    }, [audioUnit]);\n\n    if (track === undefined) {\n        return (\n           <div></div>\n        );\n    }\n\n    if (bottomMode === WAVEFORM && (\n        track.getTrackType() === SAMPLER ||\n            track.isFrozen ||\n            track.getTrackType() === MULTI_FREEZE)) {\n        return (\n            <DetailsView.DetailsView\n              showParameters={false}\n              hideKeyboard={false}\n              alreadyLoaded={true}\n              onGoBack={() => []}\n              keyboardEngine={sequencerEngine.keyboardEngine}\n              midiEngine={sequencerEngine.midi}\n              trackNumber={sequencerEngine.cursor.track}\n              resolution={sequencerEngine.resolution}\n              parentView={SEQUENCER_VIEW}\n              sequencerEngine={sequencerEngine}\n              bpm={sequencerEngine.bpm}\n              track={track}/>\n        );\n    }\n        \n    let sample = undefined\n    let subTrack = track;\n    let sampler= undefined;\n    let instrument = undefined;\n\n    if (track.getTrackType() === SAMPLER) {\n        sample = track.sample;\n        if (sample !== undefined) {\n            sampler = track.samplers[sample.getId()];\n        }\n    } else if (track.instrument && track.instrument.getInstrumentType() === SAMPLED_INSTRUMENT) {\n        sampler = track.selectedSampler || track.instrument.defaultSampler;\n        if (sampler) {\n            sample = sampler.sample;\n        }\n        instrument = track.instrument;\n    } else if (track.instrument && track.instrument.getInstrumentType() === MULTI_SYNTH) {\n        instrument = track.instrument;\n    } else if (track.instrument && track.getTrackType() === INSTRUMENT_RACK &&\n              track.tracks.length > 0) {\n        let t = selectedInstrument ? selectedInstrument.track : track.tracks[0].track;\n        if (t.instrument.getInstrumentType() === SAMPLED_INSTRUMENT) {\n            sampler = \n                t.selectedSampler || t.instrument.defaultSampler;\n            if (sampler !== undefined) {\n                sample = sampler.sample;\n                subTrack = t;\n            }\n        } else if (t.instrument.getInstrumentType() === MULTI_SYNTH) {\n            instrument = t.instrument;\n            subTrack = t;\n        }\n    };\n\n    if (instrument && !subTrack.isFrozen) {\n        return (\n            <SynthBrowser\n              type={instrument.getInstrumentType()}\n              tagSelected={tagSelected}\n              setTagSelected={setTagSelected}\n              synth={instrument}\n              track={subTrack}/>\n        );\n    }\n\n    if (sample === undefined ||\n        sample.audioBuffer === undefined ||\n        track.isFrozen) {\n        return (\n            <div>\n            </div>);\n    }\n\n    audioUnit.setBuffer(sample.audioBuffer);\n\n    let t = subTrack || track;\n    let color = colors.getColorForTrack(t);\n\n\n    return (\n        <div\n          className=\"sampler-browser\">\n          <div>\n            <TrackThumbnail \n              track={track}\n              sample={sample}\n              onClickThumbnail={() => []}\n              />\n            <Waveform\n              audioUnit={audioUnit}\n              sequencerEngine={sequencerEngine}\n              buffer={sample.audioBuffer}\n              id={sample.ipfsHash}\n              sample={sample}\n              width={100}\n              height={30}/>\n            <SamplesBreadcrumb sample={sample} track={subTrack}/>\n          </div>\n          <div className=\"sample-info\">\n            <div className=\"name-info\">\n              <div className=\"sample-name\">{truncateName(sample.name)}</div>\n              {sample.needsSave ? 'Not saved yet' : \n               <div>\n                 <CreatedBy content={sample}/>\n                 <GoToSource sample={sample}/>\n               </div>\n              }\n            </div>\n            <TagsInfo\n              tagSelected={tagSelected}\n              setTagSelected={setTagSelected}\n              content={sample}/>\n            <Rating\n              color={color}\n              content={sample.ipfsHash}\n              type={SOUND_RATED}/>\n          </div>\n          <div>\n            <UnsourcedFlow track={track} sample={sample}/>\n            <SampleUsed sequencerEngine={sequencerEngine} sample={sample}/>\n          </div>\n          {!sample.needsSave ? \n          <SampleExplorer\n            audioUnit={audioUnit}\n            setTagSelected={setTagSelected}\n            tagSelected={tagSelected}\n            track={subTrack}\n            sample={sample}/> \n           :\n           <SaveNewSample track={track} sample={sample}/>\n          }\n         <ContextualHelp sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nfunction truncateName(name) {\n    if (name === undefined) {\n        return \"\";\n    }\n    name = name.trim();\n    if (name.length > 40) {\n        return name.substring(0, 40) + '...';\n    }\n    return name;\n}\n\n\nconst mapStateToProps = (state, props) => {\n    let track = props.track;\n    if (track === undefined) {\n        return {\n            selectedInstrument: undefined,\n            loaded: false,\n        };\n    }\n    return {\n        playing: track.frozenColumns && track.frozenColumns[0].playing,\n        selectedInstrument: state.tracks.selectedRackSubTrack[props.track.id],\n        loaded: state.tracks.trackIsLoading[props.track.subSequence.id] &&\n            !state.tracks.trackIsLoading[props.track.subSequence.id][props.track.trackNumber],\n        isFrozen: track.isFrozen,\n        \n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplerBrowser);\n","import React, {useCallback, useEffect} from 'react';\nimport LFOTrackComponent from 'components/lfo/LFOTrackComponent.js';\nimport SamplerBrowser from \"components/installation/SamplerBrowser.js\"\nimport {WAVEFORM} from 'constants/arrangement-modes.js';\nimport DetailsView from 'components/DetailsView.js';\nimport {MIX_VIEW} from 'constants/view-modes.js';\nimport {SEQUENCER_VIEW} from 'constants/view-modes.js';\nimport AutomationToolbar from './AutomationToolbar.js';\nimport { connect } from \"react-redux\";\nimport {\n    SOUNDS,\n    EXTERNAL,\n    SEQUENCES,\n    PRESETS,\n    INSTRUMENTS,\n    NOTES} from 'constants/sidebar-view-modes.js';\nimport {setArrangementBottomResizing} from 'actions/index.js';\nimport {getEffectsComponent} from 'components/effects/getEffectsComponent.js';\nimport {PIANO_ROLL, EFFECTS} from 'constants/arrangement-modes.js';\nimport PianoRollComponent from 'components/pianoroll/PianoRollComponent.js';\n\nfunction ArrangementBottomContainer(props) {\n    let style = {\n        height: props.bottomHeight\n    };\n\n    let {sequencerEngine} = props;\n\n    const onMouseUp = useCallback(\n        () => {\n            props.setArrangementBottomResizing(false);\n        },\n        [props.setArrangementBottomResizing]);\n\n    let content = '';\n    let toolbar = '';\n    if (props.hide) {\n        return (\n            <div></div>\n        );\n    }\n    let track = undefined;\n    if (props.selectedTrack !== undefined && props.sequencerEngine.tracks) {\n        track = props.sequencerEngine.tracks[props.selectedTrack];\n\n        if (track) {\n            toolbar = (\n                <AutomationToolbar track={track} sequencerEngine={props.sequencerEngine}/>\n            );\n        }\n        if (track) {\n            if (props.bottomHeight > 25) {\n                content = (\n                    <PianoRollComponent\n                      parentClassName=\"arrangement-bottom-container\"\n                      isLooping={false}\n                      installation={true}\n                          sequencerEngine={props.sequencerEngine}\n                      hideToolbar={true}\n                      track={track}\n                    />);\n            }\n        }\n    } else {\n        //style.height = 0;\n    }\n\n    return (\n        <div\n          onMouseUp={onMouseUp}\n          style={style}\n          className=\"arrangement-bottom-container\">\n          {toolbar}\n          {content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    let hide = false;\n    if (state.sequencer.sidebarCollapsed) {\n        hide = false;\n    } else if (\n        props.sequencerEngine.tracks && props.sequencerEngine.tracks.length === 0) {\n        hide = true;\n    }\n\n    if (state.sequencer.viewMode !== SEQUENCER_VIEW) {\n        // hide = true;\n    }\n \n    let track = props.sequencerEngine.tracks[state.mix.selectedTrack];\n    if (track && track.tracks && track.tracks[0]) {\n        track = track.tracks[0].track;\n    }\n    return {\n        track: track,\n        id: track === undefined ? 0 :\n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.presetName || track.getName(),\n        numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n        bottomHeight:   state.arrangement.bottomHeight,\n        bottomMode: state.arrangement.bottomMode,\n        selectedRows: state.arrangement.selectedRows,\n        selectedTrack: state.mix.selectedTrack,\n        hide: hide,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementBottomContainer);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ZObjectComponent from \"components/zobject/ZObjectComponent.js\";\nimport {connect} from 'react-redux';\nimport {useWindowManager} from \"components/windows/useWindowManager.js\";\nimport {\n    setViewableZObjects\n} from 'actions/index.js';\n\nconst ZObjectWindow = ({\n    containerRef,\n    setSize,\n    sizeRef,\n    setViewableZObjects,\n    zobject,\n    ordering,\n    setOrdering,\n    elements,\n    windowPosition\n}) => { \n    const ref = useRef();\n    const {windowScale, setWindowScale, onMouseDown, onMouseUp, style, startResizing} = useWindowManager({\n        sequencerEngine: zobject.sequencerEngine,\n        basicContainerRef: containerRef,\n        ref,\n        ordering,\n        setOrdering,\n        element: zobject.window,\n        setSize,\n        sizeRef,\n        elements,\n        windowPosition\n    });\n\n    let _style = {\n    };\n\n    if (windowPosition) {\n        _style.left = windowPosition.x;\n        _style.top = windowPosition.y;\n    }\n\n    const closeWindow = useCallback(() => {\n        let {viewableZObjects} = zobject.state.zobject;\n        setViewableZObjects(viewableZObjects.filter(\n            x => x !== zobject));\n    }, [zobject]);\n\n    return (\n        <div className=\"zobject-window\" style={style} ref={ref}>\n          <div\n            onMouseDown={onMouseDown}\n            onMouseUp={onMouseUp}\n            className=\"zobject-header\">\n            <div onClick={closeWindow} className=\"delete-btn\">\n              x\n            </div>\n          </div>\n          <ZObjectComponent\n            scale={1}\n            elements={elements}\n            sequencerEngine={zobject.sequencerEngine}\n            ordering={ordering}\n            setOrdering={setOrdering}\n            isStatic={true}\n            customMode={false}\n            setSize={setSize}\n            sizeRef={sizeRef}\n            containerRef={ref}\n            zobject={zobject}\n          />\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      windowPosition: state.windows.windowPositions[props.zobject.window.id]\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setViewableZObjects: x => dispatch(setViewableZObjects(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectWindow);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RightSidebar from \"components/v3/sidebar/RightSidebar.js\"\nimport {connect} from 'react-redux';\nimport './subpatch-sidebar.scss';\n\nconst SubPatchSidebar = (props) => { \n    let [opened, setOpened] = useState(false);\n\n    useEffect(() => {\n        if (!props.selectedZObject) {\n            setOpened(false);\n        }\n    }, [props.selectedZObject, setOpened]);\n    return (\n        <div\n          style={{height: props.subpatch.height - 65}}\n          className={opened ? \"subpatch-sidebar opened\" : \"subpatch-sidebar\"}>\n        {!opened ?\n         (props.selectedZObject &&\n          props.selectedZObject.subSequence === props.subpatch && \n          <img className=\"pushable info-icon\" onClick={() => setOpened(true)} src=\"/info-icon.svg\"/>) :\n         <RightSidebar seauencerEngine={props.sequencerEngine}/>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      height: props.subpatch.height,\n      selectedZObject: state.zobject.selectedZObject\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setObjectDragging,\n    setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\nimport NestedZObject from \"components/v3/sidebar/NestedZObject.js\"\n\nconst ObjectTree = ({\n    setSelectedZObject,\n    setObjectDragging,\n    zobjects,\n    zmessages,\n    selectedZObject,\n    subpatch,\n}) => { \n\n    const onClickZObject = (obj) => {\n        setSelectedZObject(obj);\n    };\n\n    return (<div\n              style={{height: subpatch.height - 120, maxHeight: subpatch.height - 120}}\n              className=\"object-tree\">\n              {zmessages.map(\n                  x => <div\n                         draggable={true}\n                         onDragStart={(e) => {\n                             e.dataTransfer.setData('text/html', x.id); //cannot be empty string\n                             setObjectDragging(x);\n                         }}\n                         onDragOver={e => e.preventDefault()}\n                         key={x.id}\n                         onClick={() => setSelectedZObject(x)}\n                         className={x === selectedZObject ? \"selected zmessage\" : \"zmessage\"}>\n                         <img className=\"object-icon\" src={\n                             x.type === NUMBER ?\n                                 \"/znumber-light.svg\" : \"/zmessage-light.svg\"}\n                         /> {typeof x.storedMessage === \"string\" ?\n                             x.storedMessage : x.type === NUMBER ?\n                             \"Number\" : \"Message\"}\n                       </div>)}\n              {zobjects.map(\n                  x => <NestedZObject\n                         key={x.id}\n                         zobject={x}\n                         searchTerm={\"\"}\n                         setSelectedZObject={onClickZObject}\n                         setObjectDragging={setObjectDragging}\n                         selectedZObject={selectedZObject}/>)}\n            </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      selectedZObject: state.zobject.selectedZObject,\n      zobjects: props.subpatch.zObjects,\n      zmessages: props.subpatch.zMessages,\n      objectDragging: state.zobject.objectDragging\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setObjectDragging: x => dispatch(setObjectDragging(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectTree);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ObjectTree from './ObjectTree.js';\nimport {connect} from 'react-redux';\n\nconst SubPatchObjectSidebar = ({subpatch}) => { \n    let [opened, setOpened ] = useState(false);\n    let className = \"subpatch-left-sidebar\";\n    if (opened) {\n        className += \" opened\"\n    }\n    return (<div className={className}>\n              <img\n                onClick={() => setOpened(!opened)}\n                src=\"/tree-icon.svg\" className=\"pushable tree-icon\"/>\n            {opened &&\n             <ObjectTree subpatch={subpatch}/>}\n            </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      height: props.subpatch.height\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchObjectSidebar);\n","export const getParents = (subpatch) => {\n    let parents = [];\n    let zobject = subpatch.zObject;\n    while (zobject.subSequence && zobject.subSequence.zObject) {\n        parents.push(zobject.subSequence);\n        zobject = zobject.subSequence.zObject;\n   }\n    return parents;\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setWindowPosition, setViewableSubPatches} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {getParents} from './getParents.js';\n\nconst SubPatchBreadcrumb = ({subpatch, setWindowPosition, setViewableSubPatches}) => { \n    let parents = getParents(subpatch);\n\n    const goTo = useCallback((_subpatch) => {\n        let {state} = subpatch.zObject.sequencerEngine;\n        let subpatches = state.zobject.viewableSubPatches.filter(\n            x => !parents.includes(x) && x !== subpatch);\n        let _parents = [... parents];\n        _parents.reverse();\n\n        let toAdd = [];\n\n        for (let s of _parents) {\n            toAdd.push(s);\n            if (s === _subpatch) {\n                break;\n            }\n        }\n\n        _subpatch.width = subpatch.width;\n        _subpatch.height = subpatch.height;\n        let position = state.windows.windowPositions[subpatch.id];\n        setWindowPosition(_subpatch.id, position);\n        setViewableSubPatches([... subpatches, ... toAdd]);\n    }, [parents, setViewableSubPatches, subpatch]);\n\n    return (\n        <div className=\"subpatch-breadcrumb\">\n          {parents.map(\n              (x) =>\n                  <div className=\"parent\">\n                    <div className=\"arrow-right\"/>\n                    <div onClick={() => goTo(x)} className=\"parent-name\">{x.zObject.args[0]}</div>\n                  </div>\n          )}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setViewableSubPatches: x => dispatch(setViewableSubPatches(x)),\n      setWindowPosition: (id, x) => dispatch(setWindowPosition(id, x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchBreadcrumb);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {connect} from 'react-redux';\nimport {\n    setFullScreenZObject} from 'actions/index.js';\n\nconst SubPatchMenu = ({\n    setFullScreenZObject,\n    setEditLayout,\n    editLayout,\n    setCustomMode,\n    customMode,\n    subpatch,\n    presentationMode,\n}) => { \n    let [toggled, setToggled] = useState(false);\n\n    useEffect(() => {\n        if (!customMode) {\n            return;\n        }\n        if (presentationMode) {\n            setEditLayout(true);\n        } else {\n            setEditLayout(false);\n        }\n    }, [presentationMode, customMode]);\n    \n    const toggleCustom = useCallback(() => {\n        setEditLayout(!customMode);\n        subpatch.isCustom = !customMode;\n        setCustomMode(!customMode);\n    }, [customMode, setCustomMode, subpatch, setEditLayout]);\n\n    return (\n        <ButtonDropdown\n        className=\"subpatch-menu\"\n        show={toggled ? \"true\" : \"false\"}\n        isOpen={toggled}\n          toggle={() => setToggled(!toggled)}>\n        <DropdownToggle size=\"sm\" caret color=\"primary\">\n          Edit\n        </DropdownToggle>\n        <DropdownMenu>\n          {customMode && \n          <DropdownItem\n            onClick={() => setFullScreenZObject(subpatch.zObject)}\n           >\n            Full Screen\n          </DropdownItem>}\n          <DropdownItem\n            key=\"\"\n            onClick={toggleCustom}\n            size=\"sm\">\n            Instrument Mode\n            {customMode &&\n             <span className=\"small_checkmark\">\n               <div className=\"small_checkmark_stem\"></div>\n               <div className=\"small_checkmark_kick\"></div>\n             </span>}\n          </DropdownItem>\n        {customMode && <DropdownItem\n                         key=\"\"\n                         onClick={() => setEditLayout(!editLayout)}\n                         size=\"sm\">\n                         Edit Layout\n                         {editLayout &&\n                          <span className=\"small_checkmark\">\n                            <div className=\"small_checkmark_stem\"></div>\n                            <div className=\"small_checkmark_kick\"></div>\n                          </span>}\n                       </DropdownItem>}\n        </DropdownMenu>\n        </ButtonDropdown>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presentationMode: state.spatial.presentationMode\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchMenu);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {ChromePicker} from 'react-color';\n\nconst SubPatchColors = ({subpatch}) => { \n    let [fill, setFill] = useState({hex: subpatch.fillColor || \"#24273a\"});\n\n    useEffect(() => {\n        subpatch.fillColor = fill.hex;\n        console.log('ssetting to ', fill.hex);\n    }, [fill]);\n\n    let [showing, setShowing] = useState(undefined);\n    return (\n        <div className=\"subpatch-colors\">\n          <div\n            onClick={() => setShowing(showing ? undefined : \"fill\")}\n            style={{backgroundColor: fill.hex}} className=\"color-btn\"/>\n          {showing === \"fill\" &&\n           <ChromePicker color={fill} onChange={setFill}></ChromePicker>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchColors);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SubPatchSidebar from './SubPatchSidebar.js';\nimport SubPatchObjectSidebar from './SubPatchObjectSidebar.js';\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\";\nimport {segmentAllCables} from 'messaging/cables/segmentCables.js';\nimport {useSubPatchScroll} from './useSubPatchScroll.js';\nimport SubPatchBreadcrumb from './SubPatchBreadcrumb.js';\nimport {getParents} from './getParents.js';\nimport SubPatchMenu from 'components/subpatch/SubPatchMenu.js';\nimport ZObjectToolbar from \"components/pulled/ZObjectToolbar.js\";\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport SubPatchColors from './SubPatchColors.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport SubPatchContent from './SubPatchContent.js';\nimport {setModuleSize} from 'actions/index.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport {connect} from 'react-redux';\nimport {NW, NE, SW, SE} from 'components/windows/resize-types.js';\n\nimport {useWindowManager} from \"components/windows/useWindowManager.js\"\nimport \"../../subpatch.scss\";\nimport {setWindowPosition, setViewableSubPatches} from 'actions/index.js';\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\n\n\nconst SubPatch = ({\n    sizeRef,\n    ordering,\n    setOrdering,\n    elements,\n    setSize,\n    subpatch,\n    subPatches,\n    setViewableSubPatches,\n    setWindowPosition,\n    containerRef,\n    windowPosition,\n    backgroundColor,\n    presentationMode\n}) => { \n    let ref = useRef(undefined);\n    let contentRef = useRef(undefined);\n\n    let {arrangeWindows} = useArrangeWindows({elements, subSequence: subpatch, presentationMode});\n    const {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref: contentRef});\n    const dropdownPosRef = useRef(dropdownPos);\n    let [customMode, setCustomMode] = useState(subpatch.isCustom);\n    let [editLayout, setEditLayout] = useState(false);\n\n    const {windowScale, setWindowScale, onMouseDown, onMouseUp, style, startResizing} = useWindowManager({\n        sequencerEngine: subpatch.sequencerEngine,\n        basicContainerRef: containerRef,\n        ref,\n        ordering,\n        setOrdering,\n        element: subpatch,\n        setSize,\n        sizeRef,\n        elements,\n        windowPosition\n    });\n\n    let scrollRef = useRef();\n    useSubPatchScroll({subpatch, ref: scrollRef, size: windowScale, setSize: setWindowScale});\n\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onWheel);\n        return () => {\n            if (ref.current) {\n                ref.current.removeEventListener(\"mousewheel\", onWheel);\n            }\n        }\n    }, []);\n\n    const onWheel = (e) => {\n        e.stopPropagation();\n    };\n    \n    const onDoubleClickHeader = useCallback(() => {\n        let width = window.innerWidth;\n        let height = window.innerHeight;\n        if (subpatch.width + 100 > window.innerWidth &&\n            subpatch.height + 100 > window.innerHeight) {\n            width = 600;\n            height= 600;\n        } \n        subpatch.width = width;\n        subpatch.height = height;\n        setWindowScale({\n            x: width,\n            y: height\n        });\n        setWindowPosition(subpatch.id, {x: 0, y: 0});\n    }, [subpatch, setWindowScale]);\n\n    const onHeaderClick = useDoubleClick(onDoubleClickHeader);\n\n    let orderingRef = useRef(ordering);\n    useEffect(() => {\n        orderingRef.current = ordering;\n    }, [ordering]);\n\n    useEffect(() => {\n        return () => {\n            delete elements.current[subpatch.id];\n            setOrdering(orderingRef.current.filter(x => x !== subpatch));\n        };\n    }, []);\n    useEffect(() => {\n        if (dropdownPos) {\n            dropdownPosRef.current = dropdownPos;\n        }\n    }, [dropdownPos]);\n \n    const hideSubPatch = useCallback((e) => {\n        e.stopPropagation();\n        let parents = getParents(subpatch);\n        let _subPatches = subPatches.filter(x => x !== subpatch && !parents.includes(x));\n        setViewableSubPatches(_subPatches);\n    }, [subPatches]);\n\n    const deencapsulate = useCallback(() => {\n        subpatch.deencapsulate();\n    }, [subpatch]);\n\n    const createZMessage = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.createZMessage(x,y);\n    }, [subpatch]);\n\n    const createInlet = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.newInlet(undefined, undefined, x,y);\n    }, [subpatch]);\n\n    const createInstanceInlet = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.newInstanceInlet(undefined, undefined, x,y);\n    }, [subpatch]);\n\n    const createOutlet = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.newOutlet(undefined, undefined, x, y);\n    }, [subpatch]);\n\n    const includeInPresentation = useCallback(() => {\n        let pulledElements = subpatch.sequencerEngine.state.windows.selectedElements;\n        let ids = Object.keys(pulledElements);\n        for (let id of ids) {\n            let node = subpatch.sequencerEngine.findNodeById(id);\n            if (node) {\n                node.setAttribute(\"Include in Presentation\", true);\n            }\n        }\n    }, [subpatch]);\n\n    let _style = {... style};\n    if (windowScale && windowScale.x > 0 && windowScale.y  > 0) {\n        _style.width = windowScale.x;\n        _style.height = windowScale.y;\n    }\n\n    if (windowPosition) {\n        _style.top = Math.min(window.innerHeight - 100, Math.max(0, windowPosition.y));\n        _style.left = windowPosition.x;\n    }\n    let zIndex = _style.zIndex + 1000000000;\n    _style.zIndex = zIndex;\n\n    let className = \"sub-patch no-select \" ;\n    if ((customMode && editLayout)) {\n        className += \" editing-layout-mode\";\n    }\n    if (ordering.indexOf(subpatch) === ordering.length - 1) {\n        className += \" top-window\";\n    }\n\n    const segment = useCallback(() => {\n        segmentAllCables(subpatch.sequencerEngine, subpatch);\n    }, [subpatch]);\n\n    const encapsulate = useCallback(() => {\n        subpatch.encapsulateObjects(dropdownPos.x, dropdownPos.y);\n    }, [dropdownPos]);\n\n    let _elements = subpatch.state.windows.selectedElements;\n    let selected = Object.keys(_elements).filter(x =>\n        _elements[x]);\n\n    _style.backgroundColor = backgroundColor;\n    return (\n        <div\n          onClick={e => {\n              console.log(\"SUB PATCH CLCIKED\");\n          }}\n          onMouseDown={onMouseDown}\n          onMouseUp={onMouseUp}\n          className={className} style={_style} ref={ref}>\n          <div\n            onMouseDown={(e) => startResizing(NW, e)}\n            className=\"top-left-edge\"/>\n          <div\n            onMouseDown={(e) => startResizing(NE, e)}\n            className=\"top-right-edge\"/>\n          <div\n            onMouseDown={(e) => startResizing(SW, e)}\n            className=\"bottom-left-edge\"/>\n          <div\n            onMouseDown={(e) => startResizing(SE, e)}\n            className=\"bottom-right-edge\"/>\n          <div onClick={onHeaderClick} className=\"sub-patch-header\">\n            {subpatch.zObject.args[0]}\n            <SubPatchBreadcrumb subpatch={subpatch}/>\n            <div\n              onMouseDown={e => e.stopPropagation()}\n              onClick={hideSubPatch}\n              className=\"delete-btn\">x</div>\n          </div>\n          <div\n            ref={contentRef}\n            onContextMenu={onContextMenu}\n            onMouseDown={(e) => {\n                e.stopPropagation();\n                setDropdownPos(undefined);\n            }}\n            className=\"sub-patch-content\">\n            <ContextMenu className=\"midi-context\" dropdownPos={dropdownPos ? {\n                x: dropdownPos.x,\n                y: dropdownPos.y} : undefined}>\n              {selected.length > 0 &&\n               <MenuItem\n                 onMouseDown={encapsulate}>\n                 Encapsulate Objects\n               </MenuItem>}\n              {selected.length > 0 && <MenuItem\n                                        onMouseDown={includeInPresentation}>\n                                        Include in Presentation\n                                        <img src=\"/presentation-mode.svg\"/>\n                                      </MenuItem>}\n              {selected.length > 0 &&\n               <MenuItem\n                 onMouseDown={arrangeWindows}>\n                 Pack Objects\n               </MenuItem>}\n              <MenuItem\n                onMouseDown={deencapsulate}>\n                De-encapsulate entire subpatch\n              </MenuItem>\n              <MenuItem\n                onMouseDown={createInlet}>\n                New Inlet \n              </MenuItem>\n              <MenuItem\n                onMouseDown={createOutlet}>\n                New Outlet \n              </MenuItem>\n              <MenuItem\n                onMouseDown={segment}>\n                Segment All Cables \n              </MenuItem>\n              <MenuItem\n                onMouseDown={createInstanceInlet}>\n                New Instance Inlet \n              </MenuItem>\n            </ContextMenu>\n            <ZObjectToolbar subpatch={subpatch} subSequence={subpatch}>\n              <SubPatchMenu\n                setEditLayout={setEditLayout}\n                editLayout={editLayout}\n                setCustomMode={setCustomMode}\n                customMode={customMode}\n                subpatch={subpatch}/>\n            </ZObjectToolbar>\n            <div className=\"content-and-sidebars\">\n              <SubPatchObjectSidebar\n                sequencerEngine={subpatch.sequencerEngine}\n                subpatch={subpatch}/>\n              <SubPatchContent\n                editLayout={editLayout}\n                scrollRef={scrollRef}\n                customMode={customMode}\n                subpatch={subpatch}/>\n              <SubPatchSidebar\n                sequencerEngine={subpatch.sequencerEngine}\n                subpatch={subpatch}/>\n            </div>\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presentationMode: state.spatial.presentationMode,\n      windowPosition: state.windows.windowPositions[props.subpatch.id],\n      backgroundColor: state.sequencer.backgroundColor\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setWindowPosition: (id, pos) => dispatch(setWindowPosition(id, pos)),\n      setViewableSubPatches: x => dispatch(setViewableSubPatches(x)),\n      setSize: x => dispatch(\n          setModuleSize(props.subpatch.id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatch);\n","import React, {useState, useEffect, useCallback} from 'react';\n\nexport const useSubPatchScroll = ({ref, subpatch, size, setSize}) => {\n    let [styleSize, setStyleSize] = useState(size);\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onWheel, {passive: false});\n        return () => {\n            if (ref && ref.current) {\n                ref.current.removeEventListener(\"mousewheel\", onWheel, {passive: false});\n            }\n        };\n    }, [styleSize, setStyleSize]);\n\n    const onWheel = useCallback((e) => {\n\n        if (new Date().getTime() - window.lastScrollTime < 1000) {\n            // e.preventDefault();\n            return false;\n        }\n        if (!ref || !ref.current) {\n            return false;\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        let {scrollTop, scrollLeft} = ref.current;\n\n        let {deltaX, deltaY} = e;\n\n        let x = scrollLeft + deltaX;\n        let y = scrollTop + deltaY;\n\n        if (!size) {\n            return false;\n        }\n\n        let sx = 0;\n        let sy = 0;\n        size = {\n            width: Math.max(styleSize.width, window.innerWidth - sx),\n            height: Math.max(styleSize.height, window.innerHeight - sy)\n        };\n                \n        if (size.width < 200 || size.height < 200) {\n            return;\n        }\n        let _size = {width: deltaX + size.width, height: deltaY + size.height};\n        setStyleSize(_size);\n        //sizeRef.current = _size;\n        ref.current.scrollTo(x,y);\n        return false;\n    },[\n        styleSize,\n        setStyleSize,\n      ]);\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport ZObjectWindow from './ZObjectWindow.js';\nimport {connect} from 'react-redux';\nimport SubPatch from './SubPatch.js';\n\nconst SubPatches = ({subPatches, zobjects, containerRef, fullScreenZObject}) => { \n    const elements = useRef({});\n    const {sizeRef, ordering, setOrdering} = useWindows();\n\n    let toHide = [];\n    for (let subpatch of subPatches) {\n        let {zObject} = subpatch;\n        if (subPatches.includes(zObject.subSequence)) {\n            // then we want to disclude the parent one\n            toHide.push(zObject.subSequence);\n        }\n    }\n    return [\n        zobjects.map(\n            zobject =>\n                <ZObjectWindow\n                  zobject={zobject}\n                  elements={elements}\n                  sizeRef={sizeRef}\n                  containerRef={containerRef}\n                  setSize={() => 0}\n                  ordering={ordering}\n                  setOrdering={setOrdering}/>\n        ),\n        subPatches\n            .filter(x => !fullScreenZObject || fullScreenZObject.effect !== x)\n            .filter(\n        x => !toHide.includes(x)).map(\n            x => <SubPatch\n                   key={x.id}\n                   sizeRef={sizeRef}\n                   ordering={ordering}\n                   setOrdering={setOrdering}\n                   elements={elements}\n                   subPatches={subPatches}\n                   subpatch={x}\n                   containerRef={containerRef}/>)\n        ];\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      subPatches: state.zobject.viewableSubPatches,\n      zobjects: state.zobject.viewableZObjects,\n      fullScreenZObject: state.zobject.fullScreenZObject\n  };\n\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatches);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {addEffect} from 'scripting/commands/effects.js';\nimport {connect} from 'react-redux';\nimport {getEffectPresets} from 'decentralized/effects/EffectPresets.js';\n\nconst EffectPresets = ({effect, sequencerEngine, matchedPresets}) => { \n    const [presets, setPresets] = useState([]);\n\n    useEffect(() => {\n        if (matchedPresets.length > 0) {\n            setPresets(matchedPresets);\n        } else {\n            getEffectPresets(effect).then(\n                p => setPresets(p));\n        }\n    }, [setPresets, effect, matchedPresets]);\n\n    const loadPreset = useCallback(async (e, preset) => {\n        e.stopPropagation();\n        let fx = addEffect(sequencerEngine, effect, undefined, undefined, true);\n        let json = await ipfs.getJson(preset.effectHash);\n        let trackNumber = sequencerEngine.cursor.track;\n        await fx.fromJson(json, sequencerEngine.tracks, trackNumber, true, false);\n        \n        if (fx.track && fx.track.loadLostParameters) {\n            fx.track.loadLostParameters();\n        }\n    }, [effect, sequencerEngine]);\n\n    return (\n        <div className=\"effect-presets\">\n          {presets.map(\n              preset =>\n                  <div\n                    onClick={(e) => loadPreset(e, preset)}\n                    className=\"preset-option\">\n                    {preset.title.trim()}\n                  </div>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectPresets);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {trim} from \"utils/trim.js\";\nimport EffectPresets from './EffectPresets.js';\nimport {addEffect} from 'scripting/commands/effects.js';\nimport {connect} from 'react-redux';\n\nconst EffectChoice = ({isSelected, effect, sequencerEngine, matchedPresets}) => { \n    const [isCollapsed, setIsCollapsed] = useState(matchedPresets.length === 0);\n    return (\n        <div\n          className={isSelected ? \"effect-option selected\" : \"effect-option\"}>\n          <div\n            className=\"inner\">\n            <div\n              onClick={(e) => {\n                  e.stopPropagation();\n                  setIsCollapsed(!isCollapsed);\n              }}\n              className=\"collapse-toggle\">\n              <div className={isCollapsed ? \"arrow-right\" : \"arrow-down\"}/>\n            </div>\n            <div\n              onClick={() => addEffect(sequencerEngine, effect)}\n              className=\"effect-name\">\n              {trim(effect)}\n            </div>\n          </div>\n          {!isCollapsed ? <EffectPresets\n                            matchedPresets={matchedPresets}\n                            sequencerEngine={sequencerEngine} effect={effect}/> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectChoice);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectChoice from './EffectChoice.js';\nimport {connect} from 'react-redux';\n\nconst EffectChoices = ({effects, sequencerEngine, selectedEffect}) => { \n    if (effects.length === 0) {\n        return [];\n    }\n    return (\n        <div className=\"effect-choices\">\n          {Object.keys(effects).map(\n              x =>\n                  <EffectChoice\n                    key={x}\n                    isSelected={x === selectedEffect}\n                    effect={x}\n                    matchedPresets={effects[x]}\n                    sequencerEngine={sequencerEngine}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectChoices);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst SidebarOptions = (props) => { \n    return (\n        <div className=\"sidebar-options\">\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarOptions);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport UnknownProgressBar from \"components/progressbar/UnknownProgressBar.js\";\nimport {connect} from 'react-redux';\nimport SamplesStreamExplorer from \"components/sidebar/SamplesStreamExplorer.js\";\n\nconst TIMEOUT = 700;\n\nconst SampleSearcher = ({searchText, sequencerEngine}) => { \n    let {auditionTrack} = sequencerEngine;\n    let counter = useRef(0);\n    let [stream, setStream] = useState(auditionTrack.samplesStream);\n    let [searching, setSearching] = useState(false);\n\n    useEffect(() => {\n        if (!searchText) {\n            return;\n        }\n        counter.current++;\n        setSearching(true);\n        let _counter = counter.current;\n        setTimeout(() => {\n            if (_counter !== counter.current) {\n                return;\n            }\n            sequencerEngine.searchForSounds([searchText], true, auditionTrack, false, false).then(\n                x => {\n                    setSearching(false);\n                    setStream(auditionTrack.samplesStream.sounds);\n                });\n        }, TIMEOUT);\n    }, [setStream, searchText, setSearching]);\n    \n    if (searching) {\n        return (<UnknownProgressBar text=\"Searching...\" width={230}/>);\n    }\n    return (<SamplesStreamExplorer track={auditionTrack} sequencerEngine={sequencerEngine}></SamplesStreamExplorer>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleSearcher);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    SOUNDS} from 'constants/sidebar-view-modes.js';\nimport {useScroll} from 'components/v2/useScroll.js';\nimport Colors from 'components/Colors.js';\nimport {setSidebarSearchInput} from 'actions/index.js';\nimport {\n    setShowPlugins,\n    setContextualHelp,\n    setSelectorMode,\n    setSidebarViewMode\n} from 'actions/index.js';\nimport {SIDEBAR_SEARCH} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport EffectChoices from './EffectChoices.js';\nimport {DEFAULT_TAGS} from './constants.js';\nimport {useSearcher} from './useSearcher.js';\nimport SidebarOptions from './SidebarOptions.js';\nimport {QUICK_ADD_BUTTON, QUICK_ADD_INSTRUMENT_BUTTON} from 'constants/contextual-help.js';\nimport {\n    setSelectedPianoRollSteps,\n    setArrangementBottomMode,\n    setShowPianoRoll,\n    setQuickAddSearchText,\n    setSampleTagDragging\n} from 'actions/index.js';\nimport {INFO} from 'constants/arrangement-modes.js';\nimport {connect} from 'react-redux';\nimport '../../QuickAdd.scss';\nimport SampleSearcher from \"components/audition/SampleSearcher.js\";\n\nconst RAINBOW = 80;\n\nconst colors = new Colors();\n\nconst QuickSampleChooser = (props) => { \n    const ref = useRef(undefined);\n    const [selectedTag, setSelectedTag] = useState(undefined);\n    const [selectedEffect, setSelectedEffect] = useState(undefined);\n    const scrollTags = useRef(undefined);\n    const [tags, setTags] = useState(DEFAULT_TAGS);\n    const [effects, setEffects] = useState({});\n\n    const [rainbow, setRainbow] = useState(0);\n\n    const {onChange, clear} = useSearcher({\n        setTags,\n        setEffects,\n        tags,\n        effects,\n        sequencerEngine: props.sequencerEngine,\n        searchText: props.searchText,\n        setSearchText: props.setSearchText,\n        selectedTag,\n        setSelectedTag,\n        selectedEffect,\n        setSelectedEffect,\n        ref\n    });\n\n    useEffect(() => {\n        props.setSidebarSearchInput(ref);\n    }, []);\n\n    const showBottom = () => {\n        props.setArrangementBottomMode(INFO);\n        props.setShowPianoRoll(true);\n    };\n\n    const addAudioTrack = useCallback(() => {\n        props.sequencerEngine.addAudioTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        props.sequencerEngine.tracks[props.sequencerEngine.tracks.length - 1].trackIsLoading = false;\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n    const addSynth = useCallback(() => {\n        props.sequencerEngine.addMultiSynthTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        props.sequencerEngine.tracks[props.sequencerEngine.tracks.length - 1].trackIsLoading = false;\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n    const addRack = useCallback(() => {\n        props.sequencerEngine.addInstrumentRackTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n\n    const addInstrument = useCallback(() => {\n        props.sequencerEngine.addSampledInstrumentTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n    const openSelector = useCallback((tag) => {\n        if (tag) {\n            props.setSearchText(tag);\n        }\n        props.setSelectorMode(true);\n        props.setSidebarViewMode(\"SOUNDS\");\n    }, []);\n\n    let sampleClassName = \"quick-sample-chooser\";\n    let instClassName = \"quick-instrument-chooser\";\n    if (props.explorerMaximized || (props.selectedPianoRollSteps && props.selectedPianoRollSteps.filter(\n        x => x && x.group).length > 0)) {\n        sampleClassName += \" hide\";\n        instClassName += \" hide\";\n    }\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Tab') {\n            e.preventDefault();\n            openSelector();\n        }\n    }, []);\n    const onMouseDown = useCallback(() => {\n        props.setSelectedSteps(undefined);\n    }, []);\n\n    let isDark = false;\n    if (colors.getBrightness(props.backgroundColor) < 100) {\n        isDark = true;\n    }\n    let quickClassName = \"quick-actions\";\n    if (!props.selectedZObject && props.searchText !== \"\") {\n        quickClassName += \" no-zobject\";\n    }\n\n    if (props.sequencerEngine.tracks.length === 0 && props.searchText !== \"\") {\n        quickClassName += \" no-tracks\";\n    }\n\n    let tagsToShow = tags;\n    let track = props.sequencerEngine.getSelectedTrack();\n    if (props.selectedZObject) {\n        tagsToShow = {};\n    }\n    return (\n        <div onMouseDown={onMouseDown} className={quickClassName}>\n          <SidebarOptions/>\n          <Documented element={SIDEBAR_SEARCH} className=\"search-container\">\n            <input\n              ref={ref}\n              spellcheck=\"false\"\n              onKeyDown={onKeyDown}\n              className=\"quick-search\"\n              type=\"text\"\n              value={props.searchText}\n              placeholder=\"Search sounds\"\n              onChange={onChange}/>\n            <div className=\"clear-btn\" onClick={() => {\n                if (props.searchText === \"\") {\n                    if (props.hide) {\n                        props.hide();\n                    }\n                } else {\n                    clear();\n                }\n            }}>x</div>\n          </Documented>\n          <div\n            ref={scrollTags}\n            className={sampleClassName}>\n            {props.searchText !== \"\" ?\n             <SampleSearcher sequencerEngine={props.sequencerEngine} searchText={selectedTag}/> : \n             Object.keys(tagsToShow).map(\n                 (tag,i) => \n                 <Tag\n                   setSampleTagDragging={props.setSampleTagDragging}\n                   isRainbow={rainbow !== undefined && i < rainbow}\n                   i={i}\n                   key={tag}\n                   isDark={isDark}\n                   scrollTags={scrollTags}\n                   showBottom={showBottom}\n                   openSelector={openSelector}\n                   sequencerEngine={props.sequencerEngine}\n                   isSelected={tag === selectedTag}\n                   tag={tag}\n                   tags={tags[tag]}\n                 />)}\n          </div>\n          {/* {!props.selectedZObject && Object.keys(effects).length > 0 ? \n           <EffectChoices\n             selectedEffect={selectedEffect}\n             effects={effects}\n             sequencerEngine={props.sequencerEngine}/> : ''} */}\n          {!props.selectedZObject && (!props.searchText || props.searchText === \"\") &&\n           <div className={instClassName}>\n             <Documented element={QUICK_ADD_INSTRUMENT_BUTTON} arg=\"Synth\">\n               <img onClick={addSynth} className=\"add-synth-icon pushable\" src=\"/synth-icon.svg\"/>\n             </Documented>\n             <Documented element={QUICK_ADD_INSTRUMENT_BUTTON} arg=\"Synth\">\n               <img onClick={addAudioTrack} className=\"live-loop-icon pushable\" src=\"/live-loop-icon.svg\"/>\n             </Documented>\n             <Documented element={QUICK_ADD_INSTRUMENT_BUTTON} arg=\"Synth\">\n               <img onClick={() => props.setShowPlugins(true)} className=\"add-plugin-icon pushable\" src=\"/plugin-icon.svg\"/>\n             </Documented>\n           </div>}\n        </div>\n    );\n}\n\nconst Tag = ({isRainbow, i, isDark, openSelector, tag, scrollTags, tags, sequencerEngine, isSelected, setSampleTagDragging}) => {\n    let ref = useRef(undefined);\n    let [loading, setLoading] = useState(undefined);\n\n    useScroll({\n        scrollContainer: scrollTags,\n        trackRef: ref,\n        isSelected: isSelected,\n        offset: 0,\n        useClientBounds: true\n    });\n\n    const onClick = useCallback(async (e) => {\n        setLoading(true);\n        if (e.metaKey) {\n            return openSelector(tag);\n        }\n\n        if (tag === '?') {\n            // get a random sound \n            let c = sequencerEngine.ethereumCache;\n            let fields = c.getAllForField('TAG', 0, 5000);\n            let t = fields[Math.floor(Math.random() * fields.length)];\n            sequencerEngine.searchForSounds([t.value]);\n            return;\n        }\n\n        if (Array.isArray(tags)) {\n            let r = Math.floor(Math.random() * tags.length);\n            await sequencerEngine.searchForSounds(tags[r]);\n        } else {\n            await sequencerEngine.searchForSounds([tags]);\n        }\n        if (tags === \"breaks\") {\n            sequencerEngine.tracks[sequencerEngine.tracks.length - 1].warp();\n        }\n        setLoading(false);\n    }, [setLoading, tags]);\n\n    const onDragStart = () => {\n        if (Array.isArray(tags)) {\n            let r = Math.floor(Math.random() * tags.length);\n            setSampleTagDragging(tags[r]);\n        } else {\n            setSampleTagDragging([tags]);\n        }\n    };\n\n    let className = isSelected ? \"sample-chooser selected\" : \"sample-chooser\";\n\n    if (loading) {\n        className += \" flashit\";\n    }\n\n    let style = {\n    };\n\n    if (isRainbow) {\n        style.backgroundColor = 'hsl(' + (i / 8.0)*255 + ', 100%, 50%)';\n    }\n\n    if (isDark) {\n        className += \" dark\";\n    }\n\n    return (\n        <Documented className=\"pushable\" element={QUICK_ADD_BUTTON} arg={tag}>\n          <div\n            style={style}\n            ref={ref}\n            draggable={true}\n            onDragOver={(e) => e.preventDefault()}\n            onDragStart={onDragStart}\n            onClick={onClick}\n            className={className}>\n            <div\n              style={style}\n              className=\"tag-inner\">\n              {tag}\n            </div>\n          </div>\n        </Documented>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      backgroundColor: state.sequencer.backgroundColor,\n      selectedZObject: state.zobject.selectedZObject,\n      searchText: state.selector.quickAddSearchText,\n      //selectedPianoRollSteps: state.keyboard.selectedPianoRollSteps,\n      track: props.sequencerEngine.getSelectedTrack(),\n      explorerMaximized: state.selector.explorerMaximized\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSearchText: x => dispatch(setQuickAddSearchText(x)),\n      setShowPianoRoll: x => dispatch(setShowPianoRoll(x)),\n      setArrangementBottomMode: x => dispatch(setArrangementBottomMode(x)),\n      setSampleTagDragging: x => dispatch(setSampleTagDragging(x)),\n      setSidebarSearchInput: (element) => dispatch(setSidebarSearchInput(element)),\n      setSelectorMode: m => dispatch(setSelectorMode(m)),\n      setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n      setSelectedSteps: m => dispatch(setSelectedPianoRollSteps(m)),\n      setShowPlugins: m => dispatch(setShowPlugins(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuickSampleChooser);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SampleStreamOption from \"components/sidebar/SampleStreamOption.js\";\nimport {getBulkSampleInfo} from 'components/sidebar/getSamples.js';\nimport {\n    setQuickAddSearchText,\n} from 'actions/index.js';\nimport {getSoundResultsServer} from 'components/selector2/getSoundResults.js';\nimport {connect} from 'react-redux';\n\nlet counter=0;\nconst SourceSamples = ({\n    setSearchText,\n    track,\n    sample,\n    sequencerEngine,\n    selectedId\n}) => { \n    const scrollRef = useRef(undefined);\n    let loadingSample = useRef(loadingSample);\n    let [samples, setSamples] = useState([]);\n    useEffect(() => {\n        let sourceToSearch = undefined;\n\n        let searchTerm = \"\";\n        if ( sample.discogsId || (sample.videoId && sample.videoId !== \"\")) {\n            sourceToSearch  = sample.discogsId ? {releaseId: sample.discogsId} :\n            {videoId: sample.videoId};\n        } else {\n            searchTerm = sample.tags[0];\n        }\n\n        let _counter = ++counter;\n        getSoundResultsServer(\n            50, searchTerm, sample.guildId, 'tag', 0, false, sourceToSearch)\n            .then(\n                async results => {\n                    if (_counter !== counter) { return; }\n                    if (results.length === 0) {\n                        getSoundResultsServer(\n                            50, searchTerm, sample.guildId, 'tag', 0, false, sourceToSearch)\n                            .then(async (results) => {\n                                if (results.length === 0) {\n                                    return;\n                                }\n                                let ids = results.flatMap(x => x.results.map(x => x.ipfsHash));\n                                if (ids.length > 50) {\n                                    ids = ids.slice(0, 50);\n                                }\n                                let samples = await getBulkSampleInfo(ids, JSON.stringify(sourceToSearch));\n                                setSamples(samples);\n                            });\n                        return;\n                    }\n                    let ids = results.flatMap(x => x.results.map(x => x.ipfsHash));\n                    if (ids.length > 50) {\n                        ids = ids.slice(0, 50);\n                    }\n                    let samples = await getBulkSampleInfo(ids, JSON.stringify(sourceToSearch));\n                    setSamples(samples);\n                });\n    }, [sample, setSamples]);\n\n    const onClickTag = useCallback(async (tag, metaKey) => {\n        loadingSample.current = true;\n        setSearchText(\"\");\n        let tags=track.samplesStream.tags;\n        let _tags = [tag];\n        if (metaKey) {\n            _tags = [...tags, ..._tags];\n        }\n        await track.sequencerEngine.searchForSounds(\n            _tags, true, track, false);\n        loadingSample.current = false;\n    }, [track]);\n\n    let _samples = [...samples];\n    _samples.sort((a,b) => a.tags[0] && b.tags[0] && a.tags.join(',').localeCompare(b.tags.join(',')));\n\n    let _track = sequencerEngine.state.zobject.selectedZObject ?\n        sequencerEngine.getSelectedTrack() : sequencerEngine.auditionTrack;\n    return (\n        <div\n          onMouseDown={(e) => e.stopPropagation()}\n          ref={scrollRef} className=\"source-samples\">\n        {_samples.map(\n            sample => \n                <SampleStreamOption\n                  topOffset={150}\n                  scrollRef={scrollRef}\n                  key={sample.getId()}\n                  samples={samples}\n                  onClickTag={onClickTag}\n                  track={_track} //sequencerEngine.getSelectedTrack()}\n                  selected={selectedId === sample.getId()}\n                  id={sample.getId()} sample={sample} loadingSample={loadingSample} />)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let track = props.sequencerEngine.getSelectedTrack();\n  return {\n      track,\n      selectedId: track && track.sample && track.sample.getId(),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSearchText: x => dispatch(setQuickAddSearchText(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceSamples);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst WIDTH = 400;\nconst HEIGHT = 400;\nconst VisualLink = ({setCoords, sample, coords= {x:0, y:0}}) => { \n    let [target, setTarget] = useState({x:0, y:0});\n    let parent = useRef(undefined);\n\n    useEffect(() => {\n        let element = document.getElementById('sample-option-' + sample.getId());\n        if (!element) { return; }\n        let rect = element.getBoundingClientRect();\n        setCoords({x : rect.left - WIDTH - 100, y: Math.min(window.innerHeight - 100 - HEIGHT, rect.top - HEIGHT/2)});\n    }, []);\n\n\n    useEffect(() => {\n        let element = document.getElementById('sample-option-' + sample.getId());\n        if (!element) { return undefined; }\n        let scroll = getParentScroll(element);\n        parent.current = scroll;\n        scroll.addEventListener(\"scroll\", calculatePts);\n        calculatePts();\n        return () => \n            scroll.removeEventListener(\"scroll\", calculatePts);\n    }, [sample, setTarget]);\n\n    const calculatePts = useCallback((e) => {\n        let element = document.getElementById('sample-option-' + sample.getId());\n        if (!element) { setTarget(undefined); return undefined; }\n        let rect = element.getBoundingClientRect();\n        let pRect = parent.current.getBoundingClientRect();\n        setTarget({\n            x : rect.left, y:\n            Math.min(parent.current.offsetHeight + pRect.top ,Math.max(pRect.top, rect.top))});\n    }, [sample, setTarget]);\n\n    if (!target) {\n        return 0;\n    }\n    return (\n        <svg className=\"visual-link\">\n          <linearGradient id=\"MyGradient\">\n            <stop offset=\"5%\" stopColor=\"#80808036\" />\n            <stop offset=\"95%\" stopColor=\"#80aaff36\" />\n          </linearGradient>\n          <polygon points={[\n              coords.x + WIDTH, coords.y,\n              coords.x + WIDTH, coords.y + HEIGHT,\n              target.x, target.y + 20,\n              target.x, target.y\n          ]}/>\n        </svg>);\n}\n\nconst getParentScroll = (e) => {\n    let parent = e.parentElement;\n    let i=0;\n    while (parent && ++i < 10) {\n        if (parent.className.includes(\"inner-explorer\")) {\n            return parent;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VisualLink);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setYearExploring,\n    setSourceExploring} from 'actions/index.js';\nimport SourceSamples from \"./SourceSamples.js\";\nimport Colors from 'components/Colors.js';\nimport {trim} from \"utils/trim.js\";\nimport VisualLink from './VisualLink.js';\nimport {useWindowManager} from 'components/windows/useWindowManager.js';\nimport {connect} from 'react-redux';\nimport ethereum from \"decentralized/ethereum.js\";\nimport '../../Xanadu.scss';\n\nconst colors = new Colors();\n\nconst SourceExploring = ({sequencerEngine, sourceExploring, setYearExploring, setSourceExploring}) => { \n    let ref = useRef(undefined);\n    let [styles, setStyles] = useState([]);\n\n    const {setCoords, onMouseUp, onMouseDown, coords} =\n          useWindowManager({ref});\n\n    useEffect(() => {\n        if (sourceExploring) {\n            ethereum.guildSamples.getStylesForSound(sourceExploring.getId())\n                .then(setStyles);\n        }\n    }, [sourceExploring, setStyles]);\n\n    if (!sourceExploring) { return []; }\n    let thumb = sourceExploring.getThumbnail();\n    return [\n        <div\n          key={1}\n          ref={ref}\n          onMouseUp={onMouseUp}\n          onMouseDown={onMouseDown}\n          style={coords ? {top: coords.y, left: coords.x} : {}} className=\"source-exploring no-select\">\n          <div onClick={() => setSourceExploring(undefined)} className=\"clear-btn\">x</div>\n          <div className=\"source-top\">\n            {thumb ?\n             <div className=\"cover-art\" style={{backgroundImage: 'url(' + thumb + ')'}}/> :\n             <div\n               style={{backgroundColor: colors.getColorForHash(sourceExploring.getId())}}\n               className=\"cover-art\"/>}\n            <div className=\"source-info\">\n              <div className=\"release-name\">\n                {sourceExploring.releaseName === \"\" ?\n                 trim(sourceExploring.name) : trim(sourceExploring.releaseName)}\n              </div>\n              <div className=\"artist-name\">\n                {trim(sourceExploring.artistName)}\n              </div>\n              <div\n                onClick={() => setYearExploring(sourceExploring.year)}\n                className=\"release-year\">\n                {sourceExploring.year !== 0 && sourceExploring.year}\n              </div>\n              <div className=\"styles\">\n                {styles.map(x => <span key={x}>{x}</span>)}\n              </div>\n            </div>\n          </div>\n          <SourceSamples\n            sequencerEngine={sequencerEngine}\n            sample={sourceExploring}/>\n        </div>,\n        <VisualLink key={2} setCoords={setCoords} coords={coords} sample={sourceExploring}/>\n    ];\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      sourceExploring: state.selector.sourceExploring\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSourceExploring: x => dispatch(setSourceExploring(x)),\n      setYearExploring: x => dispatch(setYearExploring(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceExploring);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ethereum from \"decentralized/ethereum.js\";\nimport BackendQuery from \"decentralized/BackendQuery.js\";\nimport GuildSamplesContract from \"decentralized/contracts/GuildSamplesContract.js\";\nimport {getBulkSampleInfo} from 'components/sidebar/getSamples.js';\nimport {SampleYear} from \"decentralized/EthereumEvents.js\"\nimport {getSoundResultsServer} from 'components/selector2/getSoundResults.js';\nimport SampleStreamOption from \"components/sidebar/SampleStreamOption.js\";\nimport {\n    setYearExploring,\n    setSourceExploring} from 'actions/index.js';\nimport {useWindowManager} from \"components/windows/useWindowManager.js\";\nimport {connect} from 'react-redux';\n\nconst YearExploring = ({\n    selectedId,\n    setYearExploring,\n    year,\n    sequencerEngine\n}) => { \n    const ref = useRef(undefined);\n    const scrollRef  = useRef(undefined);\n    const loadingSample = useRef(false);\n\n    const [samples, setSamples] = useState([]);\n    const {onMouseDown, onMouseUp, coords, setCoords} = useWindowManager({ref});\n\n    useEffect(() => {\n        let elements = document.getElementsByClassName(\"source-exploring\");\n        if (elements.length === 0) { return; }\n\n        let el = elements[0];\n        setCoords({\n            x: el.offsetLeft - 450,\n            y: el.offsetTop\n        });\n    }, [year, setCoords]);\n    useEffect(() => {\n        if (!year) {\n            return;\n        }\n        ethereum.getGuildsWithAccess()\n            .then(guildIds => \n                  new BackendQuery(new GuildSamplesContract().contractAddress)\n                  .from(SampleYear)\n                  .select(\"ipfsHash\")\n                  .where(\"year\", year)\n                  .whereIn(\"guildId\", guildIds)\n                  .executeQuery()\n                  .then(async results => {\n                      let ids = Array.from(new Set(results.map(x => x.ipfsHash)));\n                      let samples = await getBulkSampleInfo(ids, year);\n                      setSamples(samples);\n                  }));\n                         \n    }, [setSamples, year]);\n\n    if (!year) { return []; };\n\n    let _track = sequencerEngine.state.zobject.selectedZObject ?\n        sequencerEngine.getSelectedTrack() : sequencerEngine.auditionTrack;\n    return (\n        <div\n          className=\"year-exploring no-select\"\n          style={coords ? {left: coords.x, top: coords.y} : {}}\n          onMouseDown={onMouseDown}\n          onMouseUp={onMouseUp}\n          ref={ref} >\n          <div onClick={() => setYearExploring(undefined)} className=\"clear-btn\">x</div>\n          <div className=\"year\">\n            {year}\n            <div className=\"year-chooser\">\n              <div onClick={() => setYearExploring(year+1)} className=\"arrow-up\"/>\n              <div onClick={() => setYearExploring(year-1)} className=\"arrow-down\"/>\n            </div>\n          </div>\n          <div\n            onMouseDown={(e) => e.stopPropagation()}\n            ref={scrollRef} className=\"source-samples\">\n            {samples.map(\n            sample => \n                <SampleStreamOption\n                  topOffset={20}\n                  scrollRef={scrollRef}\n                  key={sample.getId()}\n                  samples={samples}\n                  onClickTag={() => []}\n                  track={_track}\n                  selected={selectedId === sample.getId()}\n                  id={sample.getId()} sample={sample} loadingSample={loadingSample} />)}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let track = props.sequencerEngine.getSelectedTrack();\n  return {\n      year: state.selector.yearExploring,\n      selectedId: track && track.sample && track.sample.getId(),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSourceExploring: x => dispatch(setSourceExploring(x)),\n      setYearExploring: x => dispatch(setYearExploring(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(YearExploring);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport SourceExploring from './SourceExploring.js';\nimport YearExploring from './YearExploring.js';\nimport '../../Xanadu.scss';\n\n\nexport default ({sequencerEngine, sourceExploring, setSourceExploring}) => { \n    return [\n        <SourceExploring sequencerEngine={sequencerEngine}/>,\n        <YearExploring sequencerEngine={sequencerEngine}/>,\n    ];\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ResolutionDropdown from 'components/toolbar/ResolutionDropdown.js';\nimport {setQuantized} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst StepActions = ({setQuantized, quantized, track, color}) => { \n    const addSteps = useCallback(() => {\n        track.sequencerEngine.doubleTrackLength(track.trackNumber);\n    }, [track]);\n    const removeSteps = useCallback(() => {\n        track.sequencerEngine.halfTrackLength(track.trackNumber);\n    }, [track]);\n\n    const toggleQuantize = useCallback(() => {\n        setQuantized(!quantized);\n    }, [quantized]);\n\n    let style = {\n        backgroundColor: color\n    };\n\n    let quantizedStyle = {\n        borderColor: color\n    };\n\n    return (\n        <div className=\"step-actions\">\n          <ResolutionDropdown sequencerEngine={track.sequencerEngine}/>\n          <div\n            style={quantizedStyle}\n            onClick={toggleQuantize}\n            className={quantized ? \"quantized quantize-button\" : \"quantize-button\"}>\n              {quantized ? 'Quantized' : 'Unquantized'}\n          </div>\n          <div style={style} onClick={addSteps} className=\"add-steps-btn\">+</div>\n          <div style={style} onClick={removeSteps} className=\"remove-steps-btn\">-</div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      quantized: state.sequencer.quantized,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setQuantized: quantized => dispatch(setQuantized(quantized)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepActions);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TracksOverview from \"components/sidebar/TracksOverview.js\"\nimport {MULTI_FREEZE, SAMPLER, INSTRUMENT, INSTRUMENT_RACK} from 'constants/track-types.js';\nimport {SAMPLED_INSTRUMENT, MULTI_SYNTH} from 'constants/instrument-types.js';\nimport {MODE_TO_HEIGHT, WAVEFORM, PIANO_ROLL, INFO} from 'constants/arrangement-modes.js';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {\n    setShowPianoRoll,\n    setArrangementBottomMode,\n} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst Modes = ({track, setBottomMode, bottomMode, isFrozen, setShowPianoRoll}) => { \n    const [showQuickTracks, setShowQuickTracks] = useState(false);\n\n    let hasSampler = track.getTrackType() === SAMPLER ||\n        track.getTrackType() === MULTI_FREEZE ||\n        isFrozen;\n    let hasPiano = track.getTrackType() !== MULTI_FREEZE;\n    let hasInfo = track.getTrackType() === SAMPLER;\n    let t = track;\n    if (track.getTrackType() === INSTRUMENT_RACK &&\n        track.tracks.length > 0){\n        t = track.tracks[0].track;\n    }\n\n    if (t.getTrackType() === INSTRUMENT && t.instrument) {\n        if (t.instrument.getInstrumentType() === SAMPLED_INSTRUMENT ||\n            t.instrument.getInstrumentType() === MULTI_SYNTH\n           ) {\n            hasInfo = true;\n        }\n    }\n    if (t.isFrozen) {\n        hasInfo = false;\n    }\n\n    useEffect(() => {\n        if (isFrozen) {\n            setBottomMode(WAVEFORM);\n        }\n    }, [isFrozen]);\n\n    let nameStyle = {\n        color: colors.getColorForTrack(track)\n    };\n\n    return (\n        <div\n          onMouseLeave={() => setShowQuickTracks(false)}\n          className=\"modes\">\n          <div\n            onClick={() => setShowQuickTracks(!showQuickTracks)}\n            style={nameStyle} className={showQuickTracks ? \"toolbar-track-name show\" : \"toolbar-track-name\"}>\n            {truncate(track.presetName || track.getName())}\n            {showQuickTracks ?\n             <TracksOverview showName={true} mode={bottomMode} sequencerEngine={track.sequencerEngine}/> : ''}\n          </div>\n          {hasInfo ? \n           <Mode track={track} option={INFO}\n                 selectedOption={bottomMode}\n                 name={track.getTrackType() === INSTRUMENT ? \"Presets\" : \"Info\"}\n                 setBottomMode={setBottomMode}/> : ''}\n          {hasSampler ? \n           <Mode track={track} option={WAVEFORM} selectedOption={bottomMode}\n                 name=\"Waveform\" setBottomMode={setBottomMode}/>\n           : ''}\n          {hasPiano ? \n           <Mode track={track} option={PIANO_ROLL} selectedOption={bottomMode}\n                 name=\"Piano\" setBottomMode={setBottomMode}/> : ''}\n        </div>);\n}\n\nconst Mode = ({option, name, selectedOption, setBottomMode, track}) => {\n    let className = \"mode\";\n    if (option === selectedOption) {\n        className += \" selected\";\n    }\n\n    let style = {\n    };\n    if (selectedOption === option) {\n        style.borderBottomWidth = 4;\n        style.borderBottomStyle = 'solid';\n        style.borderBottomColor = colors.getColorForTrack(track);\n    } else {\n    }\n\n    return (\n        <div\n          style={style}\n          onClick={() => setBottomMode(option)}\n          className={className}>\n          {name}\n        </div>\n    );\n};\n\nconst truncate = (name) => {\n    if (name.length > 40) {\n        return name.slice(0, 40) + '...';\n    }\n    return name;\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      bottomMode: state.arrangement.bottomMode,\n      isFrozen: props.track && props.track.isFrozen\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setBottomMode: (bottomMode) =>\n          dispatch(setArrangementBottomMode(bottomMode)),\n      setShowPianoRoll: (show) =>\n          dispatch(setShowPianoRoll(show)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modes);\n","import React, {useState, useCallback, useEffect} from 'react';\nimport AutomationParameterDropdowns from 'components/automation/AutomationParameterDropdowns.js';\nimport {getParameterName} from 'utils/getParameterName.js';\nimport StepActions from './StepActions.js';\nimport Modes from './Modes.js';\nimport {MODE_TO_HEIGHT, WAVEFORM, PIANO_ROLL, INFO} from 'constants/arrangement-modes.js';\nimport {getParametersWithAutomation} from 'parameters/getParametersWithAutomation.js';\nimport {MACROS_EFFECT} from 'effects/live/constants.js';\nimport Dropdown from 'react-dropdown';\nimport { connect } from \"react-redux\";\nimport {INSTRUMENT_RACK} from 'constants/track-types.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementBottomResizing,\n    setBottomToolbarOffset,\n    setShowAutomation,\n    setShowPianoRoll,\n    setArrangementBottomHeight,\n    setTrackAutomationParameter,\n    setTrackAutomationRackDevice,\n    setTrackAutomationDevice,\n    setTrackAutomationSubDevice,\n       } from 'actions/index.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\nconst DOUBLE_CLICK_TIME = 300;\nconst MIN_HEIGHT = 50;\n\nfunction AutomationToolbar(props) {\n    let {track, selectedDevice, subDevice, selectedParameter, selectedRackDevice} = props;\n   let parametersWithAutomation = getParametersWithAutomation(track);\n\n    useEffect(() => {\n        if (props.hideAutomation) {\n            props.setShowAutomation(false);\n        }\n    }, [props.hideAutomation]);\n\n    /**\n     * Device -> Sub Device -> Parameter\n     * Rack -> Device -> Sub Device -> Parameter\n     */\n    const onParameterClicked = useCallback((e, parameter) =>  {\n        e.stopPropagation();\n        if (props.showAutomation && parameter === selectedParameter) {\n            return props.setShowAutomation(false);\n        }\n        props.setShowAutomation(true);\n        props.setTrackAutomationParameter(parameter);\n    }, [\n        selectedParameter,\n        props.setTrackAutomationDevice,\n        props.setTrackAutomationRackDevice,\n        props.showAutomation\n    ]);\n                                          \n    const [lastClick, setLastClick] = useState(undefined);\n    const onMouseDown = useCallback((e) => {\n        let el = document.getElementsByClassName(\"toolbar-resizer\")[0];\n        let y = e.clientY - el.getBoundingClientRect().top;\n\n        props.setBottomOffset(y);\n        props.setArrangementBottomResizing(true);\n        // props.setArrangmentBottomResizingOffset(e.clientX);\n        let now = new Date().getTime();\n        if (lastClick !== undefined) {\n            if (now - lastClick <= DOUBLE_CLICK_TIME) {\n                if (props.hide) {\n                    return props.hide();\n                }\n                if (props.sequencerEngine.store.getState().arrangement.bottomHeight <= MIN_HEIGHT) {\n                    props.setArrangementBottomHeight(MODE_TO_HEIGHT[PIANO_ROLL]);\n                } else {\n                    props.setShowPianoRoll(false);\n                }\n            }\n        }\n        setLastClick(now);\n    }, [lastClick, setLastClick]);\n\n    const automationIcon = props.showAutomation ?\n          \"/automation-icon-enabled.png\" : \n          \"/automation-icon-disabled.png\";\n    const dropdownClassName = props.showAutomation ?\n          \"dropdowns\" : \"dropdowns disabled\";\n\n    let color = colors.getColorForTrack(props.track);\n    let style ={\n    };\n\n    if (props.bottomMode !== PIANO_ROLL && !props.hideAutomation) {\n        // then we shouldn't show those dropdowns, just a basic ass toolbar\n        return (\n            <div\n              style={style}\n              className=\"automation-toolbar\">\n              <div className=\"toolbar-container\">\n                <Modes id={props.id} track={track}/>\n                <div\n                  onMouseDown={onMouseDown}\n                  onMouseUp={() => props.setArrangementBottomResizing(false)}\n                  className=\"toolbar-resizer\"\n                >\n                  <div\n                    onMouseDown={(e) => {\n                        e.stopPropagation();\n                        if (props.hide) {\n                            props.hide();\n                        } else {\n                            props.setShowPianoRoll(false);\n                        }\n                        props.setArrangementBottomResizing(false);\n                    }}\n                    className=\"collapse-toggle bottom-shower\">\n                    <div className=\"arrow-down\">\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n        );\n    }\n\n    let toggleContent = (\n        <div\n          onMouseDown={(e) => {\n              e.stopPropagation();\n              if (props.hide) {\n                  props.hide();\n              } else {\n                  props.setShowPianoRoll(false);\n              }\n              props.setArrangementBottomResizing(false);\n          }}\n          className=\"bottom-shower collapse-toggle\">\n                <div className=\"arrow-down\"/>\n        </div>);\n    \n    return (\n        <div\n          style={style}\n          className=\"automation-toolbar\">\n          <div className=\"toolbar-container\">\n             <Modes id={props.id} track={track}/>\n            <div\n              onMouseDown={onMouseDown}\n              onMouseUp={() => props.setArrangementBottomResizing(false)}\n              className=\"toolbar-resizer\"\n            >\n              {!props.hideAutomation ? toggleContent : ''}\n            </div>\n          </div>\n          <div className=\"toolbar-container rest-toolbar\">\n            {!props.hideAutomation ? \n            <AutomationParameterDropdowns track={track} sequencerEngine={props.sequencerEngine}/>\n             : ''}\n            {!props.hideAutomation ? \n             <img\n                className=\"automation-icon\"\n                src={automationIcon} onClick={() => props.setShowAutomation(!props.showAutomation)}/>\n             : ''}\n              <div\n                onMouseDown={onMouseDown}\n                onMouseUp={() => props.setArrangementBottomResizing(false)}\n                className=\"toolbar-resizer automation-parameters\"\n                >\n                {parametersWithAutomation.map(\n                    parameter =>\n                        <div\n                          onMouseDown={(e) => onParameterClicked(e, parameter)}\n                          style={props.showAutomation && selectedParameter === parameter ?\n                                 {\n                                     backgroundColor: color,\n                                     color: 'black'} :\n                                 {}}\n                          className=\"parameter-button\">{getParameterName(parameter)}</div>)}\n              </div>\n            <StepActions color={color} track={track}/>\n            {props.hideAutomation ? toggleContent : ''}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    if (props.track) {\n        let track = props.track;\n        if (track && track.tracks && track.tracks[0]) {\n            track = track.tracks[0].track;\n        }\n\n        return {\n            id: track === undefined ? 0 :\n                track.sample !== undefined && track.sample.getId() !== undefined ?\n                track.sample.getId() : track.presetName || track.getName(),\n            numEffects: props.track.effects && props.track.effects.length,\n            selectedDevice: state.automation.trackDevice[props.track.id],\n            subDevice: state.automation.trackSubDevice[props.track.id],\n            selectedParameter: state.automation.trackParameter[props.track.id],\n            showAutomation: state.automation.show,\n            selectedRackDevice: state.automation.trackRackDevice[props.track.id],\n            selectedInstrument: state.tracks.selectedRackSubTrack[props.track.id],\n            bottomMode: state.arrangement.bottomMode\n        };\n    }\n    return {};\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setTrackAutomationParameter: (parameter) =>\n            dispatch(setTrackAutomationParameter(props.track.id, parameter)),\n        setShowPianoRoll: (show) =>\n            dispatch(setShowPianoRoll(show)),\n        setTrackAutomationDevice: (device) =>\n            dispatch(setTrackAutomationDevice(props.track.id, device)),\n        setTrackAutomationRackDevice: (device) =>\n            dispatch(setTrackAutomationRackDevice(props.track.id, device)),\n        setTrackAutomationSubDevice: (device) =>\n            dispatch(setTrackAutomationSubDevice(props.track.id, device)),\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n        setShowAutomation: (show) =>\n            dispatch(setShowAutomation(show)),\n        setBottomMode: (bottomMode) =>\n            dispatch(setArrangementBottomMode(bottomMode)),\n        setBottomOffset: (bottomOffset) =>\n            dispatch(setBottomToolbarOffset(bottomOffset))\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(AutomationToolbar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {legato, rollSteps} from \"pattern/utils/legato.js\";\nimport {ungroupSteps, groupSteps} from \"pattern/groups/stepGroups.js\";\nimport ConditionedCheckmark from 'components/ConditionedCheckmark.js';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {connect} from 'react-redux';\nimport {\n    setStepsGroupMode\n} from 'actions/index.js';\n\nconst StepsButton = ({selectedSteps, track, setGroupMode, groupMode}) => { \n    let [toggled, setToggled] = useState(false);\n\n    const onClickGroupSteps = useCallback(() => {\n        groupSteps(selectedSteps, track);\n    }, [selectedSteps]);\n\n    const onClickUngroup  = useCallback(() => {\n        ungroupSteps(selectedSteps);\n    }, [selectedSteps]);\n\n    const onClickRollSteps = useCallback(() => {\n        rollSteps(track, selectedSteps);\n    }, [selectedSteps]);\n\n    const onClickLegatoSteps = useCallback(() => {\n        legato(track, selectedSteps);\n    }, [selectedSteps]);\n\n    if (!selectedSteps || selectedSteps.length === 0) {\n        return [];\n    }\n\n    return (\n        <ButtonDropdown\n          className=\"steps-dropdown\"\n          show={toggled ? \"true\" : \"false\"}\n          isOpen={toggled}\n          toggle={() => setToggled(!toggled)}>\n          <DropdownToggle size=\"sm\" caret color=\"primary\">\n            {selectedSteps.length} steps\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem\n              onClick={() => setGroupMode(!groupMode)}\n              size=\"sm\">\n              Groups Mode \n              <ConditionedCheckmark\n                className=\"group-checkmark\"\n                condition={groupMode}/>\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickGroupSteps}\n              size=\"sm\">\n              Group Steps\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickUngroup}\n              size=\"sm\">\n              Un-group Steps\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickLegatoSteps}\n              size=\"sm\">\n              Legato Steps\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickRollSteps}\n              size=\"sm\">\n              Roll Steps\n            </DropdownItem>\n         </DropdownMenu>\n        </ButtonDropdown>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      groupMode: state.groups.stepsGroupMode\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setGroupMode: (x) => dispatch(setStepsGroupMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepsButton);\n","import React, { useState, useEffect , useCallback} from 'react';\nimport StepsButton from \"components/sidebar/StepsButton.js\";\nimport StepGroupEditor from \"components/sidebar/StepGroupEditor.js\";\nimport {\n    SOUND_RATED,\n    PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport FavoriteButton from \"components/FavoriteButton.js\";\nimport Documented from \"components/help/Documented.js\";\nimport {BROWSE_SOUNDS} from 'constants/contextual-help.js';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport ChokesAndMatches from './ChokesAndMatches.js';\nimport { connect } from \"react-redux\";\nimport {\n    updateStepParameter,\n} from 'operations/actions.js';\n\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {SAMPLER} from 'constants/instrument-types.js';\nimport {\n    setParametersToRecord,\n} from 'actions/index.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nclass TrackQuickView extends React.Component {\n    constructor(props) {\n        super(props);\n\n        let track = props.sequencerEngine.tracks[props.selectedTrack];\n        if (track) {\n            let trackData = track.trackData;\n            this.state = {\n                selectedParameter: trackData.durationParameter,\n                value: trackData.durationParameter.value,\n            }\n        } else {\n            this.state = {};\n        }\n\n        this.state.loading = false;\n    }\n\n    onMouseUp() {\n        this.props.setParametersToRecord([]);\n    }\n\n    getTrackData(props) {\n        if (props.sequencerEngine.tracks === undefined) {\n            return undefined;\n        }\n        let track = props.sequencerEngine.tracks[props.selectedTrack];\n        if (track === undefined) {\n            return undefined;\n        }\n        return track.trackData;\n    }\n\n    get track() {\n        return this.props.sequencerEngine.tracks[this.props.selectedTrack];\n    }\n\n    getThumbnail() {\n        let thumbnail = undefined;\n        let style = {};\n        if (this.track.sample) {\n            thumbnail = this.track.sample.getThumbnail();\n\n            if (thumbnail !== undefined && thumbnail !== '') {\n                return (\n                    <img className=\"mini-thumbnail\" src={thumbnail}/>\n                );\n            }\n            \n            style['backgroundColor'] = \n                colors.getColorForHash(this.track.sample.getId());\n        } else {\n            style['backgroundColor'] = colors.getColorForHash(this.track.presetName || this.track.getName());\n        }\n\n        return (\n            <div className=\"mini-thumbnail\" style={style}></div>\n        );\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (this.getTrackData(nextProps) !== this.getTrackData(this.props) ||\n            nextProps.id !== this.props.id ) {\n            let selectedParameter = this.state.selectedParameter;\n\n            let trackData = this.getTrackData(nextProps);\n            if (selectedParameter === undefined) {\n                if (trackData !== undefined) {\n                    selectedParameter = trackData.durationParameter;\n                } \n            }\n\n            if (trackData === undefined) {\n                return true;\n            }\n\n            if (selectedParameter.name === 'Duration') {\n                this.state.selectedParameter = (trackData.durationParameter);\n            } else if (selectedParameter.name === 'Attack') {\n                this.state.selectedParameter = (trackData.attackParameter);\n            } else if (selectedParameter.name === 'Release') {\n                this.state.selectedParameter = (trackData.releaseParameter);\n            } else if (selectedParameter.name === 'Transpose') {\n                this.state.selectedParameter = (trackData.transposeParameter);\n            } else if (selectedParameter.name === 'Velocity') {\n                this.state.selectedParameter = (trackData.velocityParameter);\n            } else {\n                this.state.selectedParameter = (trackData.durationParameter);\n            }\n            this.state.value = this.state.selectedParameter.value;\n        }\n        return true;\n    }\n\n    get gangMode() {\n        return this.props.selectedSteps && this.props.selectedSteps.length > 0;\n    }\n\n    chooseParameter(parameter) {\n        this.setState({\n            selectedParameter: parameter,\n            value: parameter.value,\n        });\n    }\n\n    onUpdateParameter(value) {\n        if (this.gangMode) {\n            let parametersToUpdate = [];\n            let steps = [];\n            for (let step of this.props.selectedSteps) {\n                steps.push(step);\n                parametersToUpdate = [\n                    ... parametersToUpdate,\n                    ... step.parameters.filter(\n                        x => x.name === this.state.selectedParameter.name)\n                ];\n            }\n            let track = this.props.sequencerEngine.tracks &&\n                this.props.sequencerEngine.tracks[this.props.selectedTrack];\n            parametersToUpdate.forEach(\n                (param, i) => \n                    this.props.sequencerEngine.operationManager.dispatch(\n                        updateStepParameter(\n                            track,\n                            steps[i],\n                            param,\n                            value),\n                        false,\n                        true));\n            track.updateSteps();\n            this.setState({\n                value: value\n            });\n        } else {\n            this.state.selectedParameter.value = value;\n            this.setState({\n                value: value\n            });\n            this.props.setParametersToRecord([this.state.selectedParameter]);\n        }\n    }\n\n    async nextSample() {\n        this.setState({loading: true});\n        await this.track.auditionNext(true);\n        this.setState({loading: false});\n    }\n\n    async previousSample() {\n        this.setState({loading: true});\n        await this.track.auditionPrevious();\n        this.setState({loading: false});\n    }\n\n    getValue() {\n        if (this.gangMode && this.props.selectedSteps[0]) {\n            let step = this.props.selectedSteps[0];\n            let param = step.parameters.find(x => x.name === this.state.selectedParameter.name);\n            return !param || param.get() === null ? this.state.selectedParameter.value :\n                param.get();\n        } else {\n            return this.state.selectedParameter.value;\n        }\n    }\n        \n    render() { \n        let props = this.props;\n        let track = props.sequencerEngine.tracks && props.sequencerEngine.tracks[props.selectedTrack];\n        let selectedParameter = this.state.selectedParameter;\n        if (props.selectedTrack === undefined || track === undefined ||\n            selectedParameter === undefined) {\n            return (\n                <div></div>\n            );\n        }\n        let trackData = track.trackData;\n        let min = getMin(selectedParameter, trackData);\n        let max = getMax(selectedParameter, trackData);\n\n        let showGangButton = this.props.selectedSteps &&\n            this.props.selectedSteps.length > 0;\n        \n        let favoriteButton = '';\n        if (track &&\n            track.preset &&\n            track.preset.contentHash) {\n            favoriteButton = (\n                <FavoriteButton\n                  contentHash={track.preset.contentHash}\n                  type={PRESET_RATED}\n                />);\n        } else if (track && track.sample) {\n            favoriteButton = (\n                <FavoriteButton\n                  contentHash={track.sample.getId()}\n                  type={SOUND_RATED}\n                />);\n        }\n\n        let groups = !this.props.selectedSteps ? [] :\n            Array.from(new Set(this.props.selectedSteps.map(s => s && s.group).filter(s => s)));\n        return (\n            <div\n              onMouseLeave={() => this.onMouseUp()}\n              onMouseUp={() => this.onMouseUp()}\n              className=\"track-quick-view\">\n              <div className=\"name-component\">\n                {this.getThumbnail()}\n                <div className=\"name-label\">{this.track.presetName || this.track.getName()}</div>\n                <PulseLoader\n                    sizeUnit={\"px\"}\n                    size={10}\n                    color={'#123abc'}\n                    loading={this.state.loading}\n                    />\n                {favoriteButton}\n                <Documented className=\"sample-arrows\" element={BROWSE_SOUNDS}>\n                  <i onClick={() => this.previousSample()} className=\"left\"></i>\n                  <i onClick={() => this.nextSample()} className=\"right\"></i>\n                </Documented>\n              </div>\n              <div className=\"parameter-options\">\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.durationParameter)}\n                  selected={selectedParameter === trackData.durationParameter}\n                  isCirklonSelected={trackData.durationParameter.name === this.props.cirklonParameterSelected}\n                  name=\"Dur.\"/>\n                  <ParameterOption\n                    onClick={() => this.chooseParameter(trackData.transposeParameter)}\n                    isCirklonSelected={trackData.transposeParameter.name === this.props.cirklonParameterSelected}\n                    selected={selectedParameter === trackData.transposeParameter}\n                    name=\"Trsp.\"/>\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.attackParameter)}\n                  isCirklonSelected={trackData.attackParameter.name === this.props.cirklonParameterSelected}\n                  selected={selectedParameter === trackData.attackParameter}\n                  name=\"Atk.\"/>\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.releaseParameter)}\n                  isCirklonSelected={trackData.releaseParameter.name === this.props.cirklonParameterSelected}\n                  selected={selectedParameter === trackData.releaseParameter}\n                  name=\"Rel.\"/>\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.velocityParameter)}\n                  isCirklonSelected={trackData.velocityParameter.name === this.props.cirklonParameterSelected}\n                  selected={selectedParameter === trackData.velocityParameter}\n                  name=\"Vel.\"/>\n                <ParameterValue\n                  value={this.getValue()}\n                />\n              </div>\n              <div\n                className=\"track-slider-container\"\n                onMouseLeave={() => this.onMouseUp()}\n                >\n                <ReactBootstrapSlider\n                  value={parseFloat(this.getValue())}\n                  change={(e) => this.onUpdateParameter(e.target.value)}\n                  step={selectedParameter.name === \"Transpose\" ? 1 : 0.01}\n                  max={max}\n                  min={min}\n                  orientation=\"horizontal\"\n                  reversed={false}\n                  />\n                <StepsButton track={track} selectedSteps={this.props.selectedSteps}/>\n              </div>\n              {groups.map(group => <StepGroupEditor\n                                     track={track}\n                                     key={group.id} sequencerEngine={this.props.sequencerEngine} group={group}/>)}\n            </div>\n        );\n    }\n}\n\nfunction ParameterValue(props) {\n    return (\n        <div\n          className=\"parameter-value\">{props.value}\n        </div>\n    );\n}\n\nfunction ParameterOption(props) {\n    let className = 'parameter-option';\n    if (props.selected) {\n        className += ' selected';\n    }\n\n    if (props.isCirklonSelected) {\n        className += ' cirklon-selected';\n    }\n\n \n    return (\n        <div\n          onClick={props.onClick}\n          className={className}>{props.name}</div>\n    );\n}\n\nfunction getMin(parameter, trackData) {\n    if (parameter === trackData.durationParameter) {\n        return 0.01;\n    } else {\n        return parameter.min;\n    }\n}\n\nfunction getMax(parameter, trackData) {\n    if (parameter === trackData.durationParameter ) {\n        return 4;\n    } else if (parameter === trackData.attackParameter) {\n        return 100;\n    } else if (parameter === trackData.releaseParameter) {\n        return 400;\n    }\n    return parameter.max;\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setParametersToRecord: params => dispatch(setParametersToRecord(params)),\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    let currentSubSequence = state.sequencer.currentSubSequence[id];\n    let currentPattern = state.sequencer.currentPattern[currentSubSequence] || 0;\n\n    let track = props.sequencerEngine.tracks && props.sequencerEngine.tracks[state.mix.selectedTrack];\n    return {\n        id: track === undefined ? 0 :\n            track.presetName ? track.presetName : \n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.getName(),\n        numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n        currentPattern: currentPattern,\n        currentSubSequence: currentSubSequence,\n        selectedTrack: state.mix.selectedTrack,\n        selectedSteps: state.keyboard.selectedPianoRollSteps,\n        cirklonParameterSelected: state.steps.cirklonParameterSelected,\n        stepGroups: state.steps.stepGroups\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickView);\n\n","import BackendQuery from 'decentralized/BackendQuery.js';\nimport {\n    SampleInSequence,\n    TokenizedSequenceEdited\n} from 'decentralized/EthereumEvents.js';\nimport TokenizedSequencesContract from 'decentralized/contracts/TokenizedSequencesContract.js';\n\nconst contractAddress = new TokenizedSequencesContract().contractAddress;\n\nexport const getProjectsUsed = async (id) => {\n    let query = new BackendQuery(contractAddress)\n        .from(SampleInSequence)\n        .select(\"sequenceHash\")\n        .where(\"sampleHash\", id);\n\n    let results = await query.executeQuery();\n    let hashes = results.map(x => x.sequenceHash);\n\n    query = new BackendQuery(contractAddress)\n        .from(TokenizedSequenceEdited)\n        .select(\"title\")\n        .select(\"newSequence\")\n        .whereIn(\"newSequence\", hashes);\n\n    return await query.executeQuery();\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {MACROS_EFFECT} from 'effects/live/constants.js';\nimport Dropdown from 'react-dropdown';\nimport {getParametersWithAutomation} from 'parameters/getParametersWithAutomation.js';\nimport {connect} from 'react-redux';\nimport {INSTRUMENT_RACK} from 'constants/track-types.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementBottomResizing,\n    setBottomToolbarOffset,\n    setShowAutomation,\n    setShowPianoRoll,\n    setArrangementBottomHeight,\n    setTrackAutomationParameter,\n    setTrackAutomationRackDevice,\n    setTrackAutomationDevice,\n    setTrackAutomationSubDevice,\n       } from 'actions/index.js';\n\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst AutomationParameterDropdowns = (props) => { \n    let {track, selectedDevice, subDevice, selectedParameter, selectedRackDevice} = props;\n    let deviceOptions = track.getTrackType() === INSTRUMENT_RACK ?\n        []:\n        [\n            {value: null, label: \"None\"},\n            {value: track, label: \"Track\"}\n        ];\n    let rackOptions = [];\n    let subDeviceOptions = [];\n\n    let parametersWithAutomation = getParametersWithAutomation(track);\n\n    /**\n     * Device -> Sub Device -> Parameter\n     * Rack -> Device -> Sub Device -> Parameter\n     */\n    const onParameterClicked = useCallback((e, parameter) =>  {\n        e.stopPropagation();\n        if (props.showAutomation && parameter === selectedParameter) {\n            return props.setShowAutomation(false);\n        }\n        props.setShowAutomation(true);\n        props.setTrackAutomationParameter(parameter);\n    }, [\n        selectedParameter,\n        props.setTrackAutomationDevice,\n        props.setTrackAutomationRackDevice,\n        props.showAutomation\n    ]\n                                         );\n\n    useEffect(() => {\n        if (props.selectedInstrument) {\n            onChangeRackDevice(props.selectedInstrument);\n        }\n    }, [props.selectedInstrument, onChangeRackDevice]);\n\n    useEffect(() => {\n        let parameter = selectedParameter;\n        if (!parameter) {\n            return;\n        }\n        if (parameter.context.subDevice) {\n            // its a rack parameter\n            props.setTrackAutomationDevice(\n                parameter.context.instrument || parameter.context.effect || parameter.context.midiEffect);\n            // was this the right choice?\n            // props.setTrackAutomationRackDevice(parameter.context.subDevice);\n            props.setTrackAutomationSubDevice(parameter.context.subDevice);\n        } else if (parameter.context.midiEffect || parameter.context.effect) {\n            props.setTrackAutomationDevice(parameter.context.midiEffect || parameter.context.effect);\n        }  else {\n            props.setTrackAutomationSubDevice(parameter.context.instrument);\n        }\n        props.setTrackAutomationParameter(parameter);\n    }, [selectedParameter]);\n\n\n    if (track.getTrackType() === INSTRUMENT_RACK) {\n        rackOptions = [\n            {label: \"None\", value: null},\n            {label: \"Track\", value: track},\n            ... track.getSubDevices()\n        ];\n        rackOptions = addMacroDeviceOptions(rackOptions, track);\n    }\n\n    if (selectedRackDevice && selectedRackDevice.track) {\n        track = selectedRackDevice.track;\n    }\n\n    if (track.instrument && track.getTrackType() !== INSTRUMENT_RACK) {\n        deviceOptions.push({value: track.instrument, label: \"Instrument\"});\n    }\n\n    deviceOptions = addMacroDeviceOptions(deviceOptions, track);\n\n\n    if (track.effects) {\n        deviceOptions = [\n            ... deviceOptions,\n            ... track.effects.map(\n                x => getDeviceOption(x)),\n            ... track.midiEffects.effects.map(\n                x => getDeviceOption(x))];\n    }\n\n    /*\n    for (let i in props.sequencerEngine.lfos) {\n        let lfo = props.sequencerEngine.lfos[i].lfo;\n        deviceOptions.push({value: lfo, label: lfo.name});\n    }\n    */\n\n    let parameterOptions = [];\n    if (track.effects && selectedDevice && selectedDevice.parameters) {\n        if (subDevice && selectedDevice.getSubDevices) {\n            if (subDevice.trackNumber !== undefined && subDevice.instrument) {\n                subDevice = subDevice.instrument;\n            }\n            parameterOptions = getParametersForDevice(subDevice, props.isMix)\n                .map(x => getParameterOption(x));\n        } else {\n            parameterOptions = getParametersForDevice(selectedDevice, props.isMix)\n                .map(x => getParameterOption(x));\n        }\n\n        if (selectedDevice.getSubDevices) {\n            subDeviceOptions = selectedDevice.getSubDevices();\n        }\n   }\n\n\n    for (let i in parameterOptions) {\n        let parameter = parameterOptions[i].value;\n        let automations = props.isMix ?\n            parameter.mixAutomation.automations :\n            parameter.automations;\n        if (automations.length > 0) {\n            parameterOptions[i].className = \"has-automations\";\n        }\n    }\n\n    const onChangeRackDevice = useCallback((value) => {\n        console.log(\"on change rack device =\", value);\n        props.setTrackAutomationRackDevice(value);\n        if (!value) {\n            console.log(\"clearing all this shit\");\n            props.setTrackAutomationDevice(null);\n            props.setTrackAutomationSubDevice(null);\n            props.setTrackAutomationParameter(undefined);\n            return;\n        }\n\n        if (value.macroParameter) {\n            props.setTrackAutomationDevice(value);\n            return;\n        }\n\n        let deviceOptions = getDeviceOptionsForTrack(value.track ? value.track : value);\n        let deviceToChoose = deviceOptions[0].value;\n        if (selectedDevice) {\n            let dev = deviceOptions\n                .filter(({value}) => value)\n                .find(({value}) =>\n                      value.name === selectedDevice.name);\n            if (dev) {\n                deviceToChoose = dev.value;\n            }\n        }\n\n        if (!deviceToChoose) {\n            deviceToChoose = value;\n        }\n        props.setTrackAutomationDevice(deviceToChoose);\n        let parameters = getParametersForDevice(deviceToChoose, props.isMix);\n        if (selectedParameter) {\n            let parameterWithName = parameters.find(\n                p => p.name === selectedParameter.name);\n            if (parameterWithName) {\n                props.setTrackAutomationParameter(parameterWithName);\n                return;\n            }\n        }\n        props.setTrackAutomationParameter(parameters[0]);\n    }, [selectedDevice, selectedParameter]);\n\n    const onChangeDevice = useCallback((value) => {\n        props.setTrackAutomationDevice(value);\n        if (!value) {\n            props.setTrackAutomationDevice(null);\n            props.setTrackAutomationSubDevice(null);\n            props.setTrackAutomationParameter(undefined);\n            return;\n        }\n        if (value.getSubDevices && value.getSubDevices().length > 0) {\n            let subDevice = value.getSubDevices()[0].value;\n            props.setTrackAutomationSubDevice(subDevice);\n            value = subDevice;\n        }\n        let parameters = getParametersForDevice(value, props.isMix);\n        if (selectedParameter) {\n            let parameterWithName = parameters.find(\n                p => p.name === selectedParameter.name);\n            if (parameterWithName) {\n                props.setTrackAutomationParameter(parameterWithName);\n                return;\n            }\n        }\n        props.setTrackAutomationParameter(parameters[0]);\n    }, [\n        selectedParameter,\n        props.setTrackAutomationParameter,\n        props.setTrackAutomationSubDevice,\n        props.setTrackAutomationDevice]);\n\n    const onChangeSubDevice = useCallback((value) => {\n        props.setTrackAutomationSubDevice(value);\n        let parameters = getParametersForDevice(value, props.isMix);\n        if (selectedParameter) {\n            let parameterWithName = parameters.find(\n                p => p.name === selectedParameter.name);\n            if (parameterWithName) {\n                props.setTrackAutomationParameter(parameterWithName);\n                return;\n            }\n        }\n        props.setTrackAutomationParameter(parameters[0]);\n    }, [selectedParameter]);\n\n    const getSubDeviceOption = useCallback((value) => {\n        let option = subDeviceOptions.find(opt => opt.value === value);\n        return option;\n    }, [subDeviceOptions]);\n\n    const automationIcon = props.showAutomation ?\n          \"/automation-icon-enabled.png\" : \n          \"/automation-icon-disabled.png\";\n    let dropdownClassName = props.showAutomation ?\n          \"dropdowns\" : \"dropdowns disabled\";\n\n    let color = colors.getColorForTrack(props.track);\n    let style ={\n    };\n\n    if (track.getTrackType() === INSTRUMENT_RACK) {\n        if (!selectedRackDevice) {\n            dropdownClassName += \" non-selected rack-dropdown\";\n        }\n    } else {\n        if (!selectedDevice) {\n            dropdownClassName += \" non-selected\";\n        }\n    }\n\n  return (\n      <div className={dropdownClassName}>\n        {rackOptions.length > 0 ?\n         <Dropdown\n           onMouseDown={(e) => e.stopPropagation()}\n           options={rackOptions}\n           onChange={(o) => onChangeRackDevice(o.value)} \n           value={getDeviceOption(selectedRackDevice, true)}\n           placeholder=\"Rack Device\" />\n         : ''}\n        {selectedRackDevice === track ?\n         '' : \n        <Dropdown\n          onMouseDown={(e) => e.stopPropagation()}\n          controlClassName=\"device-dropdown\"\n          options={deviceOptions}\n          onChange={(o) => onChangeDevice(o.value)} \n          value={getDeviceOption(selectedDevice)}\n          placeholder=\"Device\" />}\n        {selectedRackDevice !== track && subDeviceOptions.length > 0 ?\n         <Dropdown\n          controlClassName=\"sub-device-dropdown\"\n           onMouseDown={(e) => e.stopPropagation()}\n           options={subDeviceOptions}\n           onChange={(o) => onChangeSubDevice(o.value)} \n           value={getSubDeviceOption(subDevice)}\n           placeholder=\"Sub Device\" /> : ''}\n        <Dropdown\n          controlClassName=\"parameter-dropdown\"\n          onMouseDown={(e) => e.stopPropagation()}\n          options={parameterOptions}\n          onChange={(o) => props.setTrackAutomationParameter(o.value)}\n          value={getParameterOption(selectedParameter)}\n          placeholder=\"Parameter\" />\n      </div>);\n}\n\nconst getDeviceOption = (device, isRack) => device && ({\n    label: device.trackNumber !== undefined && !device.instrumentRack ?\n        \"Track\" :\n        device.instrumentRack && !isRack ? \"Instrument\" :\n        device.presetName || device.name || (device.getName && device.getName()) ,\n    value: device});\nconst getParameterOption = (parameter) => parameter && ({label: parameter.prettyName, value: parameter});\n\nconst getParametersForDevice = (device, isMix=false) => {\n    let parameters = device.parameters\n        .filter(x => isMix ? x.mixAutomation.automations : x.automations);\n    parameters.sort(\n        (a,b) => isMix ?\n            b.mixAutomation.automations.length - a.mixAutomation.automations.length : \n            b.automations.length - a.automations.length);\n    return parameters.filter(\n        x =>\n            x.automatable &&\n            x.uxAutomatable &&\n            !x.isMapped &&\n            x.name !== 'enabled' && x.name !== 'Configuration');\n};\n\nconst addMacroDeviceOptions = (deviceOptions, track) => {\n    // do we have a macro effect?\n    let macrosEffect = track.liveEffects.effects.find(\n        e => e.effect === MACROS_EFFECT);\n\n    if (!macrosEffect) {\n        return deviceOptions;\n    }\n\n    let macroOptions = [];\n    for (let i in macrosEffect.macros) {\n        let macro = macrosEffect.macros[i];\n        if (macro.subMacros.length > 0) {\n            macroOptions.push({\n                    label: macro.name,\n                    value: macro\n            });\n        }\n    }\n\n    return [... deviceOptions, ...macroOptions];\n};\n\n\nconst getDeviceOptionsForTrack= (track) => {\n    let deviceOptions = [];\n    if (track.instrument && track.getTrackType() !== INSTRUMENT_RACK) {\n        deviceOptions.push({value: track.instrument, label: track.instrument.name});\n    }\n\n    deviceOptions = [\n        {label: \"None\", value: null},\n        ... deviceOptions,\n        ... track.effects.map(\n            x => getDeviceOption(x)),\n        ... track.midiEffects.effects.map(\n            x => getDeviceOption(x))];\n\n    return deviceOptions;\n};\n\nconst mapStateToProps = (state, props) => {\n    if (props.track) {\n        let track = props.track;\n        if (track && track.tracks && track.tracks[0]) {\n            track = track.tracks[0].track;\n        }\n\n        return {\n            id: track === undefined ? 0 :\n                track.sample !== undefined && track.sample.getId() !== undefined ?\n                track.sample.getId() : track.presetName || track.getName(),\n            numEffects: props.track.effects && props.track.effects.length,\n            selectedDevice: state.automation.trackDevice[props.track.id],\n            subDevice: state.automation.trackSubDevice[props.track.id],\n            selectedParameter: state.automation.trackParameter[props.track.id],\n            showAutomation: state.automation.show,\n            selectedRackDevice: state.automation.trackRackDevice[props.track.id],\n            selectedInstrument: state.tracks.selectedRackSubTrack[props.track.id],\n            bottomMode: state.arrangement.bottomMode\n        };\n    }\n    return {};\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setTrackAutomationParameter: (parameter) =>\n            dispatch(setTrackAutomationParameter(props.track.id, parameter)),\n        setShowPianoRoll: (show) =>\n            dispatch(setShowPianoRoll(show)),\n        setTrackAutomationDevice: (device) =>\n            dispatch(setTrackAutomationDevice(props.track.id, device)),\n        setTrackAutomationRackDevice: (device) =>\n            dispatch(setTrackAutomationRackDevice(props.track.id, device)),\n        setTrackAutomationSubDevice: (device) =>\n            dispatch(setTrackAutomationSubDevice(props.track.id, device)),\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n        setShowAutomation: (show) =>\n            dispatch(setShowAutomation(show)),\n        setBottomMode: (bottomMode) =>\n            dispatch(setArrangementBottomMode(bottomMode)),\n        setBottomOffset: (bottomOffset) =>\n            dispatch(setBottomToolbarOffset(bottomOffset))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AutomationParameterDropdowns);\n","export const getParametersWithAutomation =\n    (track) => {\n        let params = track.trackData ? track.getAllParameters()\n            .filter(x => x.automations)\n            .filter(x => x.automations.length > 0) : [];\n        return Array.from(new Set(params));\n    };\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Colors from 'components/Colors.js';\nimport {newTransformation} from 'pattern/groups/stepGroups.js';\nimport TransformationEditor from \"components/sidebar/TransformationEditor.js\";\nimport {connect} from 'react-redux';\nimport '../../StepGroup.scss';\n\nconst colors = new Colors();\n\nconst StepGroupEditor = ({group, sequencerEngine, track}) => { \n    let [transformations, setTransformations] = useState(group.transformations);\n\n    const onClickNew = useCallback(() => {\n        newTransformation(group);\n        setTransformations([... group.transformations]);\n    }, [setTransformations, group]);\n\n    let style = {\n        backgroundColor: colors.getColorForHash(group.id)\n    };\n    return (\n        <div className=\"step-group-editor\">\n          <div className=\"group-header\">\n            <div style={style} className=\"group-thumb\"/>\n            <div className=\"group-name\">\n              {group.name}\n            </div>\n            <div onClick={onClickNew} className=\"new-transform-btn\">+</div>\n          </div>\n          {transformations.map(\n              transformation =>\n                  <TransformationEditor\n                    key={transformation.id}\n                    track={track}\n                    sequencerEngine={sequencerEngine}\n                    transformation={transformation}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepGroupEditor);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useScrollTo} from './useScrollTo.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport PresetIcon from \"components/installation/getPresetStyle.js\";\nimport {FILTER_BY_DAY, FILTER_BY_DAY_TAG} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport {INSTRUMENT_TYPE_TO_NAME} from 'constants/instrument-types.js';\nimport {\n    setCurrentTagInList,\n    setSampleTagDragging,\n    setSamplesDragging} from 'actions/index.js';\nimport {formatDate} from './formatDate.js';\nimport Colors from 'components/Colors.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {connect} from 'react-redux';\nconst colors = new Colors();\nwindow.tran2 = 0.6;\nwindow.tran = 0.3;\n\nconst Day = ({\n    results,\n    searchTerm,\n    onClickDay,\n    isCurrent,\n    onClickSource,\n    number,\n    filterFavorites,\n    setCurrentTagInList,\n    sourceToSearch,\n    setSamplesDragging,\n    setSourceToSearch,\n    setSampleTagDragging,\n    scrollRef,\n}) => { \n    let ref = useRef(undefined);\n    let [dayResults, setDayResults] = useState(results);\n    let {tag,  blockNumber, instrumentTypes, discogs, youtube, unsourced, totalResults} = dayResults || {};\n    let [date, setDate] = useState(undefined);\n    let [toggled, setToggled] = useState(tag === \"\" || searchTerm !== \"\" || sourceToSearch);\n\n    useEffect(() => {\n        if (results) {\n            setDayResults(results);\n        }\n    }, [results, setDayResults]);\n\n    useEffect(() => {\n        if (searchTerm !== \"\") {\n            setToggled(true);\n        }\n    }, [searchTerm, setToggled]);\n\n    useEffect(() => {\n        getBlockDate(blockNumber).then(\n            setDate);\n    }, [blockNumber]);\n\n    let text = tag !== \"\" ? tag : date ? formatDate(date) : \"\";\n    let style = {\n        backgroundColor: colors.transparent(colors.saturate(colors.getColorForHash(text), 1.2), window.tran2)\n    };\n\n    let ratio = Math.pow(totalResults / 30.0, 0.5);\n    if (!toggled) {\n        style.opacity = ratio;\n    }\n\n    useEffect(() => {\n        if (unsourced) {\n            setToggled(true);\n        }\n    }, [unsourced, setToggled]);\n\n    const onClick= useCallback(() => {\n        setCurrentTagInList(number);\n        if (toggled) {\n            onClickDay(dayResults, tag);\n        } else {\n            if (unsourced) {\n                setToggled(true);\n            } else {\n                // need to get results\n                getSoundResultsServer(\n                    50,\n                    searchTerm, 0, \"tag\", 0, filterFavorites, undefined, tag)\n                    .then((r) => {\n                        console.log('results gotten for tag=', tag);\n                        setDayResults(r[0]);\n                    });\n            }\n        }\n    }, [\n        onClickDay,\n        results,\n        tag,\n        toggled,\n        setToggled,\n        setDayResults,\n        unsourced,\n        dayResults,\n        number,\n        filterFavorites]);\n\n    useScrollTo({ref, scrollRef, isCurrent, expanded: toggled});\n\n    useEffect(() => {\n        if (isCurrent) {\n            window.addEventListener(\"keydown\", onKeyDown);\n        }\n        return () => isCurrent && window.removeEventListener(\"keydown\", onKeyDown);\n    }, [isCurrent, onClickDay, results, tag, toggled, setToggled, setDayResults, unsourced, dayResults, number]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter') {\n            onClick();\n        }\n    }, [isCurrent, onClickDay, results, tag, toggled, setToggled, setDayResults, unsourced, dayResults, number]);\n\n    let className = \"day\";\n    if (toggled) {\n        className += \" day toggled\";\n    }\n    if (toggled && (!discogs || !unsourced || !youtube)) {\n        console.log(\"RETURNNING toggled=%s\", toggled, dayResults, results, discogs, unsourced, youtube);\n        return [];\n    }\n    if (isCurrent) {\n        className += \" current\";\n    }\n    return (\n        <Documented element={FILTER_BY_DAY}>\n          <div\n            ref={ref} \n            draggable={tag !== \"\" && searchTerm === \"\"}\n            onDragStart={() => setSampleTagDragging(tag)}\n            onDragOver={(e) => e.preventDefault()}\n            style={style} className={className} onClick={onClick}>\n            <div className=\"floppy-part\">\n              <div style={toggled ? style : undefined} className=\"date\">\n                {tag !== \"\" ? tag : date ? formatDate(date) : \"\"}\n              </div>\n            </div>\n            {!toggled ? <div style={style} className=\"floppy-inner\"/> :\n             <div className=\"sources\">\n               {Object.keys(discogs).map(\n                   (coverArtHash, i) =>\n                       <Source\n                         i={i}\n                         setSourceToSearch={setSourceToSearch}\n                         key={coverArtHash}\n                         setSamplesDragging={setSamplesDragging}\n                         onClickSource={onClickSource}\n                         coverArtHash={coverArtHash}\n                         results={discogs[coverArtHash]}/>)}\n               {Object.keys(youtube).map(\n                   (videoId, i) =>\n                       <Source\n                         i={i}\n                         key={videoId}\n                         setSamplesDragging={setSamplesDragging}\n                         setSourceToSearch={setSourceToSearch}\n                         onClickSource={onClickSource}\n                         videoId={videoId}\n                         results={youtube[videoId]}/>)}\n               {Object.keys(unsourced).map(\n                   (tag, i) =>\n                       <Source\n                         i={i}\n                         key={tag}\n                         setSamplesDragging={setSamplesDragging}\n                         onClickSource={onClickSource}\n                         instrumentType={unsourced[tag][0].instrumentType}\n                         tag={tag}\n                         results={unsourced[tag]}/>)}\n             </div>}\n          </div>\n        </Documented>\n    );\n};\n\nconst Source = ({\n    setSourceToSearch,\n    i,\n    results,\n    instrumentType,\n    coverArtHash,\n    videoId,\n    tag,\n    onClickSource, setSamplesDragging}) => {\n        let [userName, setUserName] = useState('');\n        useEffect(() => {\n            if (results[0] && results[0].user) {\n                ethereum.users.getUserName(results[0].user)\n                    .then(x => setUserName(x));\n            }\n        }, []);\n\n        let style = {\n        };\n        let bookLeftStyle = {\n        };\n\n        let color = colors.saturate(\n            colors.getColorForHash(coverArtHash && coverArtHash !== '' ? coverArtHash : videoId), 3);\n        if (coverArtHash) {\n            style.backgroundImage = 'url(' + ipfs.getHashUrl(coverArtHash) + \")\";\n        } else if (videoId) {\n            style.backgroundImage = 'url(' + 'https://img.youtube.com/vi/' + videoId + '/1.jpg)';\n        } else {\n            if (!instrumentType && !tag) {\n                style.display = 'none';\n            }\n        }\n        let _color = instrumentType ?\n            colors.saturate(colors.getColorForHash(INSTRUMENT_TYPE_TO_NAME[instrumentType]), 5) :\n            tag ? colors.saturate(colors.saturate(colors.getColorForHash(tag), 3), 3) : undefined;\n        if (_color) {\n            // bookLeftStyle.color = colors.compliment(_color, 1.5); //colors.transparent(color, 0.90);\n            color = _color;\n        }  else if (color) {\n            // bookLeftStyle.color = colors.compliment(color, 1.5); //colors.transparent(color, 0.90);\n        }\n\n        let title = coverArtHash && results[0].releaseName ?\n            results[0].artistName + '-' + results[0].releaseName :\n            coverArtHash ? results[0].title :\n            videoId ? results[0].title :\n            tag; \n        if (title === '' || title) {\n            title = results[0].title;\n        }\n        let tags = results\n            .filter(x => x.tags)\n            .map(x => x.tags).reduce((a,b) => [... a, ...b], [])\n            .filter(_tag => tag !== _tag && _tag !== 'Resampled');\n\n        let counts = {};\n        for (let tag of tags) {\n            counts[tag] = tag.length;\n        }\n        let max = 100;\n        let maxTag = tag;\n        for (let _tag in counts) {\n            if (_tag !== tag && counts[_tag] < max) {\n                maxTag = _tag;\n                max = counts[_tag];\n            }\n        }\n        let person = results[0].artistName !== '' ?\n            results[0].artistName : userName;\n        let releaseName = results.find(x => x.releaseName !== '');\n        let releaseId = undefined;\n        if (releaseName) {\n            title = releaseName.releaseName;\n            releaseId = releaseName.releaseId;\n        }\n        if (!coverArtHash && !videoId && coverArtHash != '' && videoId != '') {\n            title = tag.toUpperCase();\n        }\n        tag = maxTag;\n        title = Math.floor(i / 20) % 2 === 1 ? cleanTitle(title) : cleanTitle(title);\n\n\n        color = colors.transparent(color, window.tran);\n\n        let className = \" source-container\";\n        if (coverArtHash) {\n            className += \" record\";\n        }\n\n        if (i % 3 == 2 ) {\n            className += \" bigger\";\n        }\n        \n        return (\n            <Documented\n              arg={title}\n              element={FILTER_BY_DAY_TAG}>\n              <div\n                draggable={true}\n                onDragStart={(e) => setSamplesDragging(results.map(x => x.ipfsHash))}\n                onDragOver={(e) => e.preventDefault()}\n                style={{width: i % 3 < 2 ? 186 : 186*2}}\n                onClick={(e) => e.stopPropagation() || onClickSource(e, {results, coverArtHash, videoId, tag})}\n                className={className}>\n                <div\n                  style={bookLeftStyle}\n                  className=\"book-left\">\n                  <span>\n                    {tag && tag !== '' ? tag : instrumentType && results.length === 1 ? results[0].title : INSTRUMENT_TYPE_TO_NAME[instrumentType]}\n                  </span>\n                </div>\n                <div\n                  className=\"source-title\">\n                  {title}\n                </div>\n                {coverArtHash || videoId ? \n                 <div\n                   onClick={(e) => {\n                       e.stopPropagation();\n                       if (videoId && videoId !== \"\") {\n                           setSourceToSearch({videoId});\n                       } else {\n                           setSourceToSearch({releaseId});\n                       }\n                   }}\n                   className=\"source-thumb\" style={style}>\n                 </div> : \n                 <div style={bookLeftStyle} className=\"book-right\">{person}</div>}\n              </div>\n            </Documented>\n        );\n    };\n\nconst Bar = ({length}) => {\n    return (\n        <div className=\"bar\">\n          <div style={{width: Math.min(100 * length / 20, 100) + '%'}} className=\"bar-indicator\">\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setSampleTagDragging: x => dispatch(setSampleTagDragging(x)),\n        setSamplesDragging: (s) => dispatch(setSamplesDragging(s)),\n        setCurrentTagInList: (s) => dispatch(setCurrentTagInList(s))\n    };\n};\n\nconst cleanTitle = (title) => {\n    if (!title) {\n        return '';\n    }\n    title = title.trim();\n    title = title.replace(/[|&;$%@\"<>()+,]/g, \"\");\n    let t = \"\";\n    for (let i=0; i < title.length; i++) {\n        if (title.charCodeAt(i) > 32) {\n            return title.substring(i);\n        }\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Day);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {isNumber} from 'utils/IsNumber.js';\nimport {connect} from 'react-redux';\n\nconst ZNumberInspector = ({znumber}) => { \n    let [min, setMin] = useState(znumber.min);\n    let [max, setMax] = useState(znumber.max);\n    let [round, setRound] = useState(znumber.round);\n\n    useEffect(() => {\n        setMin(znumber.min);\n        setMax(znumber.max);\n        setRound(znumber.round);\n    }, [znumber, setMin, setRound, setMax]);\n\n    const onChange = useCallback((e, setter, field) => {\n        let value = e.target.value;\n        let text = value;\n        if (value === '.' || value === '-.') {\n            value = 0;\n        } else if (value === '-') {\n            value = 0;\n        } else if (value === '') {\n            value = 0;\n        } else if (!isNumber(value)) {\n            return;\n        }\n        setter(text);\n        znumber[field] = parseFloat(value);\n    }, [setMax, setMin, znumber]);\n\n    useEffect(() => {\n        setRound(znumber.round);\n    }, [setRound, znumber.round]);\n\n    const handleRoundChange = useCallback(() => {\n        znumber.round = !round;\n        setRound(!round);\n    }, [round, setRound, znumber]);\n\n    return (\n        <div className=\"z-number-inspector\">\n            <div className={\"min-max\"}>Min\n              <input className=\"min-max-input\"\n                     value={min}\n                     onChange={(e) => onChange(e, setMin, \"min\")} type=\"text\"/>\n            </div>\n            <div className={\"min-max\"}>Max\n              <input className=\"min-max-input\"\n                     value={max}\n                     onChange={(e) => onChange(e, setMax, \"max\")} type=\"text\"/>\n            </div>\n          <Checkbox label=\"Round\" value={round} onChange={handleRoundChange}/>\n        </div>\n    );\n}\n\nconst Checkbox = ({ label, value, onChange }) => {\n  return (\n    <label>\n      <input type=\"checkbox\" checked={value} onChange={onChange} />\n      {label}\n    </label>\n  );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZNumberInspector);\n","import React, { Component } from 'react';\nimport accounts from 'accounts/Accounts.js';\nimport {getNotes} from './getNotes.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport { Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport ethereum from 'decentralized/ethereum.js';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport {SEQUENCE} from 'decentralized/messaging/message-types.js';\n\nconst PAGE_SIZE = 10;\n\nclass CommentsComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            commentText: '',\n            commentSent: false,\n            notes: [],\n            start: 0,\n            messageSent: undefined,\n        };\n\n        this.getNotes();\n        this.watchForNotes();\n    }\n\n    async watchForNotes() {\n        if (this.props.sequence.id === undefined) {\n            return;\n        }\n\n        ethereum.messaging.watchForNewMessages(\n            this.props.sequence.id,\n            this.props.userId,\n            (note) => this.onNewNote(note));\n    }\n\n    onNewNote(note) {\n        if (note.messageHash === this.state.messageSent) {\n            this.setState({messageSent: undefined});\n        }\n        this.setState({\n            notes: [note, ... this.state.notes]\n        });\n    }\n\n    async getNotes() {\n        let notes = await getNotes(this.props.sequence.id);\n        if (notes === undefined) {\n            return;\n        }\n        this.setState({notes: notes});\n    }\n\n    async sendComment() {\n        let referenceHash = this.props.sequence.id;\n        let userId = this.props.userId;\n        let messageContent = this.state.commentText;\n        let messageType = SEQUENCE;\n\n        let messageSent = await ethereum.messaging.sendMessage(\n            userId,\n            referenceHash,\n            messageType,\n            messageContent);\n\n        this.setState({commentText: '', commentSent: true, messageSent: messageSent});\n    }\n\n    needsPagination() {\n        return this.notes.length > PAGE_SIZE;\n    }\n\n    getPaginatedNotes() {\n        if (this.notes.length > this.state.start + PAGE_SIZE) {\n            return this.notes.slice(\n                this.state.start, this.state.start + PAGE_SIZE);\n        } else {\n            return this.notes.slice(this.state.start);\n        }\n    }\n\n    getPagination() {\n        return (\n            <div className=\"pagination\">\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"comments-container\">\n              <ConditionedComponent condition={accounts.isLoggedIn()}>\n                <InputGroup className=\"tag-sound-input\">\n                  <Input\n                    onChange={(event) => {\n                        this.state.commentText = event.target.value;\n                        this.setState(this.state);\n                    }}\n                    type=\"textarea\"\n                    value={this.state.commentText}\n                    placeholder=\"Write a note\" className=\"comment-input-box\"/>\n                  <InputGroupAddon addonType=\"append\">\n                    <Button size=\"sm\" onClick={() => this.sendComment()} color=\"secondary\">Send</Button>\n                  </InputGroupAddon>\n                </InputGroup>\n              </ConditionedComponent>\n              <PulseLoader\n                sizeUnit={\"px\"}\n                size={10}\n                color={'#f92360'}\n                loading={this.state.messageSent !== undefined}\n                />\n                {this.state.notes.map(\n                (note, i) => <Note odd={i % 2 == 1} note={note}/>)}\n                <div onClick={this.props.onHide} className=\"common-button hide-notes-button\">\n                  Hide Notes\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Note extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            messageText: '',\n            fromUser: props.note.fromUser,\n            isFavorite: false,\n            date: '',\n        };\n\n        this.getMessage();\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (this.props.note !== nextProps.note) {\n            this.getMessage(nextProps.note);\n        }\n        return true;\n    }\n\n    async getMessage(note=this.props.note) {\n        let userId = note.fromUser ? note.fromUser :\n            note.user;\n        let userName = await ethereum.users.getUserName(userId);\n        if (userName !== undefined) {\n            this.setState({fromUser: userName});\n        }\n\n        let date = await ethereum.getBlockDate(note.blockNumber);\n        this.setState({\n            date: date === undefined ? '': date.toLocaleString(),\n        });\n        \n        if (note.isPrevious) {\n            this.setState({\n                newSequence: note.newSequence,\n                messageText: 'Made an edit (' + note.title + ')'});\n            return;\n        } else if (note.newSequence) {\n            this.setState({\n                newSequence: note.newSequence,\n                messageText: 'Made an edit (' + note.title + ')'});\n\n            return;\n        } else if (note.isFavorite) {\n            this.setState({\n                isFavorite: true,\n                messageText: 'Favorited'\n            });\n\n            return;\n        }\n        let message = await ipfs.getJson(note.messageHash, true);\n        this.setState({messageText: message.content});\n\n    }\n\n    onClickText() {\n        if (this.state.newSequence) {\n            var win = window.open('/create/' + this.state.newSequence, '_blank');\n            win.focus();\n        }\n    }\n\n    onClickUser() {\n        var win = window.open('/user/' + this.state.fromUser, '_blank');\n        win.focus();\n    }\n\n    render() {\n        let className = \"sequence-note-container\";\n        if (this.props.odd) {\n            className += ' odd';\n        }\n        return (\n            <div className={className}>\n              <div\n                onClick={() => this.onClickUser()}\n                className=\"sequence-note-from\">{this.state.fromUser}:</div>\n              <div onClick={() => this.onClickText()} className=\"sequence-note-text\">\n                <ConditionedComponent condition={!this.state.isFavorite}>\n                  {this.state.messageText}\n                </ConditionedComponent>\n                <ConditionedComponent condition={this.state.isFavorite}>\n                  <div className=\"heart favorited\"/>\n                </ConditionedComponent>\n              </div>\n              <div className=\"note-date\">{this.state.date}</div>\n            </div>\n        );\n    }\n}\n\nexport default CommentsComponent;\n","import ethereum from 'decentralized/ethereum.js';\nimport sequenceMetadata from 'decentralized/sequences/SequenceMetadata.js';\n\nexport async function getNotes(id, checkSequences=true) {\n    if (id === undefined) {\n        return undefined;\n    }\n    let notes = await ethereum.messaging.getMessages(\n        id);\n    \n    let nextSequences = await ethereum.tokenizedSequences.getNextSequences(\n        id);\n    let previousSequences = []; // await ethereum.tokenizedSequences.getPreviousSequences(\n//        id);\n    let favorites = await sequenceMetadata.getFavorites(id);\n    favorites = favorites.map(x => ({... x, isFavorite: true}));\n    \n    let fullNotes = checkSequences ?\n        [... nextSequences, ... previousSequences, ...favorites, ... notes] :\n        [... notes, ...favorites];\n    fullNotes.sort((a, b) => b.blockNumber - a.blockNumber);\n    return fullNotes;\n}\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport ethereum from 'decentralized/ethereum.js';\nimport FolderComponent from './FolderComponent.js';\nimport '../../Folders.scss';\n\nclass FoldersComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n        };\n\n        this.loadFolders();\n    }\n\n    async loadFolders() {\n        if (!ethereum.folders.isLoaded) {\n            await ethereum.folders.loadFolders();\n            this.setState(this.state);\n        }\n    }\n\n    get selectedFolder() {\n        return this.props.sequencerEngine.state.presets.selectedFolder;\n    }\n\n    onKeyUp(e) {\n        console.log('on key up = ' + e.key);\n        e.stopPropagation();\n        if (e.key === 'Delete') {\n            this.selectedFolder.delete();\n        }\n        return false;\n    }\n\n    render() {\n        let root = ethereum.folders.root;\n        let subFolders = root.subFolders;\n        subFolders.sort((a, b) => {\n            if (a.name === undefined || b.name === undefined) {\n                return 0;\n            }\n            return a.name.localeCompare(b.name);\n        });\n \n        return (\n            <div\n              className=\"folders-container\">\n              {subFolders.map(\n                  (folder, i) => \n                      <FolderComponent\n                            key={folder.name+'-'}\n                            onFoldersUpdated={() => this.setState(this.state)}\n                            onChooseItem={this.props.onChooseItem}\n                            onChooseFolder={this.props.onChooseFolder}\n                            onTestItem={this.props.onTestItem}\n                            showItems={this.props.showItems}\n                            folder={folder}\n                        />)}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n    }\n};\n\nexport default connect(mapStateToProps, null)(FoldersComponent);\n\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {setTrackDragging} from 'actions/index.js';\nimport './synth.scss';\nconst SynthThumbnail = ({track}) => { \n    let color = track.color;\n    let style = {\n        backgroundColor: color\n    };\n    return (<div\n              draggable={true}\n              onDragStart={() => setTrackDragging(track)}\n              onDragOver={(e) => e.preventDefault()}\n              className=\"youtube-info synth-info\">\n              <div className=\"synth-thumbnail sound-thumbnail\">\n                <div style={style} className=\"white-key\"/>\n                <div style={style} className=\"white-key\"/>\n                <div style={style} className=\"white-key\"/>\n                <div className=\"black-key key-1\"/>\n                <div className=\"black-key key-2\"/>\n              </div>\n            </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackDragging: x=>dispatch(setTrackDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SynthThumbnail);\n","import React , {useEffect} from 'react';\nimport {GO_BACK_HOME} from 'constants/contextual-help.js';\nimport Documented from \"components/help/Documented.js\";\nimport {setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {TRACK} from 'constants/object-types.js';\nimport {\n    savePreset,\n} from 'components/v2/trackRightClickActions.js';\n\nconst Navigator =  ({streamSize, zobject, options, setOption, option, showSave=false, setSelectedZObject}) => {\n    useEffect(() => {\n        if (!options.includes(option)) {\n            setOption(options[0]);\n        }\n    }, [options, setOption, option]);\n    let auditionName = zobject && zobject.getObjectType && zobject.getObjectType() === TRACK ?\n        \"Sounds\" : \"Presets\";\n    \n    return (\n        <div className=\"sidebar-navigator\">\n          <Documented\n            element={GO_BACK_HOME}\n            onClick={() => setSelectedZObject(undefined)}\n            className=\"back-arrow-container pushable\">\n            <div className=\"arrow-left\"/>\n          </Documented>\n          {options\n           .map(\n              _option =>\n              <div\n                onClick={() => setOption(_option)}\n                className={_option === option ? \"selected option \" + _option+'-option': \"option \" + _option+'-'+\"option\"}>\n                {_option === \"Audition\" ? auditionName : _option}\n                {streamSize > 0 && _option === \"Audition\" && <span className=\"audition-size\">{streamSize}</span>}\n              </div>)}\n          {showSave && <img className=\"save-preset-icon\" onClick={() => savePreset(zobject)} src=\"/save-preset-floppy.svg\"/>}\n\n\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      streamSize: props.zobject && props.zobject.samplesStream &&\n          props.zobject.samplesStream.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigator);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SidebarPresets from \"components/sidebar/SidebarPresets.js\";\nimport TrackQuickView from 'components/sidebar/TrackQuickView.js';\nimport QuickSampleChooser from \"components/sidebar/QuickSampleChooser.js\";\nimport {setShowArrangementSearcher} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport Modal from 'react-bootstrap/Modal';\n\nconst ArrangementSearcher = ({show, sequencerEngine, setShow}) => { \n    if (!show) {\n        return [];\n    }\n\n    return (\n        <Modal dialogClassName=\"searcher-modal\" show={show} onHide={() => setShow(false)}>\n          <QuickSampleChooser hide={() => setShow(false)} sequencerEngine={sequencerEngine}/>\n          <div className=\"modal-row\">\n            <TrackQuickView\n              sequencerEngine={sequencerEngine}/>\n            <SidebarPresets sequencerEngine={sequencerEngine}/>\n          </div>\n        </Modal>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.arrangement.showSearcher\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShow: (x) => dispatch(setShowArrangementSearcher(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementSearcher);\n","import React, { useRef, useCallback, useState, memo, useEffect, Component } from 'react';\nimport {getDuration} from './getDuration.js';\nimport {useXVisible} from './useXVisible.js';\nimport {getVisualization} from './getVisualization.js';\nimport { connect } from \"react-redux\";\nimport Colors from 'components/Colors.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {\n    PATTERN_SWITCH,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\n\nconst rollSubId = 1000000;\n\nconst colors = new Colors();\n\nconst PatternComponent = memo((props) => {\n    const ref = useRef(ref);\n    const [showVisuals, setShowVisuals] = useState(true);\n\n    useXVisible({\n        horizontalScroll: props.arrangementContainer,\n        ref,\n        isSelected: props.isSelected\n    });\n\n    /*\n    useEffect(() => {\n        onScroll();\n    }, []);\n\n    useEffect(() => {\n        if (!props.arrangementContainer) {\n            return undefined;\n        }\n        props.arrangementContainer.current.addEventListener(\n            'scroll', onScroll);\n\n        return () => props.arrangementContainer.current ?\n            props.arrangementContainer.current.removeEventListener(\n            'scroll', onScroll) : undefined;\n    }, [setShowVisuals, props.i, props.arrangementContainer]);\n\n    const onScroll = useCallback((e) => {\n        if (!props.arrangementContainer) {\n            return;\n        }\n        let scrollLeft = props.arrangementContainer.current.scrollLeft;\n        let rect = ref.current.getBoundingClientRect();\n        let elemLeft = rect.left - 140;\n        let width = props.arrangementContainer.current.clientWidth;\n        \n        let isVisible = (elemLeft >= 0) && (elemLeft <= width + 10 );\n        setShowVisuals(isVisible);\n    }, [setShowVisuals, props.i, props.arrangementContainer]);\n    */\n    \n    const onRightMouseDown = useCallback((e) => {\n        if (props.type === SEQUENCE_ROLL &&\n            !props.event.value) {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        props.onRightMouseDown();\n    }, [props.type, props.event, props.onRightMouseDown]);\n\n    const onLeftMouseDown = useCallback((e) => {\n        if (props.type === SEQUENCE_ROLL &&\n            !props.event.value) {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        props.onLeftMouseDown();\n    }, [props.type, props.event, props.onLeftMouseDown]);\n\n    const onSelect = useCallback((e) => {\n        if (props.type === SEQUENCE_ROLL &&\n            !props.event.value) {\n            return;\n        }\n        e.stopPropagation();\n        props.onSelect(e);\n    }, [props.type, props.event]);\n    \n    let text = '';\n    if (props.type === PATTERN_SWITCH) {\n        text = props.value + 1;\n    } else if (props.type === SEQUENCE_ROLL) {\n        text = props.value + ' ';\n    }\n\n    const getAdditionalStyling = useCallback((style) => {\n        if (props.type === SEQUENCE_ROLL) {\n            if (!props.event.value) {\n                // not rolling so make it invisible\n                style.opacity = 0.001;\n            }\n        }\n        return style;\n    }, [props.type, props.event]);\n\n    let hasEdges = false;\n    if (props.type === SEQUENCE_ROLL &&\n        !props.event.value) {\n        hasEdges = false;\n    } else {\n        hasEdges = true;\n    }\n\n    let topStyle = {};\n    let duration = props.duration === undefined ? 64 : props.duration;\n    let color;\n    if (props.isRoll) {\n        let resolution = props.event.resolution;\n        if (resolution === undefined) {\n            color = colors.getColor(13);\n        } else {\n            color = colors.getColor(resolution.resolution);\n        }\n    } else {\n        let eventKey = props.subSequence.id.slice ?\n            props.subSequence.id.slice(0, 10) : 's' + props.subSequence.id;\n        color = colors.getColorForHash(eventKey);\n        if (!isNaN(props.value)) {\n            topStyle.backgroundSize = (props.value + 1)*4 + 'px 50px';\n        }\n    }\n    let fullStyle = {\n    };\n    topStyle = {\n        ... topStyle,\n        width: getBarWidth(duration, props.resolution, props.xScale) - 2,\n        backgroundColor: colors.saturate(color, 3)\n    };\n\n    fullStyle = getAdditionalStyling(fullStyle);\n\n    let className = props.isSelected ?\n        \"pattern selected\" : \"pattern\";\n    \n    if (props.isLast) {\n        className += ' last';\n    }\n\n    fullStyle['width'] = getBarWidth(duration, props.resolution, props.xScale);\n\n    let restStyle = {\n        width: topStyle.width,\n        maxWidth: props.maxWidth || topStyle.width,\n    };\n\n    if (props.isSelected && color) {\n        fullStyle['border'] = 'solid 1px ' + colors.brighten(color, 1.5);\n        restStyle['backgroundColor'] = colors.brighten(color, 0.4);\n    }\n\n    if (props.smallPattern) {\n        className += ' small-pattern';\n    }\n\n    if (duration === 0) {\n        return [];\n    }\n\n    return (\n        <div\n          ref={ref}\n          className={className}\n          onMouseUp={props.onMouseUp}\n          style={fullStyle}\n        >\n          <div\n            style={topStyle} \n            onMouseDown={onSelect}\n            className=\"pattern-top\">\n            <ConditionedComponent condition={hasEdges}>\n              <div\n                onMouseDown={onLeftMouseDown}\n                onMouseUp={props.onMouseUp}\n                className=\"left-edge\"/>\n            </ConditionedComponent>\n            <div className=\"pattern-number\">\n              {text}\n            </div>\n            <ConditionedComponent condition={hasEdges}>\n              <div\n                onMouseDown={onRightMouseDown}\n                onMouseUp={props.onMouseUp}\n                className=\"right-edge\"/>\n            </ConditionedComponent>\n          </div>\n          {!props.smallPattern ? \n           <div\n             style={restStyle} className=\"pattern-rest\">\n             {showVisuals ? getVisualization(\n                 props.event, props.subSequence, duration, \n                 getBarWidth(1, props.resolution, props.xScale)) : ''}\n             <div className=\"center\"/>\n           </div>\n           : ''}\n        </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    let selectedEvents = state.arrangement.selectedEvents;\n    let isSelected = selectedEvents === undefined ?\n        false :\n        selectedEvents[props.event.id] !== undefined;\n    return {\n        isSelected: isSelected,\n        duration: props.event.duration,\n        value: props.event.value,\n        xScale: state.arrangement.xScale,\n    };\n};\n\nexport default connect(mapStateToProps, null)(PatternComponent);\n","import {useEffect, useCallback} from 'react';\n\nexport const useXVisible = ({horizontalScroll, ref, isSelected}) => {\n    useEffect(() => {\n        if (!isSelected ||\n            !horizontalScroll ||\n            !ref ||\n            !horizontalScroll.current ||\n            !ref.current) {\n            return;\n        }\n\n        // check if visible\n        let scrollLeft = horizontalScroll.current.scrollLeft;\n        let scrollWidth = horizontalScroll.current.offsetWidth;\n        let scrollRight = scrollLeft + scrollWidth;\n\n        let left = ref.current.offsetLeft;\n        let right = left + ref.current.offsetWidth;\n        let mid = (left + right) / 2;\n        if (mid < scrollLeft || mid > scrollRight) {\n            // then we need to scroll\n            horizontalScroll.current.scrollTo(left - 150, 0);\n        }\n    }, [isSelected, ref, horizontalScroll]);\n};\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport PatternComponent from './PatternComponent.js';\nimport {\n    PATTERN_SWITCH,\n    NO_SUB_SEQUENCE,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\n\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nfunction RollComponent(props) {\n    let event = props.event;\n\n    if (!event.value) {\n        // sequence_roll OFF is represented as empty, visually\n        let style = {\n            width: getBarWidth(props.duration, props.resolution, props.xScale),\n            opacity: 0.001,\n        };\n        \n        return (\n            <div className=\"empty-roll-event\" style={style}>\n              <div style={style}/>\n            </div>\n        );\n    }\n    \n    let step = event.step;\n    let duration = event.duration;\n    let width = getBarWidth(duration, props.resolution, props.xScale);\n    let style = {\n        width: width, \n    };\n    \n    let subEvents = props.event.getSubEvents();\n    return (\n        <div style={style} className={\"roll-event step-\" + props.event.step}>\n          {subEvents.map(\n              (event, i) =>\n                  <PatternComponent\n                        subSequence={NO_SUB_SEQUENCE}\n                        maxWidth={width}\n                        key={event.id}\n                        eventKey={'roll-'+Math.pow(event.value + 4, 8)}\n                        type={SEQUENCE_ROLL}\n                        isRoll={true}\n                        resolution={props.resolution}\n                        isLast={i === subEvents.length - 1}\n                        isFirst={i === 0}\n                        onDragStart={(e) => []}\n                        onSelect={(e) => {\n                            props.onSelect(props.event, event, e);\n                        }}\n                        onMouseUp={(e) => props.onMouseUp(event)}\n                        onRightMouseUp={(e) => props.onRightMouseUp(props.event, event)}\n                        onRightMouseDown={(e) => props.onRightMouseDown(props.event, event)}\n                        onLeftMouseUp={(e) => props.onLeftMouseUp(props.event, event)}\n                        onLeftMouseDown={(e) => props.onLeftMouseDown(props.event, event)}\n                        mixSession={props.mixSession}\n                        sequencerEngine={props.sequencerEngine}\n                        event={event}/>\n          )}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        duration: props.event.duration,\n        subEventsLength: props.event.subEvents.length,\n        xScale: state.arrangement.xScale\n    };\n}\n \nexport default connect(mapStateToProps, null)(RollComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport {getEffectsComponent} from 'components/effects/getEffectsComponent.js';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementPatternSelected} from 'actions/index.js';\nimport AutomationToolbar from '../installation/AutomationToolbar.js';\nimport PianoRollComponent from 'components/pianoroll/PianoRollComponent.js';\nimport {connect} from 'react-redux';\n\nconst ArrangementBottom = ({\n    setPatternSelected,\n    patternSelected,\n    sequencerEngine,\n    bottomHeight,\n    selectedEvents,\n    selectedTrack,\n    showTracks,\n    bottomMode,\n    currentSubSequence,\n    setBottomMode\n}) => { \n    let style = {\n        height: bottomHeight\n    };\n\n\n    useEffect(() => {\n        if (patternSelected && selectedTrack) {\n            selectedTrack.updateSteps();\n        }\n    }, [patternSelected, selectedTrack]);\n\n    useEffect(() => {\n        return () => setPatternSelected(undefined);\n    }, []);\n\n    if ((!patternSelected && bottomMode !== EFFECTS) || !showTracks) {\n        return [];\n    }\n    \n    let toolbar = '';\n    let content = '';\n    let track = undefined;\n    if (selectedTrack !== undefined) {\n        track = selectedTrack;\n\n        if (track) {\n            toolbar = (\n                <AutomationToolbar\n                  hideAutomation={true}\n                  hide={() => {\n                      setPatternSelected(undefined);\n                      setBottomMode(PIANO_ROLL);\n                  }}\n                  track={track} sequencerEngine={sequencerEngine}/>\n            );\n        }\n        if (bottomMode === EFFECTS) {\n            content = getEffectsComponent(track);\n        } else if (bottomHeight > 25) {\n            let pattern = track.patterns[patternSelected.patternNumber];\n            content = (\n                <PianoRollComponent\n                  parentClassName=\"arrangement-bottom-container\"\n                  isLooping={false}\n                  pattern={pattern}\n                  scale={0.5}\n                  installation={true}\n                  sequencerEngine={sequencerEngine}\n                  hideToolbar={true}\n                  track={track}\n                />);\n        }\n    } else {\n        style.height = 0;\n    }\n\n    return (\n        <div\n          style={style}\n          className=\"arrangement-bottom-container\">\n          {toolbar}\n          {content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let sub = props.sequencerEngine.currentSubSequence;\n    return {\n        selectedEvents: state.arrangement.selectedEvents,\n        currentSubSequence: props.sequencerEngine.currentSubSequence,\n        selectedTrack: props.sequencerEngine.tracks[state.mix.selectedTrack],\n        bottomHeight:   state.arrangement.bottomHeight,\n        patternSelected: state.arrangement.patternSelected,\n        showTracks: state.arrangement.showTracks[sub.id],\n        bottomMode: state.arrangement.bottomMode\n        \n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x)),\n        setBottomMode: (x) => dispatch(setArrangementBottomMode(x))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementBottom);\n","import React, {useCallback, useState} from 'react';\nimport { connect } from \"react-redux\";\nimport {\n    setArrangementBottomResizing,\n    setArrangementBottomHeight,\n       } from 'actions/index.js';\nimport {PIANO_ROLL, MODE_TO_HEIGHT} from 'constants/arrangement-modes.js';\nconst DOUBLE_CLICK_TIME = 300;\nconst MIN_HEIGHT = 50;\n\nfunction ArrangementBottomResizer(props) {\n    const [lastClick, setLastClick] = useState(undefined);\n    const onMouseDown = useCallback((e) => {\n        props.setArrangementBottomResizing(true);\n        let now = new Date().getTime();\n        if (lastClick !== undefined) {\n            if (now - lastClick <= DOUBLE_CLICK_TIME) {\n                if (props.sequencerEngine.store.getState().arrangement.bottomHeight <= MIN_HEIGHT) {\n                    props.setArrangementBottomHeight(MODE_TO_HEIGHT[PIANO_ROLL]);\n                } else {\n                    props.setArrangementBottomHeight(0);\n                }\n            }\n        }\n        setLastClick(now);\n    }, [lastClick, setLastClick]);\n\n    return (\n        <div\n          onMouseDown={onMouseDown}\n          className=\"arrangement-resizing-edge\">\n        </div>\n    );\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height))\n    };\n};\n \nexport default connect(null, mapDispatchToProps)(ArrangementBottomResizer);\n","import React, {useState, useEffect} from 'react';\nimport FolderComponent from './FolderComponent.js';\n\nexport default function XanaduFolders(props) {\n    let root = props.root;\n    const [subFolders, setSubFolders] = useState(root.subFolders);\n    useEffect(() => {\n        if (!props.root.isLoaded) {\n            props.root.load()\n                .then(() => \n                      setSubFolders([... props.root.subFolders]));\n        }\n    }, [props.root]);\n\n    const onChooseItem = (item) => {\n        console.log('choose item ', item);\n        let {fromData} = item;\n        props.sequencerEngine.loadSampleFromSequence(item.getId(), fromData);\n    };\n\n    const onChooseFolder = (folder) => {\n        console.log('choose folder ', folder);\n    };\n\n    const onTestItem = (item) => {\n    };\n\n    let subFoldersToShow = [... subFolders];\n    if (subFoldersToShow.length > 500) {\n        subFoldersToShow = subFolders.slice(0, 500);\n    }\n\n    return (\n        <div className=\"folders-container xanadu-folders\">\n          {subFoldersToShow.map(\n                  folder => \n                      <FolderComponent\n                            key={folder.name}\n                            onFoldersUpdated={() => []}\n                            onChooseItem={onChooseItem}\n                            onChooseFolder={onChooseFolder}\n                            onTestItem={onTestItem}\n                            showItems={true}\n                            folder={folder}\n                        />)}\n           \n        </div>\n    );\n}\n","import React, {useState, useCallback} from 'react';\nimport { connect } from \"react-redux\";\nimport ethereum from 'decentralized/ethereum.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport FoldersComponent from 'components/folders/FoldersComponent.js';\nimport XanaduFolders from 'components/folders/XanaduFolders.js';\n\nconst COLLAPSED_WIDTH = 30;\nconst PRESETS = 'PRESETS';\nconst SEQUENCES = 'SEQUENCES';\n\nfunction SideBrowserContainer(props) {\n    const [collapsed, setCollapsed]  = useState(false);\n    const [searchText, setSearchText]  = useState('');\n    const [option, setOption]  = useState(PRESETS);\n\n    const toggleCollapse = useCallback(() => {\n        setCollapsed(!collapsed);\n    }, [setCollapsed, collapsed]);\n\n    let style = {};\n    if (collapsed) {\n        style['minWidth'] = COLLAPSED_WIDTH;\n        style['width'] = COLLAPSED_WIDTH;\n    }\n\n    const onChooseItem = (item) => {\n        props.sequencerEngine.loadPresetAsSubSequence(item);\n    };\n\n    const onSearchTextChanged = useCallback((e) => {\n        setSearchText(e.target.value);\n    }, [setSearchText]);\n\n    const onClickOption = useCallback((opt) => {\n        setOption(opt);\n    }, [setOption]);\n\n    /**\n            <input\n              value={searchText}\n              className=\"browser-search\"\n              type=\"text\"\n              placeholder='Search'\n              onChange={onSearchTextChanged}/>\n            <div className=\"options\">\n              <Option option={PRESETS} selectedOption={option} onClick={(o) => onClickOption(o)} name=\"Presets\"/>\n              <Option option={SEQUENCES} selectedOption={option} onClick={(o) => onClickOption(o)} name=\"Sequences\"/>\n            </div>\n    */ \n    return (\n        <div\n          style={style}\n          className=\"side-browser-container\">\n         <div className=\"sidebar-header\">\n            <div\n              onClick={() => toggleCollapse()}\n              className=\"collapse-toggle\">\n              {collapsed ? \n                  <div className=\"arrow-down\"/> :\n                  <div className=\"arrow-right\"/>}\n            </div>\n          </div>\n          <ConditionedComponent condition={!collapsed}>\n           <ConditionedComponent condition={option === PRESETS}>\n              <div\n                className=\"preset-folders\">\n                <FoldersComponent\n                  sequencerEngine={props.sequencerEngine}\n                  onTestItem={(preset) => []}\n                  onChooseFolder={(folder) => []}\n                  onChooseItem={(item) => onChooseItem(item)}\n                  showItems={true}/>\n              </div>\n            </ConditionedComponent>\n            <ConditionedComponent condition={option === SEQUENCES}>\n              <div\n                className=\"preset-folders\">\n                <XanaduFolders\n                  sequencerEngine={props.sequencerEngine}\n                  root={ethereum.xanadu.linkFolder}\n                  />\n              </div>\n            </ConditionedComponent>\n          </ConditionedComponent>\n        </div>\n    );\n}\n\nfunction Option(props) {\n    let className = 'option';\n    if (props.option === props.selectedOption) {\n        className += ' selected';\n    }\n\n    return (\n        <div\n          onClick={() => props.onClick(props.option)}\n          className={className}>{props.name}</div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        mode: state.arrangement.browserMode\n    };\n};\n \nexport default connect(mapStateToProps, null)(SideBrowserContainer);\n","import {\n    NO_SUB_SEQUENCE,\n} from 'session/constants.js';\nimport {\n    setSelectedArrangementEvents,\n    setArrangementPatternSelected\n} from 'actions/index.js';\nimport {NUMBER_TO_RESOLUTION} from 'constants/resolution-keys.js';\nimport {\n    editResolution,\n    editPattern\n} from 'session/operations/actions.js';\n\nexport function onKeyDown(event, sequencerEngine) {\n    let key = event.key;\n    if (key > 0 && key <= 9) {\n        onNumberDown(parseInt(key), sequencerEngine);\n    }\n}\n\nfunction onNumberDown(number, sequencerEngine) {\n    if (sequencerEngine.rolling) {\n        return;\n    }\n\n    if (isRollsRowSelected(sequencerEngine)) {\n        let selectedRollEvents = getSelectedEvents(sequencerEngine, NO_SUB_SEQUENCE.id);\n        for (let i in selectedRollEvents) {\n            let event = selectedRollEvents[i];\n            sequencerEngine.mix.dispatch(editResolution(event, NUMBER_TO_RESOLUTION[number]));\n        }\n        return;\n    } \n\n    for (let i in sequencerEngine.subSequences) {\n        let subSequence = sequencerEngine.subSequences[i];\n        let selectedPatternSwitchEvents =\n            getSelectedEvents(sequencerEngine, subSequence.id);\n\n        for (let i in selectedPatternSwitchEvents) {\n            let event = selectedPatternSwitchEvents[i];\n            sequencerEngine.mix.dispatch(editPattern(event, number - 1));\n            if (state(sequencerEngine).arrangement.patternSelected) {\n                sequencerEngine.dispatch(setArrangementPatternSelected(event));\n            }\n            \n        }\n        sequencerEngine.dispatch(setSelectedArrangementEvents(\n            {\n                ... selectedPatternSwitchEvents\n            }));\n    }\n}\n\nfunction getSelectedEvents(sequencerEngine, subSequenceId) {\n    return sequencerEngine.state.arrangement.selectedEvents || [];\n}\n\nexport function getRowsSelected(sequencerEngine) {\n    return sequencerEngine.state.arrangement.selectedRows;\n}\n\nfunction isRollsRowSelected(sequencerEngine) {\n    return getRowsSelected(sequencerEngine).indexOf(NO_SUB_SEQUENCE.id) > -1;\n}\n\nconst state = (engine) => engine.state;\n","export function quantizeStep(step, resolution=16, shouldRound=true) {\n    if (shouldRound) {\n        return resolution * Math.round(step / resolution);\n    } else {\n        return resolution * Math.floor(step / resolution);\n    }\n}\n","import React, { useState, useCallback } from 'react';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport { connect } from \"react-redux\";\nimport { setArrangementSelection } from \"actions/index.js\";\nimport { setArrangementRowSelections } from \"actions/index.js\";\nimport { setArrangementLoopSelected } from \"actions/index.js\";\nimport {NO_SUB_SEQUENCE} from 'session/constants.js';\n\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nfunction SelectionComponent(props) {\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragOffset, setDragOffset] = useState(undefined);\n    const [directionResizing, setDirectionResizing] = useState(undefined);\n    const [didDrag, setDidDrag] = useState(false);\n\n    const onMouseDown = useCallback((e) => {\n        e.stopPropagation();\n        setIsDragging(true);\n        setDidDrag(false);\n        let step = getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale);\n        let offset = step - props.selectionStart;\n        setDragOffset(offset);\n    }, [\n        setIsDragging,\n        setDidDrag,\n        isDragging,\n        props.selectionStart,\n        props.resolution,\n        setDragOffset,\n        props.xScale]);\n\n    const onMiddleMouseUp = useCallback((e) => {\n        if (!didDrag) {\n            props.setArrangementLoopSelected(!props.loopSelected);\n            if (!props.loopSelected) {\n                selectAll(props.selectionStart, props.selectionEnd);\n            } else {\n                unselectAll();\n            }\n        }\n    }, [didDrag, props.loopSelected]);\n\n    const getMouseX = useCallback((e) => {\n        if (props.arrangementContainer) {\n            return props.arrangementContainer.scrollLeft + e.pageX;\n        } else {\n            return e.pageX;\n        }\n    }, [props.arrangementContainer]);\n\n    const onMouseUp = useCallback((e) => {\n        setIsDragging(false);\n        setDragOffset(undefined);\n        setDirectionResizing(undefined);\n        setDidDrag(false);\n    }, [setIsDragging, setDragOffset, setDidDrag]);\n\n    const onMouseMove = useCallback((e) => {\n        if (isDragging) {\n            let newStart = getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale) - dragOffset;\n            if (newStart < 0) {\n                return;\n            }\n            let selectionDur = props.selectionEnd - props.selectionStart;\n            let newEnd = newStart + selectionDur;\n            let quantizedStart = quantizeStep(newStart);\n            let quantizedEnd = quantizeStep(newEnd);\n            props.setArrangementSelection(\n                quantizedStart, \n                quantizedEnd); \n            if (props.loopSelected) {\n                selectAll(quantizedStart, quantizedEnd);\n            }\n            setDidDrag(true);\n        } else if (directionResizing === LEFT) {\n            let newStart = quantizeStep(\n                getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale));\n            if (newStart >= props.selectionEnd) {\n                return;\n            }\n            props.setArrangementSelection(\n                newStart,\n                props.selectionEnd);\n            if (props.loopSelected) {\n                selectAll(newStart, props.selectionEnd);\n            }\n            setDidDrag(true);\n        } else if (directionResizing === RIGHT) {\n            let newEnd = quantizeStep(\n                getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale));\n            if (newEnd <= props.selectionStart) {\n                return;\n            }\n            props.setArrangementSelection(\n                props.selectionStart,\n                newEnd);\n            setDidDrag(true);\n            if (props.loopSelected) {\n                selectAll(props.selectionStart, newEnd);\n            }\n        } \n    }, [props.selectionStart, setDidDrag,\n        props.selectionEnd, isDragging,\n        props.loopSelected, props.xScale,\n        props.resolution, dragOffset, directionResizing]);\n\n    const unselectAll = () => {\n        props.setArrangementRowSelections({});\n    };\n\n    const selectAll = (start, end) => {\n        let selection = {start, end};\n        let rowSelections = {};\n        rowSelections[NO_SUB_SEQUENCE.id] = selection;\n        for (let i in props.sequencerEngine.subSequences) {\n            rowSelections[props.sequencerEngine.subSequences[i].id] = selection;\n        }\n\n        props.setArrangementRowSelections(rowSelections);\n    };\n\n    const onEdgeDown = useCallback((e, direction) => {\n        setDirectionResizing(direction);\n    }, [setDirectionResizing]);\n        \n\n    let className = props.loopSelected ? 'selection looping' : 'selection';\n    return (\n        <div\n            onMouseUp={onMouseUp}\n            onMouseMove={onMouseMove}\n            className=\"selection-container\">\n          <div>\n            <div style={getSelectionStyle(props)} className={className}>\n              <div\n                onMouseDown={(e) => onEdgeDown(e, LEFT)}\n                className=\"triangle-right\"/>\n                <div\n                  onMouseDown={onMouseDown}\n                  onMouseUp={onMiddleMouseUp}\n                  className=\"middle\"/>\n                <div\n                  onMouseDown={(e) => onEdgeDown(e, RIGHT)}\n                  className=\"triangle-left\"/>\n                </div>\n              </div>\n            </div>\n    );\n}\n\nfunction getAbsoluteSelection(props) {\n    let style = {\n        left: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n\n    let className = \"absolute-selection\";\n    if (props.loopSelected) {\n        className += ' looping'\n    }\n    return (\n        <div className={className} style={style}>\n        </div>\n    );\n}\n\nfunction getSelectionStyle(props) {\n    return {\n        marginLeft: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n}\n\nconst mapStateToProps = state => {\n    let selection = state.arrangement.selection;\n    return {\n        selectionStart: selection !== undefined ? selection.start : undefined,\n        selectionEnd: selection !== undefined ? selection.end : undefined,\n        loopSelected: state.arrangement.loopSelected,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n\n const mapDispatchToProps = dispatch => {\n    return {\n        setArrangementRowSelections: (selections) => dispatch(setArrangementRowSelections(selections)),\n        setArrangementSelection: (start, end) => dispatch(setArrangementSelection(start, end)),\n        setArrangementLoopSelected: (selected) => dispatch(setArrangementLoopSelected(selected))\n    };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionComponent);\n","import { createSelector } from 'reselect'\n\nconst getSubSequenceId = (state, props) => props.subSequence.id;\nconst getSelectedRows = (state, props) => state.arrangement.selectedRows;\nexport const getIsSelected = createSelector(\n    [getSubSequenceId, getSelectedRows],\n    (subSequenceId, selectedRows) => selectedRows.indexOf(subSequenceId) > -1\n    );\n\n","import React, { useEffect, Component, useCallback} from 'react';\nimport { getIsSelected} from './selectors.js';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nfunction MouseHelper(props) {\n    let style = {\n        left: getBarWidth(\n            props.cursorStep, props.resolution, props.xScale),\n            \n    };\n    if (props.offset) {\n        style.left += props.offset;\n    }\n\n    if (!props.isSelected) {\n        style['display'] =  'none';\n    }\n\n    useEffect(() => {\n        if (!props.sequencerEngine) {\n            return;\n        }\n        if (!props.sequencerEngine.playing &&\n            props.cursorStep !== undefined) {\n            // then we seek to that\n            props.sequencerEngine.seekToTrackStep(\n                props.cursorStep);\n        }\n    }, [props.sequencerEngine, props.cursorStep]);\n\n    return (\n        <div className=\"flashit mouse-helper\" style={style}></div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        mouseX: state.arrangement.mouseX,\n        cursorStep: state.arrangement.cursorStep,\n        resolution: DEFAULT_RESOLUTION,\n        isSelected: props.isSelected || getIsSelected(state, props),\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, null)(MouseHelper);\n","import React, {useEffect, useCallback, useState, useRef} from 'react';\nimport {sleep} from 'utils/sleep.js';\n\nexport const useSticky = ({\n    showBottom,\n    bottomHeight,\n    showTracks,\n    isBottom,\n    scrollContainer,\n    stickyContainer}) => {\n    const [sticky, setSticky] = useState({top: 0});\n    let counter = useRef(0);\n\n    useEffect(() => {\n        onScroll();\n    }, [showBottom, scrollContainer, stickyContainer, showTracks, bottomHeight]);\n\n    useEffect(() => {\n        if (!scrollContainer) {\n            return undefined;\n        }\n        scrollContainer.current.addEventListener(\n            'mousewheel', onWheel);\n        scrollContainer.current.addEventListener(\n            'scroll', onScroll);\n\n        return () => {\n            if (scrollContainer.current) {\n                scrollContainer.current.removeEventListener(\n                    'scroll', onScroll);\n                scrollContainer.current.removeEventListener(\n                    'mousewheel', onWheel);\n            }\n        }\n    }, [stickyContainer, scrollContainer, setSticky, isBottom]);\n\n    const onWheel = useCallback((e) => {\n        if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {\n            return true;\n        }\n        e.preventDefault();\n        scrollContainer.current.scrollTo(0, scrollContainer.current.scrollTop + e.deltaY);\n        return false;\n    }, []);\n\n    const onScroll = useCallback(async (e) => {\n        if ((!scrollContainer || !scrollContainer.current) ||\n            (!stickyContainer || !stickyContainer.current)) {\n            return;\n        }\n\n        let scrollTop = scrollContainer.current.scrollTop;\n        let scrollHeight = scrollContainer.current.offsetHeight;\n        let scrollBottom = scrollTop + scrollHeight;\n        let height = stickyContainer.current.offsetHeight;\n        let top = isBottom ? scrollBottom - height - 10 : scrollTop;\n        stickyContainer.current.style[\"top\"] = top + \"px\";\n    }, [setSticky, stickyContainer, scrollContainer, isBottom]);\n\n    return {sticky};\n};\n","import {getBarWidth} from './getBarWidth.js';\n\nconst SCROLL_BUFFER_LENGTH = 140;\nconst MIN_X_SCALE = 0.1;\n\nexport const onScale = ({\n    xScale,\n    setArrangementXScale,\n    arrangementContainer,\n    x,\n    cursorStep,\n    resolution\n}) => {\n    if (xScale < MIN_X_SCALE || xScale > 5) {\n        return;\n    }\n    \n    // first scroll then do the thang\n    let width = getBarWidth(cursorStep, resolution, xScale);\n    let scrollLeft = width - x + SCROLL_BUFFER_LENGTH;\n    setArrangementXScale(xScale);\n    arrangementContainer.current.scrollTo(scrollLeft, 0);\n};\n","export const getHeight = (sequencerEngine, showTracks={}) => {\n    let height = 70 + 70 * ( 1 + sequencerEngine.subSequences.length);\n\n    for (let id in showTracks) {\n        if (showTracks[id]) {\n            let subSequence = sequencerEngine.getSubSequence(id); \n            height += 85 * subSequence.tracks.length;\n        }\n    }\n    return height;\n};\n","import React, {memo, PureComponent, useEffect, useCallback, useState, useRef, Component } from 'react';\nimport MouseHelper from './MouseHelper.js';\nimport {useSticky} from './useSticky.js';\nimport {useScroll} from './useScroll.js';\nimport {onScale} from './onScale.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getHeight} from './getHeight.js';\nimport {\n    setArrangementXScale,\n    setArrangementCursorStep,\n    setArrangementMouseX\n} from \"actions/index.js\";\nimport {getTotalLength} from './getTotalLength.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {INFO_COLUMN_WIDTH} from './constants.js';\n\nconst MIN_X_SCALE = 0.1;\nconst SCROLL_BUFFER_LENGTH = 140;\n\nconst TimeRowComponent = (props) => {\n    const ref = useRef(undefined);\n\n    const {sticky} = useSticky({\n        showTracks: props.showTracks,\n        stickyContainer: ref,\n        scrollContainer: props.yScrollContainer,\n        isBottom: props.isBottom,\n        bottomHeight: props.bottomHeight,\n        showBottom: props.showBottom\n    });\n\n    const mouseDown = useRef(undefined);\n    const dragStartY = useRef(undefined);\n    const dragY = useRef(undefined);\n    const dragX = useRef(undefined);\n    const timeout = useRef(undefined);\n\n    const onMouseDown = useCallback((e) =>{\n        mouseDown.current = true;\n        dragStartY.current = e.pageY;\n        dragY.current = e.pageY;\n        dragX.current = e.pageX;\n\n        timeout.current = setInterval(() => {\n            let diff = dragY.current - dragStartY.current;\n            let _xScale = props.sequencerEngine.state.arrangement.xScale ;\n            let xScale = _xScale + diff / 50.0;\n            xScale = Math.max(MIN_X_SCALE, xScale);\n            xScale = Math.min(5, xScale);\n\n            if (xScale === _xScale) {\n                return;\n            }\n\n            if (getBarWidth(16*props.totalLength, props.resolution, xScale) < window.innerWidth - 140) {\n                // Dont let user zoom out beyond the width of the window\n                return;\n            }\n\n            onScale({\n                xScale,\n                setArrangementXScale: props.setArrangementXScale,\n                cursorStep: cursorStep(),\n                resolution: props.resolution,\n                x: dragX.current,\n                arrangementContainer: props.arrangementContainer\n            });\n        }, 100);\n    }, [props.resolution, props.totalLength]);\n\n    const onMouseUp = (e) => {\n        clearInterval(timeout.current);\n        mouseDown.current = false;\n        dragStartY.current = undefined;\n    }\n\n    const onMouseMove = (e) => {\n        if (!mouseDown.current) {\n            return;\n        }\n\n        dragY.current = e.pageY;\n    };\n\n    const cursorStep = () => {\n        return props.sequencerEngine.state.arrangement.cursorStep;\n    };\n\n    \n    let className = \"time-row\";\n    if (props.constantHeight) {\n        className += ' bottom';\n    }\n\n    let style = {};\n\n    return (\n        <div\n          ref={ref}\n          style={style}\n          className={className}>\n          <div className=\"time-top-background\"></div>\n          <div className=\"time-full-background\"></div>\n          <div\n            onMouseLeave={onMouseUp}\n            onMouseMove={onMouseMove}\n            onMouseDown={onMouseDown}\n            onMouseUp={onMouseUp}\n            className=\"inner-time-row\">\n            <MouseHelper\n              sequencerEngine={props.sequencerEngine}\n              offset={-5}\n              isSelected={true}/>\n            <Bars  {...props}/>\n          </div>\n          {props.children}\n        </div>\n    );\n}\n\nconst Bars = memo((props) => {\n    const getEvents = useCallback(() => {\n        let numBars = props.totalLength;\n        let arr = []; \n        for (let i=0; i < numBars; i++) {\n            arr.push({\n                step: i * 16,\n                duration: 32\n            });\n        }\n        return arr;\n    }, [props.totalLength]);\n\n    const {visibleView} = useScroll({\n        ref: props.arrangementContainer,\n        xScale: props.xScale,\n        resolution: props.resolution,\n        events: getEvents(),\n        sequencerEngine: props.sequencerEngine,\n        eventsLength: props.totalLength,\n    });\n\n    let bars = getEvents().slice(\n        visibleView.start, visibleView.end);\n\n    let barWidth = getBarWidth(16, props.resolution, props.xScale);\n\n    return [(\n        <div className=\"bar-filler\" style={{minWidth: visibleView.preWidth}}/>),\n            bars.map(\n                ({step, value}, i) =>\n                    <BarComponent\n                      xScale={props.xScale}\n                      height={props.height}\n                      key={step / 16.0}\n                      barWidth={barWidth}\n                      selectionStart={props.selectionStart}\n                      selectionEnd={props.selectionEnd}\n                      constantHeight={props.constantHeight}\n                      sequencerEngine={props.sequencerEngine}\n                      resolution={props.resolution}\n                      number={step / 16.0}/>)\n           ];\n});\n\nclass BarComponent extends PureComponent {\n    render() {\n        let beat = this.props.number*(8 / this.props.resolution);\n        let style = {\n            minWidth: this.props.barWidth,\n        };\n        let beatStyle = {};\n        if (this.props.xScale <= 0.8) {\n            beatStyle['opacity'] = 0.5;\n        }\n\n        beatStyle['height'] = this.props.height;\n        let firstStyle = {\n            height: beatStyle.height\n        };\n\n        if (this.props.xScale <= 0.5 && this.props.number % 4 !== 0) {\n            firstStyle['opacity'] = 0.4;\n        }\n\n        let beatClass = 'beat';\n        if (this.props.xScale <= 0.5) {\n            beatClass += ' hidden';\n        }\n        \n        return (\n            <div\n              style={style}\n              className=\"bar\">\n              <ConditionedComponent condition={this.props.xScale > 0.6 || beat % 4 === 0}>\n                <span className=\"beat-number\">\n                  {1 + beat}\n                </span>\n              </ConditionedComponent>\n              <div style={firstStyle} className=\"first-beat\">\n              </div>\n              <div style={beatStyle} className={beatClass}>\n              </div>\n              <div style={beatStyle} className={beatClass}></div>\n              <div style={beatStyle} className={beatClass}></div>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setArrangementXScale: (xScale) => dispatch(\n            setArrangementXScale(xScale)),\n        setArrangementMouseX: (x) => dispatch(\n            setArrangementMouseX(x)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let sub = props.sequencerEngine.currentSubSequence;\n    return {\n        numSubSequences: props.sequencerEngine.subSequences.length,\n        xScale: state.arrangement.xScale,\n        totalLength: state.arrangement.totalLength ,\n        showTracks: state.arrangement.showTracks,\n        bottomHeight: state.arrangement.bottomHeight,\n        showBottom: state.arrangement.patternSelected && state.arrangement.showTracks[sub.id]\n    };\n\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(TimeRowComponent);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { setArrangementXScale } from \"actions/index.js\";\nimport {getBarWidth} from './getBarWidth.js';\n\nclass TimeBackgroundComponent extends Component {\n    get numberOfBars() {\n        return 100;\n    }\n\n    render() {\n        let bars = new Array(this.numberOfBars); \n        bars.fill(0);\n        let barWidth = getBarWidth(1, this.props.resolution, this.props.xScale);\n\n        return (\n            <div\n             className=\"time-background\">\n              {bars.map(\n                  (bar, i) =>\n                      <BarComponent\n                        barWidth={barWidth}\n                        selectionStart={this.props.selectionStart}\n                        selectionEnd={this.props.selectionEnd}\n                        resolution={this.props.resolution} number={i}/>)}\n            </div>\n        );\n    }\n}\n\nclass BarComponent extends Component {\n    render() {\n        let beat = this.props.number*(16 / this.props.resolution);\n        let style = {\n            width: this.props.barWidth,\n        };\n        return (\n            <div\n              style={style}\n              className=\"bar\">\n              <div className=\"beat\">\n              </div>\n              <div className=\"beat\"></div>\n              <div className=\"beat\"></div>\n              <div className=\"last-beat\"></div>\n            </div>\n        );\n    }\n\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n    let subSequenceId = props.subSequence.id;\n    return {\n        setArrangementXScale: (xScale) => dispatch(\n            setArrangementXScale(xScale)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    return {\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(TimeBackgroundComponent);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nconst SCROLL_BUFFER_LENGTH = 100;\nconst INFO_WIDTH = 0;\n\nclass ClockTickComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.unlockedScroll = false;\n\n        this.unlockScroll = this.unlockScroll.bind(this);\n    }\n\n    unlockScroll() {\n        this.unlockedScroll = true;\n    }\n\n    componentDidMount() {\n        window.addEventListener('mousewheel', this.unlockScroll);\n        this.arrangementContainer = document.getElementsByClassName('arrangement-container')[0];\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('mousewheel', this.unlockScroll);\n    }\n\n    getX(props=this.props) {\n        let cursorStep = props.sequencerEngine.state.arrangement.cursorStep;\n        let step = props.isPlaying ? props.step : cursorStep;\n        let width = getBarWidth(step, props.resolution, props.xScale);\n        return width;\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.isPlaying !== this.props.isPlaying &&\n            prevProps.isPlaying) {\n            this.unlockedScroll=false;\n        }\n        let scroll = this.arrangementContainer ? this.arrangementContainer.scrollLeft : 0;\n\n        if (prevProps.step !== this.props.step) { // || prevProps.xScale !== this.props.xScale) {\n            let x = this.getX();\n            if (!this.props.isPlaying && (x > window.innerWidth - 400 || x < scroll)) {\n                // this.arrangementContainer.scrollLeft = x - this.props.mouseDownX + 100;\n            } else if (x > window.innerWidth - 400 ||\n                      x < scroll ||\n                      !this.props.resolution.equals(this.props.resolution)) {\n                if (!this.unlockedScroll) {\n                    // todo: check for redux variable forcing scroll\n                    return;\n                    let scrollLeft = x - SCROLL_BUFFER_LENGTH;\n                    this.arrangementContainer.scrollLeft = scrollLeft;\n                    this.unlockedScroll = false;\n                }\n            }\n        }\n        return true;\n    }\n\n    render() {\n        let style =  {\n            left: this.getX()\n        };\n\n        if (!this.props.isPlaying) {\n            style.display = 'none';\n        }\n        return (\n            <div\n              style={style}\n              className=\"clock-ticker\">\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.getSequenceId();\n    let isPlaying = state.sequencer.isPlaying[id] || 0;\n    return {\n        step: isPlaying ? props.sequencerEngine.trackStep : 0,\n        cursorStep: state.arrangement.cursorStep,\n        mouseDownX: state.arrangement.mouseDownX,\n        resolution: DEFAULT_RESOLUTION,\n        isRecordingMix: state.mix.isRecordingMix,\n        isPlaying: isPlaying,\n        xScale: state.arrangement.xScale\n    };\n};\n \nexport default connect(mapStateToProps, null)(ClockTickComponent);\n\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nfunction RowSelection(props) {\n    let style = {\n        left: getBarWidth(props.start, props.resolution, props.xScale),\n        width: getBarWidth(props.end - props.start, props.resolution, props.xScale),\n    };\n    return (\n        <div\n          style={style}\n          className=\"row-selection\">\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let selection = state.arrangement.rowSelections[props.id];\n    return {\n        start: selection === undefined ? 0 : selection.start,\n        end: selection === undefined ? 0 : selection.end,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, null)(RowSelection);\n","import React, {useEffect, useRef, useState, useCallback} from 'react';\nimport {getStepFromPosition} from './getStepFromPosition.js';\n\nexport const useRowSelection = ({\n    scrollContainer,\n    id,\n    sequencerEngine,\n    xScale,\n    resolution,\n    setArrangementRowSelections\n}) => {\n    const resizingSelection = useRef(false);\n\n    const scrollLeft = () => scrollContainer.current.scrollLeft;\n\n    const onRowSelectionDown = useCallback((e) => {\n        let step = getStepFromPosition(e.pageX + scrollLeft(), resolution, undefined, xScale);\n        resizingSelection.current = true;\n        let rowSelections = {};\n        rowSelections[id] = {\n            start: step,\n            end: step\n        };\n        setArrangementRowSelections(rowSelections);\n \n    }, [resolution, xScale, id]);\n\n    const onRowSelectionUp = useCallback((e) => {\n        resizingSelection.current = false;\n    }, []);\n\n    const getState = () => sequencerEngine.state;\n    \n    const onRowSelectionMove = useCallback((e) => {\n        let step = getStepFromPosition(e.pageX + scrollLeft(), resolution, undefined, xScale);\n        let _resolution = 32 / resolution.resolution;\n        let remainder = step % _resolution;\n        step -= remainder;\n \n        if (resizingSelection.current) {\n            let selection = getState().arrangement.rowSelections[id];\n            if (selection !== undefined) {\n                selection.end = step;\n                let selections = {};\n                selections[id] = selection;\n                setArrangementRowSelections(selections);\n            }\n        }\n    }, [xScale, id, resolution]);\n\n    return {\n        onRowSelectionMove,\n        onRowSelectionUp,\n        onRowSelectionDown\n    }\n};\n","import React, { useRef, memo, useEffect, useCallback, useState} from 'react';\nimport {getDuration} from '../getDuration.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementCursorStep,\n    setArrangementPatternSelected} from 'actions/index.js';\nimport {getVisualization} from \"components/arrangement/getVisualization.js\";\n\nimport Step from 'components/track/Step.js';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {getBarWidth} from '../getBarWidth.js';\n\nconst colors = new Colors();\nconst DOUBLE_CLICK = 250;\n\nconst TrackPattern = memo((props) => { \n    let lastClick = useRef(0);\n    let length = props.pattern.length(props.resolution);\n    let style = {\n        backgroundColor: colors.getColorForTrack(props.track),\n    };\n    \n    let width = getBarWidth(\n        props.duration || 64,\n        props.resolution,\n        props.xScale);\n\n    let fullStyle = {\n        width\n    };\n\n    let className = \"track-pattern\";\n    style.width -= 1;\n\n    if (props.event.duration === 0) {\n        return '';\n    }\n\n    const onClickHeader = useCallback((e) => {\n        e.stopPropagation();\n        props.track.sequencerEngine.selectTrack(props.track.trackNumber);\n        let time = new Date().getTime();\n        if (time - lastClick.current <= DOUBLE_CLICK) {\n            if (props.isSelected) {\n                props.setPatternSelected(undefined);\n            } else {\n                props.setBottomMode(PIANO_ROLL);\n                props.setPatternSelected(props.event);\n            }\n        }\n        lastClick.current = time;\n    }, [props.isSelected, props.event]);\n\n    if (props.isSelected) {\n        className += \" selected\";\n        fullStyle.backgroundColor = colors.brighten(style.backgroundColor, 0.1);\n        fullStyle.borderColor = style.backgroundColor;\n        fullStyle.backgroundColor = colors.brighten(style.backgroundColor, 1.2);\n    }\n\n    const onHeaderMouseDown = useCallback((e) => {\n        e.stopPropagation();\n        props.setCursorStep(undefined);\n    }, []);\n\n    let duration = \n              props.event.duration ||\n        64;\n\n    return (\n        <div\n          style={fullStyle}\n          className={className}>\n          <div\n            onMouseDown={onHeaderMouseDown}\n            onClick={onClickHeader}\n            style={style} className=\"track-pattern-header\">\n            {props.isFrozen ? \"Frozen\" : \"\"}\n          </div>\n          {getVisualization(\n              props.event,\n              {tracks: [props.track]},\n              duration,\n              getBarWidth(1, props.resolution, props.xScale), true)}\n        </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    let isSelected = state.arrangement.patternSelected === props.event &&\n        state.mix.selectedTrack === props.track.trackNumber;\n    return {\n        isSelected,\n        steps: isSelected ? state.tracks.trackSteps[props.track.trackNumber] : undefined,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x)),\n      setCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n      setBottomMode: (x) => dispatch(setArrangementBottomMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackPattern);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {getBarWidth} from '../getBarWidth.js';\nimport {useScroll} from '../useScroll.js';\nimport TrackPattern from './TrackPattern.js';\nimport {connect} from 'react-redux';\nimport {\n    PATTERN_SWITCH,\n    SUB_SEQUENCE_VOLUME_CHANGE,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {DEFAULT_RESOLUTION} from '../constants.js';\n\nconst TrackPatterns = ({\n    wrapperRef,\n    events=[],\n    track,\n    subSequence,\n    xScale,\n    resolution,\n    selectedEvents,\n    isFrozen\n}) => { \n    if (!selectedEvents ||\n        Object.keys(selectedEvents).length === 0 ||\n        selectedEvents[Object.keys(selectedEvents)[0]].patternNumber === undefined) {\n        return [];\n    }\n\n    let event = selectedEvents[Object.keys(selectedEvents)[0]];\n    if (!events.includes(event)) {\n        return [];\n    }\n    let preWidth = getBarWidth(event.step, resolution, xScale);\n\n    return (\n        <div className=\"track-patterns\">\n          <div className=\"pattern-filler\" style={{width: preWidth}}/>\n          {[event].map(\n              event =>\n                  <TrackPattern\n                    isFrozen={isFrozen}\n                    key={event.id}\n                    pattern={track.patterns[event.value % track.patterns.length]}\n                    xScale={xScale}\n                    resolution={resolution}\n                    duration={event.duration}\n                    track={track}\n                    event={event}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[props.subSequence.id];\n    let patternSwitchEvents = mixEvents !== undefined ?\n        mixEvents[PATTERN_SWITCH] : undefined;\n    return {\n        events: patternSwitchEvents,\n        eventsLength: patternSwitchEvents === undefined ? 0 : patternSwitchEvents.length,\n        patternDragging: state.sequencer.patternDragging,\n        resolution: DEFAULT_RESOLUTION,\n        automationTypeToShow: state.arrangement.automationTypeToShow[props.subSequence.id],\n        xScale: state.arrangement.xScale,\n        selectedEvents: state.arrangement.selectedEvents,\n        isFrozen: props.track.isFrozen\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackPatterns);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {PATTERN_SWITCH} from 'session/constants.js';\nimport {\n    selectedParameter,\n    getSelectedAutomations} from '../copy.js';\nimport RowSelection from '../RowSelection.js';\nimport {DEFAULT_RESOLUTION} from '../constants.js';\nimport {\n    setArrangementCursorStep,\n    setSelectedArrangementEvents,\n    setArrangementPatternSelected,\n    setArrangementRowSelections,\n    setAutomationPointsSelected,\n} from 'actions/index.js';\nimport {useYVisible} from './useYVisible.js';\nimport {useRowSelection} from '../useRowSelection.js';\nimport MouseHelper from '../MouseHelper.js';\nimport TrackPatterns from './TrackPatterns.js';\nimport ParameterAutomation from 'components/automation/ParameterAutomation.js';\nimport {DEFAULT_WIDTH} from '../constants.js';\nimport {WIDTH} from 'components/pianoroll/constants.js';\nimport {connect} from 'react-redux';\n\nconst DOUBLE_CLICK_TIME = 200;\n\nconst TrackTimeLine = ({\n    setPatternSelected,\n    width,\n    xScale,\n    style,\n    track,\n    wrapperRef,\n    isSelectedTrack,\n    subSequence,\n    yScrollContainer,\n    resolution,\n    setArrangementRowSelections,\n    setAutomationPointsSelected,\n    setSelectedEvents,\n    setCursorStep,\n    bottomMode,\n    patternSelected\n}) => { \n    const ref = useRef(undefined);\n    const lastClick = useRef(0);\n\n    const onClick = useCallback(() => {\n        track.sequencerEngine.selectTrack(track.trackNumber);\n        let now = new Date().getTime();\n        if (now - lastClick.current <= DOUBLE_CLICK_TIME) {\n            // show the pattern\n            let cursorStep = track.sequencerEngine.state.arrangement.cursorStep;\n            let event = track.subSequence.mix.getEvent(PATTERN_SWITCH, cursorStep);\n            let events = {};\n            events[event.id] = event;\n            setSelectedEvents(events);\n            setPatternSelected(event);\n            setCursorStep(event.step);\n        }\n        lastClick.current = now;\n    }, [track]);\n\n    const {onRowSelectionUp, onRowSelectionDown, onRowSelectionMove} =\n          useRowSelection({\n              id: track.id,\n              sequencerEngine: track.sequencerEngine,\n              xScale: xScale,\n              resolution: resolution,\n              setArrangementRowSelections: setArrangementRowSelections,\n              scrollContainer: wrapperRef\n          });\n\n    useYVisible({\n        verticalScroll: yScrollContainer,\n        ref,\n        isSelected: isSelectedTrack,\n        patternSelected,\n        bottomMode\n    });\n\n    const onMouseUp = useCallback((e) => {\n        onRowSelectionUp();\n\n        let engine = track.sequencerEngine;\n        let state = engine.state;\n        // find selected parameters if necessary\n        let rowSelection = state.arrangement.rowSelections[track.id];\n        let parameter = selectedParameter(engine, track.id);\n        if (parameter && rowSelection) {\n            let automations = getSelectedAutomations(\n                engine,\n                rowSelection,\n                track.id);\n\n            setAutomationPointsSelected(\n                track.id,\n                automations);\n        }\n        \n    }, [track]);\n\n    return (\n        <div\n          ref={ref}\n          onMouseDown={onRowSelectionDown}\n          onMouseMove={onRowSelectionMove}\n          onMouseUp={onMouseUp }\n          onClick={onClick}\n          style={style} className={isSelectedTrack ? \"selected track-time-line\" : \"track-time-line\"}>\n          <RowSelection id={track.id}/>\n          {isSelectedTrack ?\n           <MouseHelper subSequence={track.subSequence} isSelected={true}/> : ''}\n           <TrackPatterns\n             wrapperRef={wrapperRef}\n             track={track} subSequence={subSequence}/>\n          <ParameterAutomation\n            xScale={xScale / (5.76 / 2.0)} \n            wrapperRef={wrapperRef}\n            left={140}\n            track={track}\n            isMix={true}\n            height={62}\n            width={width}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let isSelectedTrack = state.mix.selectedTrack === props.track.trackNumber; \n    let currentSubSequence = props.track.sequencerEngine.currentSubSequence;\n    return {\n        xScale: state.arrangement.xScale,\n        isSelectedTrack: isSelectedTrack && props.track.subSequence === currentSubSequence,\n        resolution: DEFAULT_RESOLUTION,\n        patternSelected: state.arrangement.patternSelected,\n        bottomMode: state.arrangement.bottomMode\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setArrangementRowSelections: (selections) => dispatch(\n          setArrangementRowSelections(selections)),\n      setAutomationPointsSelected: (id, events) =>\n          dispatch(setAutomationPointsSelected(id, events)),\n      setPatternSelected: p => dispatch(setArrangementPatternSelected(p)),\n      setSelectedEvents: (events) => dispatch(\n          setSelectedArrangementEvents(events)),\n      setCursorStep: (x) => dispatch(\n          setArrangementCursorStep(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackTimeLine);\n","import {useEffect, useCallback} from 'react';\n\nexport const useYVisible = ({verticalScroll, ref, isSelected, patternSelected, bottomMode}) => {\n    useEffect(() => {\n        if (!isSelected ||\n            !verticalScroll ||\n            !ref ||\n            !verticalScroll.current ||\n            !ref.current) {\n            return;\n        }\n\n        // check if visible\n        let scrollTop = verticalScroll.current.scrollTop;\n        let scrollHeight = verticalScroll.current.offsetHeight;\n        let scrollBottom = scrollTop + scrollHeight;\n\n        let top = ref.current.offsetTop;\n        let bottom = top + ref.current.offsetHeight;\n\n        if (top < scrollTop || bottom > scrollBottom) {\n            // then we need to scroll\n            verticalScroll.current.scrollTo(0, top - 150);\n        }\n    }, [isSelected, ref, verticalScroll]);\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackTimeLine from './TrackTimeLine.js';\nimport {connect} from 'react-redux';\n\nconst SubSequenceTracks = ({\n    yScrollContainer,\n    wrapperRef,\n    subSequence,\n    style,\n    show,\n    width}) => { \n    if (!show) {\n        return '';\n    }\n    return (\n        <div className=\"sub-sequence-tracks\">\n        {subSequence.tracks.map(\n            track =>\n                <TrackTimeLine\n                  yScrollContainer={yScrollContainer}\n                  subSequence={subSequence}\n                  width={width}\n                  wrapperRef={wrapperRef}\n                  style={style}\n                  track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.arrangement.showTracks[props.subSequence.id],\n      numTracks: props.subSequence.tracks && props.subSequence.tracks.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubSequenceTracks);\n","export function getScrollLeft() {\n    let el = document.getElementsByClassName('arrangement-container')[0];\n    return el.scrollLeft;\n}\n","import React, {useCallback} from 'react';\nimport { connect } from \"react-redux\";\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {INFO_COLUMN_WIDTH} from './constants.js';\nimport {getScrollLeft} from './getScrollLeft.js';\nimport Step from 'components/track/Step.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport {ARRANGEMENT_TRACK_PATTERN} from 'session/constants.js';\nimport {\n    setArrangementCursorStep,\n    setArrangementMouseX,\n    setArrangementPatternDragging,\n    setArrangementPatternResizing,\n    setSelectedArrangementEvents,\n    setArrangementBottomMode}  from 'actions/index.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport Colors from 'components/Colors.js';\nimport {LEFT, RIGHT} from './constants.js';\n\nconst colors = new Colors();\n\nfunction PatternRoll(props) {\n    let length = props.pattern.length(props.resolution);\n\n    let steps = props.steps === undefined ? [] :\n        props.steps.map((s, i) => ({\n        stepNumber: i,\n        on: s,\n    }))\n        .filter(s => s.on);\n\n    const startDragging = useCallback((e) => {\n        e.stopPropagation();\n        let left = getBarWidth(props.startStep, props.resolution, props.xScale);\n        let offset = e.pageX + getScrollLeft() - left - INFO_COLUMN_WIDTH;\n        props.setPatternDragging(props.pattern, offset);\n\n        let selectedEvents = {};\n        selectedEvents[ARRANGEMENT_TRACK_PATTERN] = props.pattern;\n        props.setSelectedEvents(selectedEvents);\n        props.track.switchToPattern(props.patternNumber);\n        props.track.updateSteps(true);\n        if (props.sequencerEngine.state.arrangement.bottomMode !== PIANO_ROLL &&\n            props.isSelected) {\n            props.setArrangementMode(PIANO_ROLL);\n        }\n        props.setArrangementMouseX(undefined);\n        props.setArrangementCursorStep(undefined);\n    }, [\n        props.setArrangementMode,\n        props.startStep,\n        props.patternNumber,\n        props.setPatternDragging,\n        props.isSelected,\n        props.pattern,\n        props.xScale]);\n\n    const onMouseUp = useCallback((e) => {\n        e.stopPropagation();\n        props.setPatternDragging(undefined);\n        props.setPatternResizing(undefined);\n    }, [props.setPatternDragging], props.setPatternResizing);\n\n    const onEdgeMouseDown = useCallback((e, direction) => {\n        e.stopPropagation();\n        props.setPatternResizing(props.pattern, direction);\n    }, [props.setPatternResizing, props.pattern]);\n\n    // style\n    let style = {\n        backgroundColor: colors.getColorForHash(props.track.presetName || props.track.getName())\n    };\n    \n    style.width = getBarWidth(\n        props.pattern.length(),\n        props.resolution,\n        props.xScale);\n\n    let fullStyle = {\n        width: style.width,\n        left: getBarWidth(props.startStep, props.resolution, props.xScale)\n    };\n\n    let className = \"mini-piano-roll-wrapper\";\n    fullStyle['border'] = '1px solid ' + colors.brighten(style.backgroundColor, 0.3);\n    if (props.isSelected) {\n        fullStyle['border'] = '1px solid ' + style.backgroundColor;\n        fullStyle['backgroundColor'] = colors.brighten(style.backgroundColor, 0.3);\n        fullStyle['opacity'] = 0.7;\n    }\n\n    style.width -= 1;\n\n    return (\n        <div\n          onMouseUp={() => props.setPatternDragging(undefined)}\n          style={fullStyle}\n          className={className}>\n          <div\n            onMouseDown={startDragging}\n            onMouseUp={onMouseUp}\n            style={style} className=\"mini-piano-roll-header\">\n            <div\n              onMouseDown={(e) => onEdgeMouseDown(e, LEFT)}\n              className=\"left-edge\"></div>\n            <div className=\"middle\"></div>\n            <div\n              onMouseDown={(e) => onEdgeMouseDown(e, RIGHT)}\n              className=\"right-edge\"></div>\n          </div>\n          <div className=\"mini-piano-roll steps-map\">\n            {steps.map(\n                (x, i) =>\n                    <Step\n                          pattern={props.pattern}\n                          width={length * getBarWidth(2, props.resolution, props.xScale)}\n                          height={60}\n                          key={'mini-step-' + i + '-' + x.stepNumber}\n                          trackColor={\"#00ff14\"}\n                          length={length}\n                          track={props.track}\n                          stepNumber={x.stepNumber}\n                          resolution={props.resolution}\n                          stepData={x.step}/>\n            )}\n        \n        </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let steps = state.tracks.trackPatternSteps[props.track.subSequence.id] || {};\n\n    let selectedEvents = state.arrangement.selectedEvents;\n    let isSelected = selectedEvents === undefined ?\n            false :\n        selectedEvents[ARRANGEMENT_TRACK_PATTERN] === props.pattern;\n    let patternStartStep = state.arrangement.patternStartSteps[props.track.subSequence.id];\n    return {\n        isSelected: isSelected,\n        resolution: DEFAULT_RESOLUTION,\n        steps: steps[props.patternNumber],\n        xScale: state.arrangement.xScale,\n        startStep: patternStartStep ? patternStartStep[props.pattern.id] : 0,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedEvents: (events) => dispatch(\n            setSelectedArrangementEvents(events)),\n        setArrangementMode: (mode) => dispatch(setArrangementBottomMode(mode)),\n        setPatternDragging: (pattern, offset) => dispatch(setArrangementPatternDragging(pattern, offset)),\n        setPatternResizing: (pattern, resizing) => dispatch(setArrangementPatternResizing(pattern, resizing)),\n        setArrangementMouseX: (mouseX) => dispatch(setArrangementMouseX(mouseX)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PatternRoll);\n\n","import React, {useState, useCallback} from 'react';\nimport PatternRoll from './PatternRoll.js';\nimport { connect } from \"react-redux\";\nimport Step from 'components/track/Step.js';\nimport {getScrollLeft} from './getScrollLeft.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport {setArrangementBottomMode}  from 'actions/index.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport {dispatch} from 'session/operations/dispatch.js';\nimport {movePianoRollPattern} from 'session/operations/actions.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nfunction MiniPianoRoll(props) {\n    const onMouseMove = useCallback((e) => {\n        if (props.sequencerEngine.state.arrangement.patternDragging) {\n            e.stopPropagation();\n            let {patternDragging, offsetX} =\n                props.sequencerEngine.state.arrangement.patternDragging;\n            let x = e.pageX + getScrollLeft() - offsetX;\n            let stepNumber = getStepFromPosition(x, props.resolution, undefined, props.xScale);\n            dispatch(undefined, movePianoRollPattern(props.track, patternDragging, stepNumber));\n        }\n    }, [props.xScale]);\n    \n    return (\n        <div onMouseMove={onMouseMove}>\n          {props.track.patterns\n              .filter((x, i) => i >= 1)\n              .map((pattern, i) =>\n                   <PatternRoll\n                         key={'pattern-'+pattern.id}\n                         sequencerEngine={props.sequencerEngine}\n                         pattern={pattern}\n                         track={props.track}\n                         patternNumber={i+1}/>\n                  )}\n        </div>\n    );\n}\n\n\nconst mapStateToProps = (state, props) => {\n    return {\n        numPatterns: props.track.patterns.length,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementMode: (mode) => dispatch(setArrangementBottomMode(mode)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MiniPianoRoll);\n\n","export const HEIGHT = 42;\nexport const INNER_HEIGHT = 42;\n\nexport function getXPositionFromStep(step, resolution, zoom=1) {\n    let ratio = resolution.resolution / 8;\n    return zoom * ratio * 100 * step / 32;\n}\n\nexport function getYPositionFromVolume(volume) {\n    return HEIGHT - volume * INNER_HEIGHT;\n}\n\nexport function getValueFromYPosition(position) {\n    return Math.max(0, Math.min(1, (HEIGHT  - position) / INNER_HEIGHT));\n}\n\n","import React, { useCallback, useState, memo } from 'react';\nimport { Circle, Group, Stage, Layer, Rect, Line} from 'react-konva';\nimport { connect } from \"react-redux\";\nimport {DEFAULT_RESOLUTION} from '../constants.js';\nimport {\n    getXPositionFromStep,\n    getYPositionFromVolume\n} from './positionUtils.js';\n\nconst VolumeAutomationPoint = memo(({\n    onMouseDown,\n    highlightPoint,\n    unhighlightPoint,\n    onMouseUp,\n    step,\n    resolution,\n    xScale,\n    volume,\n    isHighlighted}) => {\n    return (\n        <circle\n          onMouseDown={onMouseDown}\n          onMouseOver={highlightPoint}\n          onMouseLeave={unhighlightPoint}\n          onMouseUp={onMouseUp}\n          cx={getXPositionFromStep(step, resolution, xScale)}\n          cy={getYPositionFromVolume(volume)}\n          r={2}\n          fill={isHighlighted ? 'blue' : 'black'}\n          stroke={isHighlighted ? 'blue' : 'red'}\n          strokeWidth={2} />\n    );\n    });\n\nconst mapStateToProps = (state, props) => {\n    return {\n        step: props.event.step,\n        volume: props.event.volume,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n \nexport default connect(mapStateToProps, null)(VolumeAutomationPoint);\n","import React, { useCallback, useState } from 'react';\nimport { Circle, Group, Stage, Layer, Rect, Line} from 'react-konva';\nimport {\n    getXPositionFromStep,\n    getYPositionFromVolume\n} from './positionUtils.js';\n\nexport default function VolumeGuidePoint(props) {\n    if (props.guidePoint === undefined) {\n        return (<Rect x={0} y={0} width={0} height={0}></Rect>);\n    }\n\n    return (\n         <circle\n           onMouseLeave={props.onMouseLeave}\n           onMouseDown={props.onClick}\n           cx={getXPositionFromStep(props.guidePoint.step, props.resolution, props.xScale)}\n           cy={getYPositionFromVolume(props.guidePoint.value)}\n           r={2}\n           fill={'blue'}\n           stroke={'blue'}\n           strokeWidth={2} />\n    );\n}\n","import React, { useRef, useCallback, useState } from 'react';\nimport { Circle, Group, Stage, Layer, Rect, Line} from 'react-konva';\nimport {getStepFromPosition} from '../getStepFromPosition.js';\nimport { connect } from \"react-redux\";\nimport {DEFAULT_RESOLUTION} from '../constants.js';\nimport VolumeAutomationPoint from './VolumeAutomationPoint.js';\nimport VolumeGuidePoint from './VolumeGuidePoint.js';\nimport {\n    setArrangementCursorStep,\n    setArrangementMouseX,\n    setArrangementRowSelections,\n       } from 'actions/index.js';\nimport {\n    SUB_SEQUENCE_VOLUME_CHANGE\n} from 'session/constants.js';\nimport SubSequenceVolumeChangeEvent from 'session/SubSequenceVolumeChangeEvent.js';\nimport {\n    HEIGHT,\n    getValueFromYPosition,\n    getXPositionFromStep,\n    getYPositionFromVolume\n} from './positionUtils.js';\n\nfunction VolumeChangeAutomation(props) {\n    let ref = useRef(undefined);\n    let [guidePoint, setGuidePoint] = useState(undefined);\n    let [pointBeingDragged, setPointBeingDragged] = useState(undefined);\n    let [highlightedPoint, setHighlightedPoint] = useState(undefined);\n    let [pointHasDragged, setPointHasDragged] = useState(false);\n\n    const getXY = (e) => {\n        let rect = ref.current.getBoundingClientRect();\n        return {\n            x: e.clientX - rect.left,\n            y: e.clientY - rect.top,\n        };\n    };\n\n    const onClickLine = (e) => {\n        e.stopPropagation();\n        let state = props.sequencerEngine.store.getState();\n        let {x, y} = getXY(e);\n        let step = getStepFromPosition(x, props.resolution, 0, state.arrangement.xScale);\n        if (isNaN(step)) {\n            return;\n        }\n        let value = getValueFromYPosition(y);\n        let event = new SubSequenceVolumeChangeEvent(\n            props.subSequence, value);\n        event.step = step;\n        props.subSequence.mix.insertEvent(event, 1);\n        setGuidePoint(undefined);\n        setPointBeingDragged(event);\n        setPointHasDragged(true);\n        props.clearSelection();\n    };\n\n    const getValue = () => {\n        let state = props.sequencerEngine.store.getState();\n        let fade = state.mix.subSequenceFades[props.subSequence.id];\n        return fade === undefined ? 1 : fade;\n    };\n\n    const getLinePoints = () => {\n        let events = props.events || [];\n        let pts = []; \n        if (events.length === 0  || events[0].step > 1) {\n            let startY = getYPositionFromVolume(getValue()); \n            pts = [{x: 0, y: startY}];\n        }\n        for (let i in events) {\n            pts.push({\n                x: getXPositionFromStep(events[i].step, props.resolution, props.xScale),\n                y : getYPositionFromVolume(events[i].volume)\n            });\n        }\n\n        let last = pts[pts.length - 1];\n\n        pts.push({\n            x: last.x + 1000,\n            y: last.y\n        });\n        return pts;\n    };\n\n    const onMouseMove = useCallback((e) => {\n        if (pointBeingDragged === undefined) {\n            return;\n        }\n\n        let {x,y} = getXY(e);\n        let state = props.sequencerEngine.store.getState();\n        let step = getStepFromPosition(x, props.resolution, 0, state.arrangement.xScale);\n        let value = getValueFromYPosition(y);\n        pointBeingDragged.step = step;\n        pointBeingDragged.value = value;\n        props.subSequence.volumeAutomationMix.updateRedux(\n            props.subSequence,\n            props.sequencerEngine\n        );\n        setGuidePoint(undefined);\n        setPointHasDragged(true);\n        props.setArrangementMouseX(undefined);\n        props.setArrangementCursorStep(undefined);\n        props.clearSelection();\n    }, [pointBeingDragged, props.events, props.resolution]);\n\n    const showGuidePoint = useCallback((e) => {\n        let {x,y} = getXY(e);\n        let state = props.sequencerEngine.store.getState();\n        let step = getStepFromPosition(x, props.resolution, 0, state.arrangement.xScale);\n        let value = getValueFromYPosition(y);\n        setGuidePoint({step, value});\n    }, [setGuidePoint, props.resolution]);\n\n    const onHighlightPoint = useCallback((event) => {\n        setHighlightedPoint(event);\n        setGuidePoint(undefined);\n    }, [setGuidePoint, setHighlightedPoint]);\n\n    const clearState = useCallback((e) => {\n        setPointBeingDragged(undefined);\n        setHighlightedPoint(undefined);\n        setGuidePoint(undefined);\n        setPointHasDragged(false);\n    }, [setPointBeingDragged, setHighlightedPoint, setGuidePoint]);\n\n    const deleteIfNecessary = useCallback((event) => {\n        if (!pointHasDragged) {\n            props.subSequence.volumeAutomationMix.deleteEvent(event);\n        }\n        clearState();\n    }, [pointHasDragged]);\n\n    let events = props.events || [];\n\n    let width = getXPositionFromStep(props.subSequence.mix.length + 1000, props.resolution, props.xScale);\n\n    let pts = getLinePoints();\n    return (\n        <div className=\"linear-automation-container\">\n          <svg\n            ref={ref}\n            width={width}\n            height={HEIGHT}\n            onMouseLeave={clearState}\n            onMouseMove={onMouseMove}\n            onMouseUp={clearState}\n            >\n            <path\n              onMouseMove={(e) => showGuidePoint(e)}\n              onMouseOver={(e) => showGuidePoint(e)}\n              onMouseDown={(e) => onClickLine(e)}\n              alpha={0}\n              fill=\"transparent\"\n              opacity={0}\n              strokeWidth={16}\n              d={\"M 0 0 L \" + pts.slice(1).map(({x,y}) => x + ' ' + y).join(' ')}\n              stroke={'black'}/>\n            <path\n              onMouseMove={(e) => showGuidePoint(e)}\n              onMouseOver={(e) => showGuidePoint(e)}\n              onMouseDown={(e) => onClickLine(e)}\n              closed={false}\n              fill=\"transparent\"\n              strokeWidth={2}\n              d={\"M 0 0 L \" + pts.slice(1).map(({x,y}) => x + ' ' + y).join(' ')}\n              stroke={'red'}/>\n            <VolumeGuidePoint\n              resolution={props.resolution}\n              onMouseLeave={() => setGuidePoint(undefined)}\n              xScale={props.xScale}\n              guidePoint={guidePoint}\n              onClick={onClickLine}/>\n            {events.map(\n                (event, i) => \n                    <VolumeAutomationPoint\n                      key={\"automation-\" + event.id}\n                      highlightPoint={() => onHighlightPoint(event)} \n                      unhighlightPoint={() => setHighlightedPoint(undefined)}\n                      isHighlighted={event === highlightedPoint || event === pointBeingDragged}\n                      onMouseDown={() => setPointBeingDragged(event)}\n                      onMouseUp={() => deleteIfNecessary(event)}\n                      event={event}\n                    />)}\n      </svg>\n            </div>\n    );\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementMouseX: (mouseX) => dispatch(setArrangementMouseX(mouseX)),\n        clearSelection: () => dispatch(setArrangementRowSelections({})),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[props.subSequence.id];\n    let events = mixEvents !== undefined ?\n        mixEvents[props.eventType] :\n        undefined;\n    let fade = state.mix.subSequenceFades[props.subSequence.id];\n\n    return {\n        events: events,\n        volume: state.mix.isPlayingMix ? undefined :\n            fade === undefined ? 1 : fade,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n\nfunction partitionBy(list) {\n   return [list];\n}\n \nexport default connect(mapStateToProps, mapDispatchToProps)(VolumeChangeAutomation);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport InstallationVolume from \"components/track/InstallationVolume.js\";\nimport {\n    setArrangementPatternSelected,\n    setArrangementBottomMode,\n} from 'actions/index.js';\nimport AutomationParameterDropdowns from 'components/automation/AutomationParameterDropdowns.js';\nimport AutomationToolbar from \"components/installation/AutomationToolbar.js\";\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {getTrackName} from 'utils/getTrackName.js';\n\nconst colors = new Colors();\nconst DOUBLE_CLICK_TIME = 200;\n\nconst TrackSidePanel = ({\n    setPatternSelected,\n    track,\n    isSelectedTrack,\n    enabled,\n    muted,\n    solod,\n    setBottomMode\n}) => { \n    let lastClick = useRef(0);\n    let name = track.presetName || track.getName();\n    if (!track.presetName && track.sample) {\n        name = track.sample.name;\n    }\n\n    let color = colors.getColorForTrack(track);\n\n    let style = {\n    };\n\n    if (isSelectedTrack ){\n        style.backgroundColor = color;\n    }\n\n    const onClick = useCallback((e) => {\n        e.stopPropagation();\n        track.sequencerEngine.selectTrack(track.trackNumber);\n\n        let now = new Date().getTime();\n        if (now - lastClick.current < DOUBLE_CLICK_TIME) {\n            setBottomMode(EFFECTS);\n        }\n\n        lastClick.current = now;\n    }, [track]);\n\n    const onClickMute = useCallback(() => {\n        track.mute(!muted);\n    }, [muted, track]);\n\n    const onClickSolo = useCallback(() => {\n        track.solo(!solod);\n    }, [solod, track]);\n\n    const onClickEnable = useCallback(() => {\n        track.setIsEnabled(!enabled);\n    }, [enabled, track]);\n\n    return (\n        <div\n          onClick={onClick}\n          style={{borderRightColor: color}} className=\"track-side-panel\">\n          <div\n            style={style}\n            className=\"track-name\">\n            {name.trim()}\n          </div>\n          <AutomationParameterDropdowns\n            isMix={true}\n            sequencerEngine={track.sequencerEngine}\n            track={track}/>\n          <div className=\"track-controls\">\n            <InstallationVolume track={track} sequencerEngine={track.sequencerEngine}/>\n            <div\n              onClick={onClickMute}\n              className={muted ? \"muted mute-btn\" : \"mute-btn\"}>{track.trackNumber + 1}</div>\n            <div\n              onClick={onClickSolo}\n              className={solod ? \"solod solo-btn\" : \"solo-btn\"}>s</div>\n            <div\n              onClick={onClickEnable}\n              className={enabled ? \"enabled enable-btn\" : \"enable-btn\"}></div>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let isSelectedTrack = state.mix.selectedTrack === props.track.trackNumber; \n    let currentSubSequence = props.track.sequencerEngine.currentSubSequence;\n    let track = props.track;\n    let _track = track;\n    if (track && track.tracks && track.tracks[0]) {\n        _track = track.tracks[0].track;\n    }\n    \n    return {\n        id: _track.presetName ? _track.presetName :\n            _track.sample !== undefined && _track.sample.getId() !== undefined ?\n            _track.sample.getId() :\n            _track.getName(),\n        isSelectedTrack: isSelectedTrack && props.track.subSequence === currentSubSequence,\n        solod: props.track.getSolo(),\n        muted: props.track.muted,\n        enabled: props.track.isEnabled\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x)),\n      setBottomMode: (x) => dispatch(setArrangementBottomMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackSidePanel);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackSidePanel from './TrackSidePanel.js';\nimport {\n    setShowAutomation\n} from 'actions/index.js';\n\nconst TracksSidePanel = ({\n    style, subSequence, setShowAutomation}) => { \n    let color = style.backgroundColor;\n    style = {\n        backgroundColor: color //\"linear-gradient(0deg, #ffffff61, \" + color + \"  25%)\"\n    };\n\n    return (\n        <div style={style} className=\"tracks-side-panel\">\n          {subSequence.tracks.map(\n              track => <TrackSidePanel key={track.id} track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowAutomation: (show) =>\n          dispatch(setShowAutomation(show)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TracksSidePanel);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setArrangementPatternSelected} from 'actions/index.js';\nimport {setShowArrangementTracks} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst TracksShowButton = ({\n    patternSelected,\n    setPatternSelected,\n    subSequence,\n    show,\n    setShowArrangementTracks\n}) => { \n    const onClick = useCallback(() => {\n        if (show && patternSelected && patternSelected.subSequence === subSequence) {\n            // hiding so we must unselect any selected patterns\n            setPatternSelected(undefined);\n        }\n        setShowArrangementTracks(!show);\n    }, [patternSelected, show, subSequence]);\n    return (\n        <div\n          onClick={onClick}\n          className=\"tracks-show-button\">\n          {show ? <div className=\"arrow-down\"/> : <div className=\"arrow-right\"/>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.arrangement.showTracks[props.subSequence.id],\n      patternSelected: state.arrangement.patternSelected\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setShowArrangementTracks: (x) => dispatch(setShowArrangementTracks(props.subSequence.id, x)),\n      setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TracksShowButton);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport Dropdown from 'react-dropdown';\nimport {\n    PATTERN_SWITCH,\n    SUB_SEQUENCE_VOLUME_CHANGE\n} from 'session/constants.js';\n\nfunction AutomationTypeDropdown(props) {\n    function onChange(type) {\n        props.subSequence.setAutomationToShow(type);\n    }\n\n    return (\n        <Dropdown\n          className='automation-type-dropdown'\n          controlClassName='automation-type-control-dropdown'\n          arrowClassName='automation-type-arrow-dropdown'\n          options={OPTIONS}\n          onChange={(o) => onChange(o.value)}\n          value={getOption(props.automationTypeToShow)}\n          placeholder=\"Rate\" />\n    );\n}\n\nconst OPTIONS = [\n    {value: PATTERN_SWITCH, label: 'Pattern'},\n    {value: SUB_SEQUENCE_VOLUME_CHANGE, label: 'Volume'},\n];\n\nfunction getOption(value=PATTERN_SWITCH) {\n    return OPTIONS.find(opt => opt.value === value);\n}\n\n\nconst mapStateToProps = (state, props) => {\n    return {\n        automationTypeToShow: state.arrangement.automationTypeToShow[props.subSequence.id],\n    };\n};\n \nexport default connect(mapStateToProps, null)(AutomationTypeDropdown);\n","import React, { Component } from 'react';\nimport TracksSidePanel from './tracks/TracksSidePanel.js';\nimport TracksShowButton from './tracks/TracksShowButton.js';\nimport {getIsSelected} from './selectors.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getVolume} from 'utils/getVolume.js';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport AutomationTypeDropdown from './AutomationTypeDropdown.js';\nimport { connect } from \"react-redux\";\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport VolumeBox from 'components/instruments/VolumeBox.js';\nimport Colors from 'components/Colors.js';\nimport {\n    setSelectedArrangementEvents,\n    setArrangementBottomMode,\n    setArrangementSelectedRows,\n} from 'actions/index.js';\n\nconst colors = new Colors();\nconst NAMES = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\nconst MAX_NAME_LENGTH = 18;\n\nfunction SubSequenceSidePanel(props) {\n    const onChangeVolume = (volume) => {\n        props.subSequence.fade = volume;\n    };\n\n    const onClickMute = () => {\n        props.subSequence.mute = !props.muted;\n    };\n\n    const stopPropagation = (e) => {\n        e.stopPropagation();\n    };\n\n    const toggleEnabled = () => {\n        props.subSequence.tracks[0].toggleEnabled();\n    };\n\n    const selectRow = (e) => {\n        e.stopPropagation();\n        props.setSelectedRows([props.subSequence.id]);\n        props.sequencerEngine.switchToSubSequence(props.subSequence.id, false);\n        /*\n        if (props.subSequence.tracks.length === 1) {\n            // props.subSequence.tracks[0].updateSteps();\n            //props.setArrangementMode(EFFECTS);\n        } else {\n            props.setArrangementMode(undefined);\n        }\n        */\n\n        // props.clearSelectedArrangementEvents();\n    };\n\n    let className = \"pattern-info sub-sequence\";\n    if (props.isSelected) {\n        className += ' selected';\n    }\n\n    let name = props.subSequence.tracks.length === 1 ?\n        props.subSequence.tracks[0].presetName ||\n        props.subSequence.tracks[0].getName() : NAMES[props.i];\n\n    if (name !== undefined && name.length >= MAX_NAME_LENGTH) {\n        name = name.substring(0, MAX_NAME_LENGTH);\n    }\n\n    const onVolumeChange = (v) => {\n        props.subSequence.fade = v;\n    };\n\n    let nameClass = props.subSequence.isTrack ? 'sub-sequence-name is-track' : 'sub-sequence-name';\n    let nameStyle = {\n    };\n\n    if (props.subSequence.isTrack && props.isSelected) {\n        let track = props.subSequence.tracks[0];\n        let name = track.presetName || track.getName();\n        nameStyle = {\n            backgroundColor: colors.getColorForHash(name)\n        };\n    }\n\n    let id = typeof props.subSequence.id === \"string\" ?\n        props.subSequence.id.slice(0, 10) :\n        \"s\" + props.subSequence.id;\n    let color = colors.saturate(colors.getColorForHash(id), 3);\n    let style = {\n        borderRightColor: color,\n        backgroundColor: color\n    };\n\n    return (\n        <div>\n        <div\n          onMouseDown={e => e.stopPropagation()}\n          onMouseUp={e => e.stopPropagation()}\n          onClick={selectRow}\n          onMouseMove={stopPropagation}\n          style={style}\n          onDragStart={stopPropagation}\n          className={className}>\n          <div\n            style={nameStyle}\n            className={nameClass}>\n            {name}\n          </div>\n          <div className=\"panel-rest\">\n            <div className=\"track-controls-container\">\n              <ConditionedComponent condition={props.subSequence.isTrack}>\n                  <div \n                    onClick={() => toggleEnabled()}\n                    className={props.isEnabled ? \"midi-recording-button on\" : \"midi-recording-button off\"}>\n                    <span className=\"black plain-dot\"></span>\n                  </div>\n                </ConditionedComponent>\n              <TracksShowButton subSequence={props.subSequence}/>\n            </div>\n          </div>\n        </div>\n          {props.showTracks ? <TracksSidePanel style={style} subSequence={props.subSequence}/> : ''}\n        </div>\n    );\n    \n}\n\nconst mapStateToProps = (state, props) => {\n    let volume = state.mix.subSequenceFades[props.subSequence.id];\n    let enabledMap = state.tracks.trackIsEnabled[props.subSequence.id] || {};\n    let isEnabled = enabledMap[0];\n\n    return {\n        isSelected: getIsSelected(state, props),\n        volume: volume === undefined ? 1 : volume,\n        muted: state.mix.subSequenceMuted[props.subSequence.id],\n        isEnabled:  isEnabled === undefined ? false : isEnabled,\n        showTracks: state.arrangement.showTracks[props.subSequence.id],\n        numTracks: props.subSequence.tracks && props.subSequence.tracks.length\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    let subSequenceId = props.subSequence.id;\n    return {\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        setArrangementMode: (mode) => dispatch(setArrangementBottomMode(mode)),\n        clearSelectedArrangementEvents: () => dispatch(setSelectedArrangementEvents(undefined)),\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(SubSequenceSidePanel);\n","import {getStepFromPosition} from './getStepFromPosition.js';\nimport {getTotalLength} from \"components/arrangement/getTotalLength.js\";\nimport {\n    setTotalArrangementLength\n} from 'actions/index.js';\nimport SequenceRollEvent from 'session/SequenceRollEvent.js';\nimport PatternSwitchEvent from 'session/PatternSwitchEvent.js';\nimport {insertRollEvent} from 'session/operations/actions.js';\nimport {insertEvent} from 'session/operations/actions.js';\nimport {NO_SUB_SEQUENCE} from 'session/constants.js';\nimport {setSelectedArrangementEvents} from 'actions/index.js';\n\nconst DEFAULT_ROLL_DURATION = 8;\nconst DEFAULT_PATTERN_DURATION = 32;\n\nexport function getCursorStep(store) {\n    let state = store.getState();\n    return state.arrangement.cursorStep;\n}\n\nexport function insertPatternEventAtCursor(mix, store) {\n    let resolution = store.getState().sequencer.displayResolution;\n    let cursorStep = getCursorStep(store);\n    let event = new PatternSwitchEvent(0);\n    event.step = cursorStep;\n    mix.dispatch(insertEvent(event, DEFAULT_PATTERN_DURATION));\n    store.dispatch(setSelectedArrangementEvents([event]));\n\n    // update the total length in redux for the arr. view\n    mix.sequencerEngine.dispatch(\n        setTotalArrangementLength(getTotalLength(mix.sequencerEngine)));\n}\n\nexport function insertRollEventAtCursor(mix, store) {\n    let state = store.getState();\n    let resolution = state.sequencer.displayResolution;\n    let cursorStep = getCursorStep(store);\n    let eventOn = new SequenceRollEvent(true, resolution);\n    eventOn.step = cursorStep;\n\n    let dur = 64;\n    let xScale = state.arrangement.xScale;\n    if (xScale < 0.8) {\n        dur *= 2;\n    } else if (xScale < 0.4) {\n        dur *= 4;\n    }\n    mix.dispatch(insertRollEvent(eventOn, dur / resolution.resolution));\n    store.dispatch(setSelectedArrangementEvents([eventOn.initialSubEvent]));\n}\n","/**\n *\n * A sub-sequence within an arrangement. Contains pattern events\n * that can be resized.\n * If the sub-sequence is \"expanded\", the underlying tracks will be\n * displayed underneath it.\n */\n\nimport React, { useRef, useEffect, useState, useCallback, Component } from 'react';\nimport SubSequenceTracks from './tracks/SubSequenceTracks.js';\nimport { connect } from \"react-redux\";\nimport { getIsSelected} from './selectors.js';\nimport {dragPattern} from 'actions/index.js';\nimport {dispatch} from 'session/operations/dispatch.js';\nimport {resizePianoRollPattern} from 'session/operations/actions.js';\nimport MouseHelper from './MouseHelper.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport MiniPianoRoll from './MiniPianoRoll.js';\nimport RowSelection from './RowSelection.js';\nimport VolumeChangeAutomation from './automation/VolumeChangeAutomation.js';\nimport SubSequenceSidePanel from './SubSequenceSidePanel.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport PatternComponent from './PatternComponent.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {useRowSelection} from './useRowSelection.js';\nimport {useScroll} from './useScroll.js';\nimport {getWindowedEvents} from './getWindowedEvents.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {insertPatternEventAtCursor} from './cursor.js';\nimport PatternSwitchEvent from 'session/PatternSwitchEvent.js';\nimport {\n    setArrangementMouseX,\n    setArrangementCursorStep,\n    setArrangementPatternSelected,\n    setSelectedArrangementEvents,\n    setArrangementSelectedRows,\n    setArrangementRowSelections,\n} from 'actions/index.js';\nimport {\n    PATTERN_SWITCH,\n    SUB_SEQUENCE_VOLUME_CHANGE,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {LEFT, RIGHT} from './constants.js';\n\nconst CLICK_THRESHOLD = 200;\n\nconst SubArrangementComponent = (props) => {\n\n    const getState = () => {\n        return props.sequencerEngine.store.getState();\n    };\n\n    const patternSwitchEvents = () => {\n        let mixEvents = getState().arrangement.mixEvents[props.subSequence.id];\n        return mixEvents !== undefined ? mixEvents[PATTERN_SWITCH] || [] : [];\n    };\n\n    const {visibleView} = useScroll({\n        ref: props.wrapperRef,\n        resolution: props.resolution,\n        xScale: props.xScale,\n        events: patternSwitchEvents(),\n        sequencerEngine: props.sequencerEngine,\n        eventsLength: props.eventsLength\n    });\n\n    const {onRowSelectionUp, onRowSelectionDown, onRowSelectionMove} =\n          useRowSelection({\n              id: props.subSequence.id,\n              sequencerEngine: props.sequencerEngine,\n              xScale: props.xScale,\n              resolution: props.resolution,\n              setArrangementRowSelections: props.setArrangementRowSelections,\n              scrollContainer: props.wrapperRef\n          });\n\n    const patternEventDragging = useRef(undefined);\n    const resizing = useRef(false);\n    const draggingDiff = useRef(0);\n    const lastClickTime = useRef(undefined);\n    const direction = useRef(undefined);\n\n    const scrollLeft = () => props.wrapperRef.current.scrollLeft;\n\n    const mix = props.subSequence.mix;\n\n    const onDragPatternEvent = useCallback((e, patternEvent) => {\n        e.stopPropagation();\n        if (patternEvent.patternNumber === 0) {\n            // we don't let you fuck with the first pattern\n            return;\n        }\n        let step = getStepFromPosition(e.pageX + scrollLeft(), props.resolution, undefined, props.xScale);\n        patternEventDragging.current = patternEvent;\n        draggingDiff.current = step - patternEvent.step;\n    }, [props.resolution, props.xScale]);\n\n    // when the right edge of a pattern is dragged this\n    // is called\n    const onEdgeMouseDown = (event,  _direction) => {\n        resizing.current = event;\n        direction.current = _direction;\n    };\n\n    const onRowMouseUp = () => {\n        let currentTime = new Date().getTime();\n        if (lastClickTime.current &&\n            currentTime - lastClickTime.current <= CLICK_THRESHOLD) {\n            insertPatternEventAtCursor(mix, props.sequencerEngine.store);\n        }\n        lastClickTime.current = currentTime;\n        onRowSelectionUp();\n    };\n     \n    const onMouseUp = useCallback((event) => {\n        resizing.current = undefined;\n        direction.current = undefined;\n        props.onMouseUp();\n    }, [props.onMouseUp]);\n\n    const onMouseMove = useCallback((e) => {\n        let step = getStepFromPosition(e.pageX + scrollLeft(), props.resolution, undefined, props.xScale);\n        let resolution = 32 / props.resolution.resolution;\n        let remainder = step % resolution;\n        step -= remainder;\n        let resizedStep = Math.floor(step);\n\n        if (resizing.current) {\n           let difference = \n                step - (resizing.current.step + resizing.current.duration);\n\n            if (direction.current === RIGHT) {\n                let nextEvent = mix.getNextEvent(resizing.current);\n                if (nextEvent) {\n                    let nextStepAfter = mix.getNextEvent(nextEvent);\n                    if (nextStepAfter) {\n                        // don't allow resizing past the following event\n                        if (resizedStep < nextStepAfter.step &&\n                            resizing.current.step < resizedStep) {\n                            nextEvent.step = resizedStep;\n                            mix.updateAllTypeRedux();\n                        }\n                    } else if (resizing.current.step < resizedStep) {\n                        nextEvent.step = resizedStep;\n                        mix.updateAllTypeRedux();\n                    }\n                }\n            } else {\n                let previousEvent = mix.getPreviousEvent(resizing.current);\n                let nextStep = mix.getNextEvent(resizing.current);\n                if (previousEvent === undefined || resizedStep > previousEvent.step) {\n                    if (nextStep === undefined || resizedStep < nextStep.step) {\n                        resizing.current.step = resizedStep;\n                        mix.updateAllTypeRedux();\n                    }\n                } \n            }\n            if (!props.isSelected) {\n                selectRow();\n            }\n        } else if (patternResizing()) {\n            let {pattern, direction} = patternResizing();\n            dispatch(resizePianoRollPattern(pattern, direction, resizedStep));\n        } else {\n            onRowSelectionMove(e, props.resolution, props.xScale);\n        }\n    }, [props.resolution, props.xScale, props.isSelected]);\n\n    const onMouseLeave = () => {\n        resizing.current = undefined;\n    };\n\n    const onDrop = useCallback((event) => {\n        let step = getStepFromPosition(\n            event.pageX + scrollLeft(),\n            props.resolution,\n            undefined,\n            props.xScale);\n        step = quantizeStep(step, props.resolution);\n\n        if (props.patternDragging !== undefined) {\n            let patternSwitch = new PatternSwitchEvent(\n                props.patternDragging);\n\n            let resolution = 32 / props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n            patternSwitch.step = step;\n            mix.insertEvent(\n                patternSwitch, 32);\n            props.dragPattern(undefined);\n        } else if (patternEventDragging.current !== undefined) {\n            let event = patternEventDragging.current;\n            mix.deleteEvent(event);\n            step -= draggingDiff.current;\n            let resolution = 32 / props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n            event.step = step;\n            mix.insertEvent(\n                event, event.duration);\n\n            patternEventDragging.current = undefined;\n        }\n    }, [props.resolution, props.patternDragging]);\n\n    const onSelect = (event) => {\n        console.log('on select');\n        let _selectedEvents = {... selectedEvents()} || {};\n\n        props.setArrangementCursorStep(event.step);\n        props.setArrangementMouseX(undefined);\n        if (isSelected(event)) {\n            delete _selectedEvents[event.id];\n\n            props.setSelectedEvents(selectedEvents);\n            props.setArrangementRowSelections({});\n            return;\n        }\n\n        props.setArrangementRowSelections({});\n        if (getState().arrangement.patternSelected) {\n            props.setPatternSelected(event);\n        }\n        _selectedEvents = {};\n        _selectedEvents[event.id] = event;\n        props.setSelectedEvents(_selectedEvents);\n    };\n\n    const isSelected = (event) => {\n        return selectedEvents() === undefined ?\n            false :\n            selectedEvents()[event.id] !== undefined;\n    };\n\n    const onDragOver = (e) => {\n        e.preventDefault();\n    };\n\n\n    const selectedEvents = () => {\n        return getState().arrangement.selectedEvents;\n    };\n\n    const patternResizing = () => {\n        return getState().arrangement.patternResizing;\n    };\n\n    const selectRow = () => {\n        props.setSelectedRows([props.subSequence.id]);\n        props.sequencerEngine.switchToSubSequence(props.subSequence.id, false);\n    };\n\n    const onMouseDown = useCallback((e) => {\n        onRowSelectionDown(e);\n        selectRow();\n    }, [props.resolution, props.xScale]);\n\n    let eventComponents = '';\n    if (props.subSequence.isTrack) {\n        eventComponents = (\n            <MiniPianoRoll\n              track={props.subSequence.tracks[0]}\n              xScale={props.xScale}\n              resolution={props.resolution}\n              sequencerEngine={props.sequencerEngine}\n              subSequence={props.subSequence}/>\n        );\n    } else {\n        let _patternSwitchEvents = patternSwitchEvents() || [];\n        let smallPattern = false;\n        if (props.automationTypeToShow === SUB_SEQUENCE_VOLUME_CHANGE) {\n            smallPattern = true;\n        }\n        let eventsToShow = [];\n        if (visibleView.start !== undefined) {\n            eventsToShow = \n                _patternSwitchEvents.slice(visibleView.start, visibleView.end + 1);\n        }\n        eventComponents = [\n            (<div className=\"pattern-filler\" style={{width: visibleView.preWidth}}/>),\n            ...eventsToShow .map(\n                    (event, i) =>\n                        <PatternComponent\n                          i={i}\n                          smallPattern={smallPattern}\n                          key={event.id}\n                          type={PATTERN_SWITCH}\n                          resolution={props.resolution}\n                          subSequence={props.subSequence}\n                          isLast={i === patternSwitchEvents.length - 1}\n                          isFirst={i === 0}\n                          onDragStart={(e) => onDragPatternEvent(e, event)}\n                          onSelect={() => onSelect(event)}\n                          onRightMouseDown={(e) => onEdgeMouseDown(event, RIGHT)}\n                          onMouseUp={onMouseUp}\n                          xScale={props.xScale}\n                          onMouseLeave={onMouseLeave}\n                          onLeftMouseDown={(e) => onEdgeMouseDown(event, LEFT)}\n                          sequencerEngine={props.sequencerEngine}\n                          event={event}\n                          arrangementContainer={props.wrapperRef}\n                        />)\n        ];\n    }\n\n    let automations = '';\n    if (props.automationTypeToShow !== undefined &&\n        props.automationTypeToShow !== PATTERN_SWITCH) {\n        automations = (\n            <VolumeChangeAutomation\n              eventType={props.automationTypeToShow}\n              sequencerEngine={props.sequencerEngine}\n              subSequence={props.subSequence}/>\n        );\n    }\n\n    let className = \"pattern-row\";\n    if (props.isSelected) {\n        className += ' selected';\n    }\n    let smallPattern = false;\n    if (props.automationTypeToShow === SUB_SEQUENCE_VOLUME_CHANGE) {\n        smallPattern = true;\n        className += ' automation';\n    }\n\n    let style = {\n        width: props.width\n    };\n\n    className += \" \" + props.subSequence.id;\n    return (\n        <div className=\"sub-sequence-arrangement-container\">\n          <div\n            style={style}\n            onClick={selectRow}\n            onDrop={onDrop}\n            onDragOver={onDragOver}\n            onMouseDown={onMouseDown}\n            onMouseUp={onRowMouseUp}\n            onMouseMove={onMouseMove}\n            onMouseLeave={onMouseLeave}\n            className={className}>\n            <RowSelection id={props.subSequence.id}/>\n            <MouseHelper subSequence={props.subSequence}/>\n            <div\n              className=\"patterns-arrangement-container\">\n              {eventComponents}\n            </div>\n            {automations}\n          </div>\n          <SubSequenceTracks\n            width={props.width}\n            yScrollContainer={props.yScrollContainer}\n            wrapperRef={props.wrapperRef}\n            style={style}\n            subSequence={props.subSequence}/>\n        </div>\n    );\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n    let subSequenceId = props.subSequence.id;\n    return {\n        dragPattern : p => dispatch(dragPattern(p)),\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        setPatternSelected: p => dispatch(setArrangementPatternSelected(p)),\n        setSelectedEvents: (events) => dispatch(\n            setSelectedArrangementEvents(events)),\n        setArrangementRowSelections: (selections) => dispatch(\n            setArrangementRowSelections(selections)),\n        setArrangementMouseX: (x) => dispatch(\n            setArrangementMouseX(x)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x))\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[props.subSequence.id];\n    let patternSwitchEvents = mixEvents !== undefined ?\n        mixEvents[PATTERN_SWITCH] : undefined;\n    return {\n        eventsLength: patternSwitchEvents === undefined ? 0 : patternSwitchEvents.length,\n        patternDragging: state.sequencer.patternDragging,\n        resolution: DEFAULT_RESOLUTION,\n        automationTypeToShow: state.arrangement.automationTypeToShow[props.subSequence.id],\n        isSelected: getIsSelected(state, props),\n        xScale: state.arrangement.xScale,\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubArrangementComponent);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {useSticky} from './useSticky.js';\nimport {connect} from 'react-redux';\n\nconst SidePanelToolbar = (props) => { \n    const ref = useRef(undefined);\n    const {sticky} = useSticky({\n        scrollContainer: props.scrollContainer,\n        stickyContainer: ref\n    });\n    let style = sticky ? sticky : {};\n    const [dropdownOpen, setDropdownOpen] = useState(false);\n\n    const onNewMix = () => {\n        props.sequencerEngine.mix.clear();\n        props.sequencerEngine.subSequences.forEach(\n            s => s.mix.clear());\n        // find all mix automations and delete them\n        for (let s of props.sequencerEngine.subSequences) {\n            for (let track of s.tracks) {\n                let automatedParameters = track.getAllParameters()\n                    .filter(\n                        x => x.mixAutomation &&\n                            x.mixAutomation.automations.length > 0);\n                automatedParameters.forEach(\n                    s => s.mixAutomation.deleteAutomations());\n            }\n        }\n    };\n\n    return (\n        <div style={style} ref={ref} className=\"side-panel-toolbar\">\n          <ButtonDropdown\n            className=\"view-dropdown\"\n            show={dropdownOpen ? \"true\" : \"false\"}\n            isOpen={dropdownOpen}\n            toggle={() => setDropdownOpen(!dropdownOpen)}>\n            <DropdownToggle size=\"sm\" caret color=\"primary\">\n              <img className=\"actions-btn\" src=\"/automation-icon-disabled.png\"/>\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={onNewMix}size=\"sm\">New Mix</DropdownItem>\n            </DropdownMenu>\n          </ButtonDropdown>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidePanelToolbar);\n","import SubSequenceSidePanel from './SubSequenceSidePanel.js';\nimport SidePanelToolbar from './SidePanelToolbar.js';\nimport { connect } from \"react-redux\";\nimport {getIsSelected} from './selectors.js';\nimport React, { useState } from 'react';\nimport {\n    NO_SUB_SEQUENCE\n    } from 'session/constants.js';\n\nfunction SidePanelContainer(props) {\n    let rollClassName = \"pattern-info\";\n    if (props.isRollSelected) {\n        rollClassName += ' selected';\n    }\n    /*\n         */\n \n    return (\n        <div className=\"side-panel-container\">\n          <SidePanelToolbar\n            scrollContainer={props.scrollContainer}\n            sequencerEngine={props.sequencerEngine}/>\n         {props.sequencerEngine.subSequences\n              .filter(s => !s.isTrack)\n              .map(\n              (subSequence, i) =>\n          <SubSequenceSidePanel i={i} sequencerEngine={props.sequencerEngine} subSequence={subSequence}/>)}\n        {props.sequencerEngine.subSequences\n              .filter(s => s.isTrack)\n              .map(\n              (subSequence, i) =>\n          <SubSequenceSidePanel i={i} sequencerEngine={props.sequencerEngine} subSequence={subSequence}/>)}\n            <div className={rollClassName}>\n            <div className=\"roll sub-sequence-name\">\n              ROLL\n            </div>\n            </div>\n        </div>\n    );\n \n}\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    return {\n        isRollSelected: getIsSelected(state, props),\n        subSequences: state.sequencer.subSequences[id],\n    };\n};\n \nexport default connect(mapStateToProps, null)(SidePanelContainer);\n","import React, { useState, useCallback } from 'react';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport { connect } from \"react-redux\";\nimport { setArrangementSelection } from \"actions/index.js\";\nimport { setArrangementRowSelections } from \"actions/index.js\";\nimport { setArrangementLoopSelected } from \"actions/index.js\";\nimport {NO_SUB_SEQUENCE} from 'session/constants.js';\n\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nfunction SelectionComponent(props) {\n    if (props.selectionStart === undefined) {\n        return '';\n    }\n     let style = {\n        left: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n\n    let className = \"absolute-selection\";\n    if (props.loopSelected) {\n        className += ' looping'\n    }\n    return (\n        <div className={className} style={style}>\n        </div>\n    );       \n}\n\nfunction getSelectionStyle(props) {\n    return {\n        marginLeft: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n}\n\nconst mapStateToProps = state => {\n    let selection = state.arrangement.selection;\n    return {\n        selectionStart: selection !== undefined ? selection.start : undefined,\n        selectionEnd: selection !== undefined ? selection.end : undefined,\n        loopSelected: state.arrangement.loopSelected,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n\n const mapDispatchToProps = dispatch => {\n    return {\n        setArrangementRowSelections: (selections) => dispatch(setArrangementRowSelections(selections)),\n        setArrangementSelection: (start, end) => dispatch(setArrangementSelection(start, end)),\n        setArrangementLoopSelected: (selected) => dispatch(setArrangementLoopSelected(selected))\n    };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionComponent);\n","import React, { useRef, useCallback, useState, Component } from 'react';\nimport {getIsSelected} from './selectors.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {useScroll} from './useScroll.js';\nimport RollComponent from './RollComponent.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport RowSelection from './RowSelection.js';\nimport MouseHelper from './MouseHelper.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {insertRollEventAtCursor} from './cursor.js';\nimport {\n    setSelectedArrangementEvents,\n    setArrangementSelectedRows,\n    setArrangementBottomMode,\n    setArrangementRowSelections,\n} from 'actions/index.js';\nimport {moveRollEvent} from 'session/operations/actions.js';\nimport { connect } from \"react-redux\";\nimport {\n    NO_SUB_SEQUENCE,\n    PATTERN_SWITCH,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nconst RIGHT = 'RIGHT';\nconst DOUBLE_CLICK_THRESHOLD = 250;\nconst LEFT = 'LEFT';\n\nconst RollsArrangementComponent = (props) => {\n    const getState = () => {\n        return props.sequencerEngine.store.getState();\n    };\n\n    const getEvents = () => {\n        let mixEvents = getState().arrangement.mixEvents[NO_SUB_SEQUENCE.id];\n        return mixEvents ? mixEvents[SEQUENCE_ROLL] || [] : [];\n    };\n\n    const {visibleView} = useScroll({\n        ref: props.wrapperRef,\n        resolution: props.resolution,\n        xScale: props.xScale,\n        events: getEvents(),\n        sequencerEngine: props.sequencerEngine,\n        widthExtension: 250\n    });\n\n    const resizingSelection = useRef(false);\n    const lastClickTime = useRef(undefined);\n    const resizing = useRef(undefined);\n    const resizingSubEvent = useRef(undefined);\n    const rollDragging = useRef(undefined);\n    const rollDragOffset = useRef(undefined);\n    const direction = useRef(undefined);\n\n    const getMouseX = (e) => {\n        return e.pageX + props.wrapperRef.current.scrollLeft;\n    };\n\n    const onDragPatternEvent = (e, event) => {\n    };\n\n    const onSelect = (event, subEvent, e) => {\n        if (isSelected(subEvent)) {\n            props.setSelectedEvents(undefined);\n        } else {\n            props.setArrangementRowSelections({});\n            let selectedEvents = {};\n            selectedEvents[subEvent.id] = subEvent;\n            props.setSelectedEvents(selectedEvents);\n        }\n        rollDragOffset.current = getStepFromMouseEvent(e) - event.step;\n        rollDragging.current= event;\n    };\n\n    const isSelected = (event) => {\n        return selectedEvents() === undefined ? false :\n            selectedEvents()[event.id] !== undefined;\n    };\n\n    const selectedEvents = () => {\n        let state = getState();\n        return state.arrangement.selectedEvents;\n    };\n\n    const xScale = () => {\n        return getState().arrangement.xScale;\n    };\n\n    const mix = props.sequencerEngine.mix;\n\n    const onMouseUp = (e) => {\n        if (e === undefined) {\n            let currentClickTime = new Date().getTime();\n\n            if (lastClickTime.current !== undefined &&\n                currentClickTime - lastClickTime.current < DOUBLE_CLICK_THRESHOLD) {\n                insertRollEventAtCursor(mix, props.sequencerEngine.store);\n            }\n            lastClickTime.current= currentClickTime;\n        }\n        resizing.current = undefined;\n        resizingSubEvent.current = undefined;\n        resizingSelection.current = false;\n        rollDragging.current = undefined;\n        rollDragOffset.current = undefined;\n    };\n\n    const scrollLeft = () => {\n        return props.wrapperRef.current.scrollLeft;\n    };\n\n    const getStepFromMouseEvent = useCallback((e) => {\n        let x = e.pageX + scrollLeft();\n        let step = getStepFromPosition(\n            x,\n            props.resolution,\n            undefined,\n            xScale());\n        return step;\n    }, [props.resolution]);\n\n    const onMouseMove = useCallback((e) => {\n        if (resizing.current || rollDragging.current || resizingSelection.current) {\n            let x = e.pageX + scrollLeft();\n            let step = getStepFromPosition(\n                x,\n                props.resolution,\n                undefined,\n                xScale());\n            let originalStep = step;\n            let resolution = 32 / props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n\n            if (rollDragging.current) {\n                let quantizedStep = quantizeStep(\n                    originalStep - rollDragOffset.current, 64 / props.resolution.resolution);\n                mix.dispatch(moveRollEvent(rollDragging.current, quantizedStep));\n            } else if (resizing.current) {\n                let difference = \n                    step - (resizingSubEvent.current.step + resizingSubEvent.current.duration);\n                \n                if (direction.current === RIGHT) {\n                    // check that next event doesnt overlap\n                    if (isRightEventInBounds(step, resizing.current, resizingSubEvent.current) &&\n                        isRightSubEventInBounds(step, resizing.current, resizingSubEvent.current)) {\n                        mix.resizeSequenceRoll(\n                            resizing.current, resizingSubEvent.current, RIGHT, Math.floor(difference));\n                    } else {\n                        resizing.current= undefined;\n                        resizingSubEvent.current= undefined;\n                    }\n                } else {\n                    if (isLeftEventInBounds(step, resizing.current) &&\n                        isLeftSubEventInBounds(step, resizing.current, resizingSubEvent.current)) {\n                        mix.resizeSequenceRoll(\n                            resizing.current, resizingSubEvent.current, LEFT, Math.floor(step));\n                    } else {\n                        resizing.current = undefined;\n                        resizingSubEvent.current= undefined;\n                    }\n                }\n            } else if (resizingSelection.current) {\n                let selection = getState().arrangement.rowSelections[NO_SUB_SEQUENCE.id];\n                if (selection !== undefined) {\n                    selection.end = step;\n                    let selections = {};\n                    selections[NO_SUB_SEQUENCE.id] = selection;\n                    props.setArrangementRowSelections(selections);\n                }\n            } \n        }\n    }, []);\n\n    const isLeftEventInBounds = (stepToResize, event) => {\n        let previousEvent = mix.getPreviousEvent(event);\n        let nextStep = mix.getNextEvent(event);\n\n        if (previousEvent === undefined || stepToResize > previousEvent.step) {\n            if (nextStep === undefined || stepToResize < nextStep.step) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const isLeftSubEventInBounds = (stepToResize, event, subEvent) => {\n        let previousEvent = event.getPreviousSubEvent(subEvent);\n        let nextStep = event.getNextSubEvent(subEvent);\n\n        if (previousEvent === undefined || stepToResize > previousEvent.step) {\n            if (nextStep === undefined || stepToResize < nextStep.step) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const isRightEventInBounds = (stepToResize, event, subEvent) => {\n        let nextEvent = mix.getNextEvent(event);\n        let previousEvent = mix.getPreviousEvent(event);\n\n        if (nextEvent) {\n            let nextStepAfter = mix.getNextEvent(nextEvent);\n            if (nextStepAfter === undefined ||\n                stepToResize < nextStepAfter.step) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const isRightSubEventInBounds = (stepToResize, event, subEvent) => {\n        if (stepToResize < subEvent.step) {\n            return false;\n        }\n        let nextEvent = event.getNextSubEvent(subEvent);\n        let previousEvent = event.getPreviousSubEvent(subEvent);\n\n        if (nextEvent === undefined) {\n            return true;\n        }\n\n        let nextStepAfter = event.getNextSubEvent(nextEvent);\n        if (nextStepAfter === undefined ||\n            stepToResize < nextStepAfter.step) {\n            return true;\n        }\n        return false;\n    }\n\n    const onMouseDown = (event, subEvent, _direction) => {\n        resizing.current = event;\n        resizingSubEvent.current = subEvent;\n        direction.current = _direction;\n    };\n\n\n    const selectRow = () => {\n        props.setSelectedRows([NO_SUB_SEQUENCE.id]);\n        props.setArrangementMode(undefined);\n    };\n\n\n    const onSelectionMouseDown = (e) => {\n        let step = getStepFromMouseEvent(e);\n        resizingSelection.current= true;\n        let rowSelections = {};\n        rowSelections[NO_SUB_SEQUENCE.id] = {\n            start: step,\n            end: step\n        };\n        props.setArrangementRowSelections(rowSelections);\n    };\n\n    let state = getState();\n\n    let sequenceRollEvents = getEvents();\n    let eventsToShow = [];\n    if (visibleView.start !== undefined) {\n        eventsToShow = \n            sequenceRollEvents.slice(visibleView.start, visibleView.end + 1);\n    }\n \n    let className = \"pattern-row rolls-row\";\n    if (props.isSelected) {\n        className += ' selected';\n    }\n\n    let style = {\n        width: props.width\n    };\n\n    return (\n        <div\n          style={style}\n          onClick={selectRow}\n          onMouseMove={onMouseMove}\n          onMouseDown={onSelectionMouseDown}\n          onMouseUp={(e) => onMouseUp(undefined)}\n          onMouseLeave={onMouseUp}\n          className={className}>\n          <RowSelection id={NO_SUB_SEQUENCE.id}/>\n          <MouseHelper subSequence={NO_SUB_SEQUENCE}/>\n          <div className=\"pattern-filler\" style={{width: visibleView.preWidth}}/>\n          {eventsToShow\n           .filter(e => e !== undefined)\n           .map(\n               (event, i) =>\n                   <RollComponent\n                     key={event.id}\n                     type={SEQUENCE_ROLL}\n                     mixSession={props.mixSession}\n                     resolution={props.resolution}\n                     isLast={i === sequenceRollEvents.length - 1}\n                     isFirst={i === 0}\n                     onDragStart={(e) => onDragPatternEvent(e, event)}\n                     onSelect={(event, subEvent, e) => onSelect(event, subEvent, e)}\n                     onMouseUp={(e) => onMouseUp(event)}\n                     onRightMouseUp={(event, subEvent) => onMouseUp(event, subEvent)}\n                     onRightMouseDown={(event, subEvent) => onMouseDown(event, subEvent, RIGHT)}\n                     onLeftMouseUp={(event, subEvent) => onMouseUp(event, subEvent)}\n                     onLeftMouseDown={(event, subEvent) => onMouseDown(event, subEvent, LEFT)}\n                     mixSession={props.mixSession}\n                     sequencerEngine={props.sequencerEngine}\n                     event={event}\n                   />)}\n        </div>);\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        setSelectedEvents: (events) => dispatch(\n            setSelectedArrangementEvents(events)),\n        setArrangementRowSelections: (selections) => dispatch(\n            setArrangementRowSelections(selections)),\n        setArrangementMode: (mode) => dispatch(\n            setArrangementBottomMode(mode)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[NO_SUB_SEQUENCE.id];\n    let sequenceRollEvents = mixEvents ? mixEvents[SEQUENCE_ROLL] : [];\n    return {\n        isSelected: getIsSelected(state, props),\n        numEvents: sequenceRollEvents === undefined ? 0 : sequenceRollEvents.length,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(RollsArrangementComponent);\n","import SubArrangementComponent from './SubArrangementComponent.js';\nimport {\n    setArrangementXScale,\n} from \"actions/index.js\";\nimport {onScale} from './onScale.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {getHeight} from './getHeight.js';\nimport {connect} from 'react-redux';\nimport MouseHelper from './MouseHelper.js';\nimport SelectionComponent from './SelectionComponent.js';\nimport SelectionBox from './SelectionBox.js';\nimport {\n    NO_SUB_SEQUENCE,\n} from 'session/constants.js';\nimport RollsArrangementComponent from './RollsArrangementComponent.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport ClockTickComponent from './ClockTickComponent.js';\nimport React, {memo, Component, useCallback, useEffect, useRef} from 'react';\nimport TimeRowComponent from './TimeRowComponent.js';\n    \nconst SCROLL_BUFFER_LENGTH = 140;\n\nconst ArrangementContainer = memo(({\n    showTracks,\n    onMouseDown,\n    onMouseUp,\n    onMouseMove,\n    sequencerEngine,\n    resolution,\n    arrangementContainer,\n    mixSession,\n    totalLength,\n    xScale,\n    setArrangementXScale,\n    yScrollContainer\n}) => {\n    let ref = useRef(undefined);\n    let mouseX = useRef(0);\n    let lastCursor = useRef(0);\n    let style = {\n        height: getHeight(sequencerEngine, showTracks) \n    };\n\n    let width = getBarWidth(16*totalLength, resolution, xScale);\n\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onMouseWheel, {passive: false});\n\n        return () => ref.current ? ref.current.removeEventListener(\"mousewheel\", onMouseWheel) : 0;\n    }, [xScale, resolution, totalLength]);\n\n    const onMouseWheel = useCallback((e) => {\n        if (e.ctrlKey) {\n            e.preventDefault();\n            e.stopPropagation();\n            // Your zoom/scale factor\n            let _xScale = xScale - e.deltaY * 0.01;\n            if (getBarWidth(16*totalLength, resolution, _xScale) < window.innerWidth - 140) {\n                // Dont let user zoom out beyond the width of the window\n                return;\n            }\n\n            onScale({\n                x: mouseX.current,\n                setArrangementXScale,\n                arrangementContainer: ref,\n                cursorStep: lastCursor.current, \n                resolution, \n                xScale: _xScale\n            });\n        } else {\n            let width = getBarWidth(1, resolution, xScale);\n            let _cursorStep = (e.clientX - SCROLL_BUFFER_LENGTH + ref.current.scrollLeft) / width;\n            mouseX.current = e.clientX;\n            lastCursor.current = _cursorStep;\n        }\n    }, [xScale, resolution, totalLength]);\n\n    return (\n        <div\n          ref={ref}\n          style={style}\n          className=\"arrangement-container\"\n          onMouseDown={(e) => onMouseDown(e)}\n          onMouseLeave={() => onMouseUp()}\n          onMouseMove={(e) => {\n              let width = getBarWidth(1, resolution, xScale);\n              let _cursorStep = (e.clientX - SCROLL_BUFFER_LENGTH + ref.current.scrollLeft) / width;\n              mouseX.current = e.clientX;\n              lastCursor.current = _cursorStep;\n              onMouseMove(e);\n          }}\n          onMouseUp={(e) => onMouseUp(e)}\n          >\n          <div\n            className=\"viewport-wrapper\">\n            <ClockTickComponent sequencerEngine={sequencerEngine}/>\n          <TimeRowComponent\n            height={style.height}\n            arrangementContainer={ref}\n            yScrollContainer={yScrollContainer}\n            sequencerEngine={sequencerEngine}\n            selectionStart={undefined}\n            selectionEnd={undefined}\n            resolution={resolution}\n            >\n            <SelectionComponent\n              arrangementContainer={arrangementContainer}\n              sequencerEngine={sequencerEngine}\n            />\n          </TimeRowComponent>\n            <SelectionBox\n              arrangementContainer={arrangementContainer}\n              sequencerEngine={sequencerEngine}\n            />\n          <div className=\"sub-sequence-container\">\n            {sequencerEngine.subSequences\n                .filter(s => !s.isTrack)\n                .map(\n                (sub, i) =>\n                    <SubArrangementComponent\n                      key={\"sub-arrangement-\" + sub.id + '-' + i}\n                      i={i}\n                      wrapperRef={ref}\n                      width={width}\n                      sequencerEngine={sequencerEngine}\n                      yScrollContainer={yScrollContainer}\n                      onMouseUp={e => onMouseUp(e)}\n                      subSequence={sub}/>)}\n            {sequencerEngine.subSequences\n                .filter(s => s.isTrack)\n                .map(\n                (sub, i) =>\n                    <SubArrangementComponent\n                      key={\"sub-arrangement-\" + sub.id}\n                      wrapperRef={ref}\n                      width={width}\n                      yScrollContainer={yScrollContainer}\n                      sequencerEngine={sequencerEngine}\n                      onMouseUp={e => onMouseUp(e)}\n                      subSequence={sub}/>)}\n        </div>\n            <RollsArrangementComponent\n              width={width}\n              mixSession={mixSession}\n              wrapperRef={ref}\n              subSequence={NO_SUB_SEQUENCE}\n              sequencerEngine={sequencerEngine}\n            />\n          <TimeRowComponent\n            sequencerEngine={sequencerEngine}\n            constantHeight={true}\n            yScrollContainer={yScrollContainer}\n            arrangementContainer={ref}\n            isBottom={true}\n            selectionStart={undefined}\n            selectionEnd={undefined}\n            resolution={resolution}\n            />\n           <div className=\"arrangement-rest\"/>\n            </div>\n          </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    return {\n        showTracks: state.arrangement.showTracks,\n        totalLength: state.arrangement.totalLength,\n        xScale: state.arrangement.xScale,\n        numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setArrangementXScale: (xScale) => dispatch(\n            setArrangementXScale(xScale))\n    }\n};\n \n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementContainer);\n","import React, { Component } from 'react';\nimport ArrangementSearcher from 'components/modals/ArrangementSearcher.js';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport { connect } from \"react-redux\";\nimport {ARRANGEMENT_TRACK_PATTERN} from 'session/constants.js';\nimport {deleteRowSelections} from './copy.js';\nimport {dispatch} from 'session/operations/dispatch.js';\nimport {splitPianoRollPattern} from 'session/operations/actions.js';\nimport RollComponent from './RollComponent.js';\nimport ArrangementBottom from './ArrangementBottom.js';\nimport {setArrangementBottomResizing} from 'actions/index.js';\nimport ArrangementBottomResizer from './ArrangementBottomResizer.js';\nimport SideBrowserContainer from './SideBrowserContainer.js';\nimport {onKeyDown} from './keyDown.js';\nimport {copy, paste, isRowSelectionsEmpty, duplicate} from './copy.js';\nimport SelectionComponent from './SelectionComponent.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport {\n    deleteEvent,\n    deleteCompoundEvent\n} from 'session/operations/actions.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport TimeRowComponent from './TimeRowComponent.js';\nimport TimeBackgroundComponent from './TimeBackgroundComponent.js';\nimport ClockTickComponent from './ClockTickComponent.js';\nimport SubArrangementComponent from './SubArrangementComponent.js';\nimport PatternSwitchEvent from 'session/PatternSwitchEvent.js';\nimport {\n    setArrangementCursorStep,\n    setArrangementPatternResizing,\n    setIsPlayingMix,\n    setArrangementPatternDragging,\n    setArrangementSelectedRows,\n    setSelectedArrangementEvents,\n    setArrangementBottomHeight,\n    setArrangementMouseX,\n    setArrangementMouseDownX,\n} from 'actions/index.js';\nimport SidePanelContainer from './SidePanelContainer.js';\nimport ArrangementContainer from './ArrangementContainer.js';\nimport {\n    NO_SUB_SEQUENCE,\n    PATTERN_SWITCH,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {INFO_COLUMN_WIDTH} from './constants.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport Track from 'track/Track.js';\n\nimport '../../Arrangement.scss';\n\nconst MIN_TIME_SINCE_CLICK = 250;\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nclass ArrangementView extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            arrangementContainer: undefined\n        };\n\n        window.brightness = 120;\n        this.idToEvent = {};\n\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.savedArrangementContainer = undefined;\n\n        this.copyRing = {\n        };\n\n        this.ref = React.createRef(undefined);\n    }\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.onKeyDown);\n        this.props.sequencerEngine.resolution = DEFAULT_RESOLUTION;\n\n        this.updateTrackSteps();\n    }\n\n    updateTrackSteps() {\n        // update subsequence\n        this.props.sequencerEngine.subSequences.filter(\n            s => s.isTrack)\n            .forEach(s => s.tracks[0].updateSteps());\n    }\n\n    componentWillUnmount() {\n        this.props.sequencerEngine.resolution = DEFAULT_RESOLUTION;\n        window.removeEventListener('keydown', this.onKeyDown);\n    }\n\n    get arrangementContainer() {\n        if (this.savedArrangementContainer) {\n            return this.savedArrangementContainer;\n        }\n        this.savedArrangementContainer = document\n            .getElementsByClassName('arrangement-container')[0];\n\n        this.setState({\n            arrangementContainer: this.savedArrangementContainer\n        });\n\n        return this.savedArrangementContainer;\n    }\n\n\n    onKeyDown(event, sequencerEngine) {\n        onKeyDown(event, this.props.sequencerEngine);\n\n        if (event.key === 'c' && (event.metaKey || event.ctrlKey)) {\n            this.copy();\n        }\n        if (event.key === 'v' && (event.metaKey || event.ctrlKey)) {\n            this.paste();\n        }\n        if (event.key === 'd' && (event.metaKey || event.ctrlKey)) {\n            event.stopPropagation();\n            this.duplicate();\n        }\n        if (event.key === 'e' && (event.ctrlKey || event.metaKey)) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.splitPattern();\n        }\n    }\n\n    // when the left edge of a pattern is dragged this\n    // is called\n    onLeftMouseDown(event, subEvent) {\n        this.resizing = event;\n        this.resizingSubEvent = event;\n        this.direction = LEFT;\n    }\n\n    // when the right edge of a pattern is dragged this\n    // is called\n    onRightMouseDown(event, subEvent) {\n        this.resizing = event;\n        this.resizingSubEvent = event;\n        this.direction = RIGHT;\n    }\n\n    onMouseLeave() {\n        this.props.setArrangementMouseX(undefined);\n        this.props.setArrangementCursorStep(undefined);\n        this.resizing = undefined;\n    }\n\n    get xScale() {\n        return this.getState().xScale;\n    }\n\n    onMouseDown(event) {\n        let mouseX = event === undefined || this.resizing ?\n            undefined :\n            event.pageX + this.arrangementContainer.scrollLeft;\n        this.props.setMouseDownX(event.pageX);\n        let step = getStepFromPosition(mouseX, this.props.resolution, undefined, this.props.xScale);\n        let quantization = 16 / this.props.resolution * 4;\n        let quantizedStep = quantizeStep(step, quantization, false);\n\n        if (quantizedStep !== undefined) {\n            this.props.setArrangementCursorStep(quantizedStep);\n            this.props.setArrangementMouseX(mouseX);\n        }\n    }\n\n    // when dragging has stopped or otherwise finished clicking\n    // resets everything\n    onMouseUp(event) {\n        if (this.selecting) {\n            this.updateSelectedPatterns();\n        }\n\n        let mouseX = event === undefined || this.resizing ?\n            undefined :\n            event.pageX + this.arrangementContainer.scrollLeft;\n\n        // quantize then convert back to mouseX\n        let step = getStepFromPosition(mouseX, this.props.resolution, undefined, this.props.xScale);\n        let quantization = 16 / this.props.resolution * 4;\n        let quantizedStep = quantizeStep(step, quantization, false);\n        mouseX = INFO_COLUMN_WIDTH +\n            getBarWidth(quantizedStep, this.props.resolution, this.xScale);\n\n        if (mouseX !== undefined && quantizedStep === this.cursorStep) {\n            if (event.pageY > 38 && event.pageY < 65) {\n                // user clicked the time bar (so we want to skip that part of the track)\n                if (!this.props.sequencerEngine.playing) {\n                    /*\n                    this.props.playMix();\n                    this.props.sequencerEngine.play();\n                    */\n                }\n                let trackStep = this.getQuantizedStepFromPosition(mouseX);\n                this.props.sequencerEngine.seekToTrackStep(trackStep);\n            }\n        }\n\n        this.resizing = undefined;\n        this.resizingSubEvent = undefined;\n        this.selecting = false;\n\n        this.props.setArrangementPatternDragging(undefined);\n    }\n\n    getQuantizedStepFromPosition(x) {\n        let step = getStepFromPosition(x, this.props.resolution, this.props.xScale);\n        let resolution = 32 / this.props.resolution.resolution;\n        let remainder = step % resolution;\n        step -= remainder;\n        return step;\n    }\n\n    onMouseMove(e) {\n        if (this.resizing) {\n            let x = e.pageX + this.arrangementContainer.scrollLeft;\n            let step = getStepFromPosition(e.pageX + this.arrangementContainer.scrollLeft, this.props.resolution);\n            let resolution = 32 / this.props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n            let difference = this.resizingSubEvent ?\n                step - (this.resizingSubEvent.step + this.resizingSubEvent.duration) :\n                step - (this.resizing.step + this.resizing.duration);\n\n            if (this.resizing.getType() === PATTERN_SWITCH) {\n                if (this.direction === RIGHT) {\n                    this.mixSession.resizeEvent(\n                        this.resizing, Math.floor(difference));\n                } else {\n                    this.resizing.step = Math.floor(step);\n                    this.mixSession.updateAllTypeRedux();\n                }\n            } else if (this.resizing.getType() === SEQUENCE_ROLL) {\n                if (this.direction === RIGHT) {\n                    this.mixSession.resizeSequenceRoll(\n                        this.resizing, this.resizingSubEvent, RIGHT, Math.floor(difference));\n                } else {\n                    this.mixSession.resizeSequenceRoll(\n                        this.resizing, this.resizingSubEvent, LEFT, Math.floor(step));\n                }\n            }\n        }\n    }\n\n    updateAllTypeRedux() {\n        this.mixSession.updateAllTypeRedux();\n    }\n\n    getState() {\n        return this.props.sequencerEngine.store.getState().arrangement;\n    }\n\n    getSelectionStart() {\n        return this.getState().selection === undefined ?\n            undefined :\n            this.getState().selection.start;\n    }\n\n    getSelectionEnd() {\n        return this.getState().selection === undefined ?\n            undefined :\n            this.getState().selection.end;\n    }\n\n    get cursorStep() {\n        return this.getState().cursorStep;\n    }\n\n    updateSelectedPatterns() {\n        let fromStep = this.getSelectionStart();\n        let toStep = this.getSelectionEnd();\n\n        let events = [];\n        for (let i in this.props.patternSwitchEvents) {\n            let event = this.props.patternSwitchEvents[i];\n            if (event.step >= fromStep &&\n                event.step + event.duration <= toStep) {\n                events.push(event);\n            }\n        }\n\n        /*\n        this.setState({\n            selectedEvents: events\n        });\n        */\n    }\n\n    isSelectedEvent(event, subEvent) {\n        /*\n        if (subEvent) {\n            return this.state.selectedCompoundEvents[event.id] &&\n                this.state.selectedCompoundEvents[event.id].indexOf(subEvent) > -1;\n        }\n        return false;\n        */\n        return false;\n    }\n\n    copy() {\n        this.copyRing = copy(this.getState());\n    }\n\n    duplicate() {\n        duplicate(this.props.sequencerEngine);\n    }\n\n    paste() {\n        paste(this.props.sequencerEngine, this.copyRing);\n    }\n\n    splitPattern() {\n        let step = this.cursorStep;\n        for (let i in this.selectedRows) {\n            let id = this.selectedRows[i];\n            let subSequence = this.props.sequencerEngine.getSubSequence(id);\n            if (!subSequence.isTrack) {\n                continue;\n            }\n            let track = subSequence.tracks[0];\n            let pattern = track.patterns.find(\n                p => p.overlapsStep(step));\n            if (pattern !== undefined) {\n                dispatch(undefined, splitPianoRollPattern(pattern.track, pattern, step));\n                this.onMouseLeave();\n                return;\n            }\n        } \n    }\n\n    getMix(subSequenceId) {\n        if (subSequenceId === NO_SUB_SEQUENCE.id) {\n            return this.props.sequencerEngine.mix;\n        }\n        return this.props.sequencerEngine\n            .getSubSequence(subSequenceId)\n            .mix;\n    }\n\n    getSelectedEvents() {\n        return this.getState().selectedEvents;\n    }\n\n    getRowSelections() {\n        return this.getState().rowSelections;\n    }\n\n    get selectedRows() {\n        return this.getState().selectedRows;\n    }\n\n    get mixSession() {\n        return this.props.sequencerEngine.mix;\n    }\n\n    get mix() {\n        return this.props.sequencerEngine.mixSession.mix;\n    }\n\n    get bottomBarWidth() {\n        return 225;\n    }\n\n    onMouseMoveResize(e) {\n    }\n\n    onGlobalMouseUp() {\n        this.props.setArrangementBottomResizing(false);\n        this.props.setArrangementPatternResizing(undefined);\n    }\n\n    render() {\n        let style = {\n        };\n        if (this.props.showBottom) {\n            style.height = window.innerHeight - this.props.bottomHeight - 17;\n        }\n        return (\n            <div\n              onMouseUp={(e) => this.onGlobalMouseUp()} \n              onMouseMove={(e) => this.onMouseMoveResize(e)}\n              className=\"arrangement-view\">\n              <ArrangementSearcher sequencerEngine={this.props.sequencerEngine}/>\n              <div className=\"arrangement-column\">\n                <div\n                  ref={this.ref}\n                  style={style}\n                  className=\"full-arrangement-container\">\n                <SidePanelContainer\n                  scrollContainer={this.ref}\n                  updateAllTypeRedux={() => this.updateAllTypeRedux()}\n                  subSequence={NO_SUB_SEQUENCE}\n                  sequencerEngine={this.props.sequencerEngine}\n                  />\n                <ArrangementContainer\n                  yScrollContainer={this.ref}\n                  onMouseDown={(e) => this.onMouseDown(e)}\n                  onMouseLeave={() => this.onMouseLeave()}\n                  onMouseMove={(e) => this.onMouseMove(e)}\n                  mixSession={this.mixSession}\n                  arrangementContainer={this.state.arrangementContainer}\n                  resolution={this.props.resolution}\n                  onDragStart={(e, event) => this.onDragPatternEvent(e, event)}\n                  onSelect={(event, subEvent) => []}\n                  onMouseUp={(event, subEvent) => this.onMouseUp(event, subEvent)}\n                  onRightMouseDown={(event, subEvent) => this.onRightMouseDown(event, subEvent)}\n                  onLeftMouseDown={(event, subEvent) => this.onLeftMouseDown(event, subEvent)}\n                  sequencerEngine={this.props.sequencerEngine}\n                  />\n                </div>\n                </div>\n               <ArrangementBottom sequencerEngine={this.props.sequencerEngine}/>\n            </div>\n        );\n    }\n\n    //\n    \n    /*\n               */\n                // <SideBrowserContainer\n                  //sequencerEngine={this.props.sequencerEngine}\n                  ///>\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        playMix: () => dispatch(setIsPlayingMix(true)),\n        setArrangementMouseX: (mouseX) => dispatch(setArrangementMouseX(mouseX)),\n        setMouseDownX: (mouseX) => dispatch(setArrangementMouseDownX(mouseX)),\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        clearSelectedArrangementEvents: () => dispatch(setSelectedArrangementEvents(undefined)),\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n        setArrangementPatternDragging: (x) => dispatch(\n            setArrangementPatternDragging(x)),\n        setArrangementPatternResizing: (x) => dispatch(\n            setArrangementPatternResizing(x)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    let sub = props.sequencerEngine.currentSubSequence;\n    return {\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale,\n        subSequences: state.sequencer.subSequences[id] || [],\n        bottomHeight: state.arrangement.bottomHeight,\n        showBottom: (state.arrangement.patternSelected && state.arrangement.showTracks[sub.id])\n            || state.arrangement.bottomMode === EFFECTS\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementView);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport AudioUnit from 'engine/audio.js';\nimport Tone from 'tone';\nimport {setSampleDragging} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport './recent.scss';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst RecentlyAddedSounds = ({recentlyAddedSounds, setSampleDragging}) => { \n    let audioUnit = useRef(new AudioUnit(Tone.Master.context));\n    let [selected, setSelected] = useState(undefined);\n\n    const playSound = useCallback((sample) => {\n        audioUnit.current.setBuffer(sample.audioBuffer);\n        audioUnit.current.playSound(0);\n        setSelected(recentlyAddedSounds.indexOf(sample));\n    }, [recentlyAddedSounds, setSelected]);\n\n    if (recentlyAddedSounds.length === 0) {\n        return '';\n    }\n    return (\n        <div className=\"recently-added-sounds\">\n        {recentlyAddedSounds.map(\n            (sample, i) =>\n            <div\n              draggable={true}\n              onDragOver={e => e.preventDefault()}\n              onDragStart={() => setSampleDragging(sample)}\n              onClick={(x) => playSound(sample)}\n              className={i === selected ? \"recent-sound selected\" : \"recent-sound\"}>\n              <div\n                style={{backgroundColor: colors.getColorForHash(sample.ipfsHash)}}\n                className=\"recent-thumb\"/>\n              <div className=\"recent-name\">{sample.name}</div>\n            </div>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      recentlyAddedSounds: state.samples.recentlyAddedSounds\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSampleDragging: x => dispatch(setSampleDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecentlyAddedSounds);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from \"decentralized/Ipfs.js\";\nimport {connect} from 'react-redux';\nimport {\n    setShowPlugins,\n    setPluginsLoaded} from 'actions/index.js';\nimport ethereum from \"decentralized/ethereum.js\";\n\nconst PluginOption = ({\n    setShowPlugins,\n    sequencerEngine,\n    plugin,\n    setPluginsLoaded\n}) => { \n    let [description, setDescription] = useState('');\n    let [thumbnail, setThumbnail] = useState(undefined);\n    let [creator, setCreator] = useState('');\n\n    useEffect(() => {\n        ipfs.getJson(plugin.versions[0].pluginMetadataURI).then(\n            json => {\n                setDescription(json.description);\n                setThumbnail(json.image);\n            });\n\n        ethereum.users.getUserName(plugin.creator).then(setCreator);\n    }, [setCreator, plugin, setDescription, setThumbnail]);\n\n    const loadPlugin = useCallback(() => {\n        ipfs.getJson(plugin.versions[0].pluginContentHash).then(\n            json => {\n                let o = sequencerEngine.currentSubSequence.createZObject(5,5,\"subpatch\");\n                o.hide();\n                o.loadPresetJson(json, false, true, true);\n                o.plugin = plugin;\n                \n                let pluginsLoaded = sequencerEngine.state.plugins.pluginsLoaded || [];\n                setPluginsLoaded([... pluginsLoaded, o]);\n                setShowPlugins(false);\n            });\n    }, [plugin]);\n    return (\n        <div className=\"plugin-option\">\n          <div className=\"plugin-name\">\n            {thumbnail && <img src={thumbnail}/>}\n            <div className=\"name-and-author\">\n              <div className=\"name-text\">{plugin.name}</div>\n              <div className=\"creator-text\">{creator}</div>\n            </div>\n          </div>\n          <div className=\"plugin-description\">{description}</div>\n          <div\n            onClick={loadPlugin}\n            className=\"load-button pushable\">\n            Load Plugin\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPluginsLoaded: x => dispatch(setPluginsLoaded(x)),\n      setShowPlugins: m => dispatch(setShowPlugins(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {getPlugins} from 'plugins/plugins.js';\nimport {connect} from 'react-redux';\nimport PluginOption from './PluginOption.js';\n\nconst PluginsList = ({sequencerEngine}) => { \n    let [plugins, setPlugins] = useState([]);\n    useEffect(() => {\n        getPlugins().then(setPlugins);\n    }, [setPlugins]);\n\n    console.log(\"PLUGINs=\", plugins);\n    return (\n        <div className=\"plugins-list\">\n          {plugins.map(plugin => <PluginOption plugin={plugin} sequencerEngine={sequencerEngine}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginsList);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PluginsList from './PluginsList.js';\nimport {\n    setShowPlugins,\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport './plugins.scss';\n\nconst PluginsViewer = ({sequencerEngine, setShowPlugins}) => { \n    return (\n        <div className=\"plugins-viewer\">\n          <div className=\"plugins-header\">\n            <div\n              onClick={() => setShowPlugins(false)}\n              className=\"back-arrow-container pushable\">\n              <div className=\"arrow-left\"/>\n            </div>\n            <img className=\"plugins-icon\" src=\"/plugin-icon.svg\"/>\n            <div className=\"header-text\">Plugins</div>\n          </div>\n          <PluginsList sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowPlugins: m => dispatch(setShowPlugins(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginsViewer);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setStepParameterSelected,\n    setParametersToRecord,\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst ParamValue = ({\n    setStepParameterSelected,\n    lastPlayedStepData,\n    isRecording,\n    trackStep,\n    track,\n    parameters,\n    rounded=false,\n    setParametersToRecord,\n    isSelected\n}) => { \n    let ref = useRef(undefined);\n    let [hover, setHover] = useState(false);\n    const getParameterValue = useCallback((p) => {\n        if (!p) {\n            return 0;\n        }\n        if (p.get() === null) {\n            return track.trackData[p.name.toLowerCase() + 'Parameter'].get();\n        }\n        return p.get();\n    }, [track]);\n\n    let [value, setValue] = useState(getParameterValue(parameters[0], track));\n    let [editing, setEditing] = useState(false);\n\n    useEffect(() => {\n        window.addEventListener(\"mouseup\", onMouseUp);\n        window.addEventListener(\"mousemove\", onMouseMove);\n\n        return () => {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n            window.removeEventListener(\"mousemove\", onMouseMove);\n        };\n    }, [parameters, setEditing, editing, setValue, isSelected]);\n\n    useEffect(() => {\n        setValue(getParameterValue(parameters[0]), track);\n    }, [getParameterValue(parameters[0], track), setValue, track]);\n\n    const onMouseMove = useCallback(e => {\n        if (editing) {\n            let {y, number} = editing;\n            let {pageY} = e;\n            let distY = y - pageY;\n            let ratio = Math.pow(distY / y, 2);\n            if (distY < 0) {\n                ratio *= -1;\n            }\n            let parameter = parameters[0];\n            let max = parameter.max;\n            let min = parameter.min;\n            if (parameter.name === \"Duration\") {\n                max = 2;\n                min = 0.01;\n            } else if (parameter.name === \"Velocity\") {\n                min = 0.001;\n            }\n            let _number = ratio*(max - (min+0.001)) + number;\n            _number = Math.max(min, Math.min(max, _number));\n            if (rounded) {\n                _number = Math.round(_number);\n            }\n            if (_number !== getParameterValue(parameter, track)) {\n                parameters.forEach(p => p.set(_number));\n                setValue(_number);\n            }\n            setParametersToRecord(parameters);\n        }\n    }, [parameters, isRecording, setEditing, editing, setValue, track]);\n\n    const onMouseUp = useCallback(e => {\n        if (editing) {\n            setEditing(false);\n        }\n\n        setParametersToRecord([]);\n    }, [setEditing, editing]);\n\n    let className = \"track-parameter\";\n    if (isSelected) {\n        className += \" selected\";\n    }\n    return (\n        <div onMouseOver={() => setHover(true)} onMouseLeave={() => setHover(false)} className={className}>\n          {(hover || editing) && isRecording &&\n           <div className=\"recording-indicator\">\n             <div\n               style={{width: (110 * (trackStep % track.pattern.length()) / track.pattern.length()) + 'px'}}\n               className={editing ? \"recording-progress editing\" : \"recording-progress\"}>\n             </div>\n           </div>}\n        <div\n          ref={ref}\n            onMouseDown={(e) => {\n                setEditing({number: getParameterValue(parameters[0], track), y: e.pageY});\n                setStepParameterSelected(parameters[0].name);\n            }}\n          className=\"param-name\">\n          {parameters[0] ? parameters[0].name : ''}\n        </div>\n          <div\n            onMouseDown={(e) => {\n                setEditing({number: getParameterValue(parameters[0], track), y: e.pageY});\n                setStepParameterSelected(parameters[0].name);\n            }}\n            className=\"param-value\">\n            {hover && isRecording && !editing && lastPlayedStepData && parameters[0] ?\n             round(lastPlayedStepData[parameters[0].name.toLowerCase() + \"Parameter\"].get()\n                ) : round(value)}\n          </div>\n        </div>\n    );\n}\n\nconst round = (value) => {\n    return Math.round(value*100)/100;\n};\n\nconst mapStateToProps = (state, props) => {\n    let isRecording= props.track.sequencerEngine.isRecording;\n    return {\n        isRecording,\n        lastPlayedStepData: props.track.lastPlayedStepData,\n        trackStep: isRecording ? props.track.sequencerEngine.trackStep : 0\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setParametersToRecord: params => dispatch(setParametersToRecord(params)),\n\n      setStepParameterSelected: params => dispatch(setStepParameterSelected(params)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParamValue);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport FreezeHistory from \"components/v2/FreezeHistory.js\";\nimport {SAMPLER, MULTI_FREEZE} from 'constants/track-types.js';\nimport StepGroupEditor from \"components/sidebar/StepGroupEditor.js\";\nimport {connect} from 'react-redux';\nimport ParamValue from './ParamValue.js';\nimport TrackFrozenComponent from \"components/v2/TrackFrozenComponent.js\";\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst PARAMS = [\"transpose\", \"duration\", \"velocity\", \"attack\", \"release\"];\n\nconst TrackParameters = ({track, isFrozen, selectedSteps, stepParameterSelected}) => { \n    if (track.isAudioTrack) {\n        return '';\n    }\n    if (isFrozen) {\n        return (<div>\n                  <TrackFrozenComponent\n                    track={track}\n                    trackColor={colors.getColorForTrack(track)}\n                    isTrackFrozen={true}/>\n                \n                  {track.getTrackType() === MULTI_FREEZE && <div className=\"freeze-history\">\n                                                              <FreezeHistory track={track}/>\n                                                            </div>}\n               </div>\n               );\n    }\n\n    \n    let groups = !selectedSteps ? [] :\n        Array.from(new Set(selectedSteps.map(s => s && s.group).filter(s => s)));\n    return (<div className=\"track-parameters\">\n              {PARAMS.map(\n                  param =>\n                      <ParamValue\n                        isSelected={stepParameterSelected && param === stepParameterSelected.toLowerCase()}\n                        rounded={param === \"transpose\"}\n                        track={track}\n                        parameters={selectedSteps && selectedSteps.length > 0\n                                    ?\n                                    selectedSteps.filter(x => x).map(x => x[param + \"Parameter\"]) :\n                                    track && track.trackData ? [track.trackData[param + \"Parameter\"]] : []}/>\n              )}\n            {selectedSteps && selectedSteps.length > 0 &&\n              <div className=\"steps-indicator\">\n               <div className=\"selected-type\">Steps</div>\n               <div className=\"selected-length\">{selectedSteps.length}</div>\n              </div>}\n              {groups.map(group => <StepGroupEditor\n                                     track={track}\n                                     key={group.id} sequencerEngine={track.sequencerEngine} group={group}/>)}\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isFrozen: props.track.isFrozen,\n      selectedSteps: state.keyboard.selectedPianoRollSteps,\n      stepParameterSelected: state.cirklon.stepParameterSelected\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackParameters);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {AUDIO} from 'constants/track-types.js';\nimport {\n    SOUND_RATED,\n    PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport SynthThumbnail from \"components/v3/sidebar/SynthThumbnail.js\";\nimport FavoriteButton from \"components/FavoriteButton.js\";\nimport {\n    setSelectedZObject,\n    setContextualHelp} from \"actions/index.js\";\nimport Documented from \"components/help/Documented.js\"\nimport {AUDITION_NEXT, AUDITION_PREVIOUS} from 'constants/contextual-help.js';\nimport {trim} from 'utils/trim.js';\nimport {freezePatterns} from 'components/v2/trackRightClickActions.js';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst TrackInformation = ({track, isFrozen, setContextualHelp, setSelectedZObject}) => { \n    let style = {\n    };\n    if (!isFrozen) {\n        style.backgroundColor = colors.getColorForTrack(track);\n    }\n    let className = \"track-information\";\n    if (!track.sample) {\n        className += \" no-sampler-track\";\n    }\n    if (track.getTrackType() === AUDIO) {\n        className += \" audio-track\";\n    }\n    return (\n        <div className={className}>\n          <div className=\"thumb-and-browse\">\n            <div\n              onMouseOver={() => setContextualHelp(AUDITION_PREVIOUS)}\n              onMouseLeave={() => setContextualHelp(undefined)}\n              onClick={() => track.auditionPrevious()} className=\"arrow-up\"/>\n            {track.instrument ? <SynthThumbnail track={track}/> :\n             <TrackThumbnail\n              onClickThumbnail={() => setSelectedZObject(track)}\n               hasInner={true} track={track}/>}\n            <div\n              onMouseOver={() => setContextualHelp(AUDITION_NEXT)}\n              onMouseLeave={() => setContextualHelp(undefined)}\n              onClick={() => track.auditionNext()} className=\"arrow-down\"/>\n          </div>\n          <div className=\"name-and-tags\">\n            <div className={!track.sample || !track.sample.tags ? \"track-name instrument-name\" : \"track-name\"}>{trim(track.name || track.presetName || track.getName())}</div>\n            <div className=\"track-tags\">\n              {track.sample && track.sample.tags && track.sample.tags.map(\n                  x => <div className=\"track-tag\">{x}</div>)}\n            </div>\n          </div>\n        {track.sample ? <FavoriteButton type={SOUND_RATED} contentHash={track.sample.getId()} /> : \n         track.preset && <FavoriteButton type={PRESET_RATED} contentHash={track.preset.contentHash}/>} \n       </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      id: props.track.id,\n      name: props.track.presetName || props.track.name,\n      isFrozen: props.track.isFrozen\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setContextualHelp: (element, arg) => dispatch(setContextualHelp(element, arg)),\n      setSelectedZObject: (obj) => dispatch(setSelectedZObject(obj)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackInformation);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {getInstrumentComponent} from \"components/effects/getInstrumentComponent.js\";\nimport {connect} from 'react-redux';\nimport DetailsView from \"components/DetailsView.js\"\n\nconst InstrumentViewer = ({track, containerRef}) => { \n    let wrapperRef = useRef();\n    /*\n    if (track.isFrozen) {\n        return '';\n    }\n    */\n    if (track.instrument && !track.isFrozen) {\n        return (\n            <div className=\"instrument-wrapper\">\n              {getInstrumentComponent(track, containerRef)}\n            </div>);\n    } else {\n        // its a sampler so show the sampler\n        return (<div  className=\"sampler-wrapper\">\n                  <div ref={wrapperRef} className=\"waveform-inner\">\n                    <DetailsView.DetailsView\n                      width={window.innerWidth - 240*2-60}\n                      backgroundColor=\"transparent\"\n                      div={wrapperRef}\n                      small={false}\n                      showParameters={false}\n                      hideKeyboard={true}\n                      alreadyLoaded={true}\n                      onGoBack={() => []}\n                      keyboardEngine={track.sequencerEngine.keyboardEngine}\n                      midiEngine={track.sequencerEngine.midi}\n                      trackNumber={track.trackNumber}\n                      resolution={track.sequencerEngine.resolution}\n                      height={180}\n                      sequencerEngine={track.sequencerEngine}\n                      bpm={track.sequencerEngine.bpm}\n                      track={track}/>\n                  </div>\n                </div>);\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstrumentViewer);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nimport './zobject.scss';\nconst ZObjectInformation = ({zobject}) => { \n    let src = zobject.name === 'comment' ? '/zcomment-light.svg': '/zobject-light.svg';\n    if (zobject.plugin) {\n        src = \"/plugin-icon.svg\";\n    }\n    return (<div className=\"zobject-information object-information\">\n              <img className=\"zobject-information-icon\" src={src}/>\n              <div className=\"object-name\">\n                {zobject.plugin ? zobject.plugin.name : zobject.name}\n              </div>\n            </div>\n           );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      name: props.zobject.name\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\n\nconst ZMessageInformation = ({zmessage, type}) => { \n    let src = '';\n    let name = '';\n    switch (type) {\n    case BANG:\n        src = '/zbutton-light.svg';\n        name = 'Bang';\n        break;\n    case NUMBER:\n        src = '/znumber-light.svg';\n        name = 'Number';\n        break;\n    default:\n        src = '/zmessage-light.svg';\n        name = 'Message';\n        break;\n    }\n    return (\n        <div className=\"object-information zmessage-information\">\n          <img src={src}/>\n          <div className=\"object-name\">\n            {name}\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      type: props.zmessage.type\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZMessageInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst PadInformation = (props) => { \n    return (<div className=\"pad-information\">\n            <div className=\"pad-title\">\n              <img src=\"/zpad-light.svg\"/>Pad\n            </div>\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport {getEffectTrack} from \"utils/getEffectTrack.js\";\nimport {AUDIO_FX, MIDI_FX, LIVE_FX} from 'constants/effect-types.js';\nimport {connect} from 'react-redux';\n\nconst EffectInformation = ({effect, _locked}) => { \n    let track = getEffectTrack(effect);\n\n    let [locked, setLocked] = useState(_locked);\n\n    const toggleLock = useCallback(() => {\n        effect.lock = !locked;\n        setLocked(!locked);\n    }, [effect, locked, setLocked ]);\n\n    useEffect(() => {\n        setLocked(_locked);\n    }, [_locked, setLocked]);\n\n    return (\n        <div className=\"effect-information object-information\">\n          <div className=\"effect-thumbnail\">\n            {effect.getEffectType() === AUDIO_FX ? \"Audio FX\" :\n             effect.getEffectType() === MIDI_FX ? \"MIDI FX\" :\n             \"Live FX\"}\n          </div>\n          <div className=\"effect-name\">{effect.name}</div>\n          <img\n            onClick={toggleLock}\n            src={locked ? \"/closed-padlock.png\" :\"/opened-padlock.png\"} className=\"effect-lock\"/>\n          {track && <TrackThumbnail hasInner={true} track={track}/>}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      _locked: props.effect.locked\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackInformation from \"components/v3/sidebar/track/TrackInformation.js\";\nimport ZObjectInformation from \"components/v3/sidebar/zobject/ZObjectInformation.js\";\nimport ZMessageInformation from \"components/v3/sidebar/zobject/ZMessageInformation.js\";\nimport PadInformation from \"components/v3/sidebar/pad/PadInformation.js\";\nimport EffectInformation from \"components/v3/sidebar/effects/EffectInformation.js\";\nimport {EFFECT, ZOBJECT, ZMESSAGE, PAD, TRACK} from 'constants/object-types.js';\n\nconst ObjectInformation = ({object}) => { \n    if (!object || !object.getObjectType) {\n        return '';\n    }\n\n    if (object.pluginViewerFor) {\n        object = object.pluginViewerFor;\n    }\n    if (object.getObjectType() === TRACK) {\n        return (<TrackInformation track={object}/>);\n    } else if (object.getObjectType() === PAD) {\n        return (<PadInformation pad={object}/>);\n    } else if (object.getObjectType() === ZOBJECT) {\n        return (<ZObjectInformation zobject={object}/>);\n    } else if (object.getObjectType() === ZMESSAGE) {\n        return (<ZMessageInformation zmessage={object}/>);\n    } else if (object.getObjectType() === EFFECT) {\n        return (<EffectInformation effect={object}/>);\n    }\n    return (<div></div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SendsTrackComponent from 'components/track/SendsTrackComponent.js';\nimport {connect} from 'react-redux';\n\nimport './sends.scss';\n\nconst Sends = (props) => { \n    return (\n        <div className=\"sidebar-sends\">\n          <div className=\"label\">\n            Sends\n          </div>\n          <SendsTrackComponent sequencerEngine={props.sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sends);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {doc} from 'zobject/definitions/docs.js';\nimport './operation.scss';\n\nconst OperationDocs = ({zobject}) => { \n    let _doc = doc(zobject.name);\n    if (!_doc.operationDocs) {\n        return '';\n    }\n    let operationNames = _doc.operationDocs();\n    return (<div className=\"zobject-operations\">\n              <div className=\"label\">\n                Operations\n              </div>\n            {operationNames.map(\n                name =>\n                <div className=\"operation-type\">\n                  <div className=\"name-and-description\">\n                    <div className=\"operation-name\">\n                      {name}\n                    </div>\n                    <div className=\"operation-description\">\n                      {_doc.operationDocs(name).description}\n                    </div>\n                  </div>\n                  <div className=\"operation-args\">\n                    {Object.keys(_doc.operationDocs(name).params).map(\n                        paramName => <div className=\"operation-param\">\n                                       <div className=\"dot\"/>\n                                       <div className=\"param-name\">\n                                         {paramName}\n                                       </div>\n                                       <div className=\"param-description\">\n                                         {_doc.operationDocs(name).params[paramName]}\n                                       </div>\n                         </div>)}\n                  </div>\n                </div>)}\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OperationDocs);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport './subpatch.scss';\n\nconst SubPatchTools = ({zobject}) => { \n    let [name, setName] = useState(zobject.args[0]);\n\n    const onChange = useCallback((e) => {\n        let val = e.target.value.replaceAll(\" \", \"-\");\n        zobject.text = \"subpatch \" + val;\n        setName(val);\n    }, [zobject, setName]);\n    return (\n        <div className=\"subpatch-tools\">\n          <div className=\"label\">Name</div>\n          <input value={name} onChange={onChange} type=\"text\" className=\"subpatch-name-input\"/>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst ZObjectActions = ({actions, zobject}) => { \n    return (\n        <div className=\"zobject-actions\">\n          <div className=\"label\">Actions</div>\n        {actions.map(\n            x => <div\n                   onClick={e => zobject.executeAction(x)}\n                   className=\"action-option\">\n                   <div className=\"pushable dot\"/>\n                   {x}</div>)}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectActions);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {isNumber} from \"utils/IsNumber.js\"\nimport ZNumber from \"components/zobject/ZNumber.js\";\nimport {setObjectStyling} from 'actions/index.js';\nimport {ChromePicker} from 'react-color';\nimport {connect} from 'react-redux';\n\nconst AttributesInspector = ({zobject, setObjectStyling}) => { \n    let [style, setStyle] = useState(zobject.attributes || {'': ''});\n    let buttonRef = useRef(zobject);\n    let [focus, setFocus] = useState(undefined);\n\n    useEffect(() => {\n        buttonRef.current = zobject;\n    }, [zobject]);\n\n    useEffect(() => {\n        setStyle(zobject.attributes || {'': ''});\n    }, [zobject, setStyle]);\n    \n    useEffect(() => {\n        buttonRef.current.attributes = {... style};\n        if (!zobject.sequencerEngine.isLoading) {\n            setObjectStyling(buttonRef.current.id, {... style});\n        }\n    }, [style]);\n\n    let [showingColor, setShowingColor] = useState(undefined);\n\n    return (\n        <div className=\"attributes-inspector\">\n          <div className=\"label\">\n            Attributes\n          </div>\n          {Object.keys(style).filter(x=> x !== \"\").map(\n             (key, i) =>\n             <Styler\n               showingColor={showingColor === i}\n               key={i}\n               skey={key}\n               style={style}\n               zobject={zobject}\n               setShowingColor={(x) => setShowingColor(x === false ? undefined : i)}\n               setFocus={setFocus}\n               i={i}\n               focus={focus}\n               value={style[key]}\n               setStyle={setStyle}\n             />)}\n        </div>\n    );\n};\n\nconst Styler = ({zobject, setShowingColor, showingColor, i, focus, setFocus, skey, value, setStyle, style}) => {\n    let ref = useRef(undefined);\n    let [min, setMin] = useState(-2*Math.abs(parseFloat(value)));\n    let [max, setMax] = useState(2*Math.abs(parseFloat(value)));\n\n    useEffect(() => {\n        if (i === focus) {\n            setTimeout(() => {\n                ref.current.focus();\n            }, 10);\n        }\n    }, [i, focus]);\n\n    const onChangeKey = useCallback((e) => {\n        let text = e.target.value;\n        let _style = {... style};\n        delete _style[skey];\n        _style[text] = value;\n        _style[''] = '';\n        setStyle(_style);\n    }, [style, setStyle, skey, value]);\n\n    const onChangeValue= useCallback((e, isNum) => {\n        let text = e.target.value;\n        if (isNumber(text)) {\n            text = parseFloat(text);\n        }\n        let _style = {... style};\n        _style[skey] = text;\n        setStyle({... _style});\n        zobject.setAttribute(skey, text);\n        if (text === 0) {\n            text = 1;\n        }\n        if (isNum) {\n            setMin(-2*Math.abs(parseFloat(text)));\n            setMax(2*Math.abs(parseFloat(text)));\n        }\n    }, [style, setStyle, skey, setMax, setMin]);\n\n    if (skey === \"\") {\n        return '';\n    }\n\n    let inner = '';\n    if (typeof value === \"boolean\") {\n        // we need a checkbox here\n        inner = (\n            <input\n              className=\"boolean-checkbox\"\n              type=\"checkbox\"\n              onChange={(e) => onChangeValue({target: {value: !value}})}\n              checked={value}\n            ></input>\n        );\n    } else if (isNumber(value)) {\n        inner = (\n            <div className=\"number-and-input\">\n              <ZNumber\n                hideNumber={true}\n                znumber={{attributes: {}, max, min}} onChange={(x) => onChangeValue({target: {value: x}})} number={value} round={false}/>\n              <input\n                className=\"style-value-input\"\n                value={value}\n                type=\"text\"\n                onChange={(e) => onChangeValue(e, true)}/>\n            </div>\n        );\n    } else {\n        inner = (\n            <input\n              className=\"style-value-input\"\n              value={value}\n              type=\"text\"\n              onChange={onChangeValue}/>\n        );\n    }\n\n    return (\n        <div className=\"styler\">\n          {skey===\"Include in Presentation\" ?\n           <div className=\"icon-wrapper\">\n             Include in <img className=\"presentation-icon\" src=\"/presentation-mode.svg\"/></div> : <input\n            readOnly\n            onFocus={() => setFocus(i)}\n            ref={ref} value={skey} type=\"text\" onChange={onChangeKey}/>}\n          <div className=\"style-divider\">:</div>\n          {((skey && skey.includes(\"color\")) || (value && value.startsWith && value.startsWith(\"#\"))) ?\n           <div\n             onClick={() => setShowingColor(!showingColor)}\n             style={{backgroundColor: value}} className=\"zcolor-btn\">\n             {showingColor && <div style={{cursor: 'unset'}} onClick={e => e.stopPropagation()}>\n              <ChromePicker onChange={(x) => onChangeValue({\n                 target: {value: x.hex}})} color={{hex: value}}/>\n                              </div>}\n           </div> : \"\"}\n          {inner}\n        </div>\n    );\n};\n\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setObjectStyling: (id, styling) => dispatch(setObjectStyling(id, styling))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AttributesInspector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ConditionedCheckmark from \"components/ConditionedCheckmark.js\";\nimport {getAllNodesInSub} from \"utils/findNode.js\";\nimport {setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst ObjectConnector = ({zobject, connects, setSelectedZObject}) => { \n    let [value, setValue] = useState(undefined);\n\n    const connectObject = useCallback((object, inlet=\"Input\", outlet) => {\n        // first see if it exists\n        let found = zobject.subSequence.zObjects.find(x => x.name === object);\n        if (!found) {\n            if (object === \"pad\") {\n                if (zobject.subSequence.pads.length === 0) {\n                    found = zobject.subSequence.createPad();\n                } else {\n                    found = zobject.subSequence.pads[0];\n                }\n            } else {\n                found = zobject.subSequence.createZObject(\n                    undefined,\n                    undefined,\n                    object);\n            }\n        }\n\n        let fromObject = zobject;\n        if (outlet && outlet in zobject.outlets) {\n        } else if (outlet && zobject.effect && outlet in zobject.effect.outlets) {\n            fromObject = zobject.effect;\n        } else {\n            fromObject = zobject.effect && Object.keys(zobject.effect.outlets)[0] ?\n                zobject.effect :\n                zobject;\n        }\n\n        let obj = found;\n        if (found.effect && inlet in found.effect.inlets) {\n            found = found.effect;\n        }\n\n        found.connectInlet(\n            inlet,\n            fromObject,\n            outlet ||\n                Object.keys(zobject.outlets)[0] ||\n                (zobject.effect &&\n                 Object.keys(zobject.effect.outlets)[0]));\n\n        setValue(object);\n        setSelectedZObject(obj);\n    }, [zobject, connects, setValue]);\n\n    if (!Array.isArray(connects)) {\n        connects = [connects];\n    }\n\n    const isConnected = useCallback((object, inlet, outlet) => {\n        let outlets = {\n            ... zobject.outlets,\n            ... (zobject.effect ? zobject.effect.outlets : {})\n        };\n        let _outlet = outlet ? outlets[outlet] : outlets[Object.keys(outlets)[0]];\n        if (_outlet) {\n            return _outlet.connections.some(\n                x => x.destNode.name === object || (object === \"pad\" && x.destNode.isPad));\n        }\n    }, [zobject]);\n    \n    return (\n        <div className=\"object-connector\">\n          <div className=\"connect-help\">\n            Commonly connects with\n          </div>\n        {connects.map(\n            x =>\n                <div onClick={() => connectObject(x.object, x.inlet, x.outlet)}\n                     className={isConnected(x.object, x.inlet, x.outlet) ? \"connect-option connected \" : \"connect-option\"}>\n                  <img className=\"connects-with-icon\" src=\"/connects-with-icon.svg\"/>\n                  <div className=\"object-type\">\n                    {x.object}\n                  </div>\n                  <div className=\"inlet-type\">\n                    {x.inlet}\n                  </div>\n                  <ConditionedCheckmark\n                    className=\"guilds-checkmark\"\n                    condition={isConnected(x.object, x.inlet, x.outlet)}/>\n                </div>)}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectConnector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport OperationDocs from './OperationDocs.js';\nimport SubPatchTools from './SubPatchTools.js';\nimport ZObjectActions from './ZObjectActions.js';\nimport AttributesInspector from './AttributesInspector.js';\nimport ObjectConnector from './ObjectConnector.js';\nimport {doc} from 'zobject/definitions/docs.js';\nimport {connect} from 'react-redux';\n\nconst ZObjectTools = ({zobject, name, inputText}) => { \n    if (zobject.pluginViewerFor) {\n        zobject = zobject.pluginViewerFor;\n    }\n    let [value, setValue] = useState();\n    const onClick = useCallback((op) => {\n        zobject.text = op;\n        setValue(op);\n    }, [zobject, setValue]);\n\n    const sendBang = useCallback(() => {\n        zobject.bang();\n    }, [zobject]);\n\n    const onClickOperation = useCallback((operation, args) => {\n        // create a message\n        let zmessage = zobject.subSequence.createZMessage(\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            operation + ' ' + args.map(x => 0).join(' ')\n            );\n        zobject.connectInlet(\"Input\", zmessage, Object.keys(zmessage.outlets)[0]);\n    }, [zobject]);\n\n    if (!zobject.name || zobject.name === \"\") {\n        let tags = doc(1);\n        let sorted = Object.keys(tags).sort();\n        return sorted.map(\n            tag =>\n                <div className=\"zobject-tag multi-object\">\n                  <div className=\"tag-name\">{tag}</div>\n                  <div className=\"tag-options\">\n                    {tags[tag].sort().map(\n                        option =>\n                            <div onClick={() => onClick(option)} className=\"tag-option\">\n                              <div className=\"operation\">{option}</div>\n                              <div className=\"description\">{doc(option).description}</div>\n                            </div>)}\n                  </div>\n                </div>);\n    }\n    let d = doc(zobject.name);\n    if (d) {\n        let tag = d.tags;\n        if (Array.isArray(tag)) {\n            tag = tag[0];\n        } else if (!tag) {\n            tag = \"Object\";\n        }\n\n        if (zobject.plugin) {\n            tag = \"Plugin\";\n        }\n\n        let params = {... d.params};\n        if (Array.isArray(d.inlets)) {\n            params = {};\n            d.inlets.forEach(\n                inlet => params[inlet] = d.params[inlet] || \"\");\n        }\n        let operations = {... d.operations};\n\n        let actions = Object.keys(zobject.actions);\n        return (\n            <div className=\"zobject-tag single-object\">\n              {/*<div onClick={sendBang} className=\"bang-btn\">send bang</div>*/}\n              <div className=\"tag-name\">{tag}</div>\n              <div className=\"tag-options\">\n                <div className=\"tag-option\">\n                  <div className=\"operation\">{zobject.plugin ? zobject.plugin.name : zobject.name}</div>\n                  <div className=\"description\">{zobject.plugin ? \"\" : d.description}</div>\n                  <div className=\"args\">\n                    {Object.keys(params).map(\n                        paramName =>\n                        <div className=\"param\">\n                          <img className=\"operation-icon\" src=\"/operation-icon.svg\"/>\n                          <div className=\"param-name\">\n                            {paramName}\n                          </div>\n                          <div className=\"param-description\">\n                            {params[paramName]}\n                          </div>\n                        </div>)}\n                  </div>\n                </div>\n              </div>\n              {!zobject.plugin && zobject.name === \"subpatch\" && <SubPatchTools zobject={zobject}/>}\n              {operations && Object.keys(operations).length > 0 &&\n              <div className=\"tag-name\">\n                Operations\n                <div className=\"operation-help-text\">\n                  (via left-inlet)\n                </div>\n              </div>}\n              {Object.keys(operations).length > 0 && <div className=\"tag-options\">\n                <div className=\"tag-option\">\n                  <div className=\"operations\">\n                    {Object.keys(operations).filter(\n                        operation => operation[operation] && operation[operation].parameters)\n                     .map(\n                          operation =>\n                        <div className=\"operation-option\">\n                          <img className=\"operation-icon\" src=\"/operation-icon.svg\"/>\n                          <div className=\"operation-and-description\">\n                            <div className=\"operation\">\n                              <div onClick={() => onClickOperation(operation, operations[operation].parameters)} className=\"operation-btn\">{operation}</div>{operations[operation].parameters.map(x => <span className=\"operation-arg\">{x}</span>)}\n                            </div>\n                            <div className=\"description\">\n                              {operations[operation].description}\n                            </div>\n                          </div>\n                        </div>)}\n                    </div>\n                  </div>\n                                                     </div>}\n              {d.connects && <ObjectConnector zobject={zobject} connects={d.connects}/>}\n              <AttributesInspector zobject={zobject}/>\n              {/* {actions.length > 0 && <ZObjectActions zobject={zobject} actions={actions}/>} */}\n              <OperationDocs zobject={zobject}/>\n            </div>);\n    }\n    return (<div></div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      name: props.zobject.name,\n      inputText: state.spatial.zobjectInputText\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\n\nconst PadQuickEffects = ({pad}) => { \n    return (\n        <TrackEffects hasMidi={false} needsLabel={true} showEffect={true} track={pad}/> );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadQuickEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PadQuickEffects from './PadQuickEffects.js';\nimport {connect} from 'react-redux';\nimport PadVisualizer from \"components/pads/PadVisualizer.js\";\nimport './pads.scss';\n\nconst PadToolsSidebar = ({pad}) => { \n    return (\n        <div className=\"tools-sidebar PAD\">\n          <PadVisualizer width={240} pad={pad}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadToolsSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport ParameterKnob from \"components/knobs/ParameterKnob.js\";\n\n\nconst names = ['A', 'B', 'C', 'D'];\nconst TrackQuickSends = ({track}) => { \n    let sends = track.sequencerEngine.sends.sends;\n    return (\n       <div className=\"track-quick-sends\">\n         <div className=\"label\">\n           Sends\n         </div>\n        <div className=\"send-knobs\">\n          {track.sendNodeVolumeParameters.filter(\n              (x,i) => sends[i] && !sends[i].pad).map(\n            (send, i) =>\n                <div className=\"send-knob\">\n                  <ParameterKnob\n                    sequencerEngine={track.sequencerEngine}\n                    min={-40} parameter={send}/>\n                  <div className=\"send-name\">\n                    {names[i]}\n                  </div>\n                </div>)}\n        </div>\n       </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickSends);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EnvelopeOptions from \"components/track/EnvelopeOptions.js\";\nimport {connect} from 'react-redux';\n\nconst TrackQuickEnvelopes = ({track}) => { \n    return (\n        <div className=\"track-quick-envelopes\">\n          <div className=\"label\">\n            Envelopes\n          </div>\n          <EnvelopeOptions track={track}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickEnvelopes);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useWindowSlider} from \"components/hooks/useWindowSlider.js\";\nimport {connect} from 'react-redux';\n\nconst WarpKnob = ({track, warp, bpm, warpLength, warpFactor}) => { \n    let resolvedTempo = Math.round((bpm / warpLength)*10)/10.0;\n    \n    const setValue = useCallback((value) => {\n        let warpLength = bpm / value;\n        warp.warpLengthParameter.set(warpLength, false);\n    }, [warp, bpm]);\n\n    const down = useCallback(() => {\n        warp.warpFactorParameter.set(warpFactor * 2, false);\n    }, [warpFactor, warp]);\n\n    const up = useCallback(() => {\n        warp.warpFactorParameter.set(warpFactor / 2, false);\n    }, [warpFactor, warp]);\n\n    const {onMouseDown, editing} = useWindowSlider({min: 45, max: 200, setValue, value: resolvedTempo});\n\n    return [\n        <div onMouseDown={onMouseDown} className={editing ? \"warp-knob editing\" : \"warp-knob\"}>\n          <span className=\"warp-tempo\">{resolvedTempo}</span> bpm\n        </div>,\n        <div className={\"warp-factor\"}>\n          <div onClick={up} className=\"arrow-up\"/>\n          <div className=\"factor-value\">{2 / warpFactor}x</div>\n          <div onClick={down} className=\"arrow-down\"/>\n        </div>\n    ];\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      bpm: props.track.sequencerEngine.bpm,\n      warpLength: props.warp ? props.warp.warpLength : 1,\n      warpFactor: props.warp ? props.warp.warpFactor: 2\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WarpKnob);\n","import React, {useState, useEffect, useCallback} from 'react';\n\nexport const useWindowSlider = ({min, max, setValue, value}) => {\n    let [editing, setEditing] = useState(false);\n\n    useEffect(() => {\n        window.addEventListener('mousemove', onMouseMove);\n        window.addEventListener('mouseup', onMouseUp);\n\n        return () => {\n            window.removeEventListener('mousemove', onMouseMove);\n            window.removeEventListener('mouseup', onMouseUp);\n        };\n    }, [editing, min, max, setValue, value]);\n\n    const onMouseMove = useCallback((e) => {\n        if (editing) {\n            console.log('editing');\n            let {y, number} = editing;\n            let {pageY} = e;\n            let distY = y - pageY;\n            let ratio = Math.pow(distY / y, 2);\n            if (distY < 0) {\n                ratio *= -1;\n            }\n            let _number = ratio*(max - (min+0.001)) + number;\n            console.log(\"Number = \", _number);\n            _number = Math.max(min, Math.min(max, _number));\n            if (_number !== value) {\n                setValue(_number);\n            }\n        }\n    }, [min, editing, max, value, setValue]);\n\n    const onMouseUp = useCallback(() => {\n        setEditing(false);\n    }, [setEditing]);\n\n    const onMouseDown = useCallback((e) => {\n        setEditing({number: value, y: e.pageY});\n    }, [setEditing, value]);\n\n    return {\n        editing,\n        onMouseDown\n    };\n    \n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport LockButton from \"components/LockButton.js\";\nimport {freezePatterns} from 'components/v2/trackRightClickActions.js';\nimport WarpKnob from './WarpKnob.js';\nimport WarpButton from \"components/WarpButton.js\";\nimport {setShowTrackInstrument} from 'actions/index.js';\nimport DetailsView from \"components/DetailsView.js\"\nimport {AUDIO_FX, MIDI_FX} from 'constants/effect-types.js';\nimport {\n    setPulledEffects,\n    setSelectedMixEffect,\n} from 'actions/index.js';\nimport {getInstrumentComponent} from \"components/effects/getInstrumentComponent.js\";\nimport {connect} from 'react-redux';\nimport './instrument.scss';\n\nconst TrackQuickInstrument = ({\n    isFrozen,\n    locked,\n    track,\n    isWarped,\n    show,\n    setShow,\n    clearSelectedEffect,\n    setPulledEffects,\n    planar\n}) => { \n    let ref = useRef();\n    let wrapperRef = useRef();\n\n    const flip = useCallback(() => {\n        setShow(!show);\n    }, [show, setShow]);\n\n    useEffect(() => {\n        if (show) {\n            clearSelectedEffect(AUDIO_FX);\n            clearSelectedEffect(MIDI_FX);\n        }\n    }, [show]);\n\n    const pullPlanar = useCallback(() => {\n        let pulledEffects = track.state.effects.pulledEffects || [];\n        setPulledEffects([... pulledEffects, planar]);\n    }, [track, planar]);\n\n    return (\n        <div ref={ref} className=\"quick-instrument\">\n          <div className=\"label\">\n            Instrument\n          </div>\n          <LockButton\n            patternLocked={locked}\n            toggleLock={() => track.togglePatternLock()}/>\n          {!isFrozen &&\n           <div\n             onClick={() => isFrozen ? track.unfreeze() : freezePatterns(track)}\n             className={isFrozen ? \"pushable freeze-btn frozen\" : \"pushable freeze-btn\"}>\n             <img className=\"freeze-icon\" src=\"/freeze-icon.svg\"/> {isFrozen ? \"Unfreeze\" : \"Freeze\"}\n           </div>}\n          <div className=\"instrument-items\">\n          <div onClick={flip} className={show ? \"pushable instrument-button show\" : \"pushable instrument-button\"}>\n            {track.instrument ? track.getName() :\"Sampler\"}\n          </div>\n            {track.sample && <WarpButton track={track}/>}\n            {isWarped && <WarpKnob warp={getWarp(track)} track={track}/>}\n          </div>\n        </div>\n    );\n};\n\nconst getWarp = (track) => {\n    return track.midiEffects.effects.find(x => x.name === \"Warp\");\n};\n\nconst mapStateToProps = (state, props) => {\n    let subSequenceId = props.track.subSequence.id;\n    let locked = false;\n    if (props.track !== undefined) {\n        let subSequenceLocks = state.tracks.trackPatternLocks[props.track.subSequence.id] || {};\n        let patterns = subSequenceLocks[props.track.trackNumber] || {};\n        locked = patterns[props.track.currentPattern] || false;\n    }\n \n    return {\n        locked,\n        isFrozen: props.track.isFrozen,\n        planar: state.effects.planar[props.track.id],\n        show: state.spatial.showTrackInstrument,\n        midiEffects: props.track.midiEffects.effects.length,\n        isWarped: state.tracks.trackWarps[subSequenceId] &&\n            state.tracks.trackWarps[subSequenceId][props.track.trackNumber]\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setPulledEffects: m => dispatch(setPulledEffects(m)),\n      setShow: x => dispatch(setShowTrackInstrument(x)),\n      clearSelectedEffect: (type) => \n            dispatch(\n                setSelectedMixEffect(\n                    props.track.subSequence.id, props.track.id, undefined, type, undefined)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickInstrument);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\nimport MidiEffects from \"components/mix/mix2/MidiEffects.js\";\n\nconst TrackQuickEffects = ({track}) => { \n    return track && track.effects && (\n        <TrackEffects\n          hasMidi={true}\n          needsLabel={true}\n          showEffect={true}\n          track={track}/>);\n    \n    ;\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      effects: props.track && props.track.effects ? props.track.effects.length : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectParameterSlider from \"components/effects/EffectParameterSlider.js\";\nimport {SAMPLER} from 'constants/track-types.js';\nimport CheckboxParameter from \"components/effects/CheckboxParameter.js\";\nimport {connect} from 'react-redux';\nimport ChokesAndMatches from 'components/sidebar/ChokesAndMatches.js';\nimport {makeInstrumentRack} from \"components/v2/trackRightClickActions.js\"\n\nconst TrackQuickAux = ({track}) => { \n    let [show, setShow] = useState(false);\n    return (\n        <div className=\"sidebar-section\">\n          <div onClick={() => setShow(true)} className={show ? \"label show-aux showing\" : \"label show-aux\"}>\n            Aux\n        <div className=\"plus-minus\">\n          {show && <div\n            onClick={(e) => {\n                e.stopPropagation();\n                setShow(false);\n            }}\n                     className=\"plus minus\">-</div>}\n          <div className=\"plus\">+</div>\n        </div>\n          </div>\n          {show && <div>\n          <div className=\"label\">\n            Chokes\n          </div>\n          <ChokesAndMatches sequencerEngine={track.sequencerEngine} track={track}/>\n          <CheckboxParameter name=\"Skip Module Midi\" parameter={track.skipMidiMasterParameter}/>\n          {track.getTrackType() === SAMPLER &&\n           <div onClick={() => makeInstrumentRack(track)} className=\"convert-to-rack pushable\">\n             Convert to Sampled Instrument\n           </div>}\n          {track.getTrackType() === SAMPLER &&\n           track.getSamplers()[0] &&\n           track.getSamplers()[0].detuneParameter &&\n           <EffectParameterSlider parameter={track.getSamplers()[0].detuneParameter}\n           name=\"Detune\"\n           min={-1000}\n           max={1000}\n                                  step={0.1}\n           sequencerEngine={track.sequencerEngine}\n           />}\n                   </div>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickAux);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {freezePatterns} from 'components/v2/trackRightClickActions.js';\nimport TrackFrozenComponent from \"components/v2/TrackFrozenComponent.js\";\nimport Colors from 'components/Colors.js';\nimport CheckboxParameter from \"components/effects/CheckboxParameter.js\";\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst TrackFreezes = ({isFrozen, track}) => { \n    return (\n        <div className=\"sidebar-section\">\n          <div className=\"label\">\n            Freeze\n          </div>\n          {isFrozen ?\n           <TrackFrozenComponent\n             track={track}\n             trackColor={colors.getColorForTrack(track)}\n             isTrackFrozen={true}/> : \n           <div onClick={() => freezePatterns(track)} className=\"freeze-button\">\n             Freeze Track\n           </div>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isFrozen: props.track.isFrozen\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackFreezes);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackQuickSends from './TrackQuickSends.js';\nimport TrackQuickEnvelopes from './TrackQuickEnvelopes.js';\nimport TrackQuickInstrument from './TrackQuickInstrument.js';\nimport TrackQuickEffects from './TrackQuickEffects.js';\nimport {connect} from 'react-redux';\nimport TrackInformation from './TrackInformation.js';\nimport './tracktools.scss';\nimport TrackParameters from './TrackParameters.js';\nimport TrackQuickAux  from './TrackQuickAux.js';\nimport TrackFreezes from './TrackFreezes.js';\nimport AuditionSidebar from \"components/v3/sidebar/audition/AuditionSidebar.js\";\n\nconst TrackToolsSidebar = ({track}) => { \n    return (\n        <div className=\"sidebar-tools TRACK\">\n          <TrackParameters track={track}/>\n          {/*<AuditionSidebar object={track} sequencerEngine={track.sequencerEngine}/>*/}\n          <TrackQuickInstrument track={track}/>\n\n          {/*<TrackQuickEffects track={track}/>*/}\n          <TrackQuickEnvelopes track={track}/>\n          {<TrackQuickSends track={track}/>}\n          {/*<TrackFreezes track={track}/>*/}\n          <TrackQuickAux track={track}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      id: props.track.id,\n      name: props.track.name,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackToolsSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport AttributesInspector from './AttributesInspector.js';\nimport {connect} from 'react-redux';\nimport ZNumberInspector from \"components/sidebar/ZNumberInspector.js\"\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\nimport './zmessage.scss';\n\nconst ZMessageTools = ({zmessage}) => { \n    let tools = []\n    if (zmessage.type === NUMBER) {\n        tools.push(<ZNumberInspector key={1} znumber={zmessage}/>);\n    } \n\n    tools.push(<AttributesInspector zobject={zmessage}/>);\n\n    return tools;\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZMessageTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PlaneSidebar from \"components/effects/plane/PlaneSidebar.js\";\nimport {connect} from 'react-redux';\nimport {\n    setPlanarRegionMode,\n    setPlanarMacroToShow,\n    setFilteredPlanarParameters,\n    setSelectedPlanarParameters,\n    setEffectParameterValues} from 'actions/index.js';\n\nconst PlaneTools = ({\n    effect,\n    setIsRegionMode,\n    setMacroToShow,\n    setSelected,\n    setFilteredParameters,\n    selected=[],\n    filteredParameters,\n    macroToShow,\n    isRegionMode\n}) => { \n    return (\n        <div className=\"plane-parameters\">\n          <div className=\"plane-inner\">\n            <PlaneSidebar\n              setSelectedColor={() => 0}\n              macroToShow={macroToShow}\n              setMacroToShow={setMacroToShow}\n              isBoundsMode={isRegionMode}\n              setSelected={setSelected}\n              expanded={false}\n              filteredParameters={filteredParameters}\n              setFilteredParameters={setFilteredParameters}\n              selected={selected}\n              effect={effect}\n              setSelected={setSelected}\n            />\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selected: state.plane.selectedParameters[props.effect.id],\n        filteredParameters: state.plane.filteredParameters[props.effect.id],\n        macroToShow: state.plane.macroToShow[props.effect.id],\n        isRegionMode: state.plane.regionMode[props.effect.id]\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n        setIsRegionMode: x => dispatch(setPlanarRegionMode(props.effect.id, x)),\n        setMacroToShow: x => dispatch(setPlanarMacroToShow(props.effect.id, x)),\n        setSelected: x => dispatch(setSelectedPlanarParameters(props.effect.id, x)),\n        setFilteredParameters: x => dispatch(setFilteredPlanarParameters(props.effect.id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlaneTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PlaneTools from './PlaneTools.js';\nimport {connect} from 'react-redux';\nimport './effects.scss';\n\nconst EffectTools = ({effect}) => { \n    let context = '';\n    switch (effect.name) {\n    case \"Plane Parameters\":\n        context = (<PlaneTools effect={effect}/>);\n        break;\n    }\n    return (\n        <div className=\"effect-tools\">\n          {effect.documentation &&\n           <div className=\"effect-documentation\">\n             {effect.documentation}\n           </div>}\n          {context}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ZObjectTools from './zobject/ZObjectTools.js';\nimport PadToolsSidebar from './pad/PadToolsSidebar.js';\nimport {EFFECT, ZOBJECT, ZMESSAGE, PAD, TRACK} from 'constants/object-types.js';\nimport {connect} from 'react-redux';\nimport TrackToolsSidebar from './track/TrackToolsSidebar.js';\nimport ZMessageTools from './zobject/ZMessageTools.js';\nimport EffectTools from './effects/EffectTools.js';\n\nconst ToolsSidebar = ({object, sequencerEngine}) => { \n    let inner = '';\n    if (!object.getObjectType) {\n        return '';\n    }\n    switch (object.getObjectType()) {\n    case TRACK:\n        inner = <TrackToolsSidebar track={object}/>;\n        break;\n    case PAD:\n        inner = <PadToolsSidebar pad={object}/>;\n        break;\n    case ZMESSAGE:\n        inner = <ZMessageTools zmessage={object}/>;\n        break;\n    case ZOBJECT:\n        inner = <ZObjectTools zobject={object}/>;\n        break;\n    case EFFECT:\n        inner = <EffectTools effect={object}/>;\n        break;\n    }\n    return (\n        <div className=\"tools-sidebar\">\n          {inner}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolsSidebar);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport RecentlyAddedSounds from './recent/RecentlyAddedSounds.js';\nimport PluginsViewer from \"components/v3/sidebar/plugins/PluginsViewer.js\"\nimport TrackParameters from \"./track/TrackParameters.js\";\nimport TrackInformation from \"components/v3/sidebar/track/TrackInformation.js\";\nimport InstrumentViewer from './track/InstrumentViewer.js';\nimport {EFFECT, ZOBJECT, ZMESSAGE, PAD, TRACK} from 'constants/object-types.js';\nimport ObjectInformation from \"components/v3/sidebar/ObjectInformation.js\";\nimport Sends from './Sends.js';\nimport {\n    setShowTrackInstrument,\n    setSelectedZObject,\n    setRightSidebarOption} from 'actions/index.js';\nimport QuickSampleChooser from \"components/sidebar/QuickSampleChooser.js\";\nimport ToolsSidebar from './ToolsSidebar.js';\nimport AuditionSidebar from './audition/AuditionSidebar.js';\nimport Navigator from './Navigator.js';\nimport {connect} from 'react-redux';\nimport './sidebar.scss';\n\nconst RightSidebar = ({\n    setSelectedZObject,\n    setShowTrackInstrument,\n    secondaryZObject,\n    show,\n    sequencerEngine,\n    position,\n    selectedZObject,\n    selectedTrack,\n    selectedSteps,\n    setOption,\n    option,\n    showPlugins,\n    showTrackInstrument\n}) => { \n    let ref = useRef();\n\n    useEffect(() => {\n        if (selectedSteps && selectedSteps.length > 0) {\n            setOption(\"Tools\");\n        }\n    }, [setOption, selectedSteps]);\n\n    useEffect(() => {\n        if (selectedZObject && selectedZObject.isFrozen) {\n            setOption(\"Tools\");\n        }\n    }, [setOption, selectedZObject]);\n\n    useEffect(() => {\n        if (!selectedZObject) {\n            setShowTrackInstrument(undefined);\n        }\n    }, [selectedZObject]);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKey);\n        return () => window.removeEventListener(\"keydown\", onKey);\n    }, [setOption, option]);\n\n    const onKey = useCallback((e) => {\n        if (e.target.tagName === 'INPUT' ||\n            e.target.tagName === 'TEXTAREA') {\n            return;\n        }\n            \n        if (e.key === \"Tab\" && e.shiftKey) {\n            setOption(option === \"Tools\" ? \"Audition\" : \"Tools\");\n        }\n    }, [setOption, option]);\n\n    if (!show) {\n        return '';\n    }\n\n\n    let className = selectedZObject ? \"right sidebar \" + option : \"right sidebar\";\n    if (showPlugins) {\n        return (\n            <div ref={ref} className={className}>\n              <PluginsViewer sequencerEngine={sequencerEngine}/>\n            </div>\n        );\n    }\n    return [\n        showTrackInstrument && selectedZObject && selectedZObject.getObjectType() === TRACK &&\n            <InstrumentViewer track={selectedZObject}/>,\n        <div ref={ref} className={className}>\n          {selectedZObject && <Navigator\n                                zobject={selectedZObject}\n                                showSave={option === \"Audition\"}\n                                option={option} setOption={setOption}\n                                options={\n                                  selectedZObject && selectedZObject.isFrozen ? \n                                        [\"Tools\"] : \n                                    [\"Tools\", \"Audition\"]}/>}\n          {selectedZObject && <ObjectInformation object={selectedZObject}/>}\n          {sequencerEngine && !selectedZObject && <QuickSampleChooser sequencerEngine={sequencerEngine}/>}\n          {selectedZObject && option === \"Tools\" ? <ToolsSidebar object={selectedZObject} sequencerEngine={sequencerEngine}/>\n           : selectedZObject && <AuditionSidebar object={selectedZObject} sequencerEngine={sequencerEngine}/>}\n          <div\n            onClick={() => setSelectedZObject(selectedTrack)}\n            className=\"mini-track-information\">{sequencerEngine && !selectedZObject && selectedTrack &&\n           <TrackInformation track={selectedTrack}/>}\n          </div>\n          {sequencerEngine && !selectedZObject \n           && <RecentlyAddedSounds sequencerEngine={sequencerEngine}/>}\n          {sequencerEngine && !selectedZObject && sequencerEngine.tracks &&\n           sequencerEngine.tracks.length > 0 && <Sends sequencerEngine={sequencerEngine}/>}\n          {secondaryZObject && <ObjectInformation object={secondaryZObject}/>}\n        {secondaryZObject && option === \"Tools\" ? <ToolsSidebar object={secondaryZObject} sequencerEngine={sequencerEngine} /> : ''}\n        </div>\n    ];\n}\n\nconst mapStateToProps = (state, props) => {\n    let selected = state.zobject.selectedZObject;\n    return {\n        selectedZObject: selected,\n        show: state.spatial.sidebarsShowing,\n        selectedSteps: state.keyboard.selectedPianoRollSteps,\n        showTrackInstrument: state.spatial.showTrackInstrument,\n        secondaryZObject: state.zobject.secondaryZObject,\n        option: state.audition.rightSidebarOption,\n        showPlugins: state.plugins.showPlugins,\n        selectedTrack: props.sequencerEngine && props.sequencerEngine.getSelectedTrack(),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setOption: x => dispatch(setRightSidebarOption(x)),\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setShowTrackInstrument: x => dispatch(setShowTrackInstrument(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RightSidebar);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {\n    setContextualHelp,\n    setSelectorMode,\n    setSidebarViewMode\n} from 'actions/index.js';\nimport {\n    ADD_SOUNDS_BUTTON,\n    ADD_INSTRUMENTS_BUTTON,\n    ADD_PRESETS_BUTTON,\n    ADD_SEQUENCES_BUTTON} from 'constants/contextual-help.js';\nimport {\n    SOUNDS,\n    EXTERNAL,\n    SEQUENCES,\n    PRESETS,\n    PACKS,\n    INSTRUMENTS,\n    NOTES} from 'constants/sidebar-view-modes.js';\n\nclass OptionTabs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.onClickOption = this.onClickOption.bind(this);\n        this.clear = this.clear.bind(this);\n    }\n\n    clear() {\n        this.props.setSelectorMode(false);\n        this.props.setSidebarViewMode(SOUNDS);\n    }\n\n    onClickOption(option) {\n        this.clear();\n        if (option === SOUNDS) {\n            this.props.setSelectorMode(true);\n        } \n\n        this.props.setSidebarViewMode(option);\n    }\n\n    getSelectedOption() {\n        return this.props.sidebarViewMode;\n    }\n\n    render() {\n        let selectedOption = this.getSelectedOption();\n        return (\n            <div className=\"option-tabs\">\n              <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_SOUNDS_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={SOUNDS}\n                selectedOption={selectedOption === SOUNDS && this.props.showSelectorMode ? SOUNDS : undefined}\n                name=\"SOUNDS\"/>\n              <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_INSTRUMENTS_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={INSTRUMENTS} selectedOption={selectedOption} name=\"INSTRUMENTS\"/>\n            <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_SEQUENCES_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={SEQUENCES} selectedOption={selectedOption} name=\"PROJECTS\"/>\n            <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_SEQUENCES_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={PACKS} selectedOption={selectedOption} name=\"PACKS\"/>\n            </div>\n        );\n    }\n}\n\nclass OptionTab extends Component {\n    isSelected() {\n        return this.props.selectedOption ===\n            this.props.option;\n    }\n\n    onClick() {\n        if (this.isSelected()) {\n            this.props.onClear();\n        } else {\n            this.props.onClick(this.props.option);\n        }\n    }\n    render() {\n        return (\n            <div\n              onMouseOver={this.props.onMouseOver}\n              onMouseLeave={this.props.onMouseLeave}\n              onClick={() => this.onClick()}\n              className={this.isSelected() ? \"option-tab selected\" : \"option-tab\"}>\n              {this.props.name}\n              {this.isSelected() && !this.props.hideUnderline ? <div className=\"option-tab-underline\"/> : ''}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectorMode: m => dispatch(setSelectorMode(m)),\n        setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n        setContextualHelp: m => dispatch(setContextualHelp(m)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        showSelectorMode: state.sequencer.showSelectorMode,\n        sidebarViewMode: state.sequencer.sidebarViewMode,\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OptionTabs);\n","import Modal from 'react-bootstrap/Modal';\nimport { Button } from 'reactstrap';\nimport React, { Component } from 'react';\nimport { Badge} from 'reactstrap';\nimport Dropdown from 'react-dropdown'\n\nclass PresetModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            sharingMode: false,\n            usersInGuilds: [],\n            usersToShare: [],\n            shareToAll: false,\n        }\n    }\n\n    async onClickShare() {\n        this.setState({\n            sharingMode: true\n        });\n    }\n\n    executeShare() {\n        if (this.state.shareToAll) {\n            this.props.ethereum.guilds.sharePresetWithAllGuilds(\n                this.props.preset.id);\n        } else {\n           for (let i in this.state.usersToShare) {\n                let userId = this.state.usersToShare[i].userId;\n                let presetId = this.props.preset.id;\n                this.props.presets.sharePreset(\n                    presetId, userId);\n            }\n        }\n\n        this.clear();\n        this.props.onClose();\n    }\n\n    clear() {\n        this.setState({\n            sharingMode: false,\n            usersToShare: [],\n            usersInGuilds: [],\n            shareToAll: false,\n        });\n    }\n\n    onSelectUser(user) {\n        this.setState({usersToShare: this.state.usersToShare.concat([user])});\n    }\n\n    getUserOptions() {\n        let options = [];\n        for (let i in this.state.usersInGuilds) {\n            let user = this.state.usersInGuilds[i];\n            options.push({label: user.userName, value: user});\n        }\n\n        return options;\n    }\n\n    onClickNo() {\n        this.clear();\n        this.props.onClose();\n    }\n\n    onShareToAllCheckbox(val) {\n        this.setState({shareToAll: !this.state.shareToAll});\n    }\n\n    render() {\n        let name = this.props.preset !== undefined ? this.props.preset.name : '';\n        if (this.state.sharingMode) {\n            return (\n                <Modal dialogClassName=\"preset-modal\" show={this.props.show} onHide={this.props.onClose}>\n              <Modal.Header closeButton>\n                <Modal.Title>{name}</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <Dropdown\n                    className=''\n                    options={this.getUserOptions()}\n                    onChange={(o) => this.onSelectUser(o.value)}\n                    value={undefined}\n                    placeholder=\"Share with users\" />\n\n                  {this.state.usersToShare.map(user => <Badge>{user.userName}</Badge>)}\n                    <form>\n                    <div className=\"refined-checkbox-preferences\">\n                      <label>\n                        <input \n                               type=\"checkbox\"\n                               value=\"share\"\n                               checked={this.state.shareToAll}\n                               onChange={(e) => this.onShareToAllCheckbox(e.target.value)} />\n                    Share with all guild members\n                      </label>\n                    </div>\n              </form>\n              </Modal.Body>\n              <Modal.Footer>\n                <Button variant=\"secondary\" onClick={() => this.executeShare()}>\n                  Yes\n                </Button>\n                    <Button variant=\"primary\" onClick={() => this.onClickNo()}>\n                  No\n                </Button>\n              </Modal.Footer>\n            </Modal>\n            );\n        }\n        return (\n            <Modal dialogClassName=\"preset-modal\" show={this.props.show} onHide={this.props.onClose}>\n              <Modal.Header closeButton>\n                <Modal.Title>{name}</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>Do you want to replace this project's LFOs with this preset's LFOs?</Modal.Body>\n              <Modal.Footer>\n                <Button variant=\"secondary\" onClick={this.props.onClickYes}>\n                  Yes\n                </Button>\n                <Button variant=\"primary\" onClick={this.props.onClickNo}>\n                  No\n                </Button>\n                <Button variant=\"primary\" onClick={() => this.onClickShare()}>\n                  Share\n                </Button>\n              </Modal.Footer>\n            </Modal>\n        );\n    }\n}\n\nexport default PresetModal;\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {\n    SYNTH,\n    MULTI_SYNTH,\n    Z4,\n    SAMPLED_INSTRUMENT,\n    FM_SYNTH,\n    METAL_SYNTH} from 'constants/instrument-types.js';\nimport {\n    setContextualHelp,\n    setInstrumentTypeDragging\n} from 'actions/index.js';\nimport {ADD_SYNTH_BUTTON,\n        ADD_MULTI_SYNTH_BUTTON,\n        ADD_FM_SYNTH_BUTTON,\n       ADD_EXTERNAL_INSTRUMENT_BUTTON} from 'constants/contextual-help.js';\nimport '../../Instruments.scss';\n\nclass InstrumentsView extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onClickSynth() {\n        this.props.sequencerEngine.addInstrumentTrack();\n    }\n\n    onClickMultiSynth() {\n        this.props.sequencerEngine.addMultiSynthTrack();\n    }\n\n    onClickMultiSampler() {\n        this.props.sequencerEngine.addSampledInstrumentTrack();\n    }\n\n    onClickMetalSynth() {\n        this.props.sequencerEngine.addMetalSynthTrack();\n    }\n\n    onClickFMSynth() {\n        this.props.sequencerEngine.addFMSynthTrack();\n    }\n\n    onClickZ4Track() {\n        this.props.sequencerEngine.addZ4Track();\n    }\n\n    onClickExternalInstrument() {\n        this.props.sequencerEngine.addMidiTrack();\n    }\n\n    onClickInstrumentRack() {\n        this.props.sequencerEngine.addInstrumentRackTrack();\n    }\n\n    onDragStart(type) {\n        if (type === undefined) {\n            return;\n        }\n        this.props.setInstrumentTypeDragging(type);\n    }\n\n    render() {\n        return (\n            <div className=\"instruments-view\">\n              <InstrumentOption\n                type={SAMPLED_INSTRUMENT}\n               onDragStart={(type) => this.onDragStart(type)}\n                onMouseOver={() => this.props.setContextualHelp(ADD_FM_SYNTH_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClick={() => this.onClickMultiSampler()}\n                name=\"Sampled Instrument\"\n                />\n             <InstrumentOption\n               onDragStart={(type) => this.onDragStart(type)}\n                type={MULTI_SYNTH}\n                onMouseOver={() => this.props.setContextualHelp(ADD_MULTI_SYNTH_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClick={() => this.onClickMultiSynth()}\n                name=\"Synth\"/>\n             <InstrumentOption\n               onDragStart={(type) => this.onDragStart(type)}\n                onMouseOver={() =>\n                  this.props.setContextualHelp(ADD_EXTERNAL_INSTRUMENT_BUTTON)}\n                onClick={() => this.onClickExternalInstrument()}\n                onMouseLeave={() =>\n                  this.props.setContextualHelp(undefined)}\n                name=\"External Instrument\"/>\n             <InstrumentOption\n               onDragStart={(type) => this.onDragStart(type)}\n                onMouseOver={() =>\n                  this.props.setContextualHelp(ADD_EXTERNAL_INSTRUMENT_BUTTON)}\n                onClick={() => this.onClickInstrumentRack()}\n                onMouseLeave={() =>\n                  this.props.setContextualHelp(undefined)}\n                name=\"Instrument Rack\"/>\n            </div>);\n    }\n}\n\nclass InstrumentOption extends Component {\n    render() {\n        return (\n            <div\n              draggable\n              onDragOver={(e) => e.preventDefault()}\n              onDragStart={() => this.props.onDragStart(this.props.type)}\n              onMouseOver={this.props.onMouseOver}\n              onMouseLeave={this.props.onMouseLeave}\n              className=\"instrument-option\">\n              <span\n                onClick={this.props.onClick}\n                className=\"instrument-option-name\">\n                {this.props.name}\n              </span>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setContextualHelp: (help) => dispatch(setContextualHelp(help)),\n        setInstrumentTypeDragging: (type) => dispatch(setInstrumentTypeDragging(type))\n    }\n};\n \nexport default connect(null, mapDispatchToProps)(InstrumentsView);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PadPacks from './PadPacks.js';\nimport ZNumberInspector from './ZNumberInspector.js';\nimport {NUMBER} from \"zobject/data-types.js\";\nimport PresetsExplorer from \"components/installation/PresetsExplorer.js\";\nimport {connect} from 'react-redux';\nimport {\n    setTrackPresetSaving} from 'actions/index.js';\n\nconst ZObjectSidebar = ({zobject, setTrackPresetSaving, searchText}) => { \n    const savePreset = useCallback(() => {\n        setTrackPresetSaving(zobject);\n    }, [zobject]);\n\n    let {numInlets, numOutlets} = zobject;\n    if (zobject.effect) {\n        numInlets += zobject.effect.numInlets;\n        numOutlets += zobject.effect.numOutlets;\n    }\n    return (\n        <div className=\"zobject-sidebar\">\n          {zobject.type === NUMBER &&\n           <div className=\"z-object-inspector\">\n             <div className=\"z-object-name\">\n               <div className=\"z-object-thumb\"/><span className=\"z-name\">Number</span>\n             </div>\n             <ZNumberInspector znumber={zobject}/>\n           </div>}\n          \n          {zobject.function &&\n           <div className=\"z-object-inspector\">\n             <div className=\"z-object-name\">\n               <div className=\"z-object-thumb\"/><span className=\"z-name\">{zobject.name}</span>\n             </div>\n             <div className=\"z-object-info\">\n               Inlets: {numInlets}\n             </div>\n             <div className=\"z-object-info\">\n               Outlets: {numOutlets}\n             </div>\n             <img\n               onClick={savePreset}\n               src=\"/floppy-disk.svg\" className=\"save-preset-disk\"/>\n           </div>}\n\n        {zobject.isPad && <PadPacks pad={zobject}/>}\n          {!zobject.isPad && zobject.type !== NUMBER &&\n          <PresetsExplorer\n            initialSize={18}\n            zobject={zobject}\n            content={zobject.preset}\n            searchText={searchText}\n            type={zobject.getInstrumentType()}/>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      searchText: state.selector.quickAddSearchText,\n      preset: props.zobject && props.zobject.preset,\n      name: props.zobject && props.zobject.name\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackPresetSaving: x => dispatch(setTrackPresetSaving(x))     \n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectSidebar);\n","import React, { Component } from 'react';\nimport CommentsComponent from 'components/user/CommentsComponent.js';\nimport ethereum from 'decentralized/ethereum.js';\n\nclass NotesComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\n        this.getUserId();\n    }\n\n    async getUserId() {\n        this.setState({\n            userId: await ethereum.getUser()\n        });\n    }\n\n    render() {\n        if (this.state.userId === undefined) {\n            return (<div></div>);\n        }\n\n        let sequenceId  = this.props.sequencerEngine.getSequenceId() \n        let sequence = {\n            id: sequenceId,\n        };\n\n        return (\n            <div>\n              <CommentsComponent\n                userId={this.state.userId}\n                sequence={sequence}/>\n            </div>\n        );\n    }\n}\n\nexport default NotesComponent;\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nlet counter=0;\nconst PackSearch = ({onChange}) => { \n    const [value, setValue] = useState('');\n\n    const _onChange = useCallback((e) => {\n        let _text = e.target.value;\n        setValue(_text);\n        let _counter = (++counter);\n        setTimeout(() => {\n            if (_counter !== counter) { return; }\n            onChange(_text);\n        }, 250);\n    }, [setValue, onChange]);\n\n    const clear = useCallback(() => {\n        setValue('');\n        onChange('');\n    }, [onChange, setValue]);\n\n    return (\n        <div className=\"pack-search-container\">\n          <input placeholder=\"Type to search\" onChange={_onChange} type=\"text\" className=\"pack-search\" value={value}/>\n          <div onClick={clear} className=\"clear-btn\">x</div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackSearch);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {PAD} from 'packs/pack-types.js';\nimport {useScrollTo} from \"components/selector2/useScrollTo.js\"\nimport {getPresetsData} from \"decentralized/presets/PresetsSearcher.js\";\nimport PulseLoader from 'react-spinners/PulseLoader';\nimport PackContent from \"components/packs/PackContent.js\";\nimport {\n    setPackSelected,\n    setSamplesDragging,\n    setCurrentSoundInList,\n    setPackToEdit} from 'actions/index.js';\nimport Sample from \"repos/Sample.js\"\nimport {connect} from 'react-redux';\n\nconst PackDetails = ({\n    sequencerEngine,\n    pack,\n    setSamplesDragging,\n    setPackSelected,\n    json,\n    style,\n    setPackToEdit,\n    isEditing,\n    userName,\n    isSelected,\n    currentPreset,\n    currentSoundInList,\n    setCurrentSoundInList,\n    scrollRef,\n}) => { \n\n    let ref = useRef(undefined);\n    let [samples, setSamples] = useState(undefined);\n    let [presets, setPresets] = useState(undefined);\n\n    useScrollTo({ref, scrollRef, isCurrent: isSelected, topOffset: 120});\n\n    const loadAsPads = useCallback(() => {\n        sequencerEngine.currentSubSequence.loadPackAsPads(json.pad, json.fx);\n    }, [json]);\n\n    const onClickEdit = useCallback(() => {\n        setPackToEdit({\n            ... json,\n            ... pack,\n            samples,\n            presets\n        });\n    }, [json, presets, samples, pack]);\n\n    useEffect(() => {\n        if (!json) { return; }\n        let _samples = [];\n        let promises = [];\n        for (let id of json.samples) {\n            if (pack.matchingContent &&\n                pack.matchingContent.length > 0 && \n                !pack.matchingContent.includes(id)) {\n                continue;\n            }\n            let sample = new Sample(id);\n            promises.push(sample.load());\n            _samples.push(sample);\n        }\n        Promise.all(promises).then(\n            x => setSamples(_samples));\n\n        if (json.presets) {\n            let _presets = json.presets;\n            if (pack.matchingContent && pack.matchingContent.length > 0) {\n                _presets = _presets.filter(\n                    p => pack.matchingContent.includes(p));\n            }\n            getPresetsData(_presets)\n                .then(setPresets);\n        }\n    }, [json, pack]);\n\n    let className = \"showing pack-option \";\n    if (isEditing) {\n        className += \" editing\";\n    }\n    if (isSelected) {\n        className += \" selected\";\n    }\n\n    useEffect(() => {\n        setPackSelected(pack);\n    }, []);\n\n    let currentPresetHash = currentPreset && currentPreset.contentHash;\n    return (\n        <div\n          ref={ref}\n          onDragStart={\n              () =>\n                  setSamplesDragging(samples)\n          }\n          onMouseDown={() => setPackSelected(pack)}\n          draggable={true}\n          style={style}\n          className={className}>\n          <div className=\"floppy-top\">\n            <div style={style} className=\"floppy-title\">{pack.title}</div>\n          </div>\n          <div onClick={onClickEdit} className=\"pack-edit-btn\">\n            ...\n          </div>\n          <div className=\"floppy-sticker\">\n            {json.type === PAD ? <div\n                                   onClick={loadAsPads}\n                                   className=\"load-pack\">Load as Pads</div> : ''}\n            {!samples ? <PulseLoader\n                          sizeUnit={\"px\"}\n                          size={10}\n                          color={'#123abc'}\n                        /> :\n             samples.map(\n                 (x, i) => <PackContent\n                             setIsCurrent={() => setCurrentSoundInList(i)}\n                             isCurrent={currentSoundInList % samples.length === i }isEditing={false} sample={x}/>)}\n            {presets ?\n             presets.map(x => <PackContent\n                                isCurrent={x.contentHash === currentPresetHash} isEditing={false} preset={x}/>) : ''}\n          </div>\n          {json && json.description !== \"\" ?\n           <div className=\"floppy-sticker\">\n             {json.description}\n           </div> : \"\"}\n           <div className=\"pack-author\">\n             {userName}\n           </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let sequencerEngine = state.sequencer.sequencerEngine; \n    let track =  sequencerEngine.getSelectedTrack();\n    let isSelected = state.packs.packSelected === props.pack;\n    return {\n        isEditing: state.packs.packToEdit &&\n            state.packs.packToEdit.packHash === props.pack.packHash,\n        currentPreset: track && track.preset,\n        isSelected, \n        currentSoundInList: isSelected ? state.selector.currentSoundInList : undefined\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPackToEdit: x => dispatch(setPackToEdit(x)),\n      setPackSelected: x => dispatch(setPackSelected(x)),\n      setSamplesDragging: x => dispatch(setSamplesDragging(x)),\n      setCurrentSoundInList: x => dispatch(setCurrentSoundInList(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackDetails);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {PAD} from 'packs/pack-types.js';\nimport {useScrollTo} from \"components/selector2/useScrollTo.js\"\nimport NewPackWindow from \"components/packs/NewPackWindow.js\";\nimport Colors from 'components/Colors.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport ethereum from \"decentralized/ethereum.js\";\nimport PackDetails from \"components/packs/PackDetails.js\";\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst PackOption = ({pack, isSelected, scrollRef, sequencerEngine}) => { \n    let ref = useRef(undefined);\n    let [userName, setUserName] = useState('');\n    let [json, setJson] = useState(undefined);\n    let [showing, setShowing] = useState(false);\n\n    useScrollTo({scrollRef, ref, isCurrent: isSelected, topOffset: 100});\n\n    useEffect(() => {\n        ethereum.users.getUserName(pack.user).then(setUserName);\n        ipfs.getJson(pack.packHash).then(setJson);\n    }, []);\n\n    let style = {\n        backgroundColor: colors.getColorForHash(pack.title)\n    };\n\n    useEffect(() => {\n        if (isSelected) {\n            window.addEventListener(\"keydown\", onKeyDown);\n        } else {\n            window.removeEventListener(\"keydown\", onKeyDown);\n        }\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [setShowing, isSelected, showing]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === \"Enter\" && !showing && isSelected) {\n            setShowing(true);\n        }\n    }, [isSelected, showing, setShowing]);\n\n    useEffect(() => {\n        if (pack.matchingContent) {\n            setShowing(true);\n        } else {\n            setShowing(false);\n        }\n    }, [pack, setShowing]);\n\n    if (showing) {\n        return (\n            <PackDetails\n              sequencerEngine={sequencerEngine}\n              scrollRef={scrollRef} style={style} pack={pack} json={json} userName={userName}/>\n        );\n    }\n    return (\n        <div ref={ref} style={style} onClick={() => setShowing(true)}\n             className={isSelected ? \"pack-option selected\" : \"pack-option\"}>\n          <div className=\"floppy-top\">\n            <div style={style} className=\"pack-title\">{userName}</div>\n          </div>\n          <div className=\"floppy-sticker\">\n            <div className=\"pack-description\">{pack.title}</div>\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let isSelected = state.packs.packSelected === props.pack;\n    return {\n        isSelected\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackOption);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {searchPacks} from './searchPacks.js';\nimport PackSearch from './PackSearch.js';\nimport PackOption from \"components/packs/PackOption.js\";\nimport {getPacks} from 'packs/packs.js';\nimport {\n    setCurrentSoundInList,\n    setPackSelected\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst PacksSelector = ({\n    sequencerEngine,\n    setCurrentSoundInList,\n    setPackSelected,\n    packSelected,\n    showPianoRoll,\n    bottomHeight\n}) => { \n    const [searchTerm, setSearchTerm] = useState('');\n    const [packs, setPacks] = useState([]);\n    const [filteredPacks, setFilteredPacks] = useState(undefined);\n    let ref = useRef(undefined);\n\n    useEffect(() => {\n        if (searchTerm !== '') {\n            searchPacks(searchTerm).then(\n                (packs) => {\n                    setFilteredPacks(packs);\n                });\n        } else {\n            setFilteredPacks(undefined);\n        }\n    }, [searchTerm, setFilteredPacks, packs]);\n\n    useEffect(() => {\n        getPacks().then((packs) => {\n            setPacks(packs);\n        });\n    }, []);\n\n    useEffect(() => {\n        return () => setPackSelected(undefined);\n    }, []);\n\n    let style = {\n        maxHeight: window.innerHeight - 293\n    };\n    if (showPianoRoll) {\n        style.maxHeight -= bottomHeight - 130;\n    }\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [packSelected, packs]);\n\n    const onKeyDown = useCallback((e) => {\n        let _packs = filteredPacks || packs;\n        if (e.key === 'ArrowLeft') {\n            let index = _packs.indexOf(packSelected);\n            setPackSelected(_packs[Math.max(0,index - 1)]);\n            setCurrentSoundInList(0);\n        } else if (e.key === 'ArrowRight') {\n            let index = _packs.indexOf(packSelected);\n            setPackSelected(_packs[Math.min(_packs.length - 1, index + 1)]);\n            setCurrentSoundInList(0);\n        }\n    }, [packSelected, packs, filteredPacks]);\n\n    return (\n        <div\n          className=\"packs-selector no-select\">\n          <PackSearch onChange={setSearchTerm}/>\n          <div\n            style={style}\n            ref={ref}\n            className=\"packs-grid\">\n            {(filteredPacks || packs).map(\n                x =>\n                    <PackOption sequencerEngine={sequencerEngine} key={x.packHash} scrollRef={ref} pack={x}/>\n            )}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      packSelected: state.packs.packSelected,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPackSelected: x => dispatch(setPackSelected(x)),\n      setCurrentSoundInList: x => dispatch(setCurrentSoundInList(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PacksSelector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setCreatingNewPack} from 'actions/index.js';\nimport PacksSelector from './PacksSelector.js';\nimport NewPackFlow from './NewPackFlow.js';\nimport {connect} from 'react-redux';\nimport '../../Packs.scss';\n\nconst PacksComponent = ({setCreatingNewPack, sequencerEngine}) => { \n   return (\n        <div className=\"packs-component\">\n          <div\n            onClick={() => setCreatingNewPack(true)}\n            className=\"new-pack-btn\">\n            Create a New Pack\n          </div>\n          <PacksSelector sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setCreatingNewPack: (x) => dispatch(setCreatingNewPack(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PacksComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst NewPackFlow = ({setNewPack}) => { \n    let [value, setValue] = useState('');\n    const save = useCallback((e) => {\n        setNewPack(false);\n    }, [value, setNewPack]);\n    return (\n        <div className=\"new-pack-flow\">\n          <div className=\"name-container\">\n            <input value={value} onChange={e => setValue(e.target.value)} placeholder=\"Type name\"/>\n          </div>\n          <div className=\"drop-content-here\">\n            Drop samples and presets here\n          </div>\n          <div onClick={save} className=\"save-pack-btn\">\n            Save\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewPackFlow);\n","import React, { Component } from 'react';\nimport {\n    dragEffect,\n    setMidiEffectDragging,\n    setPulledEffects,\n    setInstrumentTypeDragging,\n    setPresetDragging,\n    setSampleDragging,\n    setSampleTagDragging,\n} from 'actions/index.js';\nimport SidebarPresets from './SidebarPresets.js';\nimport TracksOverview from './TracksOverview.js';\nimport Sequences from 'components/sequences2/Sequences.js';\nimport TrackQuickView from './TrackQuickView.js';\nimport QuickSampleChooser from './QuickSampleChooser.js';\nimport OptionTabs from 'components/sounds/OptionTabs.js';\nimport Selector from 'components/selector2/Selector.js';\nimport PresetModal from 'components/presets/PresetModal.js';\nimport InstrumentsView from 'components/instruments/InstrumentsView.js';\nimport Presets from 'components/selector2/presets/Presets.js';\nimport { SEQUENCER_VIEW, MIX_VIEW } from \"constants/view-modes.js\";\nimport { connect } from \"react-redux\";\nimport ZObjectSidebar from './ZObjectSidebar.js';\nimport { Button,\n         ButtonDropdown,\n         DropdownToggle,\n         DropdownMenu,\n         DropdownItem } from 'reactstrap';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport NotesComponent from 'components/notes/NotesComponent.js';\nimport Keyboard from 'components/midi/Keyboard.js';\nimport MidiPads from 'components/midi/MidiPads.js';\nimport ContextualHelpComponent from './ContextualHelpComponent.js';\nimport {setSampleAuditioning} from 'actions/index.js';\nimport {setContextualHelp} from 'actions/index.js';\nimport FoldersComponent from 'components/folders/FoldersComponent.js';\nimport {setSamplePack} from 'actions/index.js';\nimport {setSelectorMode} from 'actions/index.js';\nimport {addSamplePack} from 'actions/index.js';\nimport {\n    ADD_ALL_SOUNDS_BUTTON,\n    PRESET_FOLDERS} from 'constants/contextual-help';\nimport ethereum from 'decentralized/ethereum.js';\nimport {\n    setSidebarViewMode,\n    setSidebarCollapsed} from 'actions/index.js';\nimport PacksComponent from 'components/packs/PacksComponent.js';\nimport {\n    SOUNDS,\n    PACKS,\n    EXTERNAL,\n    SEQUENCES,\n    PRESETS,\n    INSTRUMENTS,\n    NOTES} from 'constants/sidebar-view-modes.js';\nimport '../../Sidebar.scss';\nconst presets = ethereum.presets;\n\nwindow.topOffset = 0;\nwindow.bottomOffset = -400;\n\nclass SidebarComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dropdownOpen: false,\n            showPresetModal: false,\n        }\n\n        this.onClosePresetModal = this.onClosePresetModal.bind(this);\n        this.loadWithLFOs = this.loadWithLFOs.bind(this);\n        this.loadWithoutLFOs = this.loadWithoutLFOs.bind(this);\n    }\n\n    get showMidiPads() {\n        if (this.props.padMappings === undefined) {\n            return false;\n        }\n\n        let x = Object.keys(this.props.padMappings)\n            .length > 0;\n\n        return x;\n    }\n\n    onDrop() {\n        let state = this.props.sequencerEngine.state;\n        let effectDragging = state.sequencer.effectDragging ||\n            state.effects.midiEffectDragging;\n        if (effectDragging) {\n            let pulledEffects = [...state.effects.pulledEffects, effectDragging.effect];\n            this.props.setPulledEffects(pulledEffects);\n            // in this case we need to move the effect to the outside of the\n            // track so that it is seen always\n            this.props.setMidiEffectDragging(undefined);\n            this.props.setEffectDragging(undefined);\n        }\n        this.props.setPresetDragging(undefined);\n        this.props.setSampleDragging(undefined);\n        this.props.setInstrumentTypeDragging(undefined);\n        this.props.setSampleTagDragging(undefined);\n    }\n\n    toggleDropdown() {\n        this.setState({dropdownOpen: !this.state.dropdownOpen});\n    }\n\n    get sequencerEngine() {\n        return this.props.sequencerEngine;\n    }\n\n    // called when user chooses a sound they wish to add, this\n    // function adds the sound to the sequencer in a new track\n    async addSound(sample, layerMode, slice, chordSample, chord) {\n       let newCursor = this.sequencerEngine.tracks.length;\n       if (layerMode && this.sequencerEngine.tracks.length > 0) {\n            var selectedTrack = this.sequencerEngine.cursor.track == null ?\n                0 : this.sequencerEngine.cursor.track;\n            this.sequencerEngine.addSound(sample, selectedTrack, undefined, chord);\n        } else {\n            this.sequencerEngine.addSound(sample, undefined, slice, chord);\n        }\n    }\n\n    auditionSound(sample) {\n        var selectedTrack = this.sequencerEngine.cursor.track == null ?\n            0 : this.sequencerEngine.cursor.track;\n\n        this.sequencerEngine.auditionSound(sample, selectedTrack);\n        this.props.setSampleAuditioning(sample);\n    }\n\n    // triggered when user clicks \"Add some sounds\" button, which\n    // opens up the Sound Selector Mode\n    showSoundsSelectorView() {\n        this.props.setSelectorMode(true);\n        this.props.setSidebarViewMode(SOUNDS);\n    }\n\n    isShowingSoundsPane() {\n        if (this.props.sidebarCollapsed) {\n            return false;\n        }\n        return this.props.showSelectorMode ||\n            this.props.sidebarViewMode !== SOUNDS;\n    }\n\n    showSequences() {\n        this.props.setSidebarViewMode(SEQUENCES);\n    }\n\n    showExternal() {\n        this.props.setSidebarViewMode(EXTERNAL);\n    }\n\n    showPresets() {\n        this.props.setSidebarViewMode(PRESETS);\n    }\n\n    onClickInstrumentsButton() {\n        this.props.setSidebarViewMode(INSTRUMENTS);\n    }\n\n    onClickAddAudioTrackButton() {\n        // add a midi track to \n        this.sequencerEngine.addAudioTrack();\n        this.setState(this.state);\n    }\n\n    toggleCollapse() {\n        this.props.setSidebarCollapsed(!this.props.sidebarCollapsed);\n    }\n\n    onChooseItem(preset) {\n        this.setState({showPresetModal: true, presetToLoad: preset});\n    }\n\n    onChooseFolder(folder) {\n        this.setState({showPresetModal: true, folderToLoad: folder});\n    }\n\n    onClosePresetModal() {\n        this.setState({showPresetModal: false});\n    }\n\n    loadWithLFOs() {\n        this.setState({showPresetModal: false});\n        if (this.state.presetToLoad) {\n            this.props.sequencerEngine.loadPreset(\n                this.state.presetToLoad, true);\n        } else {\n            this.state.folderToLoad.getAllItems().forEach(\n                item =>\n                    this.props.sequencerEngine.loadPreset(\n                        item, true));\n        }\n    }\n\n    loadWithoutLFOs() {\n        this.setState({showPresetModal: false});\n        \n        if (this.state.presetToLoad) {\n            this.props.sequencerEngine.loadPreset(\n                this.state.presetToLoad, false);\n        } else {\n            this.state.folderToLoad.getAllItems().forEach(\n                item =>\n                    this.props.sequencerEngine.loadPreset(\n                        item, false));\n        }\n    }\n\n    get selectedEffect() {\n        let state = this.props.sequencerEngine.store.getState();\n        if (state.effects.selectedEffect === undefined) {\n            return undefined;\n        }\n\n        return this.props.sequencerEngine.selectedEffect;\n    }\n\n    get cursor() {\n        return this.props.sequencerEngine.cursor;\n    }\n\n    get selectedTrack() {\n        return this.props.sequencerEngine.tracks[this.cursor.track];\n    }\n\n    render() {\n        let hideSequencer = this.props.viewMode !== SEQUENCER_VIEW &&\n            this.props.viewMode !== MIX_VIEW;\n\n        let soundsSelectorComponent = '';\n        if (this.props.sidebarViewMode === SOUNDS && this.props.showSelectorMode) { \n            soundsSelectorComponent = (\n                <Selector\n                  ethereumSearcher={this.props.ethereumSearcher}\n                  sequencerEngine={this.sequencerEngine}\n                  onAudition={(sample) => this.auditionSound(sample)}\n                  onAddSound={(sample, layerMode, slice, chordSample, chord) => this.addSound(sample, layerMode, slice, chordSample, chord)}/>\n            );\n        }\n\n\n        if (this.props.sidebarViewMode === PACKS) {\n            soundsSelectorComponent = (\n                <PacksComponent sequencerEngine={this.sequencerEngine}/>\n            );\n        }\n\n        let instrumentsComponent = '';\n        if (this.props.sidebarViewMode === INSTRUMENTS) {\n            instrumentsComponent =\n                <InstrumentsView sequencerEngine={this.sequencerEngine}/>;\n        }\n\n        let sequencesComponent = '';\n        if (this.props.sidebarViewMode === SEQUENCES) {\n            sequencesComponent =\n                <Sequences sequencerEngine={this.sequencerEngine}/>;\n        }\n\n        let presetsComponent = '';\n        if (this.props.sidebarViewMode === PRESETS) {\n            presetsComponent =\n                <Presets sequencerEngine={this.sequencerEngine}/>\n        }\n\n        let notesComponent = '';\n        if (this.props.sidebarViewMode === NOTES) {\n            notesComponent =\n                <NotesComponent sequencerEngine={this.sequencerEngine}/>\n        }\n        let trackHeight = 400;\n        let remainingHeights = 300;\n        let trackNumberStickinessThreshold =\n            Math.ceil((window.innerHeight - remainingHeights) / trackHeight);\n        const WINDOW_HEIGHT_THRESHOLD = 1001;\n        let disableStickiness = \n            false;\n\n        let topOffset = this.isShowingSoundsPane() ? window.topOffset : -500;\n        let bottomOffset = this.isShowingSoundsPane() ? window.bottomOffset: -100;\n\n        if (this.props.hidePresets) {\n            topOffset = 300;\n            bottomOffset = -400;\n        }\n\n        let stickyKeyboardClass = this.props.zIndexHack ?\n            'z-index-hack' : ' inner-sidebar';\n\n        let sidebarClassName = this.props.sidebarCollapsed ?\n            \"sounds-pane collapsed\" :\n            this.isShowingSoundsPane() ? \"sounds-pane\" : \"hide sounds-pane\";\n\n        if (this.isShowingSoundsPane() && this.props.hidePresets && this.props.viewMode === SEQUENCER_VIEW) {\n            disableStickiness = true;\n        }\n        if (this.props.showPianoRoll) {\n            disableStickiness = true;\n        }\n        if (this.props.disableStickiness) {\n            disableStickiness = true;\n        }\n\n        let style = {\n            height: window.innerHeight - 147\n        };\n\n\n        if (this.props.showPianoRoll) {\n            style.height -= this.props.bottomHeight - 80;\n            bottomOffset = 230;\n        }\n\n        if (this.props.viewMode === MIX_VIEW) {\n            style.height = window.innerHeight - 65;\n        }\n\n        let selectedZObject = this.props.selectedZObject ||\n            (this.props.viewableSubPatches &&\n             this.props.viewableSubPatches[0] &&\n             this.props.viewableSubPatches[0].zObject\n            );\n        let defaultView = (\n            <div\n              style={{\n                  ... style,\n                  height: style.height - 20\n              }}\n              className=\"sidebar-content\">\n               {instrumentsComponent}\n               {presetsComponent}\n               {sequencesComponent}\n               {soundsSelectorComponent}\n               {notesComponent}\n              <ConditionedComponent condition={!this.isShowingSoundsPane()}>\n                <OptionTabs/>\n                <QuickSampleChooser selectedZObject={undefined} sequencerEngine={this.sequencerEngine}/>\n                {selectedZObject ?\n                 <ZObjectSidebar zobject={selectedZObject}/> :\n                <div className=\"overviews\">\n                  <div className=\"overview-left\">\n                    {!this.props.explorerMaximized && (!this.props.searchText || this.props.searchText === \"\") ? \n                     <TrackQuickView\n                       installation={this.props.hidePresets}\n                       sequencerEngine={this.sequencerEngine}\n                     />  : ''}\n                    <SidebarPresets sequencerEngine={this.sequencerEngine}/>\n                  </div>\n                  {!this.props.explorerMaximized && (!this.props.searchText || this.props.searchText === \"\") ? \n                   <TracksOverview sequencerEngine={this.sequencerEngine}/>\n                   : ''}\n                </div>\n                }\n                 <PresetModal\n                   ethereum={ethereum}\n                   presets={presets}\n                   preset={this.state.presetToLoad}\n                   show={this.state.showPresetModal}\n                   onClose={this.onClosePresetModal}\n                   onClickYes={this.loadWithLFOs}\n                   onClickNo={this.loadWithoutLFOs}/>\n              </ConditionedComponent>\n            </div>\n        );\n\n        /**\n                 <ConditionedComponent condition={!this.props.hidePresets}>\n                 <div\n                  onMouseOver={() => this.props.setContextualHelp(PRESET_FOLDERS)}\n                  onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                   className=\"preset-folders\">\n                   <FoldersComponent\n                     sequencerEngine={this.props.sequencerEngine}\n                     onTestItem={(preset) => []}\n                     onChooseFolder={(folder) => this.onChooseFolder(folder)}\n                     onChooseItem={(item) => this.onChooseItem(item)}\n                     showItems={true}/>\n                 </div>\n                 </ConditionedComponent>\n*/\n\n        let soundPane = (\n            <div onDrop={() =>this.onDrop()} className=\"sidebar-container no-select\">\n              <div style={style} className={sidebarClassName}>\n              <div className=\"sidebar-header\">\n                <div\n                  onClick={() => this.toggleCollapse()}\n                  className=\"collapse-toggle\">\n                  {this.props.sidebarCollapsed ? \n                      <div className=\"arrow-down\"/> :\n                      <div className=\"arrow-right\"/>}\n                </div>\n             </div>\n             <ConditionedComponent condition={!this.props.sidebarCollapsed}>\n               <ConditionedComponent condition={this.isShowingSoundsPane()}>\n                 <div className=\"sound-toolbar\">\n                   <OptionTabs/>\n                 </div>\n               </ConditionedComponent>\n               {defaultView}\n             </ConditionedComponent>\n            </div>\n            </div>);\n\n        if (this.props.showingContextMenu) {\n            stickyKeyboardClass += \" showing-context-menu\";\n        }\n        if (hideSequencer) {\n            return '';\n        } else {\n            let holderId =\n                this.props.sidebarCollapsed ? 'sidebar-holder-collapsed' :\n                this.isShowingSoundsPane() ? 'sidebar-holder-selector' :\n                'sidebar-holder';\n            return (\n                <div\n                  >\n                  {soundPane}\n                </div>\n            );\n        }\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSamplePack : samplePack => dispatch(setSamplePack(samplePack)),\n        addSamplePack : samplePack => dispatch(addSamplePack(samplePack)),\n        setSelectorMode: m => dispatch(setSelectorMode(m)),\n        setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n        setSidebarCollapsed: m => dispatch(setSidebarCollapsed(m)),\n        setSampleAuditioning: s => dispatch(setSampleAuditioning(s)),\n        setContextualHelp: s => dispatch(setContextualHelp(s)),\n        setInstrumentTypeDragging: m => dispatch(setInstrumentTypeDragging(m)),\n        setPresetDragging: m => dispatch(setPresetDragging(m)),\n        setSampleDragging: m => dispatch(setSampleDragging(m)),\n        setSampleTagDragging: m => dispatch(setSampleTagDragging(m)),\n        setPulledEffects: e => dispatch(setPulledEffects(e)),\n        setEffectDragging: fx => dispatch(dragEffect(fx)),\n        setMidiEffectDragging: fx => dispatch(setMidiEffectDragging(fx))\n    };\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        viewMode: state.sequencer.viewMode,\n        showSelectorMode: state.sequencer.showSelectorMode,\n        sidebarCollapsed: state.selector.sidebarCollapsed,\n        sidebarViewMode: state.sequencer.sidebarViewMode,\n        isTrackFocused: state.sequencer.trackFocused !== undefined,\n        showPresets: state.sequencer.showPresets,\n        zIndexHack: state.sequencer.zIndexHack,\n        selectedTrack: state.mix.selectedTrack,\n        padMappings: state.keyboard.padMappings,\n        showPianoRoll: state.sequencer.showPianoRoll,\n        selectedEffect: state.effects.selectedEffect,\n        isShowingEffects: state.tracks.showTrackEffects[state.mix.selectedTrack],\n        isMacroMapping: state.effects.isMacroMapping,\n        bottomHeight: state.arrangement.bottomHeight,\n        searchText: state.selector.quickAddSearchText,\n        explorerMaximized: state.selector.explorerMaximized,\n        showingContextMenu: state.effects.showingContextMenu,\n        // selectedZObject: state.zobject.selectedZObject,\n        viewableSubPatches: state.zobject.viewableSubPatches\n    };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarComponent);\n","export const moveTrackToGroup = (track, destinationGroup) => {\n    if (track.group === destinationGroup) {\n        return;\n    }\n\n    let groups = track.sequencerEngine.groups;\n    groups.addToGroup(track, destinationGroup);\n};\n","import React, {useState, useCallback} from 'react';\nimport {setSelectedMixEffect} from 'actions/index.js';\n\nexport const useEffects = ({trackOrGroup}) => {\n    let [effects, setEffects] = useState(trackOrGroup.effects);\n\n    const onDeleteEffect = useCallback((effect) => {\n        setEffects([... trackOrGroup.effects]);\n\n        let sub = trackOrGroup.subSequence;\n        trackOrGroup.sequencerEngine.dispatch(\n            setSelectedMixEffect(sub.id, trackOrGroup.id, undefined, \"AUDIO_FX\", undefined));\n    }, [trackOrGroup, setEffects]);\n\n    return {onDeleteEffect, effects};\n};\n","import {chopByPatterns} from './chopByPatterns.js';\nimport {getTrackJson} from 'engine/json/getTrackJson.js';\nimport {sleep} from 'utils/sleep.js';\nimport {\n    setLoadingText\n} from 'actions/index.js';\nimport {bounceGroupPatterns} from 'engine/BouncingEngine.js';\n\nconst getPatternLengths = (sequencerEngine) => {\n    let numPatterns = sequencerEngine.tracks[0].patterns.length;\n    let patternLengths = [];\n    for (let i=0; i < numPatterns; i++) {\n        sequencerEngine.switchToPattern(i);\n        patternLengths.push(sequencerEngine.length);\n    }\n    return patternLengths;\n};\n\nexport const freezeGroupByPatterns = async (group) => {\n    let {sequencerEngine} = group;\n    sequencerEngine.store.dispatch(setLoadingText(\"Freezing track\\'s patterns\"));\n    await sleep(100);\n    group.sequencerEngine.stop();\n\n    let numPatterns = group.tracks[0].patterns.length;\n    let patternLengths = getPatternLengths(sequencerEngine);\n    sequencerEngine.switchToPattern(0);\n\n    let audioBuffer = await bounceGroupPatterns(group.sequencerEngine, group);\n    let bounces = await chopByPatterns(group.sequencerEngine, audioBuffer, numPatterns, group.tracks);\n\n    // get preset for group\n    let {frozenGroup, frozenTracks} = getGroupData(group);\n    // delete all the tracks\n    sequencerEngine.deleteGroup(group);\n\n    let track = sequencerEngine.addMultiFreezeTrack();\n    for (let i=track.patterns.length; i < numPatterns; i++) {\n        await track.newPattern(true);\n    }\n    \n    track.freeze(bounces, true);\n    track.frozenGroup = frozenGroup;\n    track.frozenTracks = frozenTracks;\n\n    for (let i=0; i < numPatterns; i++) {\n        sequencerEngine.switchToPattern(i);\n        track.currentPattern = i;\n        track.pattern.changeLength(patternLengths[i]);\n        track.frozenColumns[0].playing = i;\n    }\n\n    sequencerEngine.switchToPattern(0);\n    sequencerEngine.switchToPattern(sequencerEngine.currentPattern);\n    sequencerEngine.groups.groups.forEach(\n        group => group.updateRedux());\n\n    // update the pattern lengths for this new track to match\n    // the max patt. length (of the tracks)\n \n    sequencerEngine.store.dispatch(setLoadingText(undefined));\n};\n\nconst getGroupData = (group) => {\n    let frozenGroup = group.getJson();\n    let frozenTracks = [];\n    for (let track of group.tracks) {\n        frozenTracks.push(getTrackJson(track));\n    }\n    // need to get the steps for each pattern\n    return {frozenGroup, frozenTracks};\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {freezeGroupByPatterns} from 'track/freeze/freezeGroupByPatterns.js';\nimport {connect} from 'react-redux';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst GroupActions = ({group}) => { \n    let [toggled, setToggled] = useState(false);\n\n    const freezeGroup = useCallback(() => {\n        freezeGroupByPatterns(group);\n    }, [group]);\n\n    return (\n        <div className=\"group-actions\">\n            <ButtonDropdown\n              className=\"view-dropdown\"\n              show={toggled ? \"true\" : \"false\"}\n              isOpen={toggled}\n              toggle={() => setToggled(!toggled)}>\n              <DropdownToggle size=\"sm\" caret color=\"primary\">\n                <img className=\"group-actions-icon\" src=\"/automation-icon-disabled.png\"/>\n              </DropdownToggle>\n              <DropdownMenu>\n                <DropdownItem\n                  onClick={freezeGroup}\n                  key=\"\"\n                  size=\"sm\">\n                  Freeze Group\n                </DropdownItem>\n              </DropdownMenu>\n            </ButtonDropdown>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupActions);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setParameterSliderDown} from \"actions/index.js\";\nimport TrackMeter from 'components/TrackMeter.js';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport {connect} from 'react-redux';\n\nconst VolumeSlider = ({track, volume, setVolume, setParameterSliderDown}) => { \n    const onMouseUp = useCallback(() => {\n        setParameterSliderDown(undefined);\n        if (!track) {\n            return;\n        }\n        let parameter = track.volumeParameter;\n        if (parameter) {\n            parameter.automation.smoothen();\n            parameter.mixAutomation.smoothen();\n        }\n    }, [track]);\n\n    const onChangeVolume = useCallback((val) => {\n        let vol = getVolumeFromRatio(val);\n        setVolume(vol);\n    }, [setVolume, track]);\n\n    return (\n        <div\n          onMouseDown={() => setParameterSliderDown(track && track.volumeParameter)}\n          onMouseUp={onMouseUp} className=\"mix-volume-slider\">\n          <ReactBootstrapSlider\n            handle=\"square\"\n            value={Math.pow(getVolumeRatio(volume), 2)}\n            change={(e) => onChangeVolume(e.target.value)}\n            step={0.01}\n            max={1}\n            min={0}\n            orientation=\"vertical\"\n            reversed={true}\n          /> \n        {track ? <TrackMeter meter={track.trackMeter}/> : ''}\n        </div>);\n}\n\nfunction getVolumeFromRatio(ratio, min=-60, max=2, width) {\n    let fullRatio = Math.pow(ratio, 0.5);\n    return min + (max - min) * fullRatio;\n}\n\nfunction getVolumeRatio(volume, min=-60, max=2) {\n    return (volume - min) / (max - min);\n}\n\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setParameterSliderDown: parameter => dispatch(setParameterSliderDown(parameter)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VolumeSlider);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useEffects} from './useEffects.js';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\nimport OutputChannelChooser from '../OutputChannelChooser.js';\nimport GroupActions from './GroupActions.js';\nimport Colors from 'components/Colors.js';\nimport VolumeSlider from './VolumeSlider.js';\nimport {setGroupCollapsed} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst GroupVolumeControl = ({\n    group,\n    volume,\n    isCollapsed,\n    setGroupCollapsed,\n    selectedTrack,\n    selectedGroup,\n    selectedEffect\n}) => { \n    let {groupNumber} = group;\n\n    const {onDeleteEffect, effects} = useEffects({trackOrGroup: group});\n    const color = colors.getColorForTrack(group.tracks[0]);\n    const setVolume = useCallback(v => {\n        group.setVolume(v);\n    }, [group]);\n\n    let style = {\n    };\n    let infoStyle = {};\n    let nameStyle ={};\n\n    if (selectedGroup === group.groupNumber) {\n        infoStyle.backgroundColor = color;\n        infoStyle.color = 'black';\n        style.borderStyle = \"solid\";\n        style.borderColor = color;\n    } else {\n        style.borderColor = color;\n        style.backgroundColor = 'unset';\n        style.backgroundImage = 'unset';\n        style.borderStyle = \"solid\";\n        infoStyle.color = \"white\";\n    }\n\n    let className = \"group-volume-control\"\n    if (selectedEffect) {\n        className += \" showing\";\n    }\n\n    return (\n        <div\n          style={style}\n          className={className}>\n          <div style={infoStyle} className=\"group-info\">\n            <div className=\"group-name\">\n              Group {groupNumber + 1}\n            </div>\n            <div\n              onClick={() => setGroupCollapsed(!isCollapsed)}\n              className=\"collapse-toggle\">\n              {isCollapsed ? <div className=\"arrow-down\"/> : <div className=\"arrow-right\"/>}\n            </div>\n          </div>\n          {selectedEffect ?\n           <EffectComponent\n             onDeleteEffect={onDeleteEffect}\n             sequencerEngine={group.sequencerEngine}\n             group={group}\n             compact={true}\n             effect={selectedEffect}\n                              send={undefined}/>  : \n           <VolumeSlider volume={volume} setVolume={setVolume}/>}\n          <GroupActions group={group}/>\n          {!group.sequencerEngine.channelMixer.stereoConnected ? \n           <OutputChannelChooser channel={group}/>\n           : ''}\n          <TrackEffects effects={effects} track={group}/>\n\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      volume: state.tracks.groupVolumes[props.group.groupNumber],\n      isCollapsed: state.mix.groupCollapsed[props.group.subSequence.id] &&\n          state.mix.groupCollapsed[props.group.subSequence.id][props.group.groupNumber],\n      selectedTrack: state.mix.selectedTrack,\n      selectedGroup: state.mix.selectedGroup,\n      selectedEffect: props.group!== undefined && state.mix.selectedTrackEffects[props.group.subSequence.id] &&\n          state.mix.selectedTrackEffects[props.group.subSequence.id][props.group.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setGroupCollapsed: (collapsed) => dispatch(setGroupCollapsed(\n          props.group.subSequence.id,\n          props.group.groupNumber,\n          collapsed)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupVolumeControl);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {Knob, Arc, Pointer, Value} from 'components/rc-knob/index.js';\nimport {connect} from 'react-redux';\n\nconst PanKnob = ({track, panning, scrollContainer}) => { \n    const onChange = useCallback((v) => {\n        document.activeElement.blur();\n        track.setPanning(v);\n    }, [track]);\n\n    return (\n        <div className=\"pan-knob\">\n          <Knob \n            scrollContainer={scrollContainer}\n            size={30}  \n            angleOffset={220} \n            angleRange={280}\n            value={panning}\n            initialValue={panning}\n            step={0.01}\n            min={-1}\n            max={1}\n            onChange={onChange}\n          >\n            <Arc \n              arcWidth={2}\n              color={\"#6c757a\"}\n              background=\"#6c757a\"\n            />\n            <Pointer \n              width={2} \n              height={10}\n              radius={4}\n              type=\"rect\"\n              color={\"white\"}\n            />\n          </Knob>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      panning: state.tracks.trackPannings[props.track.id] || 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PanKnob);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport PanKnob from './PanKnob.js';\nimport ParameterKnob from 'components/knobs/ParameterKnob.js';\nimport TrackOutputType from \"components/track/TrackOutputType.js\";\nimport {connect} from 'react-redux';\n\nconst names = ['A', 'B', 'C', 'D', 'E'];\n\nconst TrackControls = ({track, isSelected}) => { \n    const scrollContainer = useRef(undefined);\n    useEffect(() => {\n        let elem = document.getElementById(\"mix-scroll\");\n        scrollContainer.current = elem;\n    }, []);\n\n    const onClickNext = useCallback(() => {\n    }, []);\n\n    const onClickPrevious = useCallback(() => {\n    }, []);\n\n\n    return (\n        <div className=\"track-controls\">\n          {scrollContainer ? <PanKnob scrollContainer={scrollContainer} track={track}/> : ''}\n          <div className=\"sends-label\">\n            Sends\n          </div>\n          <div className=\"send-knobs\">\n            {track.sendNodeVolumeParameters.map(\n                (send, i) =>\n                    <div style={{marginTop: i % 2 === 1 ? 10 : 0}} className=\"send-knob\">\n                {scrollContainer ?\n                 <ParameterKnob\n                   sequencerEngine={track.sequencerEngine}\n                   scrollContainer={scrollContainer} min={-40} parameter={send}/>\n                 : ''}\n                      <div className=\"send-name\">\n                        {names[i]}\n                      </div>\n                    </div>)}\n          </div>\n          <TrackOutputType className=\"mix-output-type\" track={track}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackControls);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport MidiEffectComponent from 'components/effects/MidiEffectComponent.js';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport {useEffects} from './useEffects.js';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\nimport TriggerMeter from 'components/v2/TriggerMeter.js';\nimport GroupTracker from './GroupTracker.js';\nimport Tracker from './Tracker.js';\nimport {moveTrackToGroup} from './moveTrackToGroup.js';\nimport TrackControls from './TrackControls.js';\nimport Colors from 'components/Colors.js';\nimport VolumeSlider from './VolumeSlider.js';\nimport MultiFreezeThumbnails from 'components/freeze/MultiFreezeThumbnails.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedGroup,\n    setMixTrackDragging,\n} from 'actions/index.js';\nimport {MULTI_FREEZE} from 'constants/track-types.js';\nimport {MULTI_SYNTH} from 'constants/instrument-types.js';\nimport {getTrackShortName} from 'utils/getTrackShortName.js';\n\nconst colors = new Colors();\n\nconst Track = ({\n    track,\n    group,\n    volume,\n    muted,\n    isAlone,\n    isSelected,\n    setSelectedGroup,\n    setMixTrackDragging,\n    trackDragging,\n    selectedEffect,\n    selectedMidiEffect\n}) => { \n    let thumbnail = track.sample && track.sample.getThumbnail();\n    let color = colors.getColorForTrack(track);\n    let style = {\n        backgroundColor: color\n    };\n\n    if (thumbnail) {\n        style.backgroundImage = 'url(' + thumbnail + ')';\n    }\n\n    const {onDeleteEffect, effects} = useEffects({trackOrGroup: track});\n\n    let className = isAlone ? \"group-track alone\" : \"group-track\";\n\n    let trackStyle = {};\n\n    if (isSelected) {\n        className += \" selected\";\n        trackStyle.boxShadow = \"0px 0px 2px 2px \" + color;\n    }\n\n    let thumbnailClass = \"track-thumbnail\";\n    if (muted) {\n        thumbnailClass += \" muted\";\n    }\n\n    const toggleMute = useCallback(() => {\n        track.mute(!muted);\n    }, [muted, track]);\n\n    const selectTrack = useCallback((e) => {\n        e.stopPropagation();\n        setSelectedGroup(undefined);\n        track.sequencerEngine.selectTrack(track.trackNumber);\n    }, [track]);\n\n    const onDrop = useCallback((e) => {\n        e.stopPropagation();\n        if (track !== trackDragging) {\n            moveTrackToGroup(trackDragging, track.group);\n        }\n    }, [track, trackDragging]);\n\n    let innerText = getTrackShortName(track);\n    if (selectedEffect || selectedMidiEffect) {\n        className += \" showing-effects\";\n    }\n    return (\n        <div\n          onDrop={onDrop}\n          draggable={true}\n          onDragStart={() => setMixTrackDragging(track)}\n          style={trackStyle}\n          onDragOver={(e) => e.preventDefault()}\n          onMouseDown={selectTrack}\n          className={className}>\n          <div\n            style={isSelected ? {backgroundColor: color} : {}}\n            className=\"track-info\">\n            {track.trackNumber + 1} {truncateName(track.presetName || track.getName() || \"Track\")}\n          </div>\n          {selectedEffect ?\n           <EffectComponent\n             sequencerEngine={track.sequencerEngine}\n             onDeleteEffect={onDeleteEffect}\n             track={track}\n             compact={true}\n             effect={selectedEffect}\n             send={undefined}/>  : \n           selectedMidiEffect ?\n           <MidiEffectComponent\n             sequencerEngine={track.sequencerEngine}\n             effect={selectedMidiEffect}\n             track={track}\n             compact={true}\n           /> :\n           <div>\n             <VolumeSlider track={track} volume={volume} setVolume={(v) => track.setVolume(v)}/>\n             <div\n               onClick={toggleMute}\n               style={style} className={thumbnailClass}>\n               {thumbnail === undefined ? innerText : \"\"}\n             </div>\n             <TriggerMeter color={color} track={track}/>\n             <TrackControls isSelected={isSelected} track={track}/>\n           </div>\n          }\n          <TrackEffects effects={effects} track={track}/>\n        </div>\n    );\n          /*{isAlone ? <GroupTracker group={group}/> : ''}*/\n}\n\nconst truncateName = name => {\n    if (name === undefined) {\n        return '';\n    }\n\n    if (name.length > 30) {\n        name = name.slice(0, 30) + '...';\n    }\n    return name;\n};\n\nconst mapStateToProps = (state, props) => {\n    let track = props.track;\n    if (track && track.tracks && track.tracks[0]) {\n        track = track.tracks[0].track;\n    }\n    \n    let subId = track && track.subSequence.id;\n    return {\n        id: track === undefined ? 0 :\n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.presetName || track.getName(),\n        volume: props.track.volumeParameter.get(),\n        muted: state.tracks.trackMutes[props.track.trackNumber],\n        isSelected: state.mix.selectedTrack === props.track.trackNumber &&\n            state.mix.selectedGroup === undefined,\n        trackDragging: state.mix.trackDragging,\n        selectedEffect: track !== undefined && state.mix.selectedTrackEffects[subId] &&\n            state.mix.selectedTrackEffects[subId][track.id],\n        selectedMidiEffect: track !== undefined && state.mix.selectedTrackMidiEffects[subId] &&\n            state.mix.selectedTrackMidiEffects[subId][track.id]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedGroup: (g) => dispatch(setSelectedGroup(g)),\n      setMixTrackDragging: (t) => dispatch(setMixTrackDragging(t))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Track);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport GroupTracker from './GroupTracker.js';\nimport {moveTrackToGroup} from './moveTrackToGroup.js';\nimport GroupVolumeControl from './GroupVolumeControl.js';\nimport {connect} from 'react-redux';\nimport Colors from 'components/Colors.js';\nimport Track from './Track.js';\nimport {setSelectedGroup} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst Group = ({\n    group,\n    isCollapsed,\n    setSelectedGroup,\n    isSelectedGroup,\n    trackDragging,\n    groupTracks\n}) => {\n    let tracks = group.tracks;\n    let groupClassName = \"group-container\";\n    const color = colors.getColorForTrack(group.tracks[0]);\n    let style = {\n        backgroundColor: color,\n    };\n\n    let fullStyle = {};\n\n    if (isSelectedGroup) {\n        groupClassName += \" selected\";\n        fullStyle.boxShadow = \"0px 0px 2px 2px \" + color;\n    }\n\n    const onDrop = useCallback((e) => {\n        e.stopPropagation();\n        if (trackDragging) {\n            moveTrackToGroup(trackDragging, group);\n        }\n    }, [trackDragging, group]);\n\n    const onMouseDown = useCallback(() => {\n        setSelectedGroup(group.groupNumber);\n    }, [group, setSelectedGroup]);\n\n    return (\n        <div\n          onDrop={onDrop}\n          onMouseDown={onMouseDown}\n          style={fullStyle}\n          className={groupClassName}>\n          <div style={style} className=\"group-top\"></div>\n          <div className=\"group-inner\">\n            <GroupVolumeControl group={group}/>\n            <div className=\"tracks-and-tracker\">\n              <div className=\"group-tracks\">\n                {isCollapsed ?\n                \"\" : \n                 tracks.map(track => <Track track={track}/>)}\n              </div>\n            </div>\n          </div>\n        </div>);\n    // { isCollapsed ? \"\" : <GroupTracker group={group}/>}\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isCollapsed: state.mix.groupCollapsed[props.group.subSequence.id] &&\n          state.mix.groupCollapsed[props.group.subSequence.id][props.group.groupNumber],\n      isSelectedGroup: state.mix.selectedGroup === props.group.groupNumber,\n      trackDragging: state.mix.trackDragging,\n      groupTracks: state.tracks.groupTracks[props.group.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedGroup: (g) => dispatch(setSelectedGroup(g))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Group);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Group from './Group.js';\nimport Track from './Track.js';\nimport {connect} from 'react-redux';\nimport '../../../Mix2.scss';\n\nconst NewGroupsComponent = ({sequencerEngine, currentSubSequence}) => { \n    let groups = sequencerEngine.groups.groups;\n    return (\n        <div className=\"groups-component\">\n          {groups.map(\n              x =>\n              <Group key={x.id} group={x}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      ... state.tracks.groupTracks,\n      currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewGroupsComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RecordInfo from \"components/upload/RecordInfo.js\";\nimport {connect} from 'react-redux';\nimport Discogs from \"discogs/Discogs.js\";\nconst discogs = new Discogs();\n\nconst SourceFinder = ({sample, setIsSourcing, guildId}) => { \n    let [records, setRecords] = useState([]);\n    useEffect(() => {\n        discogs.searchRecords(sample.name.replace(\".wav\", \"\").replace(\".flac\", \"\"))\n            .then((r) => {\n                setRecords(r);\n            });\n    }, [sample, setRecords, setIsSourcing]);\n\n    const save = useCallback(() => {\n        sample.saveSample(guildId);\n        setIsSourcing(false);\n    }, [sample, setIsSourcing, guildId]);\n\n    return (\n        <div className=\"source-finder\">\n          {records.length > 0 ? \n           <RecordInfo showTags={false} sample={sample} discogs={discogs} records={records}/> :\n           \"No records found\"}\n          <div className=\"btns\">\n            {records.length > 0 ? \n            <div onClick={save} className=\"save-btn\">\n              Save Changes\n            </div> : ''}\n            <div className=\"cancel-btn\" onClick={() => setIsSourcing(false)}>\n              Cancel\n            </div>\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceFinder);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {SOUND_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport {connect} from 'react-redux';\n\nconst Rating = ({content, color, loadedRating}) => { \n    const [rating, setRating] = useState(loadedRating);\n    let list = [0, 1, 2, 3, 4];\n\n    const onClick = useCallback((r) => {\n        setRating(r);\n        ethereum.xanadu.rateSound(content, r, SOUND_RATED);\n    }, [setRating, content]);\n\n    let style = {\n\n    };\n    if (rating === 0) {\n        style.opacity = 0.2;\n    }\n    return (\n        <div style={style} className=\"rating\">\n          {list.map(\n              x =>\n                  <Star\n                    color={color}\n                    onClick={onClick}\n                    number={x}\n                    rating={rating}/>)}\n       </div>\n    );\n}\n\nconst Star = ({number, rating, onClick, color}) => {\n\n    let className = \"star\";\n    if (number <= rating) {\n        className += \" starred\";\n    }\n\n    let style = {\n        color: color\n    };\n\n    return (\n        <div\n          style={style}\n          onClick={() => onClick(number)}\n          className={className}>\n          <span>&#9734;</span>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SourceFinder from './SourceFinder.js';\nimport {trim} from \"utils/trim.js\"\nimport ContentDropdown from \"components/dropdowns/ContentDropdown.js\"\nimport ConditionedCheckmark from \"components/ConditionedCheckmark.js\";\nimport {\n    SOUND_RATED,\n    PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport {useFavorites} from \"components/hooks/useFavorites.js\"\nimport TagsInfo from \"components/installation/TagsInfo.js\";\nimport {usePacks} from './usePacks.js';\nimport {\n    setCreatingNewPack\n} from 'actions/index.js';\nimport {getPacks} from 'packs/packs.js';\nimport {useScrollTo} from './useScrollTo.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport {FILTER_BY_TAG, ADD_SOUND_BUTTON, SELECTOR_WAVEFORM} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport {sleep} from 'utils/sleep.js';\nimport {getProjectsUsed} from 'utils/getProjectsUsed.js';\nimport Rating from './Rating.js';\nimport Tone from 'tone';\nimport AudioUnit from 'engine/audio.js';\nimport Waveform from 'components/Waveform.js';\nimport SampleUsed from 'components/installation/SampleUsed.js';\nimport Sample from 'repos/Sample.js';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {\n    SEQUENCES\n    } from 'constants/sidebar-view-modes.js';\nimport {\n    setCurrentSoundInList,\n    setExpandedProject,\n    setSidebarViewMode,\n    setSampleDragging,\n    setQuickAddSearchText\n} from 'actions/index.js';\n\nconst colors = new Colors();\nconst HOVER_TO_LOAD_TIME = 750;\n\nconst SampleOption = ({\n    isCurrent,\n    isNext,\n    setCurrentSoundInList,\n    setPackToSearch,\n    number,\n    setExpandedProject,\n    setSidebarViewMode,\n    result,\n    scrollRef,\n    sequencerEngine,\n    setSampleDragging,\n    source,\n    setSearchText,\n    autoLoad=false,\n    setCreatingNewPack\n}) => { \n    let hovered = useRef(false);\n    let playOnLoad = useRef(false);\n    let added = useRef(false);\n    let loading = useRef(false);\n    let ref = useRef(undefined);\n    let [showProjects, setShowProjects] = useState(undefined);\n    let [loadedAudio, setLoadedAudio] = useState(undefined);\n    let stopped = useRef(false);\n    let disposed = useRef(false);\n    let [isSourcing, setIsSourcing] = useState(false);\n    let [dropdownPos, setDropdownPos] = useState(undefined);\n    let [isLoading, setIsLoading] = useState(false);\n    let [sample, setSample] = useState(undefined);\n    let [showSample, setShowSample] = useState(false);\n    let [projectsUsed, setProjectsUsed] = useState([]);\n    let [selectedSlice, setSelectedSlice] = useState(undefined);\n    let [isTagging, setIsTagging] = useState(undefined);\n    let {toggleFavorite, isFavorited} = useFavorites({type: SOUND_RATED, contentHash: sample && sample.getId()});\n    let [guildName, setGuildName] = useState(undefined);\n\n    useEffect(() => {\n        if (result.guildId) {\n            ethereum.guilds.getGuildName(result.guildId)\n                .then(\n                    setGuildName);\n        }\n    }, [result]);\n\n    let audioUnit = useRef(undefined);\n    const isResample = sample && sample.tags && sample.tags.indexOf(\"Resampled\") > -1;\n    let id =  isResample && projectsUsed.length > 0 ?\n        projectsUsed[projectsUsed.length - 1].newSequence :\n        source;\n    let color = id && colors.getColorForHash(id);\n    let style = {\n        borderColor: color,\n        backgroundColor: color,\n    };\n\n    useEffect(() => {\n        if (isNext) {\n            loadSample();\n        }\n    }, [isNext]);\n\n    useEffect(() => {\n        if (isCurrent) {\n            stopped.current = false;\n            if (loadedAudio) {\n                audioUnit.current.playSound(0);\n            } else {\n                setIsLoading(true);\n                if (loading.current) {\n                    playOnLoad.current = true;\n                } else {\n                    loadSample(true);\n                }\n            }\n        } else {\n            stopped.current = true;\n            if (audioUnit.current) {\n                audioUnit.current.stopSound();\n            } \n            setIsTagging(false);\n        }\n    }, [isCurrent, setLoadedAudio, sample, setIsTagging]);\n\n    useScrollTo({ref, scrollRef, isCurrent});\n\n    useEffect(() => {\n        if (isCurrent) {\n            window.addEventListener(\"keydown\", onKeyDown);\n        } else {\n            window.removeEventListener(\"keydown\", onKeyDown);\n        }\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [isTagging, setIsTagging, isCurrent, sample, showSample, sequencerEngine, selectedSlice, setShowSample]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter' && !added.current) {\n            if (isTagging) { return; }\n            added.current=true;\n            let selectedTrack = sequencerEngine.getSelectedTrack();\n            if (selectedTrack && (e.ctrlKey || e.metaKey)) {\n                selectedTrack.useNewSound(sample);\n            } else {\n                addSample(true);\n            }\n           \n            if (audioUnit.current) {\n                audioUnit.current.stopSound();\n            }\n        } else if (e.key === 'Backspace') {\n            if (isTagging) { return; }\n            if (audioUnit.current) {\n                audioUnit.current.stopSound();\n            }\n        } else if (e.key === 't' && (e.ctrlKey || e.metaKey)) {\n            setIsTagging(!isTagging);\n        } else if (e.key === 'f' && (e.ctrlKey || e.metaKey)) {\n            toggleFavorite(e);\n        }\n    }, [isTagging, setIsTagging, isCurrent, sample, showSample, sequencerEngine, selectedSlice, setShowSample]);\n\n    useEffect(() => {\n        if (autoLoad && sample) {\n            loadSample();\n            setShowSample(true);\n        }\n    }, [sample, autoLoad, setLoadedAudio, setShowSample]);\n\n    useEffect(() => {\n        let sample = new Sample(result.ipfsHash);\n        sample.load(false)\n            .then(() => setSample(sample));\n    }, [result, setSample, audioUnit]);\n\n    useEffect(() => {\n        getProjectsUsed(result.ipfsHash)\n            .then(setProjectsUsed);\n    }, [setProjectsUsed, result]);\n\n    useEffect(() => {\n        return () => {\n            if (audioUnit.current) {\n                audioUnit.current.dispose();\n            }\n            if (sample) {\n                sample.dispose();\n            }\n            disposed.current = true;\n        };\n    }, []);\n\n    const loadProject = (project) => {\n        setExpandedProject({... project, edits: []});\n        setSidebarViewMode(SEQUENCES);\n    };\n\n    const addSample = useCallback((force, e) => {\n        if (e && e.ctrlKey) {\n            return;\n        }\n        if (force) {\n            sequencerEngine.addSound(sample, undefined, selectedSlice && [selectedSlice]);\n        } else {\n            setShowSample(true);\n            if (!loading.current) {\n                loadSample(true);\n            } else if (audioUnit.current) {\n                audioUnit.current.playSound(0, 2);\n            }\n        }\n    }, [sample, showSample, sequencerEngine, selectedSlice, setShowSample]);\n\n    const loadSample = useCallback((play=false) => {\n        if (sample && !sample.audioBuffer && !loading.current) {\n            loading.current = true;\n            sample.fetchAudio()\n                .then(x => {\n                    if (disposed.current) { return; }\n                    let _audioUnit = new AudioUnit(Tone.context);\n                    loading.current = false;\n                    _audioUnit.setBuffer(x.audioBuffer);\n                    audioUnit.current = _audioUnit;\n                    if (play || playOnLoad.current) {\n                        if (!stopped.current) {\n                            _audioUnit.playSound(0);\n                        }\n                    }\n                    setLoadedAudio(true);\n                });\n        } \n   }, [setLoadedAudio, sample]);\n\n    const onHover = useCallback(async () => {\n        hovered.current = true;\n        await sleep(HOVER_TO_LOAD_TIME);\n        if (!hovered.current) {\n            return;\n        }\n        loadSample();\n    }, [sample, showSample, setLoadedAudio]);\n\n    const favoriteSample = useCallback(() => {\n    }, [sample]);\n\n    const onContextMenu = useCallback((e) => {\n        e.stopPropagation();\n        let x = e.clientX - ref.current.getBoundingClientRect().left;\n        let y = e.clientY - ref.current.getBoundingClientRect().top;\n        if (x > 160) {\n            x -= 200;\n        }\n        setDropdownPos({x,y});\n        e.preventDefault();\n    }, [setDropdownPos]);\n\n\n    const onMouseDown = useCallback((e) => {\n       setCurrentSoundInList(number);\n    }, [number]);\n\n    let className = \"sample-option\";\n    if (isCurrent) {\n        className += \" current\";\n    }\n\n    return (\n        <div\n          ref={ref}\n          onContextMenu={onContextMenu}\n          onMouseDown={onMouseDown}\n          onMouseOver={onHover}\n          draggable={true}\n          onDragOver={(e) => e.preventDefault()}\n          onDragStart={(e) => {\n              if (audioUnit.current) {\n                  audioUnit.current.stopSound();\n              }\n              stopped.current = true;\n              \n              setSampleDragging(sample);\n          }}\n          onMouseLeave={() => hovered.current = false}\n          className={className}>\n         <ContentDropdown\n            dropdownPos={dropdownPos}\n            setDropdownPos={setDropdownPos}\n            setIsTagging={setIsTagging}\n           setIsSourcing={setIsSourcing}\n            isUnsourced={true}\n            content={sample}\n            setPackToSearch={setPackToSearch}\n            contentHash={sample && sample.getId()}/>\n         <div className=\"sample-option-inner\">\n            <div\n              className=\"wave-and-name\">\n              <div className=\"name-and-tags\">\n                {isFavorited ? <div className=\"heart favorited\"/> : \"\"}\n                <div\n                  onClick={(e) => addSample(undefined, e)}\n                  className=\"sample-name\">{truncate(trim(result.title))}</div>\n                {guildName ? <div className=\"guild-name\">{guildName}</div> : ''}\n                 <PulseLoader\n                   sizeUnit={\"px\"}\n                   style={{margin: 0, lineHeight: '12px'}}\n                   size={6}\n                   color={'white'}\n                   loading={loading.current}\n                 />\n                <div className=\"pack-indicators\">\n                  {sample && sample.packs && sample.packs.map(\n                      pack => <div style={{backgroundColor: colors.getColorForHash(pack)}} className=\"pack-thumb\"/>)}\n                </div>\n                {projectsUsed[0] ?\n                 <div\n                   onClick={() => loadProject(projectsUsed[0])}\n                   className=\"projects-used\">\n                   <span>\n                     {projectsUsed.length} \n                   </span>\n                 </div> :\n                 \"\"}\n                <div style={!isResample || projectsUsed.length === 0 ? {maxWidth: 200} : {}} className=\"sample-tags\">\n                  {!isTagging && sample && sample.tags && sample.tags\n                   .map(\n                      tag =>\n                          <Documented key={tag} element={FILTER_BY_TAG} arg={tag}>\n                            <div\n                              style={{\n                                  borderColor: colors.getColorForHash(tag),\n                                  color: colors.getColorForHash(tag),\n                              }}\n                              onClick={(e) => {\n                                  e.stopPropagation();\n                                  setSearchText(tag);\n                              }}\n                              className=\"tag-option\">\n                              {truncate(tag, 20)}\n                            </div>\n                          </Documented>\n                  )}\n                  {sample && sample.year ? <div className=\"sample-year\">{sample.year}</div> : ''}\n                </div>\n              </div>\n              {showSample ?\n               <div className=\"waveform-and-rating\">\n                 {loadedAudio ?\n                  <Documented element={SELECTOR_WAVEFORM}>\n                    <Waveform\n                      selections={[]} \n                      onChooseSlice={setSelectedSlice}\n                      buffer={audioUnit.current.buffer}\n                      height={40}\n                      width={340}\n                      audioUnit={audioUnit.current}\n                      sample={sample}\n                      id={sample.ipfsHash}\n                      sequencerEngine={sequencerEngine}\n                    />\n                  </Documented>\n                  : ''}\n              </div> : ''}\n              {isTagging ? <TagsInfo  content={sample}/> : ''}\n              {isSourcing ? <SourceFinder setIsSourcing={setIsSourcing} sample={sample} guildId={result.guildId} /> : ''}\n            </div>\n          </div>\n        </div>\n    );\n};\n\nconst truncate = (name, len=30) => name.length > len ? name.slice(0, len - 8) + '...' + name.slice(name.length - 8) : name;\n\nconst mapDispatchToProps = (dispatch) => ({\n    setSampleDragging: sample => dispatch(setSampleDragging(sample)),\n    setSearchText: x => dispatch(setQuickAddSearchText(x)),\n    setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n    setExpandedProject: m => dispatch(setExpandedProject(m)),\n    setCurrentSoundInList: m => dispatch(setCurrentSoundInList(m)),\n    setCreatingNewPack: m => dispatch(setCreatingNewPack(m)),\n});\n\nexport default connect(null, mapDispatchToProps)(SampleOption);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Sample from 'repos/Sample.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport Colors from 'components/Colors.js';\nimport {\n    setShowingSoundList,\n    setCurrentSoundInList} from 'actions/index.js';\nimport SampleOption from './SampleOption.js';\nimport {useScroll} from './useScroll.js';\nimport {connect} from 'react-redux';\nconst colors = new Colors();\n\nconst SourceResults = ({\n    setCurrentSoundInList,\n    setShowingSoundList,\n    source,\n    resultsCounter=0,\n    sequencerEngine,\n    odd,\n    alone,\n    resultsSize,\n    i,\n    showPianoRoll,\n    scrollRef,\n    bottomHeight,\n    isPack,\n    packToSearch,\n    isUnsourced,\n    setSearchTerm,\n    currentSoundInList,\n    sourceToSearch,\n    loadEverything,\n    setPackToSearch,\n}) => { \n    let {coverArtHash, results, videoId, tag} = source;\n    let [samples, setSamples] = useState([]);\n    let [autoLoad, setAutoLoad] = useState(alone || loadEverything)\n    let ref = useRef(undefined);\n    let {size} = useScroll(ref, 9, alone, undefined, undefined, undefined, sourceToSearch);\n\n    useEffect(() => {\n    }, [size]);\n\n    useEffect(() => {\n        setShowingSoundList(true);\n        return () => {\n            setCurrentSoundInList(undefined);\n            setShowingSoundList(false);\n        }\n    }, []);\n\n    let style = {\n    };\n    if (!sourceToSearch && coverArtHash) {\n        style.backgroundImage = 'url(' + ipfs.getHashUrl(coverArtHash) + \")\";\n    } else if (!sourceToSearch && videoId) {\n        style.backgroundImage = 'url(' + 'https://img.youtube.com/vi/' + videoId + '/1.jpg)';\n    } else if (tag) {\n        /*\n        style.borderColor = colors.getColorForHash(tag);\n        style.borderStyle = \"solid\";\n        style.borderWidth = 1;\n        style.color = style.borderColor;\n        */\n        style.backgroundColor = colors.getColorForHash(tag);\n    }\n\n    let thumbClassName = \"source-results-thumb\";\n    if (tag) {\n        thumbClassName += \" unsourced\";\n    }\n\n    let className = \"source-results\";\n    if (odd) {\n        className += \" odd\";\n    }\n    if (alone) {\n        className += \" alone\";\n    }\n    /*\n    if (!alone && resultsSize === 0)  {\n        return (<div></div>);\n    }\n    */\n\n    let fullStyle = {\n    };\n    if (alone) {\n        fullStyle.height= window.innerHeight - 233\n    }\n    if(showPianoRoll) {\n        fullStyle.height -= bottomHeight - 130;\n    }\n    let releaseName = results[0].releaseName;\n    let artistName = results[0].artistName;\n\n    return (\n        <div style={fullStyle}\n             ref={ref}\n             className={className}>\n          <div\n            onClick={() => setAutoLoad(true)}\n            className={thumbClassName} style={style}>\n            <span>{tag}</span>\n          </div>\n          <div className=\"sample-options\">\n            {!sourceToSearch && releaseName ? <div className=\"release-name\">{artistName} - {releaseName}</div> : ''}\n            {results.slice(0, resultsSize !== undefined ? resultsSize : size).map(\n                (x,i) =>\n                    <SampleOption\n                      isUnsourced={isUnsourced}\n                      setPackToSearch={setPackToSearch}\n                      scrollRef={scrollRef}\n                      isCurrent={(!packToSearch || isPack) && resultsCounter + i === currentSoundInList}\n                      isNext={resultsCounter + i === currentSoundInList + 1}\n                      number={resultsCounter + i}\n                      setSearchTerm={setSearchTerm}\n                      autoLoad={autoLoad}\n                      source={coverArtHash || videoId || tag}\n                      sequencerEngine={sequencerEngine}\n                      key={i}\n                      result={x}/>)}\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      currentSoundInList: state.selector.currentSoundInList //state.selector.currentSoundInList >= props.resultsCounter &&\n          //state.selector.currentSoundInList < props.resultsCounter + props.resultsSize ?\n          //state.selector.currentSoundInList : undefined,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setCurrentSoundInList: m => dispatch(setCurrentSoundInList(m)),\n      setShowingSoundList: m => dispatch(setShowingSoundList(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceResults);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SourceResults from './SourceResults.js';\nimport UnsourcedFlow from \"components/installation/UnsourcedFlow.js\";\nimport {connect} from 'react-redux';\n\nconst SourceEditor = ({source, sequencerEngine}) => { \n    return (\n        <div>\n          <div className=\"unsourced-header\">\n            Edit Source Information\n          </div>\n          <UnsourcedFlow show={true} samples={source.results}/>\n          <SourceResults alone={true} sequencerEngine={sequencerEngine} source={source}/> \n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceEditor);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport {useScroll} from './useScroll.js';\nimport SourceResults from './SourceResults.js';\nimport {connect} from 'react-redux';\nimport {formatDate} from './formatDate.js';\n\nconst DayResults = ({setPackToSearch, day, sequencerEngine, showPianoRoll, bottomHeight, currentSoundInList}) => { \n    let {discogs, blockNumber, youtube, unsourced} = day;\n    let [date, setDate] = useState(undefined);\n\n    useEffect(() => {\n        getBlockDate(blockNumber).then(\n            setDate);\n    }, [blockNumber]);\n    \n    let ref = useRef(undefined);\n\n    let {size} = useScroll(ref, (window.innerHeight / 770.0) * 30, true, undefined, undefined, undefined, undefined, currentSoundInList);\n\n    let unsourcedResults = [];\n    for (let tag in unsourced) {\n        unsourcedResults = [... unsourcedResults, ... unsourced[tag]];\n    }\n    let i=0;\n    let resultsCount = 0;\n    let list = [];\n    for (let coverArtHash in discogs) {\n        let resultsSize = size - resultsCount;\n        if (coverArtHash === undefined || coverArtHash === '') {\n        }\n        if (resultsSize > 0) {\n            list.push(\n                <SourceResults\n                  odd={++i % 2 === 0}\n                  key={i}\n                  resultsCounter={resultsCount}\n                  setPackToSearch={setPackToSearch}\n                  scrollRef={ref}\n                  resultsSize={resultsSize}\n                  sequencerEngine={sequencerEngine}\n                  source={{results: discogs[coverArtHash], coverArtHash}}\n                />);\n            resultsCount += Math.min(resultsSize, discogs[coverArtHash].length);\n        }\n    }\n    for (let videoId in youtube) {\n        let resultsSize = size - resultsCount;\n        if (resultsSize > 0) {\n            list.push(\n                <SourceResults\n                  odd={++i % 2 === 0}\n                  key={i}\n                  scrollRef={ref}\n                  setPackToSearch={setPackToSearch}\n                  resultsCounter={resultsCount}\n                  resultsSize={resultsSize}\n                  sequencerEngine={sequencerEngine}\n                  source={{results: youtube[videoId], videoId}}\n                />);\n            resultsCount += Math.min(resultsSize, youtube[videoId].length);\n        }\n    }\n\n    let resultsSize = size - resultsCount;\n    for (let tag in unsourced) {\n        let resultsSize = size - resultsCount;\n        if (resultsSize > 0) {\n            list.push(\n                <SourceResults\n                  odd={++i % 2 === 0}\n                  key={i}\n                  setPackToSearch={setPackToSearch}\n                  scrollRef={ref}\n                  resultsSize={resultsSize}\n                  isUnsourced={true}\n                  resultsCounter={resultsCount}\n                  sequencerEngine={sequencerEngine}\n                  source={{results: unsourced[tag], tag: tag}}/>);\n            resultsCount += Math.min(resultsSize, unsourced[tag].length);\n        }\n    }\n\n    let style = {\n        height: window.innerHeight - 222\n    };\n    return (\n        <div style={style} ref={ref} className=\"day-results\">\n          <div className=\"date\">\n            {list}\n          </div>\n        </div>);\n}\n\nconst addToList = (map) => {\n    let list = [];\n    for (let key in map) {\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      currentSoundInList: state.selector.currentSoundInList\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Colors from \"components/Colors.js\"\nimport SourceResults from './SourceResults.js';\nimport {connect} from 'react-redux';\nimport {useScroll} from './useScroll.js';\n\nconst colors = new Colors();\n\nconst has = (r) => Object.keys(r) > 0;\n\nconst count = (day) => {\n    let c = 0;\n    for (let source in day.discogs) {\n        c+= day.discogs[source].length;\n    }\n    for (let source in day.youtube) {\n        c+= day.youtube[source].length;\n    }\n    c+= day.unsourced.length;\n    return c;\n}\n\nconst ListResults = ({\n    showPianoRoll,\n    bottomHeight,\n    results,\n    isPack,\n    sequencerEngine,\n    searchTerm,\n    setSearchTerm,\n    sourceToSearch,\n    packToSearch,\n    setPackToSearch,\n    loadEverything,\n    scrollRef\n}) => { \n    let ref = useRef(undefined);\n    let list = [];\n    let {size} = useScroll(scrollRef, 30, true);\n    let i=0;\n    let resultsCount = 0;\n    let _results = [];\n    for (let day of results) {\n        let {discogs, date, youtube, unsourced} = day;\n        let unsourcedResults = [];\n        for (let tag in unsourced) {\n            unsourcedResults = [... unsourcedResults, ... unsourced[tag]];\n        }\n        \n        for (let coverArtHash in discogs) {\n            let resultsSize = size - resultsCount;\n            if (resultsSize > 0) {\n                list.push(\n                    <SourceResults\n                      resultsCounter={resultsCount}\n                      packToSearch={packToSearch}\n                      isPack={isPack}\n                      loadEverything={loadEverything}\n                      scrollRef={scrollRef}\n                      sourceToSearch={sourceToSearch}\n                      odd={++i % 2 === 0}\n                      setPackToSearch={setPackToSearch}\n                      setSearchTerm={setSearchTerm}\n                      key={i}\n                      resultsSize={resultsSize}\n                      sequencerEngine={sequencerEngine}\n                      source={{results: discogs[coverArtHash], coverArtHash}}\n                    />);\n                resultsCount += Math.min(resultsSize, discogs[coverArtHash].length);\n            }\n            _results = [... _results, ...discogs[coverArtHash]];\n        }\n        for (let videoId in youtube) {\n            let resultsSize = size - resultsCount;\n            if (resultsSize > 0) {\n                list.push(\n                    <SourceResults\n                      odd={++i % 2 === 0}\n                      scrollRef={scrollRef}\n                      resultsCounter={resultsCount}\n                      setPackToSearch={setPackToSearch}\n                      packToSearch={packToSearch}\n                      isPack={isPack}\n                      loadEverything={loadEverything}\n                      key={i}\n                      sourceToSearch={sourceToSearch}\n                      resultsSize={resultsSize}\n                      setSearchTerm={setSearchTerm}\n                      sequencerEngine={sequencerEngine}\n                      source={{results: youtube[videoId], videoId}}\n                    />);\n                resultsCount += Math.min(resultsSize, youtube[videoId].length);\n            }\n            _results = [... _results, ...youtube[videoId]];\n        }\n\n        for (let tag in unsourced) {\n            let resultsSize = size - resultsCount;\n            if (resultsSize > 0) {\n                list.push(\n                    <SourceResults\n                      odd={++i % 2 === 0}\n                      scrollRef={scrollRef}\n                      setPackToSearch={setPackToSearch}\n                      loadEverything={loadEverything}\n                      key={i}\n                      packToSearch={packToSearch}\n                      isPack={isPack}\n                      resultsCounter={resultsCount}\n                      setSearchTerm={setSearchTerm}\n                      resultsSize={resultsSize}\n                      sourceToSearch={sourceToSearch}\n                      sequencerEngine={sequencerEngine}\n                      source={{results: unsourced[tag], tag: tag}}/>\n                );\n                resultsCount += Math.min(resultsSize, unsourced[tag].length);\n            }\n            _results = [... _results, ...unsourced[tag]];\n        }\n    }\n\n    let releaseName = _results[0] && _results[0].releaseName;\n    let artistName = _results[0] && _results[0].artistName;\n\n    let className = \"list-results\";\n    if (isPack || (sourceToSearch && releaseName)) {\n        className += \" showing-source\";\n    }\n    return (\n        <div  ref={ref} className={className}>\n            {sourceToSearch && releaseName ? <div className=\"source-release-name\">{artistName} - {releaseName}</div> : ''}\n          {isPack ? <div className=\"source-release-name\">\n                            <div style={{backgroundColor: colors.getColorForHash(packToSearch.title)}} className=\"pack-thumb\"></div>\n                            {packToSearch.title}</div> : ''}\n          {list}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {GRID, LIST} from './constants.js';\nimport ListResults from './ListResults.js';\nimport UnknownProgressBar from 'components/progressbar/UnknownProgressBar.js';\nimport {useScroll} from './useScroll.js';\nimport Day from './Day.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport {TAG, DAY} from './constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setCurrentTagInList} from 'actions/index.js';\n    \nimport {formatDate} from './formatDate.js';\nlet id = 0;\n\nconst SIZE=50;\n\nconst SoundGrid = ({\n    children,\n    sequencerEngine,\n    onClickSource,\n    onClickDay,\n    searchTerm,\n    displayOption,\n    showPianoRoll,\n    setPackToSearch,\n    packToSearch,\n    bottomHeight,\n    guildId,\n    groupBy,\n    resultsElement,\n    setCurrentTagInList,\n    currentTagInList,\n    filterFavorites,\n    setSourceToSearch\n}) => { \n    let [results, setResults] = useState([]);\n    let [start, setStart] = useState(0);\n    let lastQuery = useRef('');\n    let [isLoading, setIsLoading] = useState(false);\n    let ref = useRef(undefined);\n    let pageSize = groupBy ? (window.innerHeight / 500.0) * 50 : 15;\n    let {size, scrollPosition} = useScroll(\n        ref,\n        searchTerm !== \"\" ? Math.round((window.innerHeight / 500.0) * 10) : Math.round(pageSize),\n        true,\n        searchTerm,\n        groupBy,\n        undefined,\n        currentTagInList);\n\n    useEffect(() => {\n        if (!resultsElement && ref.current) {\n            ref.current.scrollTo(0, scrollPosition.current);\n        }\n    }, [resultsElement]);\n\n    useEffect(() => {\n        let query = searchTerm+guildId+groupBy+start+filterFavorites;\n        if (query === lastQuery.current) {\n            return;\n        } \n        if (start === 0) {\n            setIsLoading(true);\n        }\n        lastQuery.current = query;\n\n        let pageSize = groupBy ? (window.innerHeight / 500.0) * 50 : 15;\n        getSoundResultsServer(\n            pageSize,\n            searchTerm, guildId, groupBy, start, filterFavorites)\n            .then(r => {\n                if (Math.floor(start) == 0) {\n                    setResults(r);\n                    setCurrentTagInList(0);\n                } else if (Math.floor(start) > 0 && r.length > 0) {\n                    setResults([... results, ...r]);\n                } else {\n                }\n                setIsLoading(false);\n            });\n    }, [setResults, sequencerEngine, setIsLoading, start, results, filterFavorites, searchTerm]);\n\n    useEffect(() => {\n        setStart(0);\n        setResults([]);\n    }, [guildId, groupBy, searchTerm, setStart, setResults]);\n\n    useEffect(() => {\n        let _size = pageSize;\n        setStart(Math.max(0, size - _size))\n    }, [size, setStart]);\n\n    let style = {\n        height: window.innerHeight - 223\n    };\n        if (showPianoRoll) {\n            style.height -= bottomHeight - 150;\n        }\n\n    let listResults = undefined;\n    if (displayOption === LIST) {\n        if (isLoading) {\n            return (<UnknownProgressBar text=\"Searching sounds\"/>);\n        };\n        listResults = (\n            <ListResults\n              setPackToSearch={setPackToSearch}\n              packToSearch={packToSearch}\n              scrollRef={ref}\n              searchTerm={searchTerm}\n              results={results}\n              sequencerEngine={sequencerEngine}/>);\n    }\n\n    return (\n        <div>\n          {resultsElement ? <div>\n                              {children}\n                              {resultsElement}\n                            </div>: ''}\n          <div style={style} ref={ref} id=\"sound-grid\" className={resultsElement ? \"hide sound-grid no-select\" : \"no-select sound-grid\"}>\n            {children}\n            {!isLoading && results.length === 0 ? <div className=\"no-results\">No Results Found</div> : ''}\n            {isLoading ?\n             <UnknownProgressBar text=\"Searching sounds\"/> :\n             listResults ? listResults : \n             results.slice(0, size).map(\n                 (dayResults, i) =>\n                     <Day\n                       key={\"day-\" + i}\n                       filterFavorites={filterFavorites}\n                       setPackToSearch={setPackToSearch}\n                       scrollRef={ref}\n                       number={i}\n                       isCurrent={!packToSearch && currentTagInList === i}\n                       onClickSource={onClickSource}\n                       searchTerm={searchTerm}\n                       setSourceToSearch={setSourceToSearch}\n                       groupBy={groupBy}\n                       onClickDay={onClickDay}\n                       results={dayResults}/>)}\n          </div>\n        </div>\n    );\n}\n\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      currentTagInList: state.selector.currentTagInList,\n      bottomHeight: state.arrangement.bottomHeight,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setCurrentTagInList: (s) => dispatch(setCurrentTagInList(s))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SoundGrid);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {TAG} from './constants.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport {connect} from 'react-redux';\nimport ListResults from \"components/selector2/ListResults.js\";\n\nconst SourceToSearch = ({\n    showPianoRoll,\n    bottomHeight,\n    sourceToSearch,\n    setPackToSearch,\n    sequencerEngine,\n    guildId\n}) => { \n    let ref = useRef(undefined);\n    let [results, setResults] = useState([]);\n    useEffect(() => {\n        getSoundResultsServer(\n            50, \"\", guildId, TAG, 0, false, sourceToSearch)\n            .then((r) => {\n                if (r.length > 0) {\n                    setResults(r);\n                } else {\n                    // THERES A BUG IN BACKEND WHERE IT SOMETIMES RETURNS 0\n                    // NON_DETERMINISTICALLY (I NO, BAD!). BUT SEARCHING AGAINN\n                    // USUALLY FIXES IT\n                    setTimeout(() => {\n                        getSoundResultsServer(\n                            50,\n                            \"\", guildId, TAG, 0, false, sourceToSearch)\n                            .then(setResults);\n                    }, 500);\n                }\n            });\n    }, [sourceToSearch, setResults]);\n\n    let style = {\n        height: window.innerHeight - 263\n    };\n\n    if (showPianoRoll) {\n        style.height -= bottomHeight - 150;\n    }\n\n    return (\n        <div ref={ref} style={style} className=\"source-to-search-results\">\n          <ListResults\n            setPackToSearch={setPackToSearch}\n            scrollRef={ref}\n            sourceToSearch={sourceToSearch}\n            size={1000}\n            searchTerm={\"\"}\n            results={results}\n            sequencerEngine={sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceToSearch);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {TAG} from './constants.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport {connect} from 'react-redux';\nimport ListResults from \"components/selector2/ListResults.js\";\n\nconst PackToSearch = ({\n    showPianoRoll,\n    bottomHeight,\n    packToSearch,\n    sequencerEngine,\n    setPackToSearch,\n    guildId\n}) => { \n    let ref = useRef(undefined);\n    let [results, setResults] = useState([]);\n    useEffect(() => {\n        getSoundResultsServer(\n            50, \"\", guildId, TAG, 0, false, undefined, undefined, packToSearch)\n            .then((r) => {\n                if (r.length > 0) {\n                    setResults(r);\n                } else {\n                    // THERES A BUG IN BACKEND WHERE IT SOMETIMES RETURNS 0\n                    // NON_DETERMINISTICALLY (I NO, BAD!). BUT SEARCHING AGAINN\n                    // USUALLY FIXES IT\n                    setTimeout(() => {\n                        getSoundResultsServer(\n                            50,\n                            \"\", guildId, TAG, 0, false, undefined, undefined, packToSearch)\n                            .then(setResults);\n                    }, 500);\n                }\n            });\n    }, [packToSearch, setResults]);\n    let style = {\n        height: window.innerHeight - 263\n    };\n\n    if (showPianoRoll) {\n        style.height -= bottomHeight - 150;\n    }\n\n    return (\n        <div ref={ref} style={style} className=\"source-to-search-results\">\n          <ListResults\n            setPackToSearch={setPackToSearch}\n            scrollRef={ref}\n            packToSearch={packToSearch}\n            isPack={true}\n            size={1000}\n            searchTerm={\"\"}\n            results={results}\n            sequencerEngine={sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackToSearch);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setQuickAddSearchText,\n} from 'actions/index.js';\nimport SourceEditor from './SourceEditor.js';\nimport SampleSearch from './SampleSearch.js';\nimport SourceResults from './SourceResults.js';\nimport DayResults from './DayResults.js';\nimport SoundGrid from './SoundGrid.js';\nimport {getBlockMonths} from 'utils/getBlockMonths.js';\nimport Months from 'components/explore/work/Months.js';\nimport {connect} from 'react-redux';\nimport '../../NewSelector.scss';\nimport '../../Selector.scss';\nimport {GRID, LIST, DAY, TAG} from './constants.js';\nimport SourceToSearch from \"components/selector2/SourceToSearch.js\";\nimport PackToSearch from \"components/selector2/PackToSearch.js\";\n\nconst Selector = ({defaultGroupBy=TAG, sequencerEngine, guildId, quickAddSearchText, setSearchText}) => { \n    let [months, setMonths] = useState({});\n    let [currentMonth, setCurrentMonth] = useState(new Date().getMonth());\n    let [day, setDay] = useState(undefined);\n    let [displayOption, setDisplayOption] = useState(GRID);\n    let [groupBy, setGroupBy] = useState(defaultGroupBy);\n    let [source, setSource] = useState(undefined);\n    let [sourceToSearch, setSourceToSearch] = useState(undefined);\n    let [packToSearch, setPackToSearch] = useState(undefined);\n    let [searchTerm, setSearchTerm] = useState(quickAddSearchText);\n    let [filterFavorites, setFilterFavorites] = useState(false);\n    let [sourceToEdit, setSourceToEdit] = useState(undefined);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [setDay, setSource, setSourceToEdit, setSourceToSearch, setDisplayOption, displayOption]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key==='ArrowLeft') {\n            goBack();\n        } else if (e.key === \"Tab\") {\n            /*\n            setDisplayOption(\n                displayOption === GRID ?\n                    LIST : GRID);\n                    */\n        }\n    }, [setDay, setSource, setSourceToEdit, setSourceToSearch, setDisplayOption, displayOption]);\n   \n    useEffect(() => {\n        setSourceToSearch(undefined);\n        setPackToSearch(undefined);\n    }, [searchTerm, setGroupBy, setSourceToSearch, setPackToSearch]);\n\n    useEffect(() => {\n        if (searchTerm === \"\" && !filterFavorites) {\n            setDisplayOption(GRID);\n        }\n    }, [searchTerm, filterFavorites, setDisplayOption]);\n\n\n    const onClickSource = useCallback((e, source) => {\n        if (e.metaKey) {\n            setDay(undefined);\n            setSourceToEdit(source);\n            return;\n        }\n        setDay(undefined);\n        setSource(source);\n    }, [setDay, setSource]);\n\n    const onClickDay = useCallback((day, tag) => {\n        setSource(undefined);\n        setDay(day);\n    }, [setSearchTerm, setSource, setDay, groupBy]);\n\n    let results = undefined;\n    let backButton = '';\n    let hasBack = false;\n\n    const goBack = useCallback(() => {\n        setDay(undefined);\n        setSource(undefined);\n        setSourceToEdit(undefined);\n        setSourceToSearch(undefined); \n        setPackToSearch(undefined); \n    }, [setDay, setSource, setSourceToEdit, setSourceToSearch, setPackToSearch]);\n\n    if (day || source || sourceToEdit || sourceToSearch || packToSearch) {\n        hasBack = true;\n        backButton = \n            (<div\n               onClick={goBack}\n               className=\"selector-back-button\"/>);\n        if (sourceToEdit) {\n            results = (<SourceEditor sequencerEngine={sequencerEngine} source={sourceToEdit}/>);\n        } else if (sourceToSearch) {\n            results = <SourceToSearch\n                        setPackToSearch={setPackToSearch}\n                        sourceToSearch={sourceToSearch}\n                        sequencerEngine={sequencerEngine}/>;\n        } else if (packToSearch) {\n            results = <PackToSearch\n                        setPackToSearch={setPackToSearch}\n                        packToSearch={packToSearch} sequencerEngine={sequencerEngine}/>;\n        } else {\n            results = \n                source ? <SourceResults\n                           setPackToSearch={setPackToSearch}\n                           alone={true} sequencerEngine={sequencerEngine} source={source}/> :\n            <DayResults setPackToSearch={setPackToSearch} sequencerEngine={sequencerEngine} day={day}/>;\n        }\n    }\n\n    useEffect(() => {\n        //if (quickAddSearchText !== '') {\n            setSearchTerm(quickAddSearchText);\n            setSource(undefined);\n            setDay(undefined);\n            // setDisplayOption(LIST);\n        //}\n    }, [quickAddSearchText, setSearchTerm, setDisplayOption, setSource, setDay]);\n\n    useEffect(() => {\n        setDay(undefined);\n        setSource(undefined);\n    }, [displayOption]);\n\n    const onChange = useCallback((s) => {\n        setDay(undefined);\n        setSource(undefined);\n        setSourceToSearch(undefined);\n        setSearchTerm(s);\n        setSearchText(s);\n    }, [setSearchTerm, setDay, setSource, setSourceToSearch]);\n\n    useEffect(() => {\n        onChange(quickAddSearchText);\n    }, [guildId, setSearchTerm, setDay, setSource, setSourceToSearch]);\n\n    return (\n        <div className={hasBack ? \"new-selector has-back\" : \"new-selector\"}>\n           <div className=\"selector-inner\">\n             <SoundGrid\n               groupBy={groupBy}\n               setPackToSearch={setPackToSearch}\n               packToSearch={packToSearch}\n               displayOption={displayOption} \n               searchTerm={searchTerm}\n               filterFavorites={filterFavorites}\n               setSourceToSearch={setSourceToSearch}\n               onClickSource={onClickSource}\n               onClickDay={onClickDay}\n               guildId={guildId}\n               resultsElement={results}\n               sequencerEngine={sequencerEngine}>\n               <SampleSearch\n                 sourceToSearch={sourceToSearch}\n                 setDisplayOption={setDisplayOption}\n                 displayOption={displayOption}\n                 groupBy={groupBy}\n                 setGroupBy={setGroupBy}\n                 onChange={onChange}\n                 setFilterFavorites={setFilterFavorites}\n                 filterFavorites={filterFavorites}>\n                 <div className=\"search-and-back\">{backButton}</div>\n               </SampleSearch>\n             </SoundGrid>\n           </div>\n        </div>);\n    /* <Months onClickMonth={onClickMonth} currentMonth={currentMonth} months={months}/> */\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      //quickAddSearchText: state.selector.quickAddSearchText,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSearchText: x => dispatch(setQuickAddSearchText(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Selector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setPresetDragging,\n    setLoadingText\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {INSTRUMENT_TYPE_TO_NAME} from 'constants/instrument-types.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst PresetOption = ({sequencerEngine, preset, setPresetDragging, setLoadingText}) => { \n    let dotStyle = {\n        backgroundColor: colors.getColorForHash(INSTRUMENT_TYPE_TO_NAME[preset.instrumentType])\n    };\n\n    const onClick = () => {\n        setLoadingText(\"Loading Preset (\" + preset.title + \")\");\n        sequencerEngine.loadPreset(\n            preset, true)\n            .then(s => setLoadingText(undefined));\n    };\n    return (\n        <div\n          draggable={true}\n          onDragOver={(e) => e.preventDefault()}\n          onDragStart={() => setPresetDragging(preset)}\n          className=\"sample-option\">\n          <div onClick={onClick} className=\"dot\" style={dotStyle}/>\n          <div\n            className=\"wave-and-name\">\n            <div className=\"name-and-tags\">\n              <div className=\"sample-name\">{preset.title}</div>\n              <div style={dotStyle} className=\"instrument-type\">\n                {INSTRUMENT_TYPE_TO_NAME[preset.instrumentType]}\n              </div>\n              {preset.tags.map(tag => <div className=\"tag-option\">{tag}</div>)}\n            </div>\n            <div className=\"waveform-and-rating\">\n            </div>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPresetDragging: (x) => dispatch(setPresetDragging(x)),\n      setLoadingText: (x) => dispatch(setLoadingText(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresetOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PresetOption from './PresetOption.js';\nimport {connect} from 'react-redux';\n\nconst SourceResults = ({\n    source,\n    sequencerEngine,\n    odd,\n    alone,\n    resultsSize,\n    i,\n    showPianoRoll,\n    bottomHeight}\n    ) => { \n        return (\n            <div className=\"source-results\">\n             <div className=\"sample-options preset-options\">\n                {source.results.map(\n                    (x) => <PresetOption sequencerEngine={sequencerEngine} preset={x}/>)}\n              </div>\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport SourceResults from './SourceResults.js';\nimport {formatDate} from '../formatDate.js';\nimport {connect} from 'react-redux';\nimport {useScroll} from '../useScroll.js';\n\nconst DayResults = ({day, sequencerEngine, showPianoRoll, bottomHeight}) => { \n    let ref = useRef(undefined);\n\n    let {unsourced, blockNumber} = day;\n    let {size} = useScroll(ref, 24, true);\n    let [date, setDate] = useState(undefined);\n\n    useEffect(() => {\n        getBlockDate(blockNumber).then(\n            setDate);\n    }, [blockNumber]);\n \n    let unsourcedResults = [];\n    for (let tag in unsourced) {\n        unsourcedResults = [... unsourcedResults, ... unsourced[tag]];\n    }\n    let style = {\n        height: window.innerHeight - 212\n    };\n\n    let i=0;\n    let resultsCount = 0;\n    let list = [];\n    let resultsSize = size - resultsCount;\n\n    if (resultsSize > 0 && unsourcedResults.length > 0) {\n        list.push(\n            <SourceResults\n              odd={++i % 2 === 0}\n              key={i}\n              resultsSize={resultsSize}\n              sequencerEngine={sequencerEngine}\n              source={{results: unsourcedResults, tag: \"Unsourced\"}}/>\n        );\n    }\n\n    return (\n        <div style={style} ref={ref} className=\"day-results\">\n          <div className=\"date\">\n            <div className=\"day-date\">{date ? formatDate(date) : ''}</div>\n            {list}\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Day from '../Day.js';\nimport UnknownProgressBar from 'components/progressbar/UnknownProgressBar.js';\nimport {useScroll} from '../useScroll.js';\nimport {connect} from 'react-redux';\n\nlet id = 0;\n\nconst ContentGrid = ({\n    onClickSource,\n    searchTerm,\n    onClickDay,\n    getContent,\n    searchTerms,\n    showPianoRoll,\n    bottomHeight\n}) => { \n    let [results, setResults] = useState([]);\n    let [isLoading, setIsLoading] = useState(false);\n    let ref = useRef(undefined);\n    let {size} = useScroll(ref, 30, true);\n\n    useEffect(() => {\n        let _id = ++id;\n        setIsLoading(true);\n        getContent(searchTerm)\n            .then(r => {\n                if (_id === id) {\n                    setResults(r);\n                    setIsLoading(false);\n                }\n            });\n    }, [searchTerm, setResults, setIsLoading]);\n\n\n    let style = {\n        height: window.innerHeight - 233\n    };\n    if (showPianoRoll) {\n        style.height -= bottomHeight - 150;\n    }\n\n    return (\n        <div ref={ref} style={style} className=\"sound-grid\">\n          {isLoading ?\n           <UnknownProgressBar text=\"Searching\"/> : \n           results.slice(0, size).map(\n               (dayResults, i) =>\n                   <Day\n                     key={\"day-\" + i}\n                     onClickSource={onClickSource}\n                     onClickDay={onClickDay}\n                     results={dayResults}/>)}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContentGrid);\n","import GuildPresetsContract from 'decentralized/contracts/GuildPresetsContract.js';\nimport {getByDay, partitionBySource, fetchDaysForBlocks} from '../getSoundResults.js';\nimport {decryptResults} from 'decentralized/guilds/queryDecryptor.js';\nimport {INSTRUMENT_TYPE_TO_NAME} from 'constants/instrument-types.js';\nimport BackendQuery from 'decentralized/BackendQuery.js';\nimport {\n    NewPreset2,\n    PresetTag,\n    PresetSample,\n    PresetInstrumentType\n} from 'decentralized/EthereumEvents.js';\nimport {web3} from 'decentralized/web3.js';\n\n\nconst contract = new GuildPresetsContract();\n\nexport const getPresets = async (searchTerm) => {\n     let query = new BackendQuery(contract.contractAddress)\n        .from(NewPreset2)\n        .select('user')\n        .select('encryptedName')\n        .select('contentHash')\n        .select('encryptedContentKey')\n        .select('publicKey')\n        .select('guildId')\n        .where('guildId', 0);\n\n    let results = await decryptResults(await query.executeQuery(), 0);\n    let ids = results.map(x => x.contentHash);\n    let taggedResults = await getTagPresets(ids);\n    let instrumentTypes = await getInstrumentTypePresets(ids);\n    let combined = combineAll(results, taggedResults, instrumentTypes);\n    let byDay = getByDay(filterBySearchTerms(searchTerm, combined));\n    let byDayAndSource = partitionBySource(byDay, searchTerm);\n    return await fetchDaysForBlocks(byDayAndSource);\n};\n\nconst getTagPresets = async (hashes) => {\n    let query = new BackendQuery(contract.contractAddress)\n        .from(PresetTag)\n        .select('contentHash')\n        .select('tag')\n        .whereIn('contentHash', hashes);\n\n    let results = await query.executeQuery();\n    let tags = {};\n    for (let result of results) {\n        if (!(result.contentHash in tags)) {\n            tags[result.contentHash] = [];\n        }\n        tags[result.contentHash].push(result.tag);\n    }\n\n    for (let key in tags) {\n        tags[key] = Array.from(new Set(tags[key]));\n    }\n    return tags;\n};\n\nconst getInstrumentTypePresets = async (hashes) => {\n    let query = new BackendQuery(contract.contractAddress)\n        .from(PresetInstrumentType)\n        .select('contentHash')\n        .select('instrumentType')\n        .whereIn('contentHash', hashes);\n\n    return  await query.executeQuery();\n};\n\nconst combineAll = (results, tags, instrumentTypes) => {\n    let combined = {};\n    for (let result of results) {\n        combined[result.contentHash] = {\n            ... result,\n            tags: tags[result.contentHash] || []\n        };\n    }\n\n    for (let result of instrumentTypes) {\n        combined[result.contentHash] = {\n            ... combined[result.contentHash],\n            ... result\n        };\n    }\n\n    let r = [];\n    for (let result of results) {\n        r.push(combined[result.contentHash]);\n    }\n    return r;\n};\n\nconst filterBySearchTerms = (searchTerms, results) => {\n    if (searchTerms === '') {\n        return results;\n    }\n\n    searchTerms = searchTerms.toLowerCase();\n    // see if this is an instrument type\n    return results.filter(\n        r => r.tags.some(tag => tag.toLowerCase().includes(searchTerms)) ||\n            r.title.toLowerCase().includes(searchTerms));\n};\n\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SourceResults from './SourceResults.js';\nimport DayResults from './DayResults.js';\nimport ContentGrid from './ContentGrid.js';\nimport SampleSearch from '../SampleSearch.js';\nimport {getPresets} from './getPresets.js';\nimport {connect} from 'react-redux';\n\nconst Presets = ({sequencerEngine}) => { \n    let [day, setDay] = useState(undefined);\n    let [source, setSource] = useState(undefined);\n    let [searchTerm, setSearchTerm] = useState('');\n    let [loadEffects, setLoadEffects] = useState(true);\n    let [loadMods, setLoadMods] = useState(true);\n\n    let backButton = '';\n    let results = '';\n    if (day || source) {\n        backButton = \n            (<div\n              onClick={() => {setDay(undefined);  setSource(undefined);}}\n               className=\"selector-back-button\"/>);\n        results = \n            source ? <SourceResults alone={true} sequencerEngine={sequencerEngine} source={source}/> :\n        <DayResults sequencerEngine={sequencerEngine} day={day}/>;\n        results =\n            [(<div className=\"results-toolbar\">\n                <div className=\"settings-info\">\n                  Load preset with \n                </div>\n                <div\n                  onClick={() => setLoadEffects(!loadEffects)}\n                  className={loadEffects ? \"preset-setting selected\" : \"preset-setting\"}>FX</div>\n                <div\n                  onClick={() => setLoadMods(!loadMods)}\n                  className={loadMods ? \"preset-setting selected\" : \"preset-setting\"}>Mods</div>\n              </div>),\n             results];\n         \n    }\n\n    const onChange = useCallback((s) => {\n        setDay(undefined);\n        setSource(undefined);\n        setSearchTerm(s);\n    }, [setSearchTerm]);\n\n    const onClickSource = useCallback((source) => {\n        setDay(undefined);\n        setSource(source);\n    }, [setDay, setSource]);\n\n    const onClickDay = useCallback((day) => {\n        setSource(undefined);\n        setDay(day);\n    }, [setSource, setDay]);\n\n    return (\n        <div className=\"new-selector presets\">\n          <div className=\"search-and-back\">{backButton} <SampleSearch onChange={onChange}/></div>\n        {results ? results : \n         <div className=\"selector-inner\">\n           <ContentGrid\n             onClickSource={onClickSource}\n             onClickDay={onClickDay}\n             getContent={getPresets}\n             searchTerm={searchTerm}\n             sequencerEngine={sequencerEngine}/>\n         </div>}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Presets);\n","import React, {useCallback, useEffect} from 'react';\nimport {\n    setEdgesPadding,\n    setEdgesSize,\n    setEditorPadding,\n    setZObjectSize,\n    setSelectedPulledElements,\n    setBulkWindowPositions,\n    setWindowPosition} from 'actions/index.js';\nimport {\n    getPositions,\n    doesElementIntersect,\n    getMinLeftAndTop,\n    getMaxLeftAndTop} from './utils.js';\n\nexport const useEdgeAdjuster = (elements, subSequence, sequencerEngine, sizeRef, setSize) => {\n    const adjust = () => {\n        let size = sizeRef.current;\n        let {minTop, minLeft} = getMinLeftAndTop(elements);\n        let {maxTop, maxLeft} = getMaxLeftAndTop(elements);\n        \n        minTop -= 100;\n        minLeft -= 100;\n        \n        if (sequencerEngine) {\n            let {edgesSize, edgesPadding} = sequencerEngine.state.spatial;\n            \n            let newSize = {\n                width: maxLeft - minLeft,\n                height: maxTop  - minTop\n            };\n            \n            if (newSize.width !== edgesSize.width ||\n                newSize.height !== edgesSize.height) {\n                sequencerEngine.dispatch(\n                    setEdgesSize(newSize.width + 300, newSize.height + 300));\n            }\n            \n            if ((edgesPadding.x !== minLeft || edgesPadding.y !== minTop)) {\n                sequencerEngine.dispatch(\n                    setEdgesPadding(minLeft,\n                                    minTop));\n            }\n        }\n        \n        if (maxLeft < size.width ||\n            maxTop < size.height) {\n            if (!(maxLeft > size.width || maxTop > size.height)) {\n                return;\n            }\n            let _size = {\n                width: Math.max(size.width, maxLeft),\n                height: Math.max(size.height, maxTop),\n            };\n            sizeRef.current = _size;\n            setSize(_size);\n        } \n    };\n\n    useEffect(() => {\n        setTimeout(() => {\n            adjust();\n        }, 300);\n    }, []);\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setEditorPadding,\n    setSelectedZObject,\n    setModuleSize,\n    setSelectedPulledElements} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nwindow.scr = 45;\nconst MIN_SCALE = 0.30;\n\nconst StyleSetter = ({\n    editorRef,\n    setEditorPadding,\n    uxLocked,\n    edgesPadding,\n    editorPadding,\n    showingSubpatch,\n    sidebarsShowing,\n    mainScrollRef,\n    size,\n    setSize,\n    sizeRef,\n    containerRef,\n    isExplore,\n    collapsed,\n    showPadSequencer,\n    edgesRef,\n    edgesSize,\n}) => { \n    let [styleSize, setStyleSize] = useState(size);\n    let lastZoom = useRef(undefined);\n    let startZoomPosition = useRef(undefined);\n    let startZoomScroll = useRef(undefined);\n    let mouseRef = useRef(undefined);\n\n    useEffect(() => {\n        if (editorRef.current) {\n            if (showPadSequencer) {\n                editorRef.current.style.paddingTop = '0px';\n                editorRef.current.style.paddingLeft = '0px';\n            } else {\n                editorRef.current.style.paddingTop= editorPadding.y + 'px';\n                editorRef.current.style.paddingLeft= editorPadding.x + 'px';\n            }\n        }\n    }, [showPadSequencer, editorPadding]);\n\n    useEffect(() => {\n        if (edgesRef.current) {\n            edgesRef.current.style.width = edgesSize.width +'px';\n            edgesRef.current.style.height = edgesSize.height + 'px';\n            edgesRef.current.style.minWidth = edgesSize.width +'px';\n            edgesRef.current.style.minHeight = edgesSize.height + 'px';\n            edgesRef.current.style.left = edgesPadding.x;\n            edgesRef.current.style.top = edgesPadding.y;\n        }\n    }, [edgesPadding, edgesSize]);\n\n    useEffect(() => {\n        setStyleSize(size);\n    }, [size, setStyleSize]);\n\n    useEffect(() => {\n        if (!mainScrollRef || !mainScrollRef.current) {\n            return () => 0;\n        }\n        mainScrollRef.current.addEventListener(\"mousewheel\", onWheel, {passive: false});\n        mainScrollRef.current.addEventListener(\"mousemove\", onMouseMove);;\n        return () => {\n            if (mainScrollRef && mainScrollRef.current) {\n                mainScrollRef.current.removeEventListener(\"mousewheel\", onWheel, {passive: false});\n                mainScrollRef.current.removeEventListener(\"mousemove\", onMouseMove);;\n            }\n        };\n    }, [setSize,\n        uxLocked,\n        editorPadding,\n        showingSubpatch, mainScrollRef, sidebarsShowing, styleSize, setStyleSize]);\n\n    const onMouseMove = (e) => {\n        if (mouseRef.current) {\n            mouseRef.current.x = e.clientX;\n            mouseRef.current.y = e.clientY;\n        } else {\n            mouseRef.current = {\n                x: e.clientX,\n                y: e.clientY,\n            };\n        }\n    };\n\n    const onWheel = useCallback((e) => {\n        if (window.killScrolling || uxLocked) {\n            e.preventDefault();\n            return;\n        }\n\n        if (!mainScrollRef || !mainScrollRef.current) {\n            return false;\n        }\n\n        e.preventDefault();\n\n        if (!handleScale(e)) {\n            return;\n        }\n\n        let {scrollTop, scrollLeft} = mainScrollRef.current;\n\n        let {deltaX, deltaY} = e;\n\n        /*\n        if (Math.abs(deltaX) < 2) {\n            deltaX *= 0.5;\n        }\n        if (Math.abs(deltaY) < 2) {\n            deltaY *= 0.5;\n        }\n        */\n\n        let x = scrollLeft + deltaX;\n        let y = scrollTop + deltaY;\n\n\n        if (!size) {\n            // return false;\n        }\n\n        let sx = sidebarsShowing ? 2*240 : 0;\n        let sy = sidebarsShowing ? 45 : 0;\n\n        let _width = styleSize ? styleSize.width : 400;\n        let _height = styleSize ? styleSize.height : 400;\n\n        size = {\n            width: Math.max(_width, window.innerWidth - sx),\n            height: Math.max(_height, window.innerHeight - sy)\n        };\n                \n        if (size.width < 200 || size.height < 200) {\n            return;\n        }\n        let _size = {width: deltaX + size.width, height: deltaY + size.height};\n\n        if (x < 0 || y < 0) {\n            let _x= editorPadding.x - deltaX;\n            let _y= editorPadding.y - deltaY;\n            setEditorPadding(_x, _y);\n        }\n\n        containerRef.current.style.width = _size.width+window.scr+'px';\n        containerRef.current.style.height = _size.height+window.scr+'px';\n        setStyleSize(_size);\n        sizeRef.current = _size;\n        mainScrollRef.current.scrollTo(x,y);\n        window.lastScrollTime = new Date().getTime();\n        return false;\n    },[\n        editorPadding,\n        uxLocked,\n        styleSize,\n        setStyleSize,\n        showingSubpatch,\n        sidebarsShowing,\n        mainScrollRef\n      ]);\n\n    const handleScale = useCallback((e) => {\n       let {deltaX, deltaY, wheelDeltaX, wheelDeltaY} = e;\n        if (Math.max(Math.abs(deltaX), Math.abs(deltaY)) < 20 && Math.abs(wheelDeltaY) > 110)  {\n            let scale = window._scale || 1;\n            let _scale=1;\n            if (wheelDeltaY > 0) {\n                _scale =  scale * wheelDeltaY / 117.0;\n            } else {\n                _scale = Math.abs(scale / (wheelDeltaY / 117.0));\n            }\n            window._scale = Math.max(MIN_SCALE, Math.min(1, _scale));\n            if (!lastZoom.current || new Date().getTime() - lastZoom.current > 500) {\n                let rect = containerRef.current.getBoundingClientRect();\n                let {scrollLeft, scrollTop} = mainScrollRef.current;\n                startZoomPosition.current = {\n                    x: ((mouseRef.current.x - rect.left)) / scale,\n                    y: ((mouseRef.current.y - rect.top)) / scale,\n                };\n                startZoomScroll.current = {\n                    x: scrollLeft / scale,\n                    y: scrollTop / scale\n                };\n            }\n\n            // ensure that the scroll position matches that x and y\n            let x = startZoomPosition.current.x;\n            let y = startZoomPosition.current.y;\n            let sx = startZoomScroll.current.x;\n            let sy = startZoomScroll.current.y;\n\n            // the global (including scroll) position of (goal) cursor\n            // i.e. where we want the cursor to be after scrolling\n            let X = (x + sx) / window._scale;\n            let Y = (y + sy) / window._scale;\n\n            lastZoom.current = new Date().getTime();\n\n            if (window._scale === 1) {\n                containerRef.current.style.transform = \"none\";\n            } else {\n                containerRef.current.style.transform = \"scale(\" + window._scale + \")\";\n            }\n\n            let {scrollLeft, scrollTop}  = mainScrollRef.current;\n            /*\n            setTimeout(() => {\n                mainScrollRef.current.scrollTo(X+X/window._scale,Y+Y/window._scale);\n            }, 5);\n            */\n            return false;\n        } else {\n            return true;\n        }\n    }, [mainScrollRef]);\n\n    useEffect(() => {\n        if (isExplore || collapsed) {\n            containerRef.current.style = {};\n        } else if (styleSize) {\n            containerRef.current.style.width = styleSize.width+window.scr+'px';\n            containerRef.current.style.height = styleSize.height+window.scr+'px';\n        }\n    }, [collapsed, isExplore, styleSize]);\n\n\n    return '';\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        size: state.windows.moduleSizes[props.subSequence.id],\n        mainScrollRef: state.spatial.mainScrollRef,\n        sidebarsShowing: state.spatial.sidebarsShowing,\n        showingSubpatch: state.zobject.viewableSubPatches.length > 0,\n        editorPadding: state.spatial.editorPadding,\n        edgesPadding: state.spatial.edgesPadding,\n        edgesSize: state.spatial.edgesSize,\n        showPadSequencer: state.spatial.showPadSequencer,\n        uxLocked: state.zobject.uxLocked\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setEditorPadding: (x,y)=> dispatch(\n          setEditorPadding(x,y)),\n        setSize: x => dispatch(\n            setModuleSize(props.subSequence.id, x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StyleSetter);\n","import React, { memo, useRef, useEffect, useCallback, useState} from 'react';\nimport ZObjectContextMenus from \"components/zobject/ZObjectContextMenus.js\";\nimport ZObjectTooltip from \"components/zobject/ZObjectTooltip.js\";\nimport {useEdgeAdjuster} from \"components/windows/adjustEdgeSize.js\";\nimport {segmentAllCables} from \"messaging/cables/segmentCables.js\"\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\nimport SubPatches from 'components/subpatch/SubPatches.js';\nimport {BANG, NUMBER} from 'zobject/data-types.js';\nimport ZObjectComponent from \"components/zobject/ZObjectComponent.js\";\nimport ZMessageComponent from \"components/zobject/ZMessageComponent.js\";\nimport StyleSetter from './StyleSetter.js';\nimport {useModuleDrop} from './useModuleDrop.js';\nimport PulledOverview from 'components/pulled/PulledOverview.js';\nimport ModuleSys5 from \"components/system5/ModuleSys5.js\";\nimport TrackMidiEffects from 'components/pulled/TrackMidiEffects.js';\nimport GridTab from 'components/pulled/GridTab.js';\nimport {useContainerCoords} from 'components/hooks/useContainerCoords.js';\nimport {useSelection} from \"components/windows/useSelection.js\";\nimport {\n    setSelectedZObject, setModuleSize, setSelectedPulledElements} from 'actions/index.js';\nimport PulledBackground from './PulledBackground.js';\nimport PadEffects from 'components/pulled/PadEffects.js';\nimport GlobalEdges from 'components/pulled/GlobalEdges.js';\nimport PulledSequencer from 'components/pulled/PulledSequencer.js';\nimport PulledPad from 'components/pulled/PulledPad.js';\nimport PadsContainer from \"components/pads/PadsContainer.js\";\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\";\nimport {midiEffectOptions, initializeMidiEffect}  from 'components/effects/constants.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport {setPulledEffects} from 'actions/index.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport PulledEffects from \"components/pulled/PulledEffects.js\";\nimport {connect} from 'react-redux';\nimport '../../ExploreGrid.scss';\n\nconst ModuleSpatialView = memo(({\n    dropdownPosRef,\n    isExplore,\n    isLoading,\n    presentationMode,\n    doneLoading,\n    innerRef,\n    children,\n    edgesRef,\n    setSelection,\n    setScale,\n    setSize,\n    showEffects,\n    pulledEffects,\n    setPulledEffects,\n    setSelectedPulledElements,\n    toggled,\n    setSelectedTrack,\n    subSequence,\n    collapsed,\n    zobjects,\n    setSelectedZObject,\n    selection,\n    scale,\n    elements,\n    editorRef,\n}) => {\n    // const {onContextMenu, dropdownPos, setDropdowPos} = useContextMenu({ref: innerRef});\n    const {sizeRef, ordering, setOrdering} = useWindows({ref: innerRef});\n\n    useEdgeAdjuster(elements, subSequence, subSequence.sequencerEngine, sizeRef, setSize);\n\n    //const {arrangeWindows} = useArrangeWindows({ref, elements, subSequence});\n\n    let {getXY} = useContainerCoords({containerRef: innerRef, scale});\n    let {getSelection} = useSelection({elements});\n\n    const _onDoubleClick = useCallback((e) => {\n        let {x,y} = getXY(e);\n        e.stopPropagation();\n        e.preventDefault();\n        subSequence.createZObject(x,y);\n    }, [subSequence]);\n\n    let onDoubleClick = useDoubleClick(_onDoubleClick);\n\n  \n    let rows = [0,1,2,3,4];\n    let cols = [0,1,2];\n    let {tracks=[]} = subSequence;\n    tracks = tracks.filter(x => isExplore || x.pad === undefined);\n\n    const createZObject= useCallback((x,y,type) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZObject(x,y, type);\n    }, [subSequence]);\n\n    const createZMessage = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZMessage(x,y);\n    }, [subSequence]);\n\n    const createZNumber = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZMessage(x,y, NUMBER);\n    }, [subSequence]);\n\n    const createButton = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZMessage(x,y, BANG);\n    }, [subSequence]);\n\n    const createToggle = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZObject(x,y, \"toggle\");\n    }, [subSequence]);\n\n    const createPad = useCallback((x,y) => {\n        let pad = subSequence.createPad();\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        pad.x = x;\n        pad.y = y;\n    }, [subSequence]);\n\n    const onDrop = useModuleDrop({subSequence, createToggle, createPad, createZObject, createZMessage, createButton, createZNumber, getXY, setSelection});\n\n    useEffect(() => {\n        if (editorRef.current) {\n            editorRef.current.addEventListener(\"drop\", onDrop);\n        } else {\n            innerRef.current.addEventListener(\"drop\", onDrop);\n        }\n\n        return () => {\n            if (editorRef.current) {\n                editorRef.current.removeEventListener(\"drop\", onDrop);\n            } else if (innerRef.current) {\n                innerRef.current.removeEventListener(\"drop\", onDrop);\n            };\n        }\n    }, []);\n\n    if (!subSequence || !subSequence.tracks || !doneLoading) {\n        return [];\n    }\n\n\n    if (!zobjects) {\n        zobjects = subSequence.zObjects;\n    }\n\n    let inner = (\n        <div>\n         <PulledEffects\n            scale={scale}\n            sizeRef={sizeRef}\n            setSize={setSize}\n            ordering={ordering}\n            setOrdering={setOrdering}\n            playhead={true}\n            elements={elements}\n            containerRef={innerRef}\n            noWrapper={true}\n            sequencerEngine={subSequence.sequencerEngine}\n            subSequence={subSequence}/>\n          <ZObjectTooltip subSequence={subSequence}/>\n          <ZObjectContextMenus subSequence={subSequence}/>\n          {!isExplore && zobjects.map(\n              obj => <ZObjectComponent\n                       key={obj.id}\n                       scale={scale}\n                       sequencerEngine={subSequence.sequencerEngine}\n                       ordering={ordering}\n                       setOrdering={setOrdering}\n                       setSize={setSize}\n                       sizeRef={sizeRef}\n                       elements={elements}\n                       containerRef={innerRef}\n                       zobject={obj}/>)}\n\n{!isExplore && subSequence.zMessages.map(\n              obj => <ZMessageComponent\n                       key={obj.id}\n                       scale={scale}\n                       sequencerEngine={subSequence.sequencerEngine}\n                       ordering={ordering}\n                       setOrdering={setOrdering}\n                       setSize={setSize}\n                       sizeRef={sizeRef}\n                       elements={elements}\n                       containerRef={innerRef}\n                       zmessage={obj}/>)}\n\n        {!isExplore && subSequence.tracks.map(\n              track => \n                  <TrackMidiEffects\n                    scale={scale}\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    containerRef={innerRef}\n                    track={track}/>)}\n          {!isExplore && subSequence.zObjects.filter(x => x.name === 'pad')\n           .filter(x => x.effect.pad)\n           .map(x => x.effect.pad)\n           .filter(pad => pad.effectRack)\n           .map(\n              pad => \n                  <PadEffects\n                    scale={scale}\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    containerRef={innerRef}\n                    pad={pad}/>)}\n          {!isExplore && subSequence.sequencers.map(\n              sequencer =>\n                  <PulledSequencer\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    scrollContainer={innerRef}\n                    scale={scale}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    sequencer={sequencer}/>)}\n        </div>);\n    \n    let className = collapsed ? \"grids collapsed\" : \"grids not-collapsed\";\n    if (presentationMode) {\n        className += \" presentation-mode\";\n    }\n    return (\n        <div\n          onClick={edgesRef && edgesRef.current ? () => 0 : onDoubleClick}\n          className={className}>\n          <GridTab subSequence={subSequence}/>\n          <StyleSetter\n            scale={scale}\n            setScale={setScale}\n            edgesRef={edgesRef}\n            subSequence={subSequence}\n            editorRef={editorRef}\n            setSize={setSize}\n            sizeRef={sizeRef}\n            isExplore={isExplore}\n            collapsed={collapsed}\n            containerRef={innerRef}\n            subSequence={subSequence}/>\n          <div\n            ref={innerRef} \n            className=\"grids-inner\">\n            {children}\n            {collapsed ? <ModuleSys5 subSequence={subSequence} /> : inner}\n          </div>\n        </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    return {\n        presentationMode: state.spatial.presentationMode,\n        doneLoading: state.sequencer.completelyDoneLoading,\n        pulledEffects: state.effects.pulledEffects,\n        pulledSequencers: state.pads.sequencers,\n        numTracks: props.subSequence.tracks && props.subSequence.tracks.length,\n        collapsed: state.pads.modulesCollapsed[props.subSequence.id],\n        zobjects: state.zobject.zobjects[props.subSequence.id],\n        zmessages: state.zobject.zmessages[props.subSequence.id],\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setPulledEffects: x => dispatch(setPulledEffects(x)),\n        setSelectedPulledElements: x => dispatch(\n            setSelectedPulledElements(x)),\n        setSelectedZObject: x => dispatch(\n            setSelectedZObject(x)),\n        setSize: x => dispatch(\n            setModuleSize(props.subSequence.id, x)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleSpatialView);\n","import {useCallback} from 'react';\nimport {setTrackDragging} from 'actions/index.js';\nimport {\n    setWindowPosition,\n    setPulledEffects,\n    setZObjectTypeDragging} from 'actions/index.js';\n\nexport const useModuleDrop = ({subSequence, setSelection, getXY, createToggle, createSequencer, createPad, createZObject, createZMessage, createZNumber, createButton}) => {\n    const onDrop = useCallback((e) => {\n        let {x,y} = getXY(e);\n        let {sequencerEngine} = subSequence;\n        let {state} = sequencerEngine;\n        let {trackDragging} = state.tracks;\n        let {zobjectTypeDragging} = state.zobject;\n        if (zobjectTypeDragging) {\n            switch(zobjectTypeDragging) {\n            case \"zobject\":\n                createZObject(x,y);\n                break;\n            case \"zmessage\":\n                createZMessage(x,y);\n                break;\n            case \"zpad\":\n                createPad(x,y);\n                break;\n            case \"zbutton\":\n                createButton(x,y);\n                break;\n            case \"ztoggle\":\n                createToggle(x,y);\n                break;\n            case \"znumber\":\n                createZNumber(x,y);\n                break;\n            case \"sequencer\":\n                createSequencer(x,y);\n                break;\n            case \"zcomment\":\n                createZObject(x,y, \"comment\");\n                break;\n            default:\n                let tokens = zobjectTypeDragging.split(\" \");\n                let number = parseInt(tokens[1]);\n                let pulledEffects = sequencerEngine.state.effects.pulledEffects;\n                let type = undefined;\n                if (tokens[0] === \"MODULE_ENVELOPE\") {\n                    // drag envelope\n                    let envelope = subSequence.envelopes.find(x => x.number === number);\n                    console.log(\"envelope =\", envelope);\n                    type = {\n                        type: \"MODULE_ENVELOPE\",\n                        id: envelope.id,\n                        subType: envelope.number,\n                        instrument: envelope\n                    };\n                } else {\n                    // drag lfo\n                    let lfo = subSequence.lfos.find(\n                        ({lfo}) => lfo.number === number);\n                    type = {\n                        type: \"LFO\",\n                        id: lfo.id,\n                        effect: lfo,\n                        instrument: lfo\n                    };\n                }\n                sequencerEngine.dispatch(setWindowPosition(\n                    type.id, {x,y}));\n                sequencerEngine.dispatch(\n                    setPulledEffects([... pulledEffects, type]));\n            }\n            \n            sequencerEngine.dispatch(setZObjectTypeDragging(undefined));\n            if (setSelection) {\n                setSelection(undefined);\n            }\n        }\n\n        /*\n        if (trackDragging) {\n            // need to switch the track over\n            if (trackDragging.subSequence !== subSequence) {\n                trackDragging.subSequence.deleteTrackFromPads(trackDragging);\n                trackDragging.subSequence.groups.deleteTrack(trackDragging);\n                trackDragging.subSequence.tracks = trackDragging.subSequence.tracks.filter(\n                    t => t !== trackDragging);\n                subSequence.tracks.push(trackDragging);\n                subSequence.groups.addTrack(trackDragging);\n                trackDragging.subSequence = subSequence;\n            }\n            sequencerEngine.dispatch(setTrackDragging(undefined));\n        }\n        */\n    }, [subSequence]);\n\n    return onDrop;\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SubMenu from \"components/dropdowns/SubMenu.js\";\nimport {useMintToHic} from 'components/hooks/useMintToHic.js';\nimport {useMintToZora} from 'components/hooks/useMintToZora.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport {\n    setWindowPosition,\n    setViewableZObjects,\n    setFullScreenZObject} from 'actions/index.js';\n\nimport {connect} from 'react-redux';\n\nconst ZObjectContextMenu = ({\n    setViewableZObjects,\n    dropdownPos,\n    zobject,\n    setDropdownPos,\n    setFullScreenZObject,\n    setWindowPosition,\n}) => { \n    const {mintToHic} = useMintToHic({zobject, setDropdownPos});\n    const {mintToZora} = useMintToZora({zobject, setDropdownPos});\n\n    const duplicate = useCallback(() => {\n        zobject.duplicate();\n        setDropdownPos(undefined);\n    }, [setDropdownPos]);\n\n    const fullScreen = useCallback(() => {\n        setFullScreenZObject(zobject);\n        setDropdownPos(undefined);\n    }, [setDropdownPos]);\n\n    const openAsWindow = useCallback(() => {\n        let {viewableZObjects} = zobject.state.zobject;\n        setWindowPosition({x: 100, y: 100});\n        setViewableZObjects([... viewableZObjects, zobject]);\n    }, [zobject, setViewableZObjects]);\n\n    const deleteZObject = useCallback(() => {\n        zobject.delete();\n    }, [zobject]);\n\n    return (\n        <ContextMenu dropdownPos={dropdownPos} setDropdownPos={setDropdownPos}>\n          <MenuItem onMouseDown={fullScreen}>\n            Fullscreen \n          </MenuItem>\n          <MenuItem onMouseDown={openAsWindow}>\n            Open as Window\n          </MenuItem>\n          <MenuItem onMouseDown={duplicate}>\n            Duplicate <div className=\"key-shortcut\">D</div>\n          </MenuItem>\n          <div className=\"divider\"/>\n          <SubMenu name=\"Mint On...\">\n            <MenuItem onMouseDown={mintToZora}>\n              Zora\n            </MenuItem>\n            <MenuItem onMouseDown={mintToHic}>\n              Hicetnunc/Objkt\n            </MenuItem>\n          </SubMenu>\n          <MenuItem onMouseDown={deleteZObject}>\n            Delete\n          </MenuItem>\n        </ContextMenu>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x)),\n      setWindowPosition: x => dispatch(setWindowPosition(props.zobject.window.id, x)),\n      setViewableZObjects: x => dispatch(setViewableZObjects(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectContextMenu);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setUXLockObject,\n    setUXHideObject\n} from 'actions/index.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\"\nimport ZObjectContextMenu from \"components/zobject/ZObjectContextMenu.js\";\nimport {connect} from 'react-redux';\n\nconst ObjectOption = ({\n    setObjectDragging,\n    hidden,\n    locked,\n    setUXLockObject,\n    setUXHideObject,\n    className,\n    setShow,\n    setSelectedZObject,\n    show,\n    zobject\n}) => { \n\n    let ref = useRef();\n    const {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref, useTop: false});\n\n    useEffect(() => {\n        if (dropdownPos) {\n            setSelectedZObject(zobject);\n        }\n    }, [dropdownPos, zobject]);\n\n    if (dropdownPos) {\n        className += \" showing-context-menu\";\n    }\n    return (\n      <div\n        ref={ref}\n        onDragLeave={e => e.preventDefault()}\n        draggable={true}\n        onDragStart={(e) => {\n            e.dataTransfer.effectAllowed = \"copy\";\n            e.dataTransfer.setData('text/html', zobject.id); //cannot be empty string\n            setObjectDragging(zobject);\n        }}\n        onDragOver={e => e.preventDefault()}\n        onContextMenu={onContextMenu}\n        className={className}>\n        {dropdownPos &&\n         <ZObjectContextMenu\n           dropdownPos={dropdownPos}\n           setDropdownPos={setDropdownPos}\n           zobject={zobject}/>\n        }\n        <div onClick={() => setShow(!show)} className=\"arrow-container\">\n          <div className={show ? \"arrow-down\" : \"arrow-right\"}/>\n        </div>\n        <img className=\"object-icon\" src=\"/zobject-light.svg\"/>\n        <div\n          onClick={() => setSelectedZObject(zobject)}\n          className=\"zobject-name\">\n          <span className=\"object-name\">{zobject.name}</span>\n          <span className=\"object-arg\">{typeof zobject.args[0] === \"string\" && zobject.args[0]}</span>\n       </div>\n        <img\n          onClick={() => setUXHideObject(zobject.id, !hidden)}\n          className={hidden ? \"hidden eye\" : \"eye\"}\n          src={hidden ? \"/eyeball-hidden.svg\" : \"/eyeball.svg\"}\n        />\n        <img\n          onClick={() => setUXLockObject(zobject.id, !locked)}\n          className=\"lock-ux-btn\"\n          src={locked ? \"/zlock-locked-light.svg\" : \"/zlock-unlocked-light.svg\"}\n        />\n      </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.zobject.id;\n    return {\n        hidden: state.spatial.hiddenObjects[id],\n        locked: state.spatial.lockedObjects[id]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUXLockObject: (id, x) => dispatch(setUXLockObject(id, x)),\n      setUXHideObject: (id, x) => dispatch(setUXHideObject(id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectOption);\n","import React, {useRef, useEffect, useCallback, useState} from 'react';\nimport {getAllNodesInSub} from 'utils/findNode.js';\nimport ObjectOption from './ObjectOption.js';\nimport {connect} from 'react-redux';\n\nconst NestedZObject = ({\n    setObjectDragging,\n    setSelectedZObject, selectedZObject, zobject, searchTerm\n}) => { \n    let ref=useRef();\n    let [dropActive, setDropActive] = useState(false);\n    let [show, setShow] = useState(false);\n    let className=\"zobject-option\";\n    if (zobject === selectedZObject) {\n        className += \" selected\";\n    }\n\n    let isNested = zobject.effect && zobject.effect.zObjects;\n    if (isNested) {\n        className += \" nested\";\n    }\n\n    useEffect(() => {\n        setShow(searchTerm !== \"\");\n    }, [searchTerm, setShow]);\n\n    if (searchTerm !== \"\") {\n        searchTerm = searchTerm.toLowerCase();\n        if (zobject.effect && zobject.effect.zObjects) {\n            if (zobject._text.toLowerCase().includes(searchTerm)) {\n                searchTerm = \"\";\n            } else {\n                let objects= getAllNodesInSub(zobject.effect);\n                if (!objects.some(\n                    o => typeof o._text === \"string\" &&\n                        o._text.toLowerCase().includes(searchTerm))) {\n                    return '';\n                }\n            }\n        } else {\n            if (typeof zobject._text !== \"string\" || !zobject._text.toLowerCase().includes(searchTerm)) {\n                return '';\n            }\n        }\n    }\n\n    const onDrop = useCallback(() => {\n        ref.current.setAttribute(\"drop-active\", 0);\n        if (zobject.effect && zobject.effect.zObjects) {\n            let objectDragging = zobject.state.zobject.objectDragging;\n            // we want to move this object from its old to this new one\n            zobject.effect.moveObjectInto(objectDragging);\n        }\n    }, [zobject]);\n\n    let _className =\"zobject\";\n    if (dropActive) {\n        _className += \" drop-active\";\n    }\n    return (\n        <div\n          ref={ref}\n          onDragEnter={e => {\n              e.preventDefault();\n              if (zobject.effect && zobject.effect.zObjects) {\n                  ref.current.setAttribute(\"drop-active\", 1);\n              }\n          }}\n          onDragOver={e => () => {\n              e.preventDefault();\n          }}\n          onDrop={onDrop}\n          onDragLeave={e => {\n              console.log(\"on drag leave\");\n              ref.current.setAttribute(\"drop-active\", 0);\n          }}\n          className={_className}>\n          <ObjectOption\n            setObjectDragging={setObjectDragging}\n            className={className}\n            setShow={setShow}\n            show={show}\n            zobject={zobject}\n            setSelectedZObject={setSelectedZObject}\n          />\n          {show && zobject.effect && zobject.effect.zObjects &&\n           <div\n             onDragLeave={e => e.preventDefault()}\n             className=\"nested-inner\">\n             {zobject.effect.zObjects.map(\n                 obj => <NestedZObject\n                          setObjectDragging={setObjectDragging}\n                          key={obj.id}\n                          zobject={obj}\n                          searchTerm={searchTerm}\n                          setSelectedZObject={setSelectedZObject}\n                          selectedZObject={selectedZObject}/>)}\n           </div>}\n        </div>);\n};\n\nexport default NestedZObject;\n","export const TWITTER = 'TWITTER';\nexport const STORE = 'STORE';\nexport const BANDCAMP = 'BANDCAMP';\nexport const FREE_SOUND = 'FREE_SOUND';\nexport const WEBSITE = 'WEBSITE';\n\nexport const LINK_TYPES = [\n    {value: TWITTER, label: 'Twitter'},\n    {value: STORE, label: 'Store'},\n    {value: WEBSITE, label: 'Website'},\n    {value: BANDCAMP, label: 'Bandcamp'},\n    {value: FREE_SOUND, label: 'Freesound.org'},\n];\n    \n","import React, { useEffect, useCallback, useState} from 'react';\nimport {STORE, LINK_TYPES} from 'decentralized/artists/constants.js';\nimport {connect} from 'react-redux';\nimport {newSampleByArtist, getArtistInfo, newArtistInfo, getArtistForSample} from 'decentralized/artists/Artists.js';\nimport Dropdown from 'react-dropdown';\n\nlet counter=0;\nconst UnsourcedFlow = ({sample, samples=[sample], show=false}) => { \n    sample = samples[0];\n    let [artistName, setArtistName] = useState(undefined);\n    let [alreadyMatched, setAlreadyMatched] = useState(false);\n    let [artistInfo, setArtistInfo] = useState(undefined);\n    let [showFlow, setShowFlow] = useState(show);\n    let [linkType, setLinkType] = useState(STORE);\n    let [artistValue, setArtistValue] = useState('');\n    let [websiteValue, setWebsiteValue] = useState('');\n\n    useEffect(() => {\n        setAlreadyMatched(true);\n        getArtistForSample(sample.ipfsHash).then(\n            ret => {\n                setArtistName(ret);\n                if (ret) {\n                    getArtistInfo(ret).then(\n                        info => setArtistInfo(info));\n                } else {\n                    setArtistInfo(undefined);\n                }\n            });\n    }, [sample, setArtistName, setArtistInfo, setAlreadyMatched]);\n\n    const saveArtistInfo = useCallback(() => {\n        samples.forEach(\n            s => \n                newSampleByArtist(artistValue, s.ipfsHash));\n        if (!alreadyMatched) {\n            newArtistInfo(artistValue, linkType, websiteValue);\n        }\n        setArtistInfo({\n            artistName: artistValue,\n            link: websiteValue,\n            linkType\n        });\n        setArtistName(artistValue);\n        setShowFlow(false);\n        setAlreadyMatched(true);\n    }, [\n        artistValue,\n        setAlreadyMatched,\n        websiteValue,\n        linkType,\n        setArtistInfo,\n        setShowFlow,\n        samples,\n        alreadyMatched]);\n\n    const onChangeArtistName = useCallback((e) => {\n        setAlreadyMatched(false);\n        let v = e.target.value;\n        let id= ++counter;\n        setTimeout(() => {\n            if (id === counter) {\n                getArtistInfo(v).then(\n                    ret => {\n                        setArtistInfo(ret);\n                        if (ret) {\n                            setLinkType(ret.linkType);\n                            setWebsiteValue(ret.link);\n                            setAlreadyMatched(true);\n                        }\n                    });\n            }\n        }, 150);\n        setArtistValue(v);\n    }, [setArtistValue, setWebsiteValue, setAlreadyMatched, setLinkType]);\n\n    if (showFlow) {\n        return (\n            <div className=\"artist-flow show\">\n              <input\n                className=\"artist-flow-input\"\n                placeholder=\"Artist Name\" value={artistValue} type=\"text\" onChange={onChangeArtistName}/>\n              <Dropdown\n                options={LINK_TYPES}\n                onChange={(o) => setLinkType(o.value)}\n                value={LINK_TYPES.find(x => x.value === linkType)}\n                placeholder=\"Website Type\" />\n \n              <input\n                className=\"artist-flow-input\"\n                placeholder=\"Website\" value={websiteValue} type=\"text\" onChange={(e) => setWebsiteValue(e.target.value)}/>\n              <div\n                onClick={saveArtistInfo}\n                className=\"artist-save-button\">\n                Save\n              </div>\n            </div>\n        );\n    }\n\n    if (!artistName) {\n        return (\n            <div></div>\n        );\n    }\n\n    return (\n        <div className=\"artist-flow\">\n          {artistName ?\n           <div className=\"artist-name\">{artistName}</div> :\n           <div\n             onClick={() => setShowFlow(true)}\n             className=\"match-artist-button\">\n             Match Sample To Artist\n           </div>\n          }\n          {artistInfo ? <a target=\"_blank\" href={artistInfo.link}>{artistInfo.link}</a> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UnsourcedFlow);\n","import ipfs from 'decentralized/Ipfs.js';\nimport StepData from 'pattern/StepData.js';\n\nexport const loadSampleFromProject = async (sequencerEngine, sample, project, patternNumber) => {\n    let json = await ipfs.getJson(project.newSequence);\n\n    // first find the project's subSequence id and trackNumber\n    let {subSequence, trackNumber} = getTrackNumber(json, sample.ipfsHash);\n\n    console.log(\"loadSampleFromProject got sub=%s track=%s\", subSequence, trackNumber);\n    if (subSequence === -1 || trackNumber === -1) {\n        // we couldnt find it\n        return;\n    }\n\n    return loadPattern(sequencerEngine, json, subSequence, trackNumber, patternNumber);\n};\n\nconst getTrackNumber = (data, sampleId) => {\n\n    for (let subSequence of data.subSequences) {\n        for (let trackNumber in subSequence.tracksData) {\n            let track = subSequence.tracksData[trackNumber]\n            if (track.type === \"SAMPLER\") {\n                let sampleIds = Object.keys(track.samplers);\n                if (sampleIds.indexOf(sampleId) > -1) {\n                    // then its this one\n                    return {\n                        subSequence: subSequence.id,\n                        trackNumber\n                    };\n                }\n            } else if (track.type === \"INSTRUMENT_RACK\") {\n                let tracks = subSequence.tracksData[trackNumber].tracks;\n                for (let _track of tracks) {\n                    let samplers = _track.track.instrument.samplers;\n                    if (Object.keys(samplers).find(x => samplers[x].sampleId === sampleId)) {\n                        return {\n                            subSequence: subSequence.id,\n                            trackNumber\n                        };\n                    }\n                }\n            }\n        }\n    }\n    return {\n        subSequenceId: -1,\n        trackNumber: -1,\n    };\n};\n\n\nconst loadPattern = (sequencerEngine, data, subSequence, trackNumber, patternNumber) => {\n    subSequence = data.subSequences.find(x => x.id === subSequence);\n    let _track = subSequence.tracks[trackNumber];\n    if (patternNumber === undefined) {\n        patternNumber = 0;\n        for (let p in _track) {\n            // see if any of the steps are on\n            let _pattern = _track[p];\n            let size = _pattern.size;\n            for (let i=0; i < size; i++) {\n                var jsonStepBucket = _pattern[i];\n                for (let pos in jsonStepBucket) {\n                    if (jsonStepBucket[pos].on) {\n                        patternNumber = parseInt(p);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    let _pattern = _track[patternNumber];\n    let track = sequencerEngine.getSelectedTrack();\n    let pattern = track.patterns[track.currentPattern];\n\n    let size = _pattern.size;\n    pattern.changeLength(size, false);\n    pattern.clear();\n\n    for (var j=0; j < size; j++) {\n        if (!(j in _pattern)) {\n            continue;\n        }\n        \n        var stepBucket = pattern.stepBuckets[j];\n        var jsonStepBucket = _pattern[j];\n        \n        // fill the steps for this buckets using the json's data\n        // Each step has several parameters, that need to be loaded\n        // into a StepData object\n        \n        for (var key in jsonStepBucket) {\n            var stepData = stepBucket.steps[key] || new StepData();\n            stepData.track = track;\n            stepData.stepNumber = j;\n            stepData.simpleLoad(\n                jsonStepBucket[key], track.effects, track, track.midiEffects.effects);\n            stepBucket.steps[key] = stepData;\n        }\n    }\n    \n    pattern.loadStepBuckets(undefined, true);\n    track.updateSteps();\n\n    let _trackData = subSequence.tracksData[trackNumber];\n    track.fromJson(_trackData);\n\n    if (_trackData.type === \"SAMPLER\" &&\n        track.getTrackType() === \"SAMPLER\") {\n        let sampler = track.getSamplers()[0];\n        for (let id in _trackData.samplers) {\n            let _sampler = _trackData.samplers[id];\n            let slices = _sampler.slices;\n            sampler.slice(0, slices[0].startTime, slices[0].endTime);\n            slices = slices.slice(1);\n            for (let slice of slices) {\n                sampler.newSlice(slice.startTime, slice.endTime);\n            }\n        }\n    } else if (_trackData.type === \"INSTRUMENT_RACK\" &&\n               track.getTrackType() === \"SAMPLER\") {\n        // then we need to convert this track to a thing\n    }\n\n    // MIDI EFFECTS!! and EFFECTS\n    let _midiEffects = subSequence.tracksMidiEffects[trackNumber];\n    track.midiEffects.effects = [];\n    track.midiEffects.fromJson(_midiEffects);\n\n    return _track.length;\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {loadSampleFromProject} from 'utils/loadSampleFromProject.js';\nimport {getProjectsUsed} from 'utils/getProjectsUsed.js';\nimport {connect} from 'react-redux';\n\nconst SampleUsed = ({sample, sequencerEngine, initialShow=false}) => { \n    let [projects, setProjects] = useState([]);\n    let [show, setShow] = useState(initialShow);\n    let [selectedProject, setSelectedProject] = useState(undefined);\n    let [numPatterns, setNumPatterns] = useState(0);\n    let [selectedPattern, setSelectedPattern] = useState(0);\n\n    useEffect(() => {\n        getProjectsUsed(sample.ipfsHash).then(setProjects);\n    }, [setProjects, sample]);\n\n    const onClickProject = useCallback((e, project, patternNumber) => {\n        e.stopPropagation();\n        setSelectedProject(project);\n        loadSampleFromProject(sequencerEngine, sample, project, patternNumber)\n            .then(setNumPatterns);\n        setSelectedPattern(patternNumber || 0);\n    }, [setSelectedProject, sample, setNumPatterns, setSelectedPattern]);\n\n    return (\n        <div className=\"projects-used-in\">\n          {!initialShow ?\n           <div className=\"info\">\n             Used in {projects.length} <span onClick={() => setShow(!show)} className={show ? \"projects-btn showing\" : \"projects-btn\"}>projects</span>\n           </div> : ''}\n          {show ?\n           <div className=\"project-list\">\n             {projects.map(\n                 project =>\n                     <div\n                       onClick={(e) => onClickProject(e, project)} \n                       className={project === selectedProject ? \"selected project-option\" : \"project-option\"}>\n                       {project.title}\n                       {selectedProject === project ?\n                        <div className=\"patterns-chooser\">\n                          <div className=\"pattern-label\">\n                            Pattern: \n                          </div>\n                          {Array(numPatterns).fill(0).map(\n                              (x, i) =>\n                                  <div\n                                    onClick={(e) => onClickProject(e, project, i)}\n                                    className={selectedPattern === i ? \"pattern-btn selected\" : \"pattern-btn\"}>\n                                    {i+1}\n                                  </div>)}\n                        </div>: ''}\n                     </div>)}\n          </div>\n         : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleUsed);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useToggledWaveform} from 'components/v2/toggleWaveform.js';\nimport {TRACK_RECORD_ARM_BUTTON} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport TrackThumbnail from '../TrackThumbnail.js';\nimport {connect} from 'react-redux';\nimport {\n    setCirklonParameterSelected,\n    setShowTrackEffects,\n    setShowPianoRoll,\n    setArrangementBottomMode,\n} from 'actions/index.js';\n\nconst TrackOverview = ({\n    track,\n    isEnabled,\n    isFrozen,\n    isSelectedTrack,\n    setArrangementBottomMode,\n    setShowPianoRoll,\n    setShowEffects,\n    showName,\n    setShowParams,\n    mode,\n}) => { \n    let className = \"track-overview\";\n    if (isSelectedTrack) {\n        className += \" selected\";\n    }\n\n    const {toggleWaveform} = useToggledWaveform({\n        track,\n        isSelectedTrack,\n        sequencerEngine: track.sequencerEngine,\n        setArrangementBottomMode,\n        setShowPianoRoll,\n        mode\n    });\n\n    const onMouseOver = useCallback(() => {\n        if (track.sequencerEngine.state.keyboard.isMouseDown) {\n            track.toggleEnabled();\n        }\n    }, [track]);\n\n    return (\n        <div className={className}>\n          <div className=\"track-number\">\n            {track.trackNumber + 1}\n          </div>\n          <TrackThumbnail\n            showPresetName={showName}\n            onClickThumbnail={() => {\n                setShowEffects(false);\n                setShowParams(false);\n                track.sequencerEngine.selectTrack(track.trackNumber);\n                toggleWaveform();\n            }}\n            track={track}/>\n        {!isFrozen ? \n         <Documented element={TRACK_RECORD_ARM_BUTTON}>\n           <div\n             onMouseOver={onMouseOver}\n             onMouseDown={() => track.toggleEnabled()}\n             className={isEnabled ? \"dot enabled\" : \"dot\"}/>\n         </Documented>\n         : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let enabledMap = state.tracks.trackIsEnabled[props.track.subSequence.id] || {};\n    let isEnabled = enabledMap[props.track.id]; \n    let isSelectedTrack = state.mix.selectedTrack === props.track.trackNumber; \n    return {\n        isEnabled:  isEnabled === undefined ? false : isEnabled,\n        isSelectedTrack,\n        isFrozen: props.track.isFrozen\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setShowEffects: (show) => dispatch(setShowTrackEffects(props.track.trackNumber, show)),\n      setShowPianoRoll: (show) => dispatch(setShowPianoRoll(show)),\n      setShowParams: param => dispatch(setCirklonParameterSelected(props.track.id, param)),\n      setArrangementBottomMode: mode => dispatch(setArrangementBottomMode(mode)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackOverview);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackOverview from './TrackOverview.js';\nimport {\n    connect} from 'react-redux';\nimport {\n    mouseDown\n} from 'actions/index.js';\n\n\nconst TracksOverview = ({sequencerEngine, mouseDown, mode, showName}) => { \n    let {tracks} = sequencerEngine;\n    if (!tracks || tracks.length === 0) {\n        return (<div></div>);\n    }\n    return (\n        <div\n          onClick={(e) => e.stopPropagation()}\n          onMouseDown={() => mouseDown(true)}\n          onMouseUp={() => mouseDown(false)}\n          onMouseLeave={() => mouseDown(false)}\n          className=\"tracks-overview\">\n          {tracks.map(\n              track =>\n                  <TrackOverview\n                    showName={showName}\n                    key={track.id}\n                    mode={mode}\n                    track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      tracks: props.sequencerEngine.tracks,\n      numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      mouseDown: (m) =>\n          dispatch(mouseDown(m)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TracksOverview);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {setSelectedPreset, setPresetDragging} from 'actions/index.js';\nimport ethereum from 'decentralized/ethereum.js';\n\nconst MAX_LENGTH = 40;\n\nclass ItemComponent extends Component {\n    constructor(props) {\n        super(props);\n\n    }\n\n    onClick() {\n        let now = new Date().getTime();\n        if (this.lastDate !== undefined && now - this.lastDate < 500) {\n            // i.e. double click chooses the item\n            this.props.onChooseItem(this.props.item);\n        }\n        this.lastDate = now;\n        this.props.setSelectedPreset(this.props.item);\n    }\n\n    onDragOver(e) {\n        e.preventDefault();\n    }\n\n    onDragStart(e) {\n        this.props.setPresetDragging(this.props.item);\n    }\n\n    get name() {\n        if (this.props.item.name.length > MAX_LENGTH) {\n            return this.props.item.name.slice(0, MAX_LENGTH) + '...';\n        }\n        return this.props.item.name;\n    }\n\n    render() {\n        let style = {\n            paddingLeft: this.props.depth*17,\n        };\n\n        let className = this.props.selectedPreset === this.props.item ?\n            \"folder-item selected\" : \"folder-item\";\n        return (\n            <div\n              draggable={true}\n              onDragStart={(e) => this.onDragStart()}\n              onDragOver={(e) => this.onDragOver(e)}\n              onClick={() => this.onClick()}\n              className={className} style={style}>\n              <div\n                onClick={() => this.props.onTestItem(this.props.item)}\n                className=\"item-icon\"></div>\n              {this.name}\n            </div>    \n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedPreset: m => dispatch(setSelectedPreset(m)),\n        setPresetDragging: m => dispatch(setPresetDragging(m)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        selectedPreset: state.presets.selectedPreset,\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ItemComponent);\n\n","import React, { Component } from 'react';\nimport ethereum from 'decentralized/ethereum.js';\nimport { connect } from \"react-redux\";\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport {\n    setSelectedFolder,\n    setFolderDragging,\n    setPresetDragging,\n    setHasChangesToFolders} from 'actions/index.js';\nimport ItemComponent from './ItemComponent.js';\nimport {  InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\n\nclass FolderComponent extends Component {\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            collapsed: true,\n            nameValue: '',\n            hovering: false,\n            loading: false,\n        };\n    }\n\n    async onClickCollapsed(e, collapsed) {\n        e.stopPropagation();\n\n        if (!collapsed) {\n            // check if its dynamic and unloaded first\n            if (this.props.folder.isDynamic() && !this.props.folder.isLoaded) {\n                this.setState({loading: true});\n                await this.props.folder.load();\n                this.setState({loading: false});\n            }\n        }\n\n        this.setState({\n            collapsed: collapsed\n        });\n\n        this.onClickName();\n    }\n\n    getArrow() {\n        if (this.state.collapsed) {\n            return (\n                <div\n                  onClick={(e) => this.onClickCollapsed(e, false)}\n                  className=\"collapse-button\">\n                  <div className=\"arrow-right\">\n                  </div>\n                </div>);\n        } else {\n            return (\n                <div\n                  onClick={(e) => this.onClickCollapsed(e, true)}\n                  className=\"collapse-button\">\n                  <div className=\"arrow-down\"\n                       onClick={(e) => this.onClickCollapsed(e, true)}>\n                  </div>\n                </div>);\n        }\n    }\n\n    onDrop(e) {\n        e.stopPropagation();\n        this.setState({hovering: false});\n        let folder = this.props.folderDragging;\n        let preset = this.props.presetDragging;\n        if (folder !== undefined) {\n            this.props.setFolderDragging(undefined);\n            if (this.props.folder === folder) {\n                return;\n            }\n            folder.delete();\n            this.props.folder.addFolder(folder);\n        } else if (preset !== undefined) {\n            preset.parent.deleteItem(preset);\n            this.props.setPresetDragging(undefined);\n            this.props.folder.addItem(preset);\n        }\n        this.props.onFoldersUpdated();\n        this.props.setHasChangesToFolders(true);\n    }\n\n    onClickName() {\n        let now = new Date().getTime();\n        if (this.lastDate !== undefined && now - this.lastDate < 200) {\n            // i.e. double click chooses the item\n            this.props.onChooseFolder(this.props.folder);\n        }\n        this.lastDate = now;\n\n        if (this.props.selectedFolder === this.props.folder) {\n            this.props.setSelectedFolder(undefined);\n        } else {\n            this.props.setSelectedFolder(this.props.folder);\n        }\n    }\n\n    onInputType(name) {\n        this.setState({\n            nameValue: name\n        });\n    }\n\n    onKeyDown(e) {\n        if (e.key === 'Enter') {\n            this.props.folder.name = this.state.nameValue;\n            this.setState(this.state);\n        }\n    }\n\n    getNameComponent() {\n        let folderNameClass =\n            this.props.selectedFolder === this.props.folder && this.props.folder.name ?\n            \"folder-name selected\" : \"folder-name\";\n\n        if (this.state.hovering) {\n            folderNameClass += ' hover';\n        }\n\n        return (\n            <div\n              draggable={true}\n              onDragOver={(e) => this.onDragOver(e)}\n              onDragStart={(e) => this.onDragStart(e)}\n              onDragLeave={(e) => this.onDragLeave(e)}\n              className={folderNameClass}>\n                {this.getArrow()}\n                <ConditionedComponent condition={this.props.folder.name}>\n                  <div\n                    className=\"name-label\"\n                    onClick={() => this.onClickName()}\n                    >\n                    {this.props.folder.name}\n                  </div>\n                </ConditionedComponent>\n                <ConditionedComponent condition={this.props.folder.name === undefined}>\n                 <input\n                  value={this.state.nameValue}\n                  onChange={(event) => this.onInputType(event.target.value)}\n                   onKeyDown={(event) => this.onKeyDown(event)}\n                  ref={(input) => { this.input = input; }} \n                  placeholder=\"Type name of folder\"\n                  className=\"tag-input\"/>\n                </ConditionedComponent>\n              </div>\n        );\n    }\n\n    onDragOver(e) {\n        e.preventDefault();\n        this.setState({\n            hovering: true});\n    }\n\n    onDragLeave(e) {\n        this.setState({\n            hovering: false\n        });\n    }\n\n    onDragStart(e) {\n        this.props.setFolderDragging(this.props.folder);\n    }\n\n    render() {\n        let subFolders = [... this.props.folder.subFolders];\n        subFolders.sort((a, b) => {\n            if (a.name === undefined || b.name === undefined) {\n                return 0;\n            }\n            return a.name.localeCompare(b.name);\n        });\n        let items = [...this.props.folder.items]\n            .filter(i => i.name !== undefined);\n        items.sort((a, b) => a.name.localeCompare(b.name));\n        let depth = this.props.folder.depth <= 1 ? 0 : 1;\n        let style = {\n            paddingLeft: depth*17,\n        };\n        if (depth === 0) {\n            depth = 1;\n        }\n\n        return (\n            <div\n              onDrop={(e) => this.onDrop(e)}\n              className=\"folder\" style={style}>\n              {this.getNameComponent()}\n             <ConditionedComponent condition={!this.state.collapsed}>\n                {subFolders.map(\n                    subFolder =>\n                        <FolderComponent\n                              key={subFolder.name}\n                              {... this.props}\n                              folder={subFolder}\n                          />)}\n              </ConditionedComponent>\n              <PulseLoader\n                loading={this.state.loading} \n                sizeUnit={\"px\"}\n                size={10}\n                color={'#123abc'}/>\n              <ConditionedComponent condition={this.props.showItems && !this.state.collapsed}>\n                {items.map(\n                    item =>\n                        <ItemComponent\n                           key={item.name}\n                           onChooseItem={this.props.onChooseItem}\n                           onTestItem={this.props.onTestItem}\n                           depth={depth}\n                           item={item}\n                        />)}\n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedFolder: m => dispatch(setSelectedFolder(m)),\n        setFolderDragging: m => dispatch(setFolderDragging(m)),\n        setPresetDragging: m => dispatch(setPresetDragging(m)),\n        setHasChangesToFolders: m => dispatch(setHasChangesToFolders(m)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        selectedFolder: state.presets.selectedFolder,\n        folderDragging: state.presets.folderDragging,\n        presetDragging: state.presets.presetDragging,\n        name: state.presets.selectedFolder !== undefined ? state.presets.selectedFolder.name : undefined,\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FolderComponent);\n\n"],"sourceRoot":""}